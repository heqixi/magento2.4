require.config({"config": {
        "jsbuild":{"Magezon_Builder/js/parallax.js":"define([\n \t'jquery',\n \t'jarallax',\n \t'jarallaxVideo',\n], function ($) {\n\n\tvar $wnd = $(window);\n\tvar $doc = $(document);\n\t\n\tvar throttle = function ( delay, noTrailing, callback, debounceMode ) {\n\t\t/*\n\t\t * After wrapper has stopped being called, this timeout ensures that\n\t\t * `callback` is executed at the proper times in `throttle` and `end`\n\t\t * debounce modes.\n\t\t */\n\t\tvar timeoutID;\n\t\tvar cancelled = false;\n\n\t\t// Keep track of the last time `callback` was executed.\n\t\tvar lastExec = 0;\n\n\t\t// Function to clear existing timeout\n\t\tfunction clearExistingTimeout () {\n\t\t\tif ( timeoutID ) {\n\t\t\t\tclearTimeout(timeoutID);\n\t\t\t}\n\t\t}\n\n\t\t// Function to cancel next exec\n\t\tfunction cancel () {\n\t\t\tclearExistingTimeout();\n\t\t\tcancelled = true;\n\t\t}\n\n\n\t\t// `noTrailing` defaults to falsy.\n\t\tif ( typeof noTrailing !== 'boolean' ) {\n\t\t\tdebounceMode = callback;\n\t\t\tcallback = noTrailing;\n\t\t\tnoTrailing = undefined;\n\t\t}\n\n\t\t/*\n\t\t * The `wrapper` function encapsulates all of the throttling / debouncing\n\t\t * functionality and when executed will limit the rate at which `callback`\n\t\t * is executed.\n\t\t */\n\t\tfunction wrapper () {\n\n\t\t\tvar self = this;\n\t\t\tvar elapsed = Date.now() - lastExec;\n\t\t\tvar args = arguments;\n\n\t\t\tif (cancelled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Execute `callback` and update the `lastExec` timestamp.\n\t\t\tfunction exec () {\n\t\t\t\tlastExec = Date.now();\n\t\t\t\tcallback.apply(self, args);\n\t\t\t}\n\n\t\t\t/*\n\t\t\t * If `debounceMode` is true (at begin) this is used to clear the flag\n\t\t\t * to allow future `callback` executions.\n\t\t\t */\n\t\t\tfunction clear () {\n\t\t\t\ttimeoutID = undefined;\n\t\t\t}\n\n\t\t\tif ( debounceMode && !timeoutID ) {\n\t\t\t\t/*\n\t\t\t\t * Since `wrapper` is being called for the first time and\n\t\t\t\t * `debounceMode` is true (at begin), execute `callback`.\n\t\t\t\t */\n\t\t\t\texec();\n\t\t\t}\n\n\t\t\tclearExistingTimeout();\n\n\t\t\tif ( debounceMode === undefined && elapsed > delay ) {\n\t\t\t\t/*\n\t\t\t\t * In throttle mode, if `delay` time has been exceeded, execute\n\t\t\t\t * `callback`.\n\t\t\t\t */\n\t\t\t\texec();\n\n\t\t\t} else if ( noTrailing !== true ) {\n\t\t\t\t/*\n\t\t\t\t * In trailing throttle mode, since `delay` time has not been\n\t\t\t\t * exceeded, schedule `callback` to execute `delay` ms after most\n\t\t\t\t * recent execution.\n\t\t\t\t *\n\t\t\t\t * If `debounceMode` is true (at begin), schedule `clear` to execute\n\t\t\t\t * after `delay` ms.\n\t\t\t\t *\n\t\t\t\t * If `debounceMode` is false (at end), schedule `callback` to\n\t\t\t\t * execute after `delay` ms.\n\t\t\t\t */\n\t\t\t\ttimeoutID = setTimeout(debounceMode ? clear : exec, debounceMode === undefined ? delay - elapsed : delay);\n\t\t\t}\n\n\t\t}\n\n\t\twrapper.cancel = cancel;\n\n\t\t// Return the wrapper function.\n\t\treturn wrapper;\n\n\t}\n\n\tvar isMobile = /Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/g.test(navigator.userAgent || navigator.vendor || window.opera);\n\n\tvar wndW = 0;\n\tvar wndH = 0;\n\t\twndW = $wnd.width();\n\t\twndH = $wnd.height();\n\t$wnd.on( 'resize load orientationchange', function() {\n\t\twndW = $wnd.width();\n\t    wndH = $wnd.height();\n\t});\n\n\t/**\n\t * In Viewport checker\n\t * return visible percent from 0 to 1\n\t *\n\t * @param {Object} $item - jQuery object.\n\t * @param {Bool} returnRect - return array with result and rect.\n\t *\n\t * @return {Mixed} - in viewport flag.\n\t */\n\tfunction isInViewport( $item, returnRect ) {\n\t    var rect = $item[ 0 ].getBoundingClientRect();\n\t    var result = 1;\n\n\t    if ( rect.right <= 0 || rect.left >= wndW ) {\n\t        result = 0;\n\t    } else if ( rect.bottom < 0 && rect.top <= wndH ) {\n\t        result = 0;\n\t    } else {\n\t        var beforeTopEnd = Math.max( 0, rect.height + rect.top );\n\t        var beforeBottomEnd = Math.max( 0, rect.height - ( rect.top + rect.height - wndH ) );\n\t        var afterTop = Math.max( 0, -rect.top );\n\t        var beforeBottom = Math.max( 0, rect.top + rect.height - wndH );\n\n\t        if ( rect.height < wndH ) {\n\t            result = 1 - ( ( afterTop || beforeBottom ) / rect.height );\n\t        } else if ( beforeTopEnd <= wndH ) {\n\t            result = beforeTopEnd / wndH;\n\t        } else if ( beforeBottomEnd <= wndH ) {\n\t            result = beforeBottomEnd / wndH;\n\t        }\n\t        result = result < 0 ? 0 : result;\n\t    }\n\t    if ( returnRect ) {\n\t        return [ result, rect ];\n\t    }\n\t    return result;\n\t}\n\n\n\t/**\n\t * Mouse Parallax\n\t */\n\tvar $parallaxMouseList = false;\n\tvar parallaxMouseTimeout;\n\tvar parallaxMouseFirstRun = 1;\n\n\t// run parallax animation\n\tfunction parallaxMouseRun( x, y, deviceOrientation ) {\n\t    var data;\n\t    var itemX;\n\t    var itemY;\n\t    $parallaxMouseList.each( function() {\n\t        var $this = $( this );\n\t        data = $this.data( 'parallax-mouse-data' );\n\n\t        // don't animate if block isn't in viewport\n\t        if ( typeof data !== 'object' || ( ! data.is_in_viewport && ! ( deviceOrientation && parallaxMouseFirstRun ) ) ) {\n\t            return;\n\t        }\n\n\t        // device acceleration calculate\n\t        if ( deviceOrientation ) {\n\t            itemX = -data.size * x;\n\t            itemY = -data.size * y;\n\n\t        // mouse calculate\n\t        } else {\n\t            itemX = ( data.rect.width - ( x - data.rect.left ) ) / data.rect.width;\n\t            itemY = ( data.rect.height - ( y - data.rect.top ) ) / data.rect.height;\n\t            if ( itemX > 1 || itemX < 0 || itemY > 1 || itemY < 0 ) {\n\t                itemX = 0.5;\n\t                itemY = 0.5;\n\t            }\n\t            itemX = data.size * ( itemX - 0.5 ) * 2;\n\t            itemY = data.size * ( itemY - 0.5 ) * 2;\n\t        }\n\n\t        // if first run orientation on device, set default values without animation\n\t        if ( deviceOrientation && parallaxMouseFirstRun ) {\n\t            $this.css( {\n\t                transform: `translateX(${ itemX }px) translateY(${ itemY }px) translateZ(0)`,\n\t            } );\n\t        } else {\n\t            $this.css( {\n\t                transition: `transform ${ deviceOrientation ? 2 : data.speed }s  cubic-bezier(0.22, 0.63, 0.6, 0.88)`,\n\t                transform: `translateX(${ itemX }px) translateY(${ itemY }px) translateZ(0)`,\n\t            } );\n\t        }\n\t    } );\n\t    parallaxMouseFirstRun = 0;\n\t}\n\tvar throttledParallaxMouseRun = throttle( 200, ( x, y, deviceOrientation ) => {\n\t    parallaxMouseRun( x, y, deviceOrientation );\n\t});\n\n\twindow.mgzParallaxMouse = function ( force ) {\n\t    function run() {\n\t        var $newParallax = $( '.mgz-parallax.mgz-parallax-mouse-parallax' ).children( '.mgz-parallax-inner' );\n\t        if ( $newParallax.length ) {\n\t            // add new parallax blocks\n\t            if ( $parallaxMouseList ) {\n\t                $parallaxMouseList = $newParallax;\n\n\t                // first init parallax\n\t            } else {\n\t                $parallaxMouseList = $newParallax;\n\n\t                if ( isMobile && window.DeviceOrientationEvent ) {\n\t                    $wnd.on( 'deviceorientation', ( event ) => {\n\t                        throttledParallaxMouseRun( event.originalEvent.gamma / 90, event.originalEvent.beta / 180, true );\n\t                    } );\n\n\t                // no smooth on firefox\n\t                } else {\n\t                    $wnd.on( 'mousemove', ( event ) => {\n\t                        throttledParallaxMouseRun( event.clientX, event.clientY );\n\t                    } );\n\t                }\n\t            }\n\t        }\n\n\t        // update data for parallax blocks\n\t        if ( $parallaxMouseList ) {\n\t            $parallaxMouseList.each( function() {\n\t\t\t\t\tvar $this   = $( this );\n\t\t\t\t\tvar $elem   = $( this ).closest('.mgz-element');\n\t\t\t\t\tvar $parent = $this.parent();\n\t\t\t\t\tvar size    = parseFloat( $parent.attr( 'data-parallax-mouse-parallax-size' ) ) || 30;\n\t\t\t\t\tvar speed   = parseFloat( $parent.attr( 'data-parallax-mouse-parallax-speed' ) ) || 10000;\n\t                $this.data( 'parallax-mouse-data', {\n\t                    is_in_viewport: isInViewport( $parent ) ? $elem.is( ':visible' ) : 0,\n\t                    rect: $parent[ 0 ].getBoundingClientRect(),\n\t                    size,\n\t                    speed: speed / 1000,\n\t                } );\n\t                $this.css( {\n\t                    left: -size,\n\t                    right: -size,\n\t                    top: -size,\n\t                    bottom: -size,\n\t                } );\n\t            } );\n\t        }\n\t    }\n\n\t    // run force without timeout\n\t    clearTimeout( parallaxMouseTimeout );\n\t    if ( force ) {\n\t        run();\n\t    } else {\n\t        parallaxMouseTimeout = setTimeout( parallaxMouseTimeout, 100 );\n\t    }\n\t}\n\t$wnd.on( 'resize scroll orientationchange load', window.mgzParallaxMouse );\n\n\tsetInterval( window.mgzParallaxMouse, 3000 );\n\n\t$(document).find('.mgz-parallax').each(function(index, el) {\n\t\tvar $this           = $( this );\n\t\tvar backgroundType  = $this.attr( 'data-background-type' );\n\t\tvar imageBgSize     = $this.attr( 'data-parallax-image-background-size' );\n\t\tvar imageBgPosition = $this.attr( 'data-parallax-image-background-position' );\n\t\tvar video           = false;\n\t\tvar videoStartTime  = 0;\n\t\tvar videoEndTime    = 0;\n\t\tvar videoVolume     = 0;\n\t\tvar videoLoop       = true;\n\t\tvar videoAlwaysPlay = true;\n\t\tvar videoMobile     = false;\n\t\tvar parallax        = $this.attr( 'data-parallax-type' );\n\t\tvar parallaxSpeed   = $this.attr( 'data-parallax-speed' );\n\t\tvar parallaxMobile  = $this.attr( 'data-parallax-mobile' ) === 'true' || $this.attr( 'data-parallax-mobile' ) === '1';\n\n        // video type\n        if ( backgroundType === 'yt_vm_video' || backgroundType === 'video' ) {\n\t\t\tvideo           = $this.attr( 'data-parallax-video' );\n\t\t\tvideoStartTime  = parseFloat( $this.attr( 'data-parallax-video-start-time' ) ) || 0;\n\t\t\tvideoEndTime    = parseFloat( $this.attr( 'data-parallax-video-end-time' ) ) || 0;\n\t\t\tvideoVolume     = parseFloat( $this.attr( 'data-parallax-video-volume' ) ) || 0;\n\t\t\tvideoLoop       = $this.attr( 'data-parallax-video-loop' ) !== 'false';\n\t\t\tvideoAlwaysPlay = $this.attr( 'data-parallax-video-always-play' ) === 'true';\n\t\t\tvideoMobile     = $this.attr( 'data-parallax-video-mobile' ) === '1' || $this.attr( 'data-parallax-video-mobile' ) === 'true';\n\n            if ( video && ! parallax && ! parallaxSpeed ) {\n\t\t\t\tparallax       = 'scroll';\n\t\t\t\tparallaxSpeed  = 1;\n\t\t\t\tparallaxMobile = videoMobile;\n            }\n        }\n\n        // prevent if no parallax and no video\n        if ( ! parallax && ! video ) return;\n\n        var jarallaxParams = {\n        \tautomaticResize: true,\n        \ttype: parallax,\n        \tspeed: parallaxSpeed,\n        \tdisableParallax() {\n        \t\treturn parallaxMobile ? false : isMobile;\n        \t},\n        \tdisableVideo() {\n        \t\treturn videoMobile ? false : isMobile;\n        \t},\n        \timgSize: imageBgSize || 'cover',\n        \timgPosition: imageBgPosition || '50% 50%',\n        };\n\n        if ( imageBgSize === 'pattern' ) {\n\t\t\tjarallaxParams.imgSize   = 'auto';\n\t\t\tjarallaxParams.imgRepeat = 'repeat';\n        }\n\n        if ( video ) {\n\t\t\tjarallaxParams.speed                = parallax ? parallaxSpeed : 1;\n\t\t\tjarallaxParams.videoSrc             = video;\n\t\t\tjarallaxParams.videoStartTime       = videoStartTime;\n\t\t\tjarallaxParams.videoEndTime         = videoEndTime;\n\t\t\tjarallaxParams.videoVolume          = videoVolume;\n\t\t\tjarallaxParams.videoLoop            = videoLoop;\n\t\t\tjarallaxParams.videoPlayOnlyVisible = ! videoAlwaysPlay;\n        }\n\t\tjarallax($this.children( '.mgz-parallax-inner' ), jarallaxParams);\n\t});\n});","Magezon_Builder/js/cm/mode/javascript/javascript.js":"// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"javascript\", function(config, parserConfig) {\n  var indentUnit = config.indentUnit;\n  var statementIndent = parserConfig.statementIndent;\n  var jsonldMode = parserConfig.jsonld;\n  var jsonMode = parserConfig.json || jsonldMode;\n  var isTS = parserConfig.typescript;\n  var wordRE = parserConfig.wordCharacters || /[\\w$\\xa1-\\uffff]/;\n\n  // Tokenizer\n\n  var keywords = function(){\n    function kw(type) {return {type: type, style: \"keyword\"};}\n    var A = kw(\"keyword a\"), B = kw(\"keyword b\"), C = kw(\"keyword c\"), D = kw(\"keyword d\");\n    var operator = kw(\"operator\"), atom = {type: \"atom\", style: \"atom\"};\n\n    return {\n      \"if\": kw(\"if\"), \"while\": A, \"with\": A, \"else\": B, \"do\": B, \"try\": B, \"finally\": B,\n      \"return\": D, \"break\": D, \"continue\": D, \"new\": kw(\"new\"), \"delete\": C, \"void\": C, \"throw\": C,\n      \"debugger\": kw(\"debugger\"), \"var\": kw(\"var\"), \"const\": kw(\"var\"), \"let\": kw(\"var\"),\n      \"function\": kw(\"function\"), \"catch\": kw(\"catch\"),\n      \"for\": kw(\"for\"), \"switch\": kw(\"switch\"), \"case\": kw(\"case\"), \"default\": kw(\"default\"),\n      \"in\": operator, \"typeof\": operator, \"instanceof\": operator,\n      \"true\": atom, \"false\": atom, \"null\": atom, \"undefined\": atom, \"NaN\": atom, \"Infinity\": atom,\n      \"this\": kw(\"this\"), \"class\": kw(\"class\"), \"super\": kw(\"atom\"),\n      \"yield\": C, \"export\": kw(\"export\"), \"import\": kw(\"import\"), \"extends\": C,\n      \"await\": C\n    };\n  }();\n\n  var isOperatorChar = /[+\\-*&%=<>!?|~^@]/;\n  var isJsonldKeyword = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)\"/;\n\n  function readRegexp(stream) {\n    var escaped = false, next, inSet = false;\n    while ((next = stream.next()) != null) {\n      if (!escaped) {\n        if (next == \"/\" && !inSet) return;\n        if (next == \"[\") inSet = true;\n        else if (inSet && next == \"]\") inSet = false;\n      }\n      escaped = !escaped && next == \"\\\\\";\n    }\n  }\n\n  // Used as scratch variables to communicate multiple values without\n  // consing up tons of objects.\n  var type, content;\n  function ret(tp, style, cont) {\n    type = tp; content = cont;\n    return style;\n  }\n  function tokenBase(stream, state) {\n    var ch = stream.next();\n    if (ch == '\"' || ch == \"'\") {\n      state.tokenize = tokenString(ch);\n      return state.tokenize(stream, state);\n    } else if (ch == \".\" && stream.match(/^\\d+(?:[eE][+\\-]?\\d+)?/)) {\n      return ret(\"number\", \"number\");\n    } else if (ch == \".\" && stream.match(\"..\")) {\n      return ret(\"spread\", \"meta\");\n    } else if (/[\\[\\]{}\\(\\),;\\:\\.]/.test(ch)) {\n      return ret(ch);\n    } else if (ch == \"=\" && stream.eat(\">\")) {\n      return ret(\"=>\", \"operator\");\n    } else if (ch == \"0\" && stream.match(/^(?:x[\\da-f]+|o[0-7]+|b[01]+)n?/i)) {\n      return ret(\"number\", \"number\");\n    } else if (/\\d/.test(ch)) {\n      stream.match(/^\\d*(?:n|(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)?/);\n      return ret(\"number\", \"number\");\n    } else if (ch == \"/\") {\n      if (stream.eat(\"*\")) {\n        state.tokenize = tokenComment;\n        return tokenComment(stream, state);\n      } else if (stream.eat(\"/\")) {\n        stream.skipToEnd();\n        return ret(\"comment\", \"comment\");\n      } else if (expressionAllowed(stream, state, 1)) {\n        readRegexp(stream);\n        stream.match(/^\\b(([gimyus])(?![gimyus]*\\2))+\\b/);\n        return ret(\"regexp\", \"string-2\");\n      } else {\n        stream.eat(\"=\");\n        return ret(\"operator\", \"operator\", stream.current());\n      }\n    } else if (ch == \"`\") {\n      state.tokenize = tokenQuasi;\n      return tokenQuasi(stream, state);\n    } else if (ch == \"#\") {\n      stream.skipToEnd();\n      return ret(\"error\", \"error\");\n    } else if (isOperatorChar.test(ch)) {\n      if (ch != \">\" || !state.lexical || state.lexical.type != \">\") {\n        if (stream.eat(\"=\")) {\n          if (ch == \"!\" || ch == \"=\") stream.eat(\"=\")\n        } else if (/[<>*+\\-]/.test(ch)) {\n          stream.eat(ch)\n          if (ch == \">\") stream.eat(ch)\n        }\n      }\n      return ret(\"operator\", \"operator\", stream.current());\n    } else if (wordRE.test(ch)) {\n      stream.eatWhile(wordRE);\n      var word = stream.current()\n      if (state.lastType != \".\") {\n        if (keywords.propertyIsEnumerable(word)) {\n          var kw = keywords[word]\n          return ret(kw.type, kw.style, word)\n        }\n        if (word == \"async\" && stream.match(/^(\\s|\\/\\*.*?\\*\\/)*[\\[\\(\\w]/, false))\n          return ret(\"async\", \"keyword\", word)\n      }\n      return ret(\"variable\", \"variable\", word)\n    }\n  }\n\n  function tokenString(quote) {\n    return function(stream, state) {\n      var escaped = false, next;\n      if (jsonldMode && stream.peek() == \"@\" && stream.match(isJsonldKeyword)){\n        state.tokenize = tokenBase;\n        return ret(\"jsonld-keyword\", \"meta\");\n      }\n      while ((next = stream.next()) != null) {\n        if (next == quote && !escaped) break;\n        escaped = !escaped && next == \"\\\\\";\n      }\n      if (!escaped) state.tokenize = tokenBase;\n      return ret(\"string\", \"string\");\n    };\n  }\n\n  function tokenComment(stream, state) {\n    var maybeEnd = false, ch;\n    while (ch = stream.next()) {\n      if (ch == \"/\" && maybeEnd) {\n        state.tokenize = tokenBase;\n        break;\n      }\n      maybeEnd = (ch == \"*\");\n    }\n    return ret(\"comment\", \"comment\");\n  }\n\n  function tokenQuasi(stream, state) {\n    var escaped = false, next;\n    while ((next = stream.next()) != null) {\n      if (!escaped && (next == \"`\" || next == \"$\" && stream.eat(\"{\"))) {\n        state.tokenize = tokenBase;\n        break;\n      }\n      escaped = !escaped && next == \"\\\\\";\n    }\n    return ret(\"quasi\", \"string-2\", stream.current());\n  }\n\n  var brackets = \"([{}])\";\n  // This is a crude lookahead trick to try and notice that we're\n  // parsing the argument patterns for a fat-arrow function before we\n  // actually hit the arrow token. It only works if the arrow is on\n  // the same line as the arguments and there's no strange noise\n  // (comments) in between. Fallback is to only notice when we hit the\n  // arrow, and not declare the arguments as locals for the arrow\n  // body.\n  function findFatArrow(stream, state) {\n    if (state.fatArrowAt) state.fatArrowAt = null;\n    var arrow = stream.string.indexOf(\"=>\", stream.start);\n    if (arrow < 0) return;\n\n    if (isTS) { // Try to skip TypeScript return type declarations after the arguments\n      var m = /:\\s*(?:\\w+(?:<[^>]*>|\\[\\])?|\\{[^}]*\\})\\s*$/.exec(stream.string.slice(stream.start, arrow))\n      if (m) arrow = m.index\n    }\n\n    var depth = 0, sawSomething = false;\n    for (var pos = arrow - 1; pos >= 0; --pos) {\n      var ch = stream.string.charAt(pos);\n      var bracket = brackets.indexOf(ch);\n      if (bracket >= 0 && bracket < 3) {\n        if (!depth) { ++pos; break; }\n        if (--depth == 0) { if (ch == \"(\") sawSomething = true; break; }\n      } else if (bracket >= 3 && bracket < 6) {\n        ++depth;\n      } else if (wordRE.test(ch)) {\n        sawSomething = true;\n      } else if (/[\"'\\/]/.test(ch)) {\n        return;\n      } else if (sawSomething && !depth) {\n        ++pos;\n        break;\n      }\n    }\n    if (sawSomething && !depth) state.fatArrowAt = pos;\n  }\n\n  // Parser\n\n  var atomicTypes = {\"atom\": true, \"number\": true, \"variable\": true, \"string\": true, \"regexp\": true, \"this\": true, \"jsonld-keyword\": true};\n\n  function JSLexical(indented, column, type, align, prev, info) {\n    this.indented = indented;\n    this.column = column;\n    this.type = type;\n    this.prev = prev;\n    this.info = info;\n    if (align != null) this.align = align;\n  }\n\n  function inScope(state, varname) {\n    for (var v = state.localVars; v; v = v.next)\n      if (v.name == varname) return true;\n    for (var cx = state.context; cx; cx = cx.prev) {\n      for (var v = cx.vars; v; v = v.next)\n        if (v.name == varname) return true;\n    }\n  }\n\n  function parseJS(state, style, type, content, stream) {\n    var cc = state.cc;\n    // Communicate our context to the combinators.\n    // (Less wasteful than consing up a hundred closures on every call.)\n    cx.state = state; cx.stream = stream; cx.marked = null, cx.cc = cc; cx.style = style;\n\n    if (!state.lexical.hasOwnProperty(\"align\"))\n      state.lexical.align = true;\n\n    while(true) {\n      var combinator = cc.length ? cc.pop() : jsonMode ? expression : statement;\n      if (combinator(type, content)) {\n        while(cc.length && cc[cc.length - 1].lex)\n          cc.pop()();\n        if (cx.marked) return cx.marked;\n        if (type == \"variable\" && inScope(state, content)) return \"variable-2\";\n        return style;\n      }\n    }\n  }\n\n  // Combinator utils\n\n  var cx = {state: null, column: null, marked: null, cc: null};\n  function pass() {\n    for (var i = arguments.length - 1; i >= 0; i--) cx.cc.push(arguments[i]);\n  }\n  function cont() {\n    pass.apply(null, arguments);\n    return true;\n  }\n  function inList(name, list) {\n    for (var v = list; v; v = v.next) if (v.name == name) return true\n    return false;\n  }\n  function register(varname) {\n    var state = cx.state;\n    cx.marked = \"def\";\n    if (state.context) {\n      if (state.lexical.info == \"var\" && state.context && state.context.block) {\n        // FIXME function decls are also not block scoped\n        var newContext = registerVarScoped(varname, state.context)\n        if (newContext != null) {\n          state.context = newContext\n          return\n        }\n      } else if (!inList(varname, state.localVars)) {\n        state.localVars = new Var(varname, state.localVars)\n        return\n      }\n    }\n    // Fall through means this is global\n    if (parserConfig.globalVars && !inList(varname, state.globalVars))\n      state.globalVars = new Var(varname, state.globalVars)\n  }\n  function registerVarScoped(varname, context) {\n    if (!context) {\n      return null\n    } else if (context.block) {\n      var inner = registerVarScoped(varname, context.prev)\n      if (!inner) return null\n      if (inner == context.prev) return context\n      return new Context(inner, context.vars, true)\n    } else if (inList(varname, context.vars)) {\n      return context\n    } else {\n      return new Context(context.prev, new Var(varname, context.vars), false)\n    }\n  }\n\n  function isModifier(name) {\n    return name == \"public\" || name == \"private\" || name == \"protected\" || name == \"abstract\" || name == \"readonly\"\n  }\n\n  // Combinators\n\n  function Context(prev, vars, block) { this.prev = prev; this.vars = vars; this.block = block }\n  function Var(name, next) { this.name = name; this.next = next }\n\n  var defaultVars = new Var(\"this\", new Var(\"arguments\", null))\n  function pushcontext() {\n    cx.state.context = new Context(cx.state.context, cx.state.localVars, false)\n    cx.state.localVars = defaultVars\n  }\n  function pushblockcontext() {\n    cx.state.context = new Context(cx.state.context, cx.state.localVars, true)\n    cx.state.localVars = null\n  }\n  function popcontext() {\n    cx.state.localVars = cx.state.context.vars\n    cx.state.context = cx.state.context.prev\n  }\n  popcontext.lex = true\n  function pushlex(type, info) {\n    var result = function() {\n      var state = cx.state, indent = state.indented;\n      if (state.lexical.type == \"stat\") indent = state.lexical.indented;\n      else for (var outer = state.lexical; outer && outer.type == \")\" && outer.align; outer = outer.prev)\n        indent = outer.indented;\n      state.lexical = new JSLexical(indent, cx.stream.column(), type, null, state.lexical, info);\n    };\n    result.lex = true;\n    return result;\n  }\n  function poplex() {\n    var state = cx.state;\n    if (state.lexical.prev) {\n      if (state.lexical.type == \")\")\n        state.indented = state.lexical.indented;\n      state.lexical = state.lexical.prev;\n    }\n  }\n  poplex.lex = true;\n\n  function expect(wanted) {\n    function exp(type) {\n      if (type == wanted) return cont();\n      else if (wanted == \";\") return pass();\n      else return cont(exp);\n    };\n    return exp;\n  }\n\n  function statement(type, value) {\n    if (type == \"var\") return cont(pushlex(\"vardef\", value), vardef, expect(\";\"), poplex);\n    if (type == \"keyword a\") return cont(pushlex(\"form\"), parenExpr, statement, poplex);\n    if (type == \"keyword b\") return cont(pushlex(\"form\"), statement, poplex);\n    if (type == \"keyword d\") return cx.stream.match(/^\\s*$/, false) ? cont() : cont(pushlex(\"stat\"), maybeexpression, expect(\";\"), poplex);\n    if (type == \"debugger\") return cont(expect(\";\"));\n    if (type == \"{\") return cont(pushlex(\"}\"), pushblockcontext, block, poplex, popcontext);\n    if (type == \";\") return cont();\n    if (type == \"if\") {\n      if (cx.state.lexical.info == \"else\" && cx.state.cc[cx.state.cc.length - 1] == poplex)\n        cx.state.cc.pop()();\n      return cont(pushlex(\"form\"), parenExpr, statement, poplex, maybeelse);\n    }\n    if (type == \"function\") return cont(functiondef);\n    if (type == \"for\") return cont(pushlex(\"form\"), forspec, statement, poplex);\n    if (type == \"class\" || (isTS && value == \"interface\")) { cx.marked = \"keyword\"; return cont(pushlex(\"form\"), className, poplex); }\n    if (type == \"variable\") {\n      if (isTS && value == \"declare\") {\n        cx.marked = \"keyword\"\n        return cont(statement)\n      } else if (isTS && (value == \"module\" || value == \"enum\" || value == \"type\") && cx.stream.match(/^\\s*\\w/, false)) {\n        cx.marked = \"keyword\"\n        if (value == \"enum\") return cont(enumdef);\n        else if (value == \"type\") return cont(typeexpr, expect(\"operator\"), typeexpr, expect(\";\"));\n        else return cont(pushlex(\"form\"), pattern, expect(\"{\"), pushlex(\"}\"), block, poplex, poplex)\n      } else if (isTS && value == \"namespace\") {\n        cx.marked = \"keyword\"\n        return cont(pushlex(\"form\"), expression, block, poplex)\n      } else if (isTS && value == \"abstract\") {\n        cx.marked = \"keyword\"\n        return cont(statement)\n      } else {\n        return cont(pushlex(\"stat\"), maybelabel);\n      }\n    }\n    if (type == \"switch\") return cont(pushlex(\"form\"), parenExpr, expect(\"{\"), pushlex(\"}\", \"switch\"), pushblockcontext,\n                                      block, poplex, poplex, popcontext);\n    if (type == \"case\") return cont(expression, expect(\":\"));\n    if (type == \"default\") return cont(expect(\":\"));\n    if (type == \"catch\") return cont(pushlex(\"form\"), pushcontext, maybeCatchBinding, statement, poplex, popcontext);\n    if (type == \"export\") return cont(pushlex(\"stat\"), afterExport, poplex);\n    if (type == \"import\") return cont(pushlex(\"stat\"), afterImport, poplex);\n    if (type == \"async\") return cont(statement)\n    if (value == \"@\") return cont(expression, statement)\n    return pass(pushlex(\"stat\"), expression, expect(\";\"), poplex);\n  }\n  function maybeCatchBinding(type) {\n    if (type == \"(\") return cont(funarg, expect(\")\"))\n  }\n  function expression(type, value) {\n    return expressionInner(type, value, false);\n  }\n  function expressionNoComma(type, value) {\n    return expressionInner(type, value, true);\n  }\n  function parenExpr(type) {\n    if (type != \"(\") return pass()\n    return cont(pushlex(\")\"), expression, expect(\")\"), poplex)\n  }\n  function expressionInner(type, value, noComma) {\n    if (cx.state.fatArrowAt == cx.stream.start) {\n      var body = noComma ? arrowBodyNoComma : arrowBody;\n      if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, expect(\"=>\"), body, popcontext);\n      else if (type == \"variable\") return pass(pushcontext, pattern, expect(\"=>\"), body, popcontext);\n    }\n\n    var maybeop = noComma ? maybeoperatorNoComma : maybeoperatorComma;\n    if (atomicTypes.hasOwnProperty(type)) return cont(maybeop);\n    if (type == \"function\") return cont(functiondef, maybeop);\n    if (type == \"class\" || (isTS && value == \"interface\")) { cx.marked = \"keyword\"; return cont(pushlex(\"form\"), classExpression, poplex); }\n    if (type == \"keyword c\" || type == \"async\") return cont(noComma ? expressionNoComma : expression);\n    if (type == \"(\") return cont(pushlex(\")\"), maybeexpression, expect(\")\"), poplex, maybeop);\n    if (type == \"operator\" || type == \"spread\") return cont(noComma ? expressionNoComma : expression);\n    if (type == \"[\") return cont(pushlex(\"]\"), arrayLiteral, poplex, maybeop);\n    if (type == \"{\") return contCommasep(objprop, \"}\", null, maybeop);\n    if (type == \"quasi\") return pass(quasi, maybeop);\n    if (type == \"new\") return cont(maybeTarget(noComma));\n    if (type == \"import\") return cont(expression);\n    return cont();\n  }\n  function maybeexpression(type) {\n    if (type.match(/[;\\}\\)\\],]/)) return pass();\n    return pass(expression);\n  }\n\n  function maybeoperatorComma(type, value) {\n    if (type == \",\") return cont(expression);\n    return maybeoperatorNoComma(type, value, false);\n  }\n  function maybeoperatorNoComma(type, value, noComma) {\n    var me = noComma == false ? maybeoperatorComma : maybeoperatorNoComma;\n    var expr = noComma == false ? expression : expressionNoComma;\n    if (type == \"=>\") return cont(pushcontext, noComma ? arrowBodyNoComma : arrowBody, popcontext);\n    if (type == \"operator\") {\n      if (/\\+\\+|--/.test(value) || isTS && value == \"!\") return cont(me);\n      if (isTS && value == \"<\" && cx.stream.match(/^([^>]|<.*?>)*>\\s*\\(/, false))\n        return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, me);\n      if (value == \"?\") return cont(expression, expect(\":\"), expr);\n      return cont(expr);\n    }\n    if (type == \"quasi\") { return pass(quasi, me); }\n    if (type == \";\") return;\n    if (type == \"(\") return contCommasep(expressionNoComma, \")\", \"call\", me);\n    if (type == \".\") return cont(property, me);\n    if (type == \"[\") return cont(pushlex(\"]\"), maybeexpression, expect(\"]\"), poplex, me);\n    if (isTS && value == \"as\") { cx.marked = \"keyword\"; return cont(typeexpr, me) }\n    if (type == \"regexp\") {\n      cx.state.lastType = cx.marked = \"operator\"\n      cx.stream.backUp(cx.stream.pos - cx.stream.start - 1)\n      return cont(expr)\n    }\n  }\n  function quasi(type, value) {\n    if (type != \"quasi\") return pass();\n    if (value.slice(value.length - 2) != \"${\") return cont(quasi);\n    return cont(expression, continueQuasi);\n  }\n  function continueQuasi(type) {\n    if (type == \"}\") {\n      cx.marked = \"string-2\";\n      cx.state.tokenize = tokenQuasi;\n      return cont(quasi);\n    }\n  }\n  function arrowBody(type) {\n    findFatArrow(cx.stream, cx.state);\n    return pass(type == \"{\" ? statement : expression);\n  }\n  function arrowBodyNoComma(type) {\n    findFatArrow(cx.stream, cx.state);\n    return pass(type == \"{\" ? statement : expressionNoComma);\n  }\n  function maybeTarget(noComma) {\n    return function(type) {\n      if (type == \".\") return cont(noComma ? targetNoComma : target);\n      else if (type == \"variable\" && isTS) return cont(maybeTypeArgs, noComma ? maybeoperatorNoComma : maybeoperatorComma)\n      else return pass(noComma ? expressionNoComma : expression);\n    };\n  }\n  function target(_, value) {\n    if (value == \"target\") { cx.marked = \"keyword\"; return cont(maybeoperatorComma); }\n  }\n  function targetNoComma(_, value) {\n    if (value == \"target\") { cx.marked = \"keyword\"; return cont(maybeoperatorNoComma); }\n  }\n  function maybelabel(type) {\n    if (type == \":\") return cont(poplex, statement);\n    return pass(maybeoperatorComma, expect(\";\"), poplex);\n  }\n  function property(type) {\n    if (type == \"variable\") {cx.marked = \"property\"; return cont();}\n  }\n  function objprop(type, value) {\n    if (type == \"async\") {\n      cx.marked = \"property\";\n      return cont(objprop);\n    } else if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\";\n      if (value == \"get\" || value == \"set\") return cont(getterSetter);\n      var m // Work around fat-arrow-detection complication for detecting typescript typed arrow params\n      if (isTS && cx.state.fatArrowAt == cx.stream.start && (m = cx.stream.match(/^\\s*:\\s*/, false)))\n        cx.state.fatArrowAt = cx.stream.pos + m[0].length\n      return cont(afterprop);\n    } else if (type == \"number\" || type == \"string\") {\n      cx.marked = jsonldMode ? \"property\" : (cx.style + \" property\");\n      return cont(afterprop);\n    } else if (type == \"jsonld-keyword\") {\n      return cont(afterprop);\n    } else if (isTS && isModifier(value)) {\n      cx.marked = \"keyword\"\n      return cont(objprop)\n    } else if (type == \"[\") {\n      return cont(expression, maybetype, expect(\"]\"), afterprop);\n    } else if (type == \"spread\") {\n      return cont(expressionNoComma, afterprop);\n    } else if (value == \"*\") {\n      cx.marked = \"keyword\";\n      return cont(objprop);\n    } else if (type == \":\") {\n      return pass(afterprop)\n    }\n  }\n  function getterSetter(type) {\n    if (type != \"variable\") return pass(afterprop);\n    cx.marked = \"property\";\n    return cont(functiondef);\n  }\n  function afterprop(type) {\n    if (type == \":\") return cont(expressionNoComma);\n    if (type == \"(\") return pass(functiondef);\n  }\n  function commasep(what, end, sep) {\n    function proceed(type, value) {\n      if (sep ? sep.indexOf(type) > -1 : type == \",\") {\n        var lex = cx.state.lexical;\n        if (lex.info == \"call\") lex.pos = (lex.pos || 0) + 1;\n        return cont(function(type, value) {\n          if (type == end || value == end) return pass()\n          return pass(what)\n        }, proceed);\n      }\n      if (type == end || value == end) return cont();\n      return cont(expect(end));\n    }\n    return function(type, value) {\n      if (type == end || value == end) return cont();\n      return pass(what, proceed);\n    };\n  }\n  function contCommasep(what, end, info) {\n    for (var i = 3; i < arguments.length; i++)\n      cx.cc.push(arguments[i]);\n    return cont(pushlex(end, info), commasep(what, end), poplex);\n  }\n  function block(type) {\n    if (type == \"}\") return cont();\n    return pass(statement, block);\n  }\n  function maybetype(type, value) {\n    if (isTS) {\n      if (type == \":\") return cont(typeexpr);\n      if (value == \"?\") return cont(maybetype);\n    }\n  }\n  function mayberettype(type) {\n    if (isTS && type == \":\") {\n      if (cx.stream.match(/^\\s*\\w+\\s+is\\b/, false)) return cont(expression, isKW, typeexpr)\n      else return cont(typeexpr)\n    }\n  }\n  function isKW(_, value) {\n    if (value == \"is\") {\n      cx.marked = \"keyword\"\n      return cont()\n    }\n  }\n  function typeexpr(type, value) {\n    if (value == \"keyof\" || value == \"typeof\") {\n      cx.marked = \"keyword\"\n      return cont(value == \"keyof\" ? typeexpr : expressionNoComma)\n    }\n    if (type == \"variable\" || value == \"void\") {\n      cx.marked = \"type\"\n      return cont(afterType)\n    }\n    if (type == \"string\" || type == \"number\" || type == \"atom\") return cont(afterType);\n    if (type == \"[\") return cont(pushlex(\"]\"), commasep(typeexpr, \"]\", \",\"), poplex, afterType)\n    if (type == \"{\") return cont(pushlex(\"}\"), commasep(typeprop, \"}\", \",;\"), poplex, afterType)\n    if (type == \"(\") return cont(commasep(typearg, \")\"), maybeReturnType)\n    if (type == \"<\") return cont(commasep(typeexpr, \">\"), typeexpr)\n  }\n  function maybeReturnType(type) {\n    if (type == \"=>\") return cont(typeexpr)\n  }\n  function typeprop(type, value) {\n    if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\"\n      return cont(typeprop)\n    } else if (value == \"?\") {\n      return cont(typeprop)\n    } else if (type == \":\") {\n      return cont(typeexpr)\n    } else if (type == \"[\") {\n      return cont(expression, maybetype, expect(\"]\"), typeprop)\n    }\n  }\n  function typearg(type, value) {\n    if (type == \"variable\" && cx.stream.match(/^\\s*[?:]/, false) || value == \"?\") return cont(typearg)\n    if (type == \":\") return cont(typeexpr)\n    return pass(typeexpr)\n  }\n  function afterType(type, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType)\n    if (value == \"|\" || type == \".\" || value == \"&\") return cont(typeexpr)\n    if (type == \"[\") return cont(expect(\"]\"), afterType)\n    if (value == \"extends\" || value == \"implements\") { cx.marked = \"keyword\"; return cont(typeexpr) }\n  }\n  function maybeTypeArgs(_, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType)\n  }\n  function typeparam() {\n    return pass(typeexpr, maybeTypeDefault)\n  }\n  function maybeTypeDefault(_, value) {\n    if (value == \"=\") return cont(typeexpr)\n  }\n  function vardef(_, value) {\n    if (value == \"enum\") {cx.marked = \"keyword\"; return cont(enumdef)}\n    return pass(pattern, maybetype, maybeAssign, vardefCont);\n  }\n  function pattern(type, value) {\n    if (isTS && isModifier(value)) { cx.marked = \"keyword\"; return cont(pattern) }\n    if (type == \"variable\") { register(value); return cont(); }\n    if (type == \"spread\") return cont(pattern);\n    if (type == \"[\") return contCommasep(pattern, \"]\");\n    if (type == \"{\") return contCommasep(proppattern, \"}\");\n  }\n  function proppattern(type, value) {\n    if (type == \"variable\" && !cx.stream.match(/^\\s*:/, false)) {\n      register(value);\n      return cont(maybeAssign);\n    }\n    if (type == \"variable\") cx.marked = \"property\";\n    if (type == \"spread\") return cont(pattern);\n    if (type == \"}\") return pass();\n    return cont(expect(\":\"), pattern, maybeAssign);\n  }\n  function maybeAssign(_type, value) {\n    if (value == \"=\") return cont(expressionNoComma);\n  }\n  function vardefCont(type) {\n    if (type == \",\") return cont(vardef);\n  }\n  function maybeelse(type, value) {\n    if (type == \"keyword b\" && value == \"else\") return cont(pushlex(\"form\", \"else\"), statement, poplex);\n  }\n  function forspec(type, value) {\n    if (value == \"await\") return cont(forspec);\n    if (type == \"(\") return cont(pushlex(\")\"), forspec1, expect(\")\"), poplex);\n  }\n  function forspec1(type) {\n    if (type == \"var\") return cont(vardef, expect(\";\"), forspec2);\n    if (type == \";\") return cont(forspec2);\n    if (type == \"variable\") return cont(formaybeinof);\n    return pass(expression, expect(\";\"), forspec2);\n  }\n  function formaybeinof(_type, value) {\n    if (value == \"in\" || value == \"of\") { cx.marked = \"keyword\"; return cont(expression); }\n    return cont(maybeoperatorComma, forspec2);\n  }\n  function forspec2(type, value) {\n    if (type == \";\") return cont(forspec3);\n    if (value == \"in\" || value == \"of\") { cx.marked = \"keyword\"; return cont(expression); }\n    return pass(expression, expect(\";\"), forspec3);\n  }\n  function forspec3(type) {\n    if (type != \")\") cont(expression);\n  }\n  function functiondef(type, value) {\n    if (value == \"*\") {cx.marked = \"keyword\"; return cont(functiondef);}\n    if (type == \"variable\") {register(value); return cont(functiondef);}\n    if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, mayberettype, statement, popcontext);\n    if (isTS && value == \"<\") return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex, functiondef)\n  }\n  function funarg(type, value) {\n    if (value == \"@\") cont(expression, funarg)\n    if (type == \"spread\") return cont(funarg);\n    if (isTS && isModifier(value)) { cx.marked = \"keyword\"; return cont(funarg); }\n    return pass(pattern, maybetype, maybeAssign);\n  }\n  function classExpression(type, value) {\n    // Class expressions may have an optional name.\n    if (type == \"variable\") return className(type, value);\n    return classNameAfter(type, value);\n  }\n  function className(type, value) {\n    if (type == \"variable\") {register(value); return cont(classNameAfter);}\n  }\n  function classNameAfter(type, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex, classNameAfter)\n    if (value == \"extends\" || value == \"implements\" || (isTS && type == \",\")) {\n      if (value == \"implements\") cx.marked = \"keyword\";\n      return cont(isTS ? typeexpr : expression, classNameAfter);\n    }\n    if (type == \"{\") return cont(pushlex(\"}\"), classBody, poplex);\n  }\n  function classBody(type, value) {\n    if (type == \"async\" ||\n        (type == \"variable\" &&\n         (value == \"static\" || value == \"get\" || value == \"set\" || (isTS && isModifier(value))) &&\n         cx.stream.match(/^\\s+[\\w$\\xa1-\\uffff]/, false))) {\n      cx.marked = \"keyword\";\n      return cont(classBody);\n    }\n    if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\";\n      return cont(isTS ? classfield : functiondef, classBody);\n    }\n    if (type == \"[\")\n      return cont(expression, maybetype, expect(\"]\"), isTS ? classfield : functiondef, classBody)\n    if (value == \"*\") {\n      cx.marked = \"keyword\";\n      return cont(classBody);\n    }\n    if (type == \";\") return cont(classBody);\n    if (type == \"}\") return cont();\n    if (value == \"@\") return cont(expression, classBody)\n  }\n  function classfield(type, value) {\n    if (value == \"?\") return cont(classfield)\n    if (type == \":\") return cont(typeexpr, maybeAssign)\n    if (value == \"=\") return cont(expressionNoComma)\n    return pass(functiondef)\n  }\n  function afterExport(type, value) {\n    if (value == \"*\") { cx.marked = \"keyword\"; return cont(maybeFrom, expect(\";\")); }\n    if (value == \"default\") { cx.marked = \"keyword\"; return cont(expression, expect(\";\")); }\n    if (type == \"{\") return cont(commasep(exportField, \"}\"), maybeFrom, expect(\";\"));\n    return pass(statement);\n  }\n  function exportField(type, value) {\n    if (value == \"as\") { cx.marked = \"keyword\"; return cont(expect(\"variable\")); }\n    if (type == \"variable\") return pass(expressionNoComma, exportField);\n  }\n  function afterImport(type) {\n    if (type == \"string\") return cont();\n    if (type == \"(\") return pass(expression);\n    return pass(importSpec, maybeMoreImports, maybeFrom);\n  }\n  function importSpec(type, value) {\n    if (type == \"{\") return contCommasep(importSpec, \"}\");\n    if (type == \"variable\") register(value);\n    if (value == \"*\") cx.marked = \"keyword\";\n    return cont(maybeAs);\n  }\n  function maybeMoreImports(type) {\n    if (type == \",\") return cont(importSpec, maybeMoreImports)\n  }\n  function maybeAs(_type, value) {\n    if (value == \"as\") { cx.marked = \"keyword\"; return cont(importSpec); }\n  }\n  function maybeFrom(_type, value) {\n    if (value == \"from\") { cx.marked = \"keyword\"; return cont(expression); }\n  }\n  function arrayLiteral(type) {\n    if (type == \"]\") return cont();\n    return pass(commasep(expressionNoComma, \"]\"));\n  }\n  function enumdef() {\n    return pass(pushlex(\"form\"), pattern, expect(\"{\"), pushlex(\"}\"), commasep(enummember, \"}\"), poplex, poplex)\n  }\n  function enummember() {\n    return pass(pattern, maybeAssign);\n  }\n\n  function isContinuedStatement(state, textAfter) {\n    return state.lastType == \"operator\" || state.lastType == \",\" ||\n      isOperatorChar.test(textAfter.charAt(0)) ||\n      /[,.]/.test(textAfter.charAt(0));\n  }\n\n  function expressionAllowed(stream, state, backUp) {\n    return state.tokenize == tokenBase &&\n      /^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\\[{}\\(,;:]|=>)$/.test(state.lastType) ||\n      (state.lastType == \"quasi\" && /\\{\\s*$/.test(stream.string.slice(0, stream.pos - (backUp || 0))))\n  }\n\n  // Interface\n\n  return {\n    startState: function(basecolumn) {\n      var state = {\n        tokenize: tokenBase,\n        lastType: \"sof\",\n        cc: [],\n        lexical: new JSLexical((basecolumn || 0) - indentUnit, 0, \"block\", false),\n        localVars: parserConfig.localVars,\n        context: parserConfig.localVars && new Context(null, null, false),\n        indented: basecolumn || 0\n      };\n      if (parserConfig.globalVars && typeof parserConfig.globalVars == \"object\")\n        state.globalVars = parserConfig.globalVars;\n      return state;\n    },\n\n    token: function(stream, state) {\n      if (stream.sol()) {\n        if (!state.lexical.hasOwnProperty(\"align\"))\n          state.lexical.align = false;\n        state.indented = stream.indentation();\n        findFatArrow(stream, state);\n      }\n      if (state.tokenize != tokenComment && stream.eatSpace()) return null;\n      var style = state.tokenize(stream, state);\n      if (type == \"comment\") return style;\n      state.lastType = type == \"operator\" && (content == \"++\" || content == \"--\") ? \"incdec\" : type;\n      return parseJS(state, style, type, content, stream);\n    },\n\n    indent: function(state, textAfter) {\n      if (state.tokenize == tokenComment) return CodeMirror.Pass;\n      if (state.tokenize != tokenBase) return 0;\n      var firstChar = textAfter && textAfter.charAt(0), lexical = state.lexical, top\n      // Kludge to prevent 'maybelse' from blocking lexical scope pops\n      if (!/^\\s*else\\b/.test(textAfter)) for (var i = state.cc.length - 1; i >= 0; --i) {\n        var c = state.cc[i];\n        if (c == poplex) lexical = lexical.prev;\n        else if (c != maybeelse) break;\n      }\n      while ((lexical.type == \"stat\" || lexical.type == \"form\") &&\n             (firstChar == \"}\" || ((top = state.cc[state.cc.length - 1]) &&\n                                   (top == maybeoperatorComma || top == maybeoperatorNoComma) &&\n                                   !/^[,\\.=+\\-*:?[\\(]/.test(textAfter))))\n        lexical = lexical.prev;\n      if (statementIndent && lexical.type == \")\" && lexical.prev.type == \"stat\")\n        lexical = lexical.prev;\n      var type = lexical.type, closing = firstChar == type;\n\n      if (type == \"vardef\") return lexical.indented + (state.lastType == \"operator\" || state.lastType == \",\" ? lexical.info.length + 1 : 0);\n      else if (type == \"form\" && firstChar == \"{\") return lexical.indented;\n      else if (type == \"form\") return lexical.indented + indentUnit;\n      else if (type == \"stat\")\n        return lexical.indented + (isContinuedStatement(state, textAfter) ? statementIndent || indentUnit : 0);\n      else if (lexical.info == \"switch\" && !closing && parserConfig.doubleIndentSwitch != false)\n        return lexical.indented + (/^(?:case|default)\\b/.test(textAfter) ? indentUnit : 2 * indentUnit);\n      else if (lexical.align) return lexical.column + (closing ? 0 : 1);\n      else return lexical.indented + (closing ? 0 : indentUnit);\n    },\n\n    electricInput: /^\\s*(?:case .*?:|default:|\\{|\\})$/,\n    blockCommentStart: jsonMode ? null : \"/*\",\n    blockCommentEnd: jsonMode ? null : \"*/\",\n    blockCommentContinue: jsonMode ? null : \" * \",\n    lineComment: jsonMode ? null : \"//\",\n    fold: \"brace\",\n    closeBrackets: \"()[]{}''\\\"\\\"``\",\n\n    helperType: jsonMode ? \"json\" : \"javascript\",\n    jsonldMode: jsonldMode,\n    jsonMode: jsonMode,\n\n    expressionAllowed: expressionAllowed,\n\n    skipExpression: function(state) {\n      var top = state.cc[state.cc.length - 1]\n      if (top == expression || top == expressionNoComma) state.cc.pop()\n    }\n  };\n});\n\nCodeMirror.registerHelper(\"wordChars\", \"javascript\", /[\\w$]/);\n\nCodeMirror.defineMIME(\"text/javascript\", \"javascript\");\nCodeMirror.defineMIME(\"text/ecmascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/javascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/x-javascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/ecmascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/json\", {name: \"javascript\", json: true});\nCodeMirror.defineMIME(\"application/x-json\", {name: \"javascript\", json: true});\nCodeMirror.defineMIME(\"application/ld+json\", {name: \"javascript\", jsonld: true});\nCodeMirror.defineMIME(\"text/typescript\", { name: \"javascript\", typescript: true });\nCodeMirror.defineMIME(\"application/typescript\", { name: \"javascript\", typescript: true });\n\n});\n","Magezon_Builder/js/cm/mode/css/css.js":"// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"css\", function(config, parserConfig) {\n  var inline = parserConfig.inline\n  if (!parserConfig.propertyKeywords) parserConfig = CodeMirror.resolveMode(\"text/css\");\n\n  var indentUnit = config.indentUnit,\n      tokenHooks = parserConfig.tokenHooks,\n      documentTypes = parserConfig.documentTypes || {},\n      mediaTypes = parserConfig.mediaTypes || {},\n      mediaFeatures = parserConfig.mediaFeatures || {},\n      mediaValueKeywords = parserConfig.mediaValueKeywords || {},\n      propertyKeywords = parserConfig.propertyKeywords || {},\n      nonStandardPropertyKeywords = parserConfig.nonStandardPropertyKeywords || {},\n      fontProperties = parserConfig.fontProperties || {},\n      counterDescriptors = parserConfig.counterDescriptors || {},\n      colorKeywords = parserConfig.colorKeywords || {},\n      valueKeywords = parserConfig.valueKeywords || {},\n      allowNested = parserConfig.allowNested,\n      lineComment = parserConfig.lineComment,\n      supportsAtComponent = parserConfig.supportsAtComponent === true;\n\n  var type, override;\n  function ret(style, tp) { type = tp; return style; }\n\n  // Tokenizers\n\n  function tokenBase(stream, state) {\n    var ch = stream.next();\n    if (tokenHooks[ch]) {\n      var result = tokenHooks[ch](stream, state);\n      if (result !== false) return result;\n    }\n    if (ch == \"@\") {\n      stream.eatWhile(/[\\w\\\\\\-]/);\n      return ret(\"def\", stream.current());\n    } else if (ch == \"=\" || (ch == \"~\" || ch == \"|\") && stream.eat(\"=\")) {\n      return ret(null, \"compare\");\n    } else if (ch == \"\\\"\" || ch == \"'\") {\n      state.tokenize = tokenString(ch);\n      return state.tokenize(stream, state);\n    } else if (ch == \"#\") {\n      stream.eatWhile(/[\\w\\\\\\-]/);\n      return ret(\"atom\", \"hash\");\n    } else if (ch == \"!\") {\n      stream.match(/^\\s*\\w*/);\n      return ret(\"keyword\", \"important\");\n    } else if (/\\d/.test(ch) || ch == \".\" && stream.eat(/\\d/)) {\n      stream.eatWhile(/[\\w.%]/);\n      return ret(\"number\", \"unit\");\n    } else if (ch === \"-\") {\n      if (/[\\d.]/.test(stream.peek())) {\n        stream.eatWhile(/[\\w.%]/);\n        return ret(\"number\", \"unit\");\n      } else if (stream.match(/^-[\\w\\\\\\-]+/)) {\n        stream.eatWhile(/[\\w\\\\\\-]/);\n        if (stream.match(/^\\s*:/, false))\n          return ret(\"variable-2\", \"variable-definition\");\n        return ret(\"variable-2\", \"variable\");\n      } else if (stream.match(/^\\w+-/)) {\n        return ret(\"meta\", \"meta\");\n      }\n    } else if (/[,+>*\\/]/.test(ch)) {\n      return ret(null, \"select-op\");\n    } else if (ch == \".\" && stream.match(/^-?[_a-z][_a-z0-9-]*/i)) {\n      return ret(\"qualifier\", \"qualifier\");\n    } else if (/[:;{}\\[\\]\\(\\)]/.test(ch)) {\n      return ret(null, ch);\n    } else if (((ch == \"u\" || ch == \"U\") && stream.match(/rl(-prefix)?\\(/i)) ||\n               ((ch == \"d\" || ch == \"D\") && stream.match(\"omain(\", true, true)) ||\n               ((ch == \"r\" || ch == \"R\") && stream.match(\"egexp(\", true, true))) {\n      stream.backUp(1);\n      state.tokenize = tokenParenthesized;\n      return ret(\"property\", \"word\");\n    } else if (/[\\w\\\\\\-]/.test(ch)) {\n      stream.eatWhile(/[\\w\\\\\\-]/);\n      return ret(\"property\", \"word\");\n    } else {\n      return ret(null, null);\n    }\n  }\n\n  function tokenString(quote) {\n    return function(stream, state) {\n      var escaped = false, ch;\n      while ((ch = stream.next()) != null) {\n        if (ch == quote && !escaped) {\n          if (quote == \")\") stream.backUp(1);\n          break;\n        }\n        escaped = !escaped && ch == \"\\\\\";\n      }\n      if (ch == quote || !escaped && quote != \")\") state.tokenize = null;\n      return ret(\"string\", \"string\");\n    };\n  }\n\n  function tokenParenthesized(stream, state) {\n    stream.next(); // Must be '('\n    if (!stream.match(/\\s*[\\\"\\')]/, false))\n      state.tokenize = tokenString(\")\");\n    else\n      state.tokenize = null;\n    return ret(null, \"(\");\n  }\n\n  // Context management\n\n  function Context(type, indent, prev) {\n    this.type = type;\n    this.indent = indent;\n    this.prev = prev;\n  }\n\n  function pushContext(state, stream, type, indent) {\n    state.context = new Context(type, stream.indentation() + (indent === false ? 0 : indentUnit), state.context);\n    return type;\n  }\n\n  function popContext(state) {\n    if (state.context.prev)\n      state.context = state.context.prev;\n    return state.context.type;\n  }\n\n  function pass(type, stream, state) {\n    return states[state.context.type](type, stream, state);\n  }\n  function popAndPass(type, stream, state, n) {\n    for (var i = n || 1; i > 0; i--)\n      state.context = state.context.prev;\n    return pass(type, stream, state);\n  }\n\n  // Parser\n\n  function wordAsValue(stream) {\n    var word = stream.current().toLowerCase();\n    if (valueKeywords.hasOwnProperty(word))\n      override = \"atom\";\n    else if (colorKeywords.hasOwnProperty(word))\n      override = \"keyword\";\n    else\n      override = \"variable\";\n  }\n\n  var states = {};\n\n  states.top = function(type, stream, state) {\n    if (type == \"{\") {\n      return pushContext(state, stream, \"block\");\n    } else if (type == \"}\" && state.context.prev) {\n      return popContext(state);\n    } else if (supportsAtComponent && /@component/i.test(type)) {\n      return pushContext(state, stream, \"atComponentBlock\");\n    } else if (/^@(-moz-)?document$/i.test(type)) {\n      return pushContext(state, stream, \"documentTypes\");\n    } else if (/^@(media|supports|(-moz-)?document|import)$/i.test(type)) {\n      return pushContext(state, stream, \"atBlock\");\n    } else if (/^@(font-face|counter-style)/i.test(type)) {\n      state.stateArg = type;\n      return \"restricted_atBlock_before\";\n    } else if (/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(type)) {\n      return \"keyframes\";\n    } else if (type && type.charAt(0) == \"@\") {\n      return pushContext(state, stream, \"at\");\n    } else if (type == \"hash\") {\n      override = \"builtin\";\n    } else if (type == \"word\") {\n      override = \"tag\";\n    } else if (type == \"variable-definition\") {\n      return \"maybeprop\";\n    } else if (type == \"interpolation\") {\n      return pushContext(state, stream, \"interpolation\");\n    } else if (type == \":\") {\n      return \"pseudo\";\n    } else if (allowNested && type == \"(\") {\n      return pushContext(state, stream, \"parens\");\n    }\n    return state.context.type;\n  };\n\n  states.block = function(type, stream, state) {\n    if (type == \"word\") {\n      var word = stream.current().toLowerCase();\n      if (propertyKeywords.hasOwnProperty(word)) {\n        override = \"property\";\n        return \"maybeprop\";\n      } else if (nonStandardPropertyKeywords.hasOwnProperty(word)) {\n        override = \"string-2\";\n        return \"maybeprop\";\n      } else if (allowNested) {\n        override = stream.match(/^\\s*:(?:\\s|$)/, false) ? \"property\" : \"tag\";\n        return \"block\";\n      } else {\n        override += \" error\";\n        return \"maybeprop\";\n      }\n    } else if (type == \"meta\") {\n      return \"block\";\n    } else if (!allowNested && (type == \"hash\" || type == \"qualifier\")) {\n      override = \"error\";\n      return \"block\";\n    } else {\n      return states.top(type, stream, state);\n    }\n  };\n\n  states.maybeprop = function(type, stream, state) {\n    if (type == \":\") return pushContext(state, stream, \"prop\");\n    return pass(type, stream, state);\n  };\n\n  states.prop = function(type, stream, state) {\n    if (type == \";\") return popContext(state);\n    if (type == \"{\" && allowNested) return pushContext(state, stream, \"propBlock\");\n    if (type == \"}\" || type == \"{\") return popAndPass(type, stream, state);\n    if (type == \"(\") return pushContext(state, stream, \"parens\");\n\n    if (type == \"hash\" && !/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(stream.current())) {\n      override += \" error\";\n    } else if (type == \"word\") {\n      wordAsValue(stream);\n    } else if (type == \"interpolation\") {\n      return pushContext(state, stream, \"interpolation\");\n    }\n    return \"prop\";\n  };\n\n  states.propBlock = function(type, _stream, state) {\n    if (type == \"}\") return popContext(state);\n    if (type == \"word\") { override = \"property\"; return \"maybeprop\"; }\n    return state.context.type;\n  };\n\n  states.parens = function(type, stream, state) {\n    if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state);\n    if (type == \")\") return popContext(state);\n    if (type == \"(\") return pushContext(state, stream, \"parens\");\n    if (type == \"interpolation\") return pushContext(state, stream, \"interpolation\");\n    if (type == \"word\") wordAsValue(stream);\n    return \"parens\";\n  };\n\n  states.pseudo = function(type, stream, state) {\n    if (type == \"meta\") return \"pseudo\";\n\n    if (type == \"word\") {\n      override = \"variable-3\";\n      return state.context.type;\n    }\n    return pass(type, stream, state);\n  };\n\n  states.documentTypes = function(type, stream, state) {\n    if (type == \"word\" && documentTypes.hasOwnProperty(stream.current())) {\n      override = \"tag\";\n      return state.context.type;\n    } else {\n      return states.atBlock(type, stream, state);\n    }\n  };\n\n  states.atBlock = function(type, stream, state) {\n    if (type == \"(\") return pushContext(state, stream, \"atBlock_parens\");\n    if (type == \"}\" || type == \";\") return popAndPass(type, stream, state);\n    if (type == \"{\") return popContext(state) && pushContext(state, stream, allowNested ? \"block\" : \"top\");\n\n    if (type == \"interpolation\") return pushContext(state, stream, \"interpolation\");\n\n    if (type == \"word\") {\n      var word = stream.current().toLowerCase();\n      if (word == \"only\" || word == \"not\" || word == \"and\" || word == \"or\")\n        override = \"keyword\";\n      else if (mediaTypes.hasOwnProperty(word))\n        override = \"attribute\";\n      else if (mediaFeatures.hasOwnProperty(word))\n        override = \"property\";\n      else if (mediaValueKeywords.hasOwnProperty(word))\n        override = \"keyword\";\n      else if (propertyKeywords.hasOwnProperty(word))\n        override = \"property\";\n      else if (nonStandardPropertyKeywords.hasOwnProperty(word))\n        override = \"string-2\";\n      else if (valueKeywords.hasOwnProperty(word))\n        override = \"atom\";\n      else if (colorKeywords.hasOwnProperty(word))\n        override = \"keyword\";\n      else\n        override = \"error\";\n    }\n    return state.context.type;\n  };\n\n  states.atComponentBlock = function(type, stream, state) {\n    if (type == \"}\")\n      return popAndPass(type, stream, state);\n    if (type == \"{\")\n      return popContext(state) && pushContext(state, stream, allowNested ? \"block\" : \"top\", false);\n    if (type == \"word\")\n      override = \"error\";\n    return state.context.type;\n  };\n\n  states.atBlock_parens = function(type, stream, state) {\n    if (type == \")\") return popContext(state);\n    if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state, 2);\n    return states.atBlock(type, stream, state);\n  };\n\n  states.restricted_atBlock_before = function(type, stream, state) {\n    if (type == \"{\")\n      return pushContext(state, stream, \"restricted_atBlock\");\n    if (type == \"word\" && state.stateArg == \"@counter-style\") {\n      override = \"variable\";\n      return \"restricted_atBlock_before\";\n    }\n    return pass(type, stream, state);\n  };\n\n  states.restricted_atBlock = function(type, stream, state) {\n    if (type == \"}\") {\n      state.stateArg = null;\n      return popContext(state);\n    }\n    if (type == \"word\") {\n      if ((state.stateArg == \"@font-face\" && !fontProperties.hasOwnProperty(stream.current().toLowerCase())) ||\n          (state.stateArg == \"@counter-style\" && !counterDescriptors.hasOwnProperty(stream.current().toLowerCase())))\n        override = \"error\";\n      else\n        override = \"property\";\n      return \"maybeprop\";\n    }\n    return \"restricted_atBlock\";\n  };\n\n  states.keyframes = function(type, stream, state) {\n    if (type == \"word\") { override = \"variable\"; return \"keyframes\"; }\n    if (type == \"{\") return pushContext(state, stream, \"top\");\n    return pass(type, stream, state);\n  };\n\n  states.at = function(type, stream, state) {\n    if (type == \";\") return popContext(state);\n    if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state);\n    if (type == \"word\") override = \"tag\";\n    else if (type == \"hash\") override = \"builtin\";\n    return \"at\";\n  };\n\n  states.interpolation = function(type, stream, state) {\n    if (type == \"}\") return popContext(state);\n    if (type == \"{\" || type == \";\") return popAndPass(type, stream, state);\n    if (type == \"word\") override = \"variable\";\n    else if (type != \"variable\" && type != \"(\" && type != \")\") override = \"error\";\n    return \"interpolation\";\n  };\n\n  return {\n    startState: function(base) {\n      return {tokenize: null,\n              state: inline ? \"block\" : \"top\",\n              stateArg: null,\n              context: new Context(inline ? \"block\" : \"top\", base || 0, null)};\n    },\n\n    token: function(stream, state) {\n      if (!state.tokenize && stream.eatSpace()) return null;\n      var style = (state.tokenize || tokenBase)(stream, state);\n      if (style && typeof style == \"object\") {\n        type = style[1];\n        style = style[0];\n      }\n      override = style;\n      if (type != \"comment\")\n        state.state = states[state.state](type, stream, state);\n      return override;\n    },\n\n    indent: function(state, textAfter) {\n      var cx = state.context, ch = textAfter && textAfter.charAt(0);\n      var indent = cx.indent;\n      if (cx.type == \"prop\" && (ch == \"}\" || ch == \")\")) cx = cx.prev;\n      if (cx.prev) {\n        if (ch == \"}\" && (cx.type == \"block\" || cx.type == \"top\" ||\n                          cx.type == \"interpolation\" || cx.type == \"restricted_atBlock\")) {\n          // Resume indentation from parent context.\n          cx = cx.prev;\n          indent = cx.indent;\n        } else if (ch == \")\" && (cx.type == \"parens\" || cx.type == \"atBlock_parens\") ||\n            ch == \"{\" && (cx.type == \"at\" || cx.type == \"atBlock\")) {\n          // Dedent relative to current context.\n          indent = Math.max(0, cx.indent - indentUnit);\n        }\n      }\n      return indent;\n    },\n\n    electricChars: \"}\",\n    blockCommentStart: \"/*\",\n    blockCommentEnd: \"*/\",\n    blockCommentContinue: \" * \",\n    lineComment: lineComment,\n    fold: \"brace\"\n  };\n});\n\n  function keySet(array) {\n    var keys = {};\n    for (var i = 0; i < array.length; ++i) {\n      keys[array[i].toLowerCase()] = true;\n    }\n    return keys;\n  }\n\n  var documentTypes_ = [\n    \"domain\", \"regexp\", \"url\", \"url-prefix\"\n  ], documentTypes = keySet(documentTypes_);\n\n  var mediaTypes_ = [\n    \"all\", \"aural\", \"braille\", \"handheld\", \"print\", \"projection\", \"screen\",\n    \"tty\", \"tv\", \"embossed\"\n  ], mediaTypes = keySet(mediaTypes_);\n\n  var mediaFeatures_ = [\n    \"width\", \"min-width\", \"max-width\", \"height\", \"min-height\", \"max-height\",\n    \"device-width\", \"min-device-width\", \"max-device-width\", \"device-height\",\n    \"min-device-height\", \"max-device-height\", \"aspect-ratio\",\n    \"min-aspect-ratio\", \"max-aspect-ratio\", \"device-aspect-ratio\",\n    \"min-device-aspect-ratio\", \"max-device-aspect-ratio\", \"color\", \"min-color\",\n    \"max-color\", \"color-index\", \"min-color-index\", \"max-color-index\",\n    \"monochrome\", \"min-monochrome\", \"max-monochrome\", \"resolution\",\n    \"min-resolution\", \"max-resolution\", \"scan\", \"grid\", \"orientation\",\n    \"device-pixel-ratio\", \"min-device-pixel-ratio\", \"max-device-pixel-ratio\",\n    \"pointer\", \"any-pointer\", \"hover\", \"any-hover\"\n  ], mediaFeatures = keySet(mediaFeatures_);\n\n  var mediaValueKeywords_ = [\n    \"landscape\", \"portrait\", \"none\", \"coarse\", \"fine\", \"on-demand\", \"hover\",\n    \"interlace\", \"progressive\"\n  ], mediaValueKeywords = keySet(mediaValueKeywords_);\n\n  var propertyKeywords_ = [\n    \"align-content\", \"align-items\", \"align-self\", \"alignment-adjust\",\n    \"alignment-baseline\", \"anchor-point\", \"animation\", \"animation-delay\",\n    \"animation-direction\", \"animation-duration\", \"animation-fill-mode\",\n    \"animation-iteration-count\", \"animation-name\", \"animation-play-state\",\n    \"animation-timing-function\", \"appearance\", \"azimuth\", \"backface-visibility\",\n    \"background\", \"background-attachment\", \"background-blend-mode\", \"background-clip\",\n    \"background-color\", \"background-image\", \"background-origin\", \"background-position\",\n    \"background-repeat\", \"background-size\", \"baseline-shift\", \"binding\",\n    \"bleed\", \"bookmark-label\", \"bookmark-level\", \"bookmark-state\",\n    \"bookmark-target\", \"border\", \"border-bottom\", \"border-bottom-color\",\n    \"border-bottom-left-radius\", \"border-bottom-right-radius\",\n    \"border-bottom-style\", \"border-bottom-width\", \"border-collapse\",\n    \"border-color\", \"border-image\", \"border-image-outset\",\n    \"border-image-repeat\", \"border-image-slice\", \"border-image-source\",\n    \"border-image-width\", \"border-left\", \"border-left-color\",\n    \"border-left-style\", \"border-left-width\", \"border-radius\", \"border-right\",\n    \"border-right-color\", \"border-right-style\", \"border-right-width\",\n    \"border-spacing\", \"border-style\", \"border-top\", \"border-top-color\",\n    \"border-top-left-radius\", \"border-top-right-radius\", \"border-top-style\",\n    \"border-top-width\", \"border-width\", \"bottom\", \"box-decoration-break\",\n    \"box-shadow\", \"box-sizing\", \"break-after\", \"break-before\", \"break-inside\",\n    \"caption-side\", \"caret-color\", \"clear\", \"clip\", \"color\", \"color-profile\", \"column-count\",\n    \"column-fill\", \"column-gap\", \"column-rule\", \"column-rule-color\",\n    \"column-rule-style\", \"column-rule-width\", \"column-span\", \"column-width\",\n    \"columns\", \"content\", \"counter-increment\", \"counter-reset\", \"crop\", \"cue\",\n    \"cue-after\", \"cue-before\", \"cursor\", \"direction\", \"display\",\n    \"dominant-baseline\", \"drop-initial-after-adjust\",\n    \"drop-initial-after-align\", \"drop-initial-before-adjust\",\n    \"drop-initial-before-align\", \"drop-initial-size\", \"drop-initial-value\",\n    \"elevation\", \"empty-cells\", \"fit\", \"fit-position\", \"flex\", \"flex-basis\",\n    \"flex-direction\", \"flex-flow\", \"flex-grow\", \"flex-shrink\", \"flex-wrap\",\n    \"float\", \"float-offset\", \"flow-from\", \"flow-into\", \"font\", \"font-feature-settings\",\n    \"font-family\", \"font-kerning\", \"font-language-override\", \"font-size\", \"font-size-adjust\",\n    \"font-stretch\", \"font-style\", \"font-synthesis\", \"font-variant\",\n    \"font-variant-alternates\", \"font-variant-caps\", \"font-variant-east-asian\",\n    \"font-variant-ligatures\", \"font-variant-numeric\", \"font-variant-position\",\n    \"font-weight\", \"grid\", \"grid-area\", \"grid-auto-columns\", \"grid-auto-flow\",\n    \"grid-auto-rows\", \"grid-column\", \"grid-column-end\", \"grid-column-gap\",\n    \"grid-column-start\", \"grid-gap\", \"grid-row\", \"grid-row-end\", \"grid-row-gap\",\n    \"grid-row-start\", \"grid-template\", \"grid-template-areas\", \"grid-template-columns\",\n    \"grid-template-rows\", \"hanging-punctuation\", \"height\", \"hyphens\",\n    \"icon\", \"image-orientation\", \"image-rendering\", \"image-resolution\",\n    \"inline-box-align\", \"justify-content\", \"justify-items\", \"justify-self\", \"left\", \"letter-spacing\",\n    \"line-break\", \"line-height\", \"line-stacking\", \"line-stacking-ruby\",\n    \"line-stacking-shift\", \"line-stacking-strategy\", \"list-style\",\n    \"list-style-image\", \"list-style-position\", \"list-style-type\", \"margin\",\n    \"margin-bottom\", \"margin-left\", \"margin-right\", \"margin-top\",\n    \"marks\", \"marquee-direction\", \"marquee-loop\",\n    \"marquee-play-count\", \"marquee-speed\", \"marquee-style\", \"max-height\",\n    \"max-width\", \"min-height\", \"min-width\", \"move-to\", \"nav-down\", \"nav-index\",\n    \"nav-left\", \"nav-right\", \"nav-up\", \"object-fit\", \"object-position\",\n    \"opacity\", \"order\", \"orphans\", \"outline\",\n    \"outline-color\", \"outline-offset\", \"outline-style\", \"outline-width\",\n    \"overflow\", \"overflow-style\", \"overflow-wrap\", \"overflow-x\", \"overflow-y\",\n    \"padding\", \"padding-bottom\", \"padding-left\", \"padding-right\", \"padding-top\",\n    \"page\", \"page-break-after\", \"page-break-before\", \"page-break-inside\",\n    \"page-policy\", \"pause\", \"pause-after\", \"pause-before\", \"perspective\",\n    \"perspective-origin\", \"pitch\", \"pitch-range\", \"place-content\", \"place-items\", \"place-self\", \"play-during\", \"position\",\n    \"presentation-level\", \"punctuation-trim\", \"quotes\", \"region-break-after\",\n    \"region-break-before\", \"region-break-inside\", \"region-fragment\",\n    \"rendering-intent\", \"resize\", \"rest\", \"rest-after\", \"rest-before\", \"richness\",\n    \"right\", \"rotation\", \"rotation-point\", \"ruby-align\", \"ruby-overhang\",\n    \"ruby-position\", \"ruby-span\", \"shape-image-threshold\", \"shape-inside\", \"shape-margin\",\n    \"shape-outside\", \"size\", \"speak\", \"speak-as\", \"speak-header\",\n    \"speak-numeral\", \"speak-punctuation\", \"speech-rate\", \"stress\", \"string-set\",\n    \"tab-size\", \"table-layout\", \"target\", \"target-name\", \"target-new\",\n    \"target-position\", \"text-align\", \"text-align-last\", \"text-decoration\",\n    \"text-decoration-color\", \"text-decoration-line\", \"text-decoration-skip\",\n    \"text-decoration-style\", \"text-emphasis\", \"text-emphasis-color\",\n    \"text-emphasis-position\", \"text-emphasis-style\", \"text-height\",\n    \"text-indent\", \"text-justify\", \"text-outline\", \"text-overflow\", \"text-shadow\",\n    \"text-size-adjust\", \"text-space-collapse\", \"text-transform\", \"text-underline-position\",\n    \"text-wrap\", \"top\", \"transform\", \"transform-origin\", \"transform-style\",\n    \"transition\", \"transition-delay\", \"transition-duration\",\n    \"transition-property\", \"transition-timing-function\", \"unicode-bidi\",\n    \"user-select\", \"vertical-align\", \"visibility\", \"voice-balance\", \"voice-duration\",\n    \"voice-family\", \"voice-pitch\", \"voice-range\", \"voice-rate\", \"voice-stress\",\n    \"voice-volume\", \"volume\", \"white-space\", \"widows\", \"width\", \"will-change\", \"word-break\",\n    \"word-spacing\", \"word-wrap\", \"z-index\",\n    // SVG-specific\n    \"clip-path\", \"clip-rule\", \"mask\", \"enable-background\", \"filter\", \"flood-color\",\n    \"flood-opacity\", \"lighting-color\", \"stop-color\", \"stop-opacity\", \"pointer-events\",\n    \"color-interpolation\", \"color-interpolation-filters\",\n    \"color-rendering\", \"fill\", \"fill-opacity\", \"fill-rule\", \"image-rendering\",\n    \"marker\", \"marker-end\", \"marker-mid\", \"marker-start\", \"shape-rendering\", \"stroke\",\n    \"stroke-dasharray\", \"stroke-dashoffset\", \"stroke-linecap\", \"stroke-linejoin\",\n    \"stroke-miterlimit\", \"stroke-opacity\", \"stroke-width\", \"text-rendering\",\n    \"baseline-shift\", \"dominant-baseline\", \"glyph-orientation-horizontal\",\n    \"glyph-orientation-vertical\", \"text-anchor\", \"writing-mode\"\n  ], propertyKeywords = keySet(propertyKeywords_);\n\n  var nonStandardPropertyKeywords_ = [\n    \"scrollbar-arrow-color\", \"scrollbar-base-color\", \"scrollbar-dark-shadow-color\",\n    \"scrollbar-face-color\", \"scrollbar-highlight-color\", \"scrollbar-shadow-color\",\n    \"scrollbar-3d-light-color\", \"scrollbar-track-color\", \"shape-inside\",\n    \"searchfield-cancel-button\", \"searchfield-decoration\", \"searchfield-results-button\",\n    \"searchfield-results-decoration\", \"zoom\"\n  ], nonStandardPropertyKeywords = keySet(nonStandardPropertyKeywords_);\n\n  var fontProperties_ = [\n    \"font-family\", \"src\", \"unicode-range\", \"font-variant\", \"font-feature-settings\",\n    \"font-stretch\", \"font-weight\", \"font-style\"\n  ], fontProperties = keySet(fontProperties_);\n\n  var counterDescriptors_ = [\n    \"additive-symbols\", \"fallback\", \"negative\", \"pad\", \"prefix\", \"range\",\n    \"speak-as\", \"suffix\", \"symbols\", \"system\"\n  ], counterDescriptors = keySet(counterDescriptors_);\n\n  var colorKeywords_ = [\n    \"aliceblue\", \"antiquewhite\", \"aqua\", \"aquamarine\", \"azure\", \"beige\",\n    \"bisque\", \"black\", \"blanchedalmond\", \"blue\", \"blueviolet\", \"brown\",\n    \"burlywood\", \"cadetblue\", \"chartreuse\", \"chocolate\", \"coral\", \"cornflowerblue\",\n    \"cornsilk\", \"crimson\", \"cyan\", \"darkblue\", \"darkcyan\", \"darkgoldenrod\",\n    \"darkgray\", \"darkgreen\", \"darkkhaki\", \"darkmagenta\", \"darkolivegreen\",\n    \"darkorange\", \"darkorchid\", \"darkred\", \"darksalmon\", \"darkseagreen\",\n    \"darkslateblue\", \"darkslategray\", \"darkturquoise\", \"darkviolet\",\n    \"deeppink\", \"deepskyblue\", \"dimgray\", \"dodgerblue\", \"firebrick\",\n    \"floralwhite\", \"forestgreen\", \"fuchsia\", \"gainsboro\", \"ghostwhite\",\n    \"gold\", \"goldenrod\", \"gray\", \"grey\", \"green\", \"greenyellow\", \"honeydew\",\n    \"hotpink\", \"indianred\", \"indigo\", \"ivory\", \"khaki\", \"lavender\",\n    \"lavenderblush\", \"lawngreen\", \"lemonchiffon\", \"lightblue\", \"lightcoral\",\n    \"lightcyan\", \"lightgoldenrodyellow\", \"lightgray\", \"lightgreen\", \"lightpink\",\n    \"lightsalmon\", \"lightseagreen\", \"lightskyblue\", \"lightslategray\",\n    \"lightsteelblue\", \"lightyellow\", \"lime\", \"limegreen\", \"linen\", \"magenta\",\n    \"maroon\", \"mediumaquamarine\", \"mediumblue\", \"mediumorchid\", \"mediumpurple\",\n    \"mediumseagreen\", \"mediumslateblue\", \"mediumspringgreen\", \"mediumturquoise\",\n    \"mediumvioletred\", \"midnightblue\", \"mintcream\", \"mistyrose\", \"moccasin\",\n    \"navajowhite\", \"navy\", \"oldlace\", \"olive\", \"olivedrab\", \"orange\", \"orangered\",\n    \"orchid\", \"palegoldenrod\", \"palegreen\", \"paleturquoise\", \"palevioletred\",\n    \"papayawhip\", \"peachpuff\", \"peru\", \"pink\", \"plum\", \"powderblue\",\n    \"purple\", \"rebeccapurple\", \"red\", \"rosybrown\", \"royalblue\", \"saddlebrown\",\n    \"salmon\", \"sandybrown\", \"seagreen\", \"seashell\", \"sienna\", \"silver\", \"skyblue\",\n    \"slateblue\", \"slategray\", \"snow\", \"springgreen\", \"steelblue\", \"tan\",\n    \"teal\", \"thistle\", \"tomato\", \"turquoise\", \"violet\", \"wheat\", \"white\",\n    \"whitesmoke\", \"yellow\", \"yellowgreen\"\n  ], colorKeywords = keySet(colorKeywords_);\n\n  var valueKeywords_ = [\n    \"above\", \"absolute\", \"activeborder\", \"additive\", \"activecaption\", \"afar\",\n    \"after-white-space\", \"ahead\", \"alias\", \"all\", \"all-scroll\", \"alphabetic\", \"alternate\",\n    \"always\", \"amharic\", \"amharic-abegede\", \"antialiased\", \"appworkspace\",\n    \"arabic-indic\", \"armenian\", \"asterisks\", \"attr\", \"auto\", \"auto-flow\", \"avoid\", \"avoid-column\", \"avoid-page\",\n    \"avoid-region\", \"background\", \"backwards\", \"baseline\", \"below\", \"bidi-override\", \"binary\",\n    \"bengali\", \"blink\", \"block\", \"block-axis\", \"bold\", \"bolder\", \"border\", \"border-box\",\n    \"both\", \"bottom\", \"break\", \"break-all\", \"break-word\", \"bullets\", \"button\", \"button-bevel\",\n    \"buttonface\", \"buttonhighlight\", \"buttonshadow\", \"buttontext\", \"calc\", \"cambodian\",\n    \"capitalize\", \"caps-lock-indicator\", \"caption\", \"captiontext\", \"caret\",\n    \"cell\", \"center\", \"checkbox\", \"circle\", \"cjk-decimal\", \"cjk-earthly-branch\",\n    \"cjk-heavenly-stem\", \"cjk-ideographic\", \"clear\", \"clip\", \"close-quote\",\n    \"col-resize\", \"collapse\", \"color\", \"color-burn\", \"color-dodge\", \"column\", \"column-reverse\",\n    \"compact\", \"condensed\", \"contain\", \"content\", \"contents\",\n    \"content-box\", \"context-menu\", \"continuous\", \"copy\", \"counter\", \"counters\", \"cover\", \"crop\",\n    \"cross\", \"crosshair\", \"currentcolor\", \"cursive\", \"cyclic\", \"darken\", \"dashed\", \"decimal\",\n    \"decimal-leading-zero\", \"default\", \"default-button\", \"dense\", \"destination-atop\",\n    \"destination-in\", \"destination-out\", \"destination-over\", \"devanagari\", \"difference\",\n    \"disc\", \"discard\", \"disclosure-closed\", \"disclosure-open\", \"document\",\n    \"dot-dash\", \"dot-dot-dash\",\n    \"dotted\", \"double\", \"down\", \"e-resize\", \"ease\", \"ease-in\", \"ease-in-out\", \"ease-out\",\n    \"element\", \"ellipse\", \"ellipsis\", \"embed\", \"end\", \"ethiopic\", \"ethiopic-abegede\",\n    \"ethiopic-abegede-am-et\", \"ethiopic-abegede-gez\", \"ethiopic-abegede-ti-er\",\n    \"ethiopic-abegede-ti-et\", \"ethiopic-halehame-aa-er\",\n    \"ethiopic-halehame-aa-et\", \"ethiopic-halehame-am-et\",\n    \"ethiopic-halehame-gez\", \"ethiopic-halehame-om-et\",\n    \"ethiopic-halehame-sid-et\", \"ethiopic-halehame-so-et\",\n    \"ethiopic-halehame-ti-er\", \"ethiopic-halehame-ti-et\", \"ethiopic-halehame-tig\",\n    \"ethiopic-numeric\", \"ew-resize\", \"exclusion\", \"expanded\", \"extends\", \"extra-condensed\",\n    \"extra-expanded\", \"fantasy\", \"fast\", \"fill\", \"fixed\", \"flat\", \"flex\", \"flex-end\", \"flex-start\", \"footnotes\",\n    \"forwards\", \"from\", \"geometricPrecision\", \"georgian\", \"graytext\", \"grid\", \"groove\",\n    \"gujarati\", \"gurmukhi\", \"hand\", \"hangul\", \"hangul-consonant\", \"hard-light\", \"hebrew\",\n    \"help\", \"hidden\", \"hide\", \"higher\", \"highlight\", \"highlighttext\",\n    \"hiragana\", \"hiragana-iroha\", \"horizontal\", \"hsl\", \"hsla\", \"hue\", \"icon\", \"ignore\",\n    \"inactiveborder\", \"inactivecaption\", \"inactivecaptiontext\", \"infinite\",\n    \"infobackground\", \"infotext\", \"inherit\", \"initial\", \"inline\", \"inline-axis\",\n    \"inline-block\", \"inline-flex\", \"inline-grid\", \"inline-table\", \"inset\", \"inside\", \"intrinsic\", \"invert\",\n    \"italic\", \"japanese-formal\", \"japanese-informal\", \"justify\", \"kannada\",\n    \"katakana\", \"katakana-iroha\", \"keep-all\", \"khmer\",\n    \"korean-hangul-formal\", \"korean-hanja-formal\", \"korean-hanja-informal\",\n    \"landscape\", \"lao\", \"large\", \"larger\", \"left\", \"level\", \"lighter\", \"lighten\",\n    \"line-through\", \"linear\", \"linear-gradient\", \"lines\", \"list-item\", \"listbox\", \"listitem\",\n    \"local\", \"logical\", \"loud\", \"lower\", \"lower-alpha\", \"lower-armenian\",\n    \"lower-greek\", \"lower-hexadecimal\", \"lower-latin\", \"lower-norwegian\",\n    \"lower-roman\", \"lowercase\", \"ltr\", \"luminosity\", \"malayalam\", \"match\", \"matrix\", \"matrix3d\",\n    \"media-controls-background\", \"media-current-time-display\",\n    \"media-fullscreen-button\", \"media-mute-button\", \"media-play-button\",\n    \"media-return-to-realtime-button\", \"media-rewind-button\",\n    \"media-seek-back-button\", \"media-seek-forward-button\", \"media-slider\",\n    \"media-sliderthumb\", \"media-time-remaining-display\", \"media-volume-slider\",\n    \"media-volume-slider-container\", \"media-volume-sliderthumb\", \"medium\",\n    \"menu\", \"menulist\", \"menulist-button\", \"menulist-text\",\n    \"menulist-textfield\", \"menutext\", \"message-box\", \"middle\", \"min-intrinsic\",\n    \"mix\", \"mongolian\", \"monospace\", \"move\", \"multiple\", \"multiply\", \"myanmar\", \"n-resize\",\n    \"narrower\", \"ne-resize\", \"nesw-resize\", \"no-close-quote\", \"no-drop\",\n    \"no-open-quote\", \"no-repeat\", \"none\", \"normal\", \"not-allowed\", \"nowrap\",\n    \"ns-resize\", \"numbers\", \"numeric\", \"nw-resize\", \"nwse-resize\", \"oblique\", \"octal\", \"opacity\", \"open-quote\",\n    \"optimizeLegibility\", \"optimizeSpeed\", \"oriya\", \"oromo\", \"outset\",\n    \"outside\", \"outside-shape\", \"overlay\", \"overline\", \"padding\", \"padding-box\",\n    \"painted\", \"page\", \"paused\", \"persian\", \"perspective\", \"plus-darker\", \"plus-lighter\",\n    \"pointer\", \"polygon\", \"portrait\", \"pre\", \"pre-line\", \"pre-wrap\", \"preserve-3d\",\n    \"progress\", \"push-button\", \"radial-gradient\", \"radio\", \"read-only\",\n    \"read-write\", \"read-write-plaintext-only\", \"rectangle\", \"region\",\n    \"relative\", \"repeat\", \"repeating-linear-gradient\",\n    \"repeating-radial-gradient\", \"repeat-x\", \"repeat-y\", \"reset\", \"reverse\",\n    \"rgb\", \"rgba\", \"ridge\", \"right\", \"rotate\", \"rotate3d\", \"rotateX\", \"rotateY\",\n    \"rotateZ\", \"round\", \"row\", \"row-resize\", \"row-reverse\", \"rtl\", \"run-in\", \"running\",\n    \"s-resize\", \"sans-serif\", \"saturation\", \"scale\", \"scale3d\", \"scaleX\", \"scaleY\", \"scaleZ\", \"screen\",\n    \"scroll\", \"scrollbar\", \"scroll-position\", \"se-resize\", \"searchfield\",\n    \"searchfield-cancel-button\", \"searchfield-decoration\",\n    \"searchfield-results-button\", \"searchfield-results-decoration\", \"self-start\", \"self-end\",\n    \"semi-condensed\", \"semi-expanded\", \"separate\", \"serif\", \"show\", \"sidama\",\n    \"simp-chinese-formal\", \"simp-chinese-informal\", \"single\",\n    \"skew\", \"skewX\", \"skewY\", \"skip-white-space\", \"slide\", \"slider-horizontal\",\n    \"slider-vertical\", \"sliderthumb-horizontal\", \"sliderthumb-vertical\", \"slow\",\n    \"small\", \"small-caps\", \"small-caption\", \"smaller\", \"soft-light\", \"solid\", \"somali\",\n    \"source-atop\", \"source-in\", \"source-out\", \"source-over\", \"space\", \"space-around\", \"space-between\", \"space-evenly\", \"spell-out\", \"square\",\n    \"square-button\", \"start\", \"static\", \"status-bar\", \"stretch\", \"stroke\", \"sub\",\n    \"subpixel-antialiased\", \"super\", \"sw-resize\", \"symbolic\", \"symbols\", \"system-ui\", \"table\",\n    \"table-caption\", \"table-cell\", \"table-column\", \"table-column-group\",\n    \"table-footer-group\", \"table-header-group\", \"table-row\", \"table-row-group\",\n    \"tamil\",\n    \"telugu\", \"text\", \"text-bottom\", \"text-top\", \"textarea\", \"textfield\", \"thai\",\n    \"thick\", \"thin\", \"threeddarkshadow\", \"threedface\", \"threedhighlight\",\n    \"threedlightshadow\", \"threedshadow\", \"tibetan\", \"tigre\", \"tigrinya-er\",\n    \"tigrinya-er-abegede\", \"tigrinya-et\", \"tigrinya-et-abegede\", \"to\", \"top\",\n    \"trad-chinese-formal\", \"trad-chinese-informal\", \"transform\",\n    \"translate\", \"translate3d\", \"translateX\", \"translateY\", \"translateZ\",\n    \"transparent\", \"ultra-condensed\", \"ultra-expanded\", \"underline\", \"unset\", \"up\",\n    \"upper-alpha\", \"upper-armenian\", \"upper-greek\", \"upper-hexadecimal\",\n    \"upper-latin\", \"upper-norwegian\", \"upper-roman\", \"uppercase\", \"urdu\", \"url\",\n    \"var\", \"vertical\", \"vertical-text\", \"visible\", \"visibleFill\", \"visiblePainted\",\n    \"visibleStroke\", \"visual\", \"w-resize\", \"wait\", \"wave\", \"wider\",\n    \"window\", \"windowframe\", \"windowtext\", \"words\", \"wrap\", \"wrap-reverse\", \"x-large\", \"x-small\", \"xor\",\n    \"xx-large\", \"xx-small\"\n  ], valueKeywords = keySet(valueKeywords_);\n\n  var allWords = documentTypes_.concat(mediaTypes_).concat(mediaFeatures_).concat(mediaValueKeywords_)\n    .concat(propertyKeywords_).concat(nonStandardPropertyKeywords_).concat(colorKeywords_)\n    .concat(valueKeywords_);\n  CodeMirror.registerHelper(\"hintWords\", \"css\", allWords);\n\n  function tokenCComment(stream, state) {\n    var maybeEnd = false, ch;\n    while ((ch = stream.next()) != null) {\n      if (maybeEnd && ch == \"/\") {\n        state.tokenize = null;\n        break;\n      }\n      maybeEnd = (ch == \"*\");\n    }\n    return [\"comment\", \"comment\"];\n  }\n\n  CodeMirror.defineMIME(\"text/css\", {\n    documentTypes: documentTypes,\n    mediaTypes: mediaTypes,\n    mediaFeatures: mediaFeatures,\n    mediaValueKeywords: mediaValueKeywords,\n    propertyKeywords: propertyKeywords,\n    nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n    fontProperties: fontProperties,\n    counterDescriptors: counterDescriptors,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    tokenHooks: {\n      \"/\": function(stream, state) {\n        if (!stream.eat(\"*\")) return false;\n        state.tokenize = tokenCComment;\n        return tokenCComment(stream, state);\n      }\n    },\n    name: \"css\"\n  });\n\n  CodeMirror.defineMIME(\"text/x-scss\", {\n    mediaTypes: mediaTypes,\n    mediaFeatures: mediaFeatures,\n    mediaValueKeywords: mediaValueKeywords,\n    propertyKeywords: propertyKeywords,\n    nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    fontProperties: fontProperties,\n    allowNested: true,\n    lineComment: \"//\",\n    tokenHooks: {\n      \"/\": function(stream, state) {\n        if (stream.eat(\"/\")) {\n          stream.skipToEnd();\n          return [\"comment\", \"comment\"];\n        } else if (stream.eat(\"*\")) {\n          state.tokenize = tokenCComment;\n          return tokenCComment(stream, state);\n        } else {\n          return [\"operator\", \"operator\"];\n        }\n      },\n      \":\": function(stream) {\n        if (stream.match(/\\s*\\{/, false))\n          return [null, null]\n        return false;\n      },\n      \"$\": function(stream) {\n        stream.match(/^[\\w-]+/);\n        if (stream.match(/^\\s*:/, false))\n          return [\"variable-2\", \"variable-definition\"];\n        return [\"variable-2\", \"variable\"];\n      },\n      \"#\": function(stream) {\n        if (!stream.eat(\"{\")) return false;\n        return [null, \"interpolation\"];\n      }\n    },\n    name: \"css\",\n    helperType: \"scss\"\n  });\n\n  CodeMirror.defineMIME(\"text/x-less\", {\n    mediaTypes: mediaTypes,\n    mediaFeatures: mediaFeatures,\n    mediaValueKeywords: mediaValueKeywords,\n    propertyKeywords: propertyKeywords,\n    nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    fontProperties: fontProperties,\n    allowNested: true,\n    lineComment: \"//\",\n    tokenHooks: {\n      \"/\": function(stream, state) {\n        if (stream.eat(\"/\")) {\n          stream.skipToEnd();\n          return [\"comment\", \"comment\"];\n        } else if (stream.eat(\"*\")) {\n          state.tokenize = tokenCComment;\n          return tokenCComment(stream, state);\n        } else {\n          return [\"operator\", \"operator\"];\n        }\n      },\n      \"@\": function(stream) {\n        if (stream.eat(\"{\")) return [null, \"interpolation\"];\n        if (stream.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\\b/i, false)) return false;\n        stream.eatWhile(/[\\w\\\\\\-]/);\n        if (stream.match(/^\\s*:/, false))\n          return [\"variable-2\", \"variable-definition\"];\n        return [\"variable-2\", \"variable\"];\n      },\n      \"&\": function() {\n        return [\"atom\", \"atom\"];\n      }\n    },\n    name: \"css\",\n    helperType: \"less\"\n  });\n\n  CodeMirror.defineMIME(\"text/x-gss\", {\n    documentTypes: documentTypes,\n    mediaTypes: mediaTypes,\n    mediaFeatures: mediaFeatures,\n    propertyKeywords: propertyKeywords,\n    nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n    fontProperties: fontProperties,\n    counterDescriptors: counterDescriptors,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    supportsAtComponent: true,\n    tokenHooks: {\n      \"/\": function(stream, state) {\n        if (!stream.eat(\"*\")) return false;\n        state.tokenize = tokenCComment;\n        return tokenCComment(stream, state);\n      }\n    },\n    name: \"css\",\n    helperType: \"gss\"\n  });\n\n});\n","Magezon_Builder/js/directives/colorPicker.js":"define([\n\t'jquery',\n\t'angular',\n    'Magezon_Builder/js/ui/form/element/color-picker-palette'\n], function ($, angular, palette) {\n\n\tvar directive = function(magezonBuilderUrl, $timeout, $rootScope) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\trequire: \"ngModel\",\n\t\t\tscope: {\n\t\t\t\tconfig: '='\n\t\t\t},\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/directives/color.html');\n\t\t\t},\n\t\t\tlink: function(scope, element, attrs, ngModel) {\n\t\t\t\tvar initColorPicker = function() {\n\t\t\t\t\tvar config = {\n\t\t\t\t\t\tcontainerClassName: 'mgz-spectrum',\n\t\t                chooseText: 'Apply',\n\t\t                cancelText: 'Cancel',\n\t\t                maxSelectionSize: 8,\n\t\t                clickoutFiresChange: true,\n\t\t                allowEmpty: true,\n\t\t                localStorageKey: 'magezon.spectrum',\n\t\t                palette: palette,\n\t\t                showInput: true,\n\t\t                showInitial: false,\n\t\t                showPalette: true,\n\t\t                showAlpha: true,\n\t\t                showSelectionPalette: true,\n\t\t                preferredFormat: 'hex',\n\t\t                color: ngModel.$viewValue,\n\t\t                hide : function(c) {\n\t\t                \t$timeout(function() {\n\t\t                \t\tif (c) ngModel.$setViewValue(c.toString());\n\t\t                \t});\n\t\t                }\n\t\t            };\n\t\t            config = angular.extend(config, scope.config);\n\t\t            element.spectrum(config);\n\t\t        }\n\t            setTimeout(function() {\n\t            \tinitColorPicker();\n\t            });\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/directives/navigator.js":"define([\n\t'angular'\n], function (angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\telement: '='\n\t\t\t},\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/navigator_item.html')\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/directives/navigatorProfile.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\telement: '='\n\t\t\t},\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/navigator/element/profile.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar parent = $controller('baseController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t\t$scope.listVisible = true;\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/directives/elementActions.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getViewFileUrl('Magezon_Builder/js/templates/directives/element-actions.html');\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/directives/magezonBuilder.js":"define([\n\t'jquery',\n\t'waypoints'\n], function ($) {\n\n\tvar magezonBuilderDir = function(profileManager, $timeout, magezonBuilderUrl, $templateRequest) {\n\t\treturn {\n\t\t\tscope: {\n\t\t\t\tprofile: '='\n\t\t\t},\n    \t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder.html')\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope, magezonBuilderModal, historyManager, magezonBuilderService, magezonBuilderConfig) {\n\t\t\t\t$rootScope.builderId = magezonBuilderService.getUniqueId();\n\n\t\t\t\t$scope.$on('openElementsModal', function(event) {\n\t\t\t\t\t$scope.openModal();\n\t\t\t\t});\n\n\t\t\t\t$scope.openModal = function() {\n\t\t\t\t\tmagezonBuilderModal.open('elements').result.then(function() {}, function() {\n\t\t\t\t\t\tmagezonBuilderModal.setElement(null);\n\t\t\t\t\t\tmagezonBuilderModal.setAction(null);\n\t\t\t\t\t\tmagezonBuilderModal.setData(null);\n\t\t\t\t\t\tmagezonBuilderModal.setOpenModal(null);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t$rootScope.$on('loadStyles', function(e, draggingElement) {\n\t\t\t\t\t$scope.loadStyles();\n\t\t\t\t});\n\n\t\t        $scope.loadStyles = function() {\n\t\t        \tif ($rootScope.builderConfig.loadStylesUrl && $rootScope.profile.elements && $rootScope.profile.elements.length) {\n\t\t        \t\tmagezonBuilderService.post($rootScope.builderConfig.loadStylesUrl, {\n\t\t        \t\t\tprofile: profileManager.toString()\n\t\t        \t\t}, true, function(res) {\n\t\t        \t\t\tif (res.message) {\n\t\t        \t\t\t\talert(res.message);\n\t\t        \t\t\t}\n\t\t        \t\t\tif (res.status) {\n\t\t        \t\t\t\t$('#' + $rootScope.builderConfig.targetId + '-styles').html(res.html);\n\t\t        \t\t\t}\n\t\t        \t\t});\n\t\t\t        }\n\t\t        }\n\n\t\t        $templateRequest(magezonBuilderUrl.getViewFileUrl('Magezon_Builder/js/templates/navigator/element/list.html')).then(function(html) {\n\t\t        \t$timeout(function() {\n\t\t\t\t\t\t$('.' + $rootScope.builderConfig.htmlId + '-spinner').remove();\n\t\t\t\t\t\tif (profileManager.getKey()) {\n\t\t\t\t\t\t\tif (magezonBuilderService.isJSON(profileManager.getContent())) {\n\t\t\t\t\t\t\t\t$('.' + $rootScope.rootId).addClass('mgz-deactive-builder');\n\t\t\t\t\t\t\t\t$('.' + $rootScope.rootId).removeClass('mgz-active-builder');\n\t\t\t\t\t\t\t\t$rootScope.$broadcast('importShortcode');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (profileManager.getContent()) {\n\t\t\t\t\t\t\t\t\t$('.' + $rootScope.rootId).addClass('mgz-active-builder');\n\t\t\t\t\t\t\t\t\t$('.' + $rootScope.rootId).removeClass('mgz-deactive-builder');\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t$('.' + $rootScope.rootId).addClass('mgz-deactive-builder');\n\t\t\t\t\t\t\t\t\t$('.' + $rootScope.rootId).removeClass('mgz-active-builder');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$rootScope.$broadcast('importShortcode');\n\t\t\t\t\t\t}\n\t\t\t        }, 100);\n\t\t        });\n\n\t\t        $scope.$on('addElement', function(e, item) {\n\t\t        \tvar elem, action, openModal, data, type;\n\t\t        \tif (item && item.hasOwnProperty('elem')) elem = item.elem;\n\t\t        \tif (item && item.hasOwnProperty('action')) action = item.action;\n\t\t        \tif (item && item.hasOwnProperty('openModal')) openModal = item.openModal;\n\t\t        \tif (item && item.hasOwnProperty('data')) data = item.data;\n\t\t        \tif (item && item.hasOwnProperty('type')) type = item.type;\n\t\t        \tif (type) {\n\t\t        \t\t$rootScope.$broadcast('addNewElment', {\n\t\t\t\t\t\t\telem: elem,\n\t\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\t\taction: 'append',\n\t\t\t\t\t\t\topenModal: openModal,\n\t\t\t\t\t\t\tdata: data\n\t\t\t\t\t\t});\n\t\t        \t} else {\n\t\t        \t\tif (elem) magezonBuilderModal.setElement(elem);\n\t\t\t\t\t\tif (action) magezonBuilderModal.setAction(action);\n\t\t\t\t\t\tif (openModal) magezonBuilderModal.setOpenModal(openModal);\n\t\t\t\t\t\tif (data) magezonBuilderModal.setData(data);\n\t\t\t\t\t\t$rootScope.$broadcast('openElementsModal');\n\t\t        \t}\n\t\t\t\t});\n\n\t\t\t\tvar loadAnimation = function() {\n\t\t\t\t\tif ($(\".mgz-animated:not(.mgz_start_animation)\").length) {\n\t\t\t\t\t\t$(\".mgz-animated:not(.mgz_start_animation)\").waypoint(function() {\n\t\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\t\tvar delayTime = 0;\n\t\t\t\t\t\t\tif ($(this.element).data('animation-delay')) {\n\t\t\t\t\t\t\t\tdelayTime = $(this.element).data('animation-delay');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar durationTime = 0;\n\t\t\t\t\t\t\tif ($(this.element).data('animation-duration')) {\n\t\t\t\t\t\t\t\tdurationTime = $(this.element).data('animation-duration');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (durationTime) $(self.element).css(\"animation-duration\", durationTime + 's');\n\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t$(self.element).addClass(\"mgz_start_animation animated\")\n\t\t\t\t\t\t\t}, delayTime * 1000);\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\toffset: \"85%\"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$scope.$on('editedElement', function(e, elem) {\n\t\t\t\t\tloadAnimation();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\treturn magezonBuilderDir;\n});","Magezon_Builder/js/directives/elementResizable.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getViewFileUrl('Magezon_Builder/js/templates/directives/element-resizable.html');\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/directives/resizable.js":"define([\n    'jquery'\n], function ($) {\n\n\tvar resizableDir = function(magezonBuilderService, $rootScope) {\n\t\treturn {\n            restrict: 'AE',\n            scope: {\n            \trElement: '=',\n                rDirections: '=',\n                rCenteredX: '=',\n                rCenteredY: '=',\n                rWidth: '=',\n                rHeight: '=',\n                rFlex: '=',\n                rGrabber: '@',\n                rDisabled: '@'\n            },\n            link: function(scope, element, attr) {\n                scope.sizes = [];\n                magezonBuilderService.getBuilderConfig('resizableSizes', function(resizableSizes) {\n                    scope.sizes = resizableSizes;\n                });\n\n            \tscope.currentSize = scope.sizes[scope.sizes.length-1];\n\n                var flexBasis = 'flexBasis' in document.documentElement.style ? 'flexBasis' :\n                    'webkitFlexBasis' in document.documentElement.style ? 'webkitFlexBasis' :\n                    'msFlexPreferredSize' in document.documentElement.style ? 'msFlexPreferredSize' : 'flexBasis';\n\n                // register watchers on width and height attributes if they are set\n                scope.$watch('rWidth', function(value){\n                    element[0].style.width = scope.rWidth + 'px';\n                });\n                scope.$watch('rHeight', function(value){\n                    element[0].style.height = scope.rHeight + 'px';\n                });\n\n                element.addClass('resizable');\n\n                var style = window.getComputedStyle(element[0], null),\n                    w,\n                    h,\n                    dir = scope.rDirections,\n                    vx = scope.rCenteredX ? 2 : 1, // if centered double velocity\n                    vy = scope.rCenteredY ? 2 : 1, // if centered double velocity\n                    inner = scope.rGrabber ? scope.rGrabber : '<span></span>',\n                    start,\n                    dragDir,\n                    axis,\n                    info = {};\n\n                var oldSize;\n\n                var updateInfo = function(e) {\n                    info.width = false; info.height = false;\n                    if(axis === 'x')\n                        info.width = parseInt(element[0].style[scope.rFlex ? flexBasis : 'width']);\n                    else\n                        info.height = parseInt(element[0].style[scope.rFlex ? flexBasis : 'height']);\n                    info.id = element[0].id;\n                    info.evt = e;\n\n                    var size = scope.currentSize;\n                    if (size && oldSize!=size) {\n                        magezonBuilderService.setResponiveValue(scope.rElement, 'size', size['value']);\n                        scope.$parent.$parent.$digest();\n                    \toldSize = size;\n                \t\telement[0].style['width'] = '';\n                \t\telement.parent().children('.mgz-column-resize').html(size.shortLabel);\n                        $rootScope.$broadcast('exportShortcode');\n\t                }\n                };\n\n                var getSize = function(percent) {\n\n                \tif (percent <= scope.sizes[0]['percent']) {\n                \t\treturn scope.sizes[0];\n                \t}\n\n                \tif (percent >= scope.sizes[scope.sizes.length-1]['percent']) {\n                \t\treturn scope.sizes[scope.sizes.length-1];\n                \t}\n\n                    scope.sizes.sort(function(a,b){\n                        return a['percent'] - b['percent'];\n                    });\n\n                    var newSizes = [];\n                    var size, a, b;\n                \tfor (var i = 0; i < scope.sizes.length; i++) {\n                        var row = scope.sizes[i];\n\n                        if (!size) {\n                            size = scope.sizes[i];\n                            continue;\n                        }\n\n                        a = Math.abs(percent - scope.sizes[i]['percent']);\n                        b = Math.abs(percent - size['percent']);\n\n                        if (a < b) {\n                            size = scope.sizes[i];\n                        }\n                \t}\n\n                    if (size) {\n                        return size;\n                    }\n\n                \treturn scope.currentSize;\n                }\n\n                var dragging = function(e) {\n                    var _width       = $(element).width();\n                    var _parentWidth = $(element).parents('.mgz-element-collection').eq(1).width() + 30;\n                    if (isNaN(_width) || !_width) return;\n                \tif (_width > _parentWidth) {\n\t\t\t\t\t\tpercent = 100;\n                \t} else {\n\t\t\t\t\t\tvar prop, offset = axis === 'x' ? start - e.clientX : start - e.clientY;\n\t\t\t\t\t\tvar percent      = (_width / _parentWidth) * 100;\n\t                }\n\t\t\t\t\tscope.currentSize = getSize(percent);\n                    switch(dragDir) {\n                        case 'right':\n                            prop = scope.rFlex ? flexBasis : 'width';\n                            element[0].style[prop] = (w - offset) + 'px';\n                            break;\n                        case 'left':\n                            prop = scope.rFlex ? flexBasis : 'width';\n                            element[0].style[prop] = w + (offset * vx) + 'px';\n                            break;\n                    }\n                    updateInfo(e);\n                };\n\n                var dragEnd = function(e) {\n                \telement.parent().removeClass('mgz-resizing');\n                \telement[0].style['width'] = '';\n                    updateInfo();\n                    document.removeEventListener('mouseup', dragEnd, false);\n                    document.removeEventListener('mousemove', dragging, false);\n                    element.removeClass('no-transition');\n                };\n                var dragStart = function(e, direction) {\n                    var width = element.closest('.mgz-element').outerWidth();\n\t\t\t\t\telement.parent().addClass('mgz-resizing');\n                    element.width(width);\n\t\t\t\t\tdragDir = direction;\n\t\t\t\t\taxis    = dragDir === 'left' || dragDir === 'right' ? 'x' : 'y';\n\t\t\t\t\tstart   = axis === 'x' ? e.clientX : e.clientY;\n                    w = parseInt(style.getPropertyValue('width'));\n                    h = parseInt(style.getPropertyValue('height'));\n\n                    //prevent transition while dragging\n                    element.addClass('no-transition');\n\n                    document.addEventListener('mouseup', dragEnd, false);\n                    document.addEventListener('mousemove', dragging, false);\n\n                    // Disable highlighting while dragging\n                    if(e.stopPropagation) e.stopPropagation();\n                    if(e.preventDefault) e.preventDefault();\n                    e.cancelBubble = true;\n                    e.returnValue = false;\n                    updateInfo(e);\n                };\n\n                dir.forEach(function (direction) {\n                    var grabber = document.createElement('div');\n\n                    // add class for styling purposes\n                    grabber.setAttribute('class', 'mgz-resize');\n                    grabber.innerHTML = inner;\n                    element[0].appendChild(grabber);\n                    grabber.ondragstart = function() { return false; };\n                    grabber.addEventListener('mousedown', function(e) {\n                        var disabled = (scope.rDisabled === 'true');\n                        if (!disabled && e.which === 1) {\n                            // left mouse click\n                            dragStart(e, direction);\n                        }\n                    }, false);\n\n                    if(!element.parent().children('.mgz-column-resize').length) {\n                    \telement.parent().append('<div class=\"mgz-column-resize\"></div>');\n                    }\n                });\n            }\n        };\n\t};\n\n\treturn resizableDir;\n});","Magezon_Builder/js/directives/modalElement.js":"define([\n\t'angular'\n], function (angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\tscope: {\n\t\t\t\telement: '=element'\n\t\t\t},\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/modal/elements_element.html')\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/directives/builderDirectiveList.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar directive = function(magezonBuilderService, $compile) {\n\t\treturn {\n\t\t\tscope: {\n\t\t\t\tgroup: '@',\n\t\t\t\ttag: '@',\n\t\t\t\thtmlTag: '@',\n\t\t\t\telement: '=?'\n\t\t\t},\n\t\t\tlink: function(scope, element, attrs) {\n\t\t\t\tvar parent    = scope.$parent;\n\t\t\t\tvar htmlTag   = scope.htmlTag ? scope.htmlTag : 'div';\n\t\t\t\tvar deferreds = [];\n\t\t\t\tvar items     = {};\n\t\t\t\tangular.forEach(magezonBuilderService.directives, function(directive, index) {\n\t\t\t\t\tvar tags = directive.tag ? directive.tag : '';\n\t\t\t\t\tvar groups  = directive.group ? directive.group : '';\n\t\t\t\t\tif (angular.isString(tags)) tags = tags.split(',');\n\t\t\t\t\tif (angular.isObject(tags)) tags = Object.values(tags);\n\t\t\t\t\tif (angular.isString(groups)) groups = groups.split(',');\n\t\t\t\t\tif (angular.isObject(groups)) groups = Object.values(groups);\n\t\t\t\t\tif ($.inArray(scope.tag, tags) !== -1 || $.inArray(scope.group, groups) !== -1) {\n\t\t\t\t\t\tif (!directive.hasOwnProperty('disabled') || !directive.disabled) {\n\t\t\t\t\t\t\tvar additionalClasses = directive.additionalClasses ? ' ' + directive.additionalClasses : '';\n\t\t\t\t\t\t\tadditionalClasses += ' magezon-builder-directive-' + directive.type;\n\t\t\t\t\t\t\tif (directive.group) additionalClasses += ' magezon-builder-directive-group-' + directive.group;\n\t\t\t\t\t\t\tif (directive['element']) {\n\t\t\t\t\t\t\t\tvar deferred;\n\t\t\t\t\t\t\t\tdeferred = $.Deferred();\n\t\t\t\t\t\t\t\tdeferreds.push(deferred);\n\t\t\t\t\t\t\t\trequire([directive['element']], function(Directive) {\n\t\t\t\t\t\t\t\t\tvar html = '<' + htmlTag + ' class=\"magezon-builder-directive' + additionalClasses + '\" ' + (directive.templateUrl ? 'templateUrl=\"' + directive.templateUrl + '\"' : '') + ' element=\"element\" dynamic-directive element-name=\"mgz-directive-' + directive.type + '\" sort-order=\"' + (directive['sortOrder'] ? directive['sortOrder'] : 0) + '\"></' + htmlTag + '>';\n\t\t\t\t\t\t\t\t\titems[index] = html;\n\t\t\t\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvar html = '<' + htmlTag + ' class=\"magezon-builder-directive' + additionalClasses + '\" ' + (directive.templateUrl ? 'templateUrl=\"' + directive.templateUrl + '\"' : '') + ' element=\"element\" dynamic-directive element-name=\"mgz-directive-' + directive.type + '\" sort-order=\"' + (directive['sortOrder'] ? directive['sortOrder'] : 0) + '\"></' + htmlTag + '>';\n\t\t\t\t\t\t\t\titems[index] = html;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t$.when.apply($, deferreds).done(function () {\n\t\t\t\t\tif (!Object.keys(items).length) element.remove();\n\t\t\t\t\tangular.forEach(items, function(item) {\n\t\t\t\t\t\tif (parent.$parent) {\n\t\t\t\t\t\t\tvar template = angular.element(item);\n\t\t\t\t\t\t\tvar newScope = parent.$parent.$new(true);\n\t\t\t\t\t\t\tnewScope.element = scope.element;\n\t\t\t\t\t\t\tvar html = $compile(template)(newScope);\n\t\t\t\t\t\t\telement.append(html);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\treturn directive;\n});","Magezon_Builder/js/directives/tooltip.js":"define([\n\t'jquery'\n\t], function ($) {\n\n\t\t// https://embed.plnkr.co/plunk/amkxZc\n\t\tvar directive = function($compile, $timeout) {\n\t\t\tvar template =  '<div class=\"mgz-tooltip tooltip {{placement}}\" ng-class=\"{ in: isOpen, fade: animation() }\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\" ng-bind=\"tooltipTitle\"></div></div>';\n\n\t\t\treturn {\n\t\t\t\tscope: { tooltipTitle: '@mgzTooltip', placement: '@tooltipPlacement', animation: '&tooltipAnimation' },\n\t\t\t\tlink: function ( scope, element, attr ) {\n\t\t\t\t\tvar tooltip = $compile( template )( scope ), \n\t\t\t\t\ttransitionTimeout;\n\t\t\t\t\tvar hoverd;\n\n      \t\t\t\t// Calculate the current position and size of the directive element.\n      \t\t\t\tfunction getPosition() {\n      \t\t\t\t\treturn {\n      \t\t\t\t\t\twidth: element.prop( 'offsetWidth' ),\n      \t\t\t\t\t\theight: element.prop( 'offsetHeight' ),\n      \t\t\t\t\t\ttop: element.prop( 'offsetTop' ),\n      \t\t\t\t\t\tleft: element.prop( 'offsetLeft' )\n      \t\t\t\t\t};\n      \t\t\t\t}\n\n      \t\t\t\t// Show the tooltip popup element.\n      \t\t\t\tfunction show() {\n      \t\t\t\t\tvar position,\n      \t\t\t\t\tttWidth,\n      \t\t\t\t\tttHeight,\n      \t\t\t\t\tttPosition;\n\n        \t\t\t\t// If no placement was provided, default to 'top'.\n        \t\t\t\tscope.placement = scope.placement || 'top';\n\n\t\t\t\t        // If there is a pending remove transition, we must cancel it, lest the\n\t\t\t\t        // toolip be mysteriously removed.\n\t\t\t\t        if ( transitionTimeout ) $timeout.cancel( transitionTimeout );\n\n\t\t\t\t        // Lazy compile the tooltip element\n\t\t\t\t        // FIXME: For some reason, this does *not* always work correctly on the \n\t\t\t\t        // *first* run, but does so on all subsequent runs.\n\t\t\t\t        //tooltip = tooltip ||  $compile( template )( scope );\n\n        \t\t\t\t// Set the initial positioning.\n        \t\t\t\ttooltip.css({ top: 0, left: 0, display: 'block' });\n\n\t\t\t\t        // Now we add it to the DOM because need some info about it. But it's not \n\t\t\t\t        // visible yet anyway.\n\t\t\t\t        element.after( tooltip );\n\n\t\t\t\t        // Get the position of the directive element.\n\t\t\t\t        position = getPosition();\n\t\t\t\t        \n\t\t\t\t        // Get the height and width of the tooltip so we can center it.\n\t\t\t\t        ttWidth = tooltip.prop( 'offsetWidth' );\n\t\t\t\t        ttHeight = tooltip.prop( 'offsetHeight' );\n\n\t\t\t\t        // Calculate the tooltip's top and left coordinates to center it with\n\t\t\t\t        // this directive.\n\t\t\t\t        switch ( scope.placement ) {\n\t\t\t\t        \tcase 'right':\n\t\t\t\t        \tttPosition = {\n\t\t\t\t        \t\ttop: (position.top + position.height / 2 - ttHeight / 2) + 'px',\n\t\t\t\t        \t\tleft: (position.left + position.width) + 'px'\n\t\t\t\t        \t};\n\t\t\t\t        \tbreak;\n\t\t\t\t        \tcase 'bottom':\n\t\t\t\t        \tttPosition = {\n\t\t\t\t        \t\ttop: (position.top + position.height) + 'px',\n\t\t\t\t        \t\tleft: (position.left + position.width / 2 - ttWidth / 2) + 'px'\n\t\t\t\t        \t};\n\t\t\t\t        \tbreak;\n\t\t\t\t        \tcase 'left':\n\t\t\t\t        \tttPosition = {\n\t\t\t\t        \t\ttop: (position.top + position.height / 2 - ttHeight / 2) + 'px',\n\t\t\t\t        \t\tleft: (position.left - ttWidth) + 'px'\n\t\t\t\t        \t};\n\t\t\t\t        \tbreak;\n\t\t\t\t        \tdefault:\n\t\t\t\t        \tttPosition = {\n\t\t\t\t        \t\ttop: (position.top - ttHeight) + 'px',\n\t\t\t\t        \t\tleft: (position.left + position.width / 2 - ttWidth / 2) + 'px'\n\t\t\t\t        \t};\n\t\t\t\t        \tbreak;\n\t\t\t\t        }\n\n\t\t\t\t        // Now set the calculated positioning.\n\t\t\t\t        tooltip.css( ttPosition );\n\n\t\t\t\t        if (scope.placement == 'top' || scope.placement == 'bottom') {\n\t\t\t\t        \tvar arrowSel = tooltip.find('.tooltip-arrow');\n\t\t\t\t        \tarrowSel.css('left', (tooltip.width() - arrowSel.outerWidth(true)) / 2);\n\t\t\t\t    \t}\n\n\t\t\t\t        // And show the tooltip.\n\t\t\t\t        scope.isOpen = true;\n\t\t\t\t    }\n\n      \t\t\t\t// Hide the tooltip popup element.\n      \t\t\t\tfunction hide() {\n\t\t\t\t        transitionTimeout = $timeout( function () {\n\t\t\t\t        \tif (!hoverd) {\n\t\t\t\t        \t\tscope.isOpen = false;\n\t\t\t\t        \t\t//tooltip.remove();\n\t\t\t\t        \t}\n\t\t\t\t        }, 500);\n\t\t\t\t    }\n\n\t\t\t\t    \n\t\t\t\t    tooltip.hover(function() {\n\t\t\t\t    \tscope.$apply( show );\n\t\t\t\t    \thoverd = true;\n\t\t\t\t    }, function() {\n\t\t\t\t    \thoverd = false;\n\t\t\t\t    \tscope.$apply( hide );\n\t\t\t\t    })\n\n\t\t\t      \t// Register the event listeners.\n\t\t\t      \telement.bind( 'mouseenter', function() {\n\t\t\t      \t\t$('.mgz-tooltip').remove();\n\t\t\t      \t\tscope.$apply( show );\n\t\t\t      \t\thoverd = true;\n\t\t\t      \t});\n\t\t\t      \telement.bind( 'mouseleave', function() {\n\t\t\t      \t\thoverd = false;\n\t\t\t      \t\tscope.$apply( hide );\n\t\t\t      \t});\n\t\t\t      }\n\t\t\t  };\n\t\t\t}\n\n\t\t\treturn directive;\n\t\t});","Magezon_Builder/js/directives/elementIcon.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\telement: '='\n\t\t\t},\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/element_icon.html');\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/modules/dynamicDirective.js":"// Source Blog: https://weblogs.thinktecture.com/pawel/2014/07/angularjs-dynamic-directives.html\n// https://jsfiddle.net/Pawel_Gerr/y22ZK/\n\n/**\n * Dynamic directive\n */\n(function(dynamicDirective) {\n    'use strict';\n\n    /**\n     * @param $scope\n     */\n    function Controller($scope) {\n\n    }\n\n    /**\n     * @constructor\n     * @param $compile\n     * @param {DynamicDirectiveManager} dynamicDirectiveManager\n     */\n    function Directive($compile, dynamicDirectiveManager) {\n\n        function safeApply(scope, fn) {\n            var phase = scope.$root.$$phase;\n\n            if (phase === '$apply' || phase === '$digest') {\n                if (fn && (typeof(fn) === 'function')) {\n                    fn();\n                }\n            } else {\n                scope.$apply(fn);\n            }\n        }\n\n        return {\n            restrict: 'AE',\n            require: 'dynamicDirective',\n            controller: Controller,\n            compile: function () {\n\n                var currentSuffix;\n                var ctx = new DummyDynamicDirectiveContext();\n\n                return {\n                    post: function (scope, element, attrs, controller) {\n\n                        controller.recompile = function (suffix) {\n                            if (currentSuffix === suffix) {\n                                return;\n                            }\n\n                            currentSuffix = suffix;\n\n                            // safeApply(scope, function () {\n                            //     ctx.recompileInnerElement(scope, element, currentSuffix, attrs);\n                            // });\n                        };\n\n                        ctx.register();\n                        //ctx.recompileInnerElement(scope, element, currentSuffix, attrs);\n\n                        scope.$on('$destroy', function () {\n                            ctx.unregister();\n                        });\n\n                        attrs.$observe('elementName', function (newName, oldName) {\n                            if (newName !== oldName) {\n                                ctx.unregister();\n                                ctx.destroyInnerElement(scope, element);\n\n                                if (newName) {\n                                    ctx = new DynamicDirectiveContext($compile, dynamicDirectiveManager, controller, newName, attrs);\n                                } else {\n                                    ctx = new DummyDynamicDirectiveContext();\n                                }\n\n                                ctx.register();\n                                ctx.recompileInnerElement(scope, element, currentSuffix, attrs);\n                            }\n                        });\n\n                    }\n                };\n            }\n        };\n    }\n\n    function DynamicDirectiveContext($compile, dynamicDirectiveManager, controller, elementName, attrs) {\n\n        if (!elementName) {\n            throw new Error('Element name must not null nor empty.');\n        }\n\n        var normalizedName = attrs.$normalize(elementName);\n        var currentInnerElement;\n\n        // taken from angular.js\n        var SNAKE_CASE_REGEXP = /[A-Z]/g;\n\n        function snakeCase(name, separator) {\n            separator = separator || '_';\n            return name.replace(SNAKE_CASE_REGEXP, function (letter, pos) {\n                return (pos ? separator : '') + letter.toLowerCase();\n            });\n        }\n\n        function createElement(currentSuffix) {\n\n            var name = elementName;\n\n            if (angular.isDefined(currentSuffix) && (currentSuffix !== null)) {\n                name = name + '-' + currentSuffix;\n            }\n\n            var directiveElem = angular.element(document.createElement(name));\n            var attrsToOmit = ['elementName', '$attr'];\n\n            angular.forEach(attrs, function (value, key) {\n                if (attrs.hasOwnProperty(key) && (attrsToOmit.indexOf(key) < 0) && (key.indexOf('$$') !== 0)) {\n                  if (snakeCase(key, '-')!='ng-repeat') {\n                    //directiveElem.attr(snakeCase(key, '-'), value);\n                  }\n                }\n            });\n            return directiveElem;\n        }\n\n        this.recompileInnerElement = function (scope, element, suffix, attrs) {\n            this.destroyInnerElement(scope, element);\n            currentInnerElement = createElement(suffix);\n            if (attrs.elementName == 'mgz-element-menu_item') {\n                element.replaceWith(currentInnerElement);\n            } else {\n                element.append(currentInnerElement);\n            }\n            $compile(currentInnerElement)(scope);\n        };\n\n        this.destroyInnerElement = function (scope, element) {\n            destroyInnerScope(scope);\n            //element.html(null);\n        };\n\n        function destroyInnerScope(scope) {\n            if (currentInnerElement) {\n                var innerScope = currentInnerElement.isolateScope() || currentInnerElement.scope();\n\n                if (innerScope && (innerScope !== scope)) {\n                  //innerScope.$destroy();\n                }\n            }\n        }\n\n        this.register = function () {\n            dynamicDirectiveManager.add(normalizedName, controller);\n        };\n\n        this.unregister = function () {\n            dynamicDirectiveManager.remove(normalizedName, controller);\n        };\n    }\n\n    function DummyDynamicDirectiveContext() {\n\n        this.register = function () {\n        };\n\n        this.unregister = function () {\n        };\n\n        this.recompileInnerElement = function () {\n        };\n\n        this.destroyInnerElement = function () {\n        };\n    }\n\n    /**\n     * @constructor\n     * @param $compileProvider\n     * @param {DynamicDirectiveSuffixGenerator} dynamicDirectiveSuffixGenerator\n     */\n    function DynamicDirectiveManager($compileProvider, dynamicDirectiveSuffixGenerator) {\n        if (!$compileProvider) {\n            throw new Error('Compile provider must not be null.');\n        }\n\n        var defaultSuffixGenerator = dynamicDirectiveSuffixGenerator;\n        var dynDirectives = {};\n        var registeredDirectives = {};\n        var regex = /^[a-z0-9]+$/;\n\n        /**\n         * Adds a dynamic directive controller instance to the manager.\n         * @param {string} normalizedElementName Pascal-cased name of the directive.\n         * @param {*} dynamicDirectiveController A dynamic directive controller.\n         */\n        this.add = function (normalizedElementName, dynamicDirectiveController) {\n            if (!normalizedElementName) {\n                throw new Error('Name must not be empty.');\n            }\n\n            if (!dynamicDirectiveController) {\n                throw new Error('Dynamic directive controller must not be null.');\n            }\n\n            var directives = dynDirectives[normalizedElementName];\n\n            if (!directives) {\n                directives = [];\n                dynDirectives[normalizedElementName] = directives;\n\n            } else if (directives.indexOf(dynamicDirectiveController) >= 0) {\n                return;\n            }\n\n            directives.push(dynamicDirectiveController);\n\n            var suffixes = registeredDirectives[normalizedElementName];\n            if (suffixes) {\n                dynamicDirectiveController.recompile(suffixes._last);\n            }\n        };\n\n        /**\n         * Removes a dynamic directive controller from the manager.\n         * @param {string} normalizedElementName Pascal-cased name of the directive.\n         * @param {*} dynamicDirectiveController A dynamic directive controller.\n         */\n        this.remove = function (normalizedElementName, dynamicDirectiveController) {\n            if (!normalizedElementName) {\n                throw new Error('Name must not be empty.');\n            }\n\n            if (!dynamicDirectiveController) {\n                throw new Error('Dynamic directive controller must not be null.');\n            }\n\n            var directives = dynDirectives[normalizedElementName];\n\n            if (directives) {\n                var index = directives.indexOf(dynamicDirectiveController);\n\n                if (index >= 0) {\n                    directives.splice(index, 1);\n                }\n            }\n\n        };\n\n        /**\n         * Registers a new directive.\n         * @param {string} normalizedName Pascal-cased directive name.\n         * @param {function} constructor Directive constructor\n         * @param {*} [suffix] If suffix equals false than no suffix is appended; if suffix is undefined than a random suffix is generated; otherwise the suffix is converted to string.\n         */\n        this.registerDirective = function (normalizedName, constructor, suffix) {\n            var nameWithSuffix = normalizedName;\n            suffix = prepareSuffix(normalizedName, suffix);\n\n            if (!angular.isUndefined(suffix)) {\n                nameWithSuffix = nameWithSuffix + suffix;\n            }\n\n            var registerDirective = true;\n            var suffixes = registeredDirectives[normalizedName];\n\n            if (!suffixes) {\n                suffixes = {};\n                registeredDirectives[normalizedName] = suffixes;\n            }\n\n            if (suffixes[suffix]) {\n                registerDirective = false;\n            } else {\n                suffixes[suffix] = true;\n            }\n\n            suffixes._last = suffix;\n\n            if (!$compileProvider) {\n                dynamicDirective.directive(nameWithSuffix, constructor);\n            } else {\n                if (registerDirective) {\n                    $compileProvider.directive.apply(null, [nameWithSuffix, constructor]);\n                }\n\n                recompile(normalizedName, suffix);\n            }\n        };\n\n        /**\n         * Changes the suffix generator.\n         * @param {{generateSuffix:Function}} suffixGenerator\n         */\n        this.changeSuffixGenerator = function (suffixGenerator) {\n            if (angular.isUndefined(suffixGenerator) || (suffixGenerator === null)) {\n                dynamicDirectiveSuffixGenerator = defaultSuffixGenerator;\n                return;\n            }\n\n            if (!angular.isFunction(suffixGenerator.generateSuffix)) {\n                throw new Error('Suffix generator must have a function \"generateSuffix\".');\n            }\n\n            dynamicDirectiveSuffixGenerator = suffixGenerator;\n        };\n\n        /**\n         * Changes the suffix of all dynamic directives.\n         * @param {*} [suffix] If suffix equals false than no suffix is appended; if suffix is undefined than a random suffix is generated; otherwise the suffix is converted to string.\n         */\n        this.changeSuffix = function (suffix) {\n\n            _.each(dynDirectives, function (directives, normalizedName) {\n\n                var preparedSuffix = prepareSuffix(normalizedName, suffix);\n                var suffixes = registeredDirectives[normalizedName];\n\n                if (suffixes) {\n                    suffixes._last = preparedSuffix;\n                }\n\n                angular.forEach(directives, function (dynamicDirective) {\n                    dynamicDirective.recompile(preparedSuffix);\n                });\n            });\n        };\n\n        function prepareSuffix(normalizedName, suffix) {\n            if (suffix === false) {\n                return undefined;\n            }\n\n            if (angular.isUndefined(suffix)) {\n                suffix = dynamicDirectiveSuffixGenerator.generateSuffix(normalizedName);\n            }\n\n            if (!regex.test(suffix)) {\n                throw new Error('Suffix must consist of lowercased characters (a-z) and number (0-9) only.');\n            } else {\n                suffix = suffix + '';\n                suffix = suffix.substr(0, 1).toUpperCase() + suffix.substr(1);\n            }\n\n            return suffix;\n        }\n\n        function recompile(normalizedElementName, suffix) {\n            var directives = dynDirectives[normalizedElementName];\n\n            if (directives) {\n                angular.forEach(directives, function (dynamicDirective) {\n                    dynamicDirective.recompile(suffix);\n                });\n            }\n        }\n    }\n\n    /**\n     * @constructor\n     */\n    function DynamicDirectiveManagerProvider() {\n        var $compileProvider;\n\n        this.setCompileProvider = function (compileProvider) {\n            if (!compileProvider) {\n                throw new Error('Compile provider must not be null.');\n            }\n\n            $compileProvider = compileProvider;\n        };\n\n        this.$get = function ($injector) {\n            return $injector.instantiate(DynamicDirectiveManager, { $compileProvider: $compileProvider });\n        };\n    }\n\n    /**\n     * @constructor\n     */\n    function DynamicDirectiveSuffixGenerator() {\n\n        /**\n         * @param {string} normalizedName\n         * @returns {string}\n         */\n        this.generateSuffix = function (normalizedName) {\n            return new Date().getTime() + '';\n        };\n\n    }\n\n    dynamicDirective.provider('dynamicDirectiveManager', DynamicDirectiveManagerProvider);\n    dynamicDirective.service('dynamicDirectiveSuffixGenerator', DynamicDirectiveSuffixGenerator);\n    dynamicDirective.directive('dynamicDirective', Directive);\n\n    /* grab the $compileProvider */\n    dynamicDirective\n        .config(function ($compileProvider, dynamicDirectiveManagerProvider) {\n            dynamicDirectiveManagerProvider.setCompileProvider($compileProvider);\n        })\n        .run(function (dynamicDirectiveManager) {\n            dynamicDirective.dynamicDirectiveManager = dynamicDirectiveManager;\n        });\n\n})(angular.module('dynamicDirective', []));\n","Magezon_Builder/js/modules/contentEditable.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar directive = function($document, $rootScope, $timeout) {\n\t\treturn {\n\t\t\trequire: \"ngModel\",\n\t\t\tlink: function(scope, element, attrs, ngModel) {\n\t\t\t\telement.addClass('mgz-contenteditable-element');\n\t\t\t\telement.attr('contenteditable', true);\n\n\t\t\t\tvar type = attrs.type ? attrs.type : 'inline';\n\n\t\t\t\tfunction read() {\n\t\t\t\t\tngModel.$setViewValue(element.html());\n\t\t\t\t}\n\n\t\t\t\tfunction updatePlaceHolder() {\n\t\t\t\t\tif (element.data('placeholder') && !ngModel.$viewValue) {\n\t\t\t\t\t\telement.addClass('placeholder-text');\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.removeClass('placeholder-text');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tngModel.$render = function() {\n\t\t\t\t\telement.html(ngModel.$viewValue || \"\");\n\t\t\t\t};\n\n\t\t\t\tscope.enableEditing = function() {\n\t\t\t\t\tif(scope.element) {\n\t\t\t\t\t\t$rootScope.$broadcast('disableEditing', scope.element);\n\t\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t\tscope.element.builder.editing = true;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\telement.bind(\"click\", function(e) {\n\t\t\t\t\tvar draggableParent = element.closest('.ui-draggable');\n\t\t\t\t\tif (draggableParent.length) {\n\t\t\t\t\t\tdraggableParent.draggable({ disabled: true });\n\t\t\t\t\t}\n\t\t\t\t\tscope.enableEditing();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t});\n\n\t\t\t\telement.bind(\"focus\", function(e) {\n\t\t\t\t\telement.trigger('click');\n\t\t\t\t\telement.trigger('mouseenter');\n\t\t\t\t});\n\n\t\t\t\telement.bind(\"blur\", function(e) {\n\t\t\t\t\tvar draggableParent = element.closest('.ui-draggable');\n\t\t\t\t\tif (draggableParent.length) {\n\t\t\t\t\t\tdraggableParent.draggable({ disabled: false });\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\telement.bind(\"blur keyup keypress change\", function() {\n\t\t\t\t\tupdatePlaceHolder();\n\t\t\t\t\tscope.$apply(read);\n\t\t\t\t});\n\n\t\t\t\telement.bind(\"keydown keypress\", function (e) {\n\t\t\t\t\tif(e.which === 13 && type == 'inline') {\n\t                    element[0].blur();\n\t                    e.preventDefault();\n\t                }\n\t\t\t\t});\n\n\t\t\t\tscope.$on('disableEditing', function(e, elem) {\n\t\t\t\t\tif (scope.element) {\n\t\t\t\t\t\tif (elem.id !== scope.element.id) {\n\t\t\t\t\t\t\tscope.element.builder.editing = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/modules/outside-click.js":"require(['jquery'], function($) {\n\n// https://github.com/abrkt/ng-outside-click\n(function(){\n  'use strict';\n\n  var contains = function (parent, child) {\n    var node = child;\n    while ((node = node.parentNode) !== null && node !== parent);\n    return node !== null;\n  };\n\n  angular.module('ngOutsideClick', []).directive('outsideClick', ['$document', function ($document) {\n    return {\n      restrict: 'A',\n      link: function ($scope, $element, $attrs) {\n        var scopeExpression = $attrs.outsideClick;\n        var onDocumentClick = function (event) {\n          if ($element[0] !== event.target && !contains($element[0], event.target) && !$(event.target).parents('.mgz-element-controls').length) {\n            $scope.$apply(scopeExpression);\n          }\n        };\n        $document.on('click', onDocumentClick);\n        $element.on('$destroy', function () {\n          $document.off('click', onDocumentClick);\n        });\n      }\n    };\n  }]);\n\n})();\n\n});","Magezon_Builder/js/modules/inlineEditor.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar directive = function($rootScope, magezonBuilderEditor, magezonBuilderService, magezonBuilderFilter, $document, $timeout) {\n\t\treturn {\n\t\t\trequire: \"ngModel\",\n\t\t\tlink: function(scope, element, attrs, ngModel) {\n\t\t\t\telement.addClass('mgz-inline-editor');\n\t\t\t\telement.attr('contenteditable', true);\n\n\t\t\t\tscope.id = magezonBuilderService.uniqueid();\n\t\t\t\tscope.wysiwyg = Object.extend(angular.copy($rootScope.builderConfig.wysiwyg), scope.wysiwyg);\n\t\t\t\tscope.wysiwyg['inline'] = true;\n\t\t\t\tscope.wysiwyg['fixed_toolbar_container'] = '.' + scope.element.id + ' .mgz-element-inner';\n\t\t\t\telement.attr('id', scope.id);\n\n\t\t\t\tngModel.$render = function() {\n\t\t\t\t\telement.html(magezonBuilderFilter.encodeContent(ngModel.$viewValue) || \"\");\n\t\t\t\t};\n\n\t\t\t\telement.bind(\"click\", function(e) {\n\t\t\t\t\t$rootScope.$broadcast('disableEditing', scope.element);\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\tscope.element.builder.editing = true;\n\t\t\t\t\t}, 1000);\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t});\n\n\t\t\t\tif ($rootScope.builderConfig.wysiwyg.tinymce4) {\n\t\t\t\t\telement.on('mouseenter', function() {\n\t\t\t\t\t\tmagezonBuilderEditor.initTinymce(scope.id, scope.wysiwyg, function(value) {\n\t\t\t\t\t\t\tngModel.$setViewValue(magezonBuilderFilter.decodeContent(value));\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\telement.bind(\"blur\", function(e) {\n\t\t\t\t\tif (scope.element) {\n\t\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t\tscope.element.builder.editing = false;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tscope.$on('disableEditing', function(e, elem) {\n\t\t\t\t\tif (scope.element) {\n\t\t\t\t\t\tif (elem.id !== scope.element.id) {\n\t\t\t\t\t\t\tscope.element.builder.editing = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/modules/afterRender.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar directive = function($timeout) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\trestrict: 'A',\n\t        terminal: true,\n\t        transclude: false,\n\t        link: function (scope, element, attrs) {\n\t            $timeout(function() {\n\t            \tscope.$eval(attrs.afterRender);\n\t            }, 100);\n\t        }\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/navigator/element/base.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/navigator/element/default.html');\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope, $controller) {\n\t\t\t\tvar parent = $controller('baseController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t\tvar self = this;\n\n\t\t\t\tthis.getWrapperClasses = function() {\n\t\t\t\t\tvar element = $scope.element;\n\t\t\t\t\tvar classes = [];\n\t\t\t\t\tclasses.push('mgz-navigator-element');\n\t\t\t\t\tclasses.push('mgz-navigator-element-' + element.id);\n\t\t\t\t\tif (element.disable_element) classes.push('mgz-element-disabled');\n\t\t\t\t\tif (element.builder.actived) classes.push('mgz-element-actived');\n\t\t\t\t\tif (element.hidden_default) classes.push('mgz-element-hide-default');\n\t\t\t\t\tif (element.disable_element) classes.push('mgz-element-disabled');\n\t\t\t\t\treturn classes;\n\t\t\t\t}\n\n\t\t\t\tthis.getStype = function() {\n\t\t\t\t\tvar level = self.getParents().length;\n\t\t\t\t\tvar paddingLeft = ((level + 1) * 1.6) + 'rem';\n\t\t\t\t\tif (!$scope.element.builder.is_collection) {\n\t\t\t\t\t\tpaddingLeft = ((level + 1) * 1.8) + 'rem';\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\t'padding-left': paddingLeft\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$scope.toggleElementList = function() {\n\t\t\t\t\t$scope.element.builder.navigator.listVisible = !$scope.element.builder.navigator.listVisible;\n\t\t\t\t}\n\n\t\t\t\t$scope.$on('addNewElment', function(event, item) {\n\t\t\t\t\tif ((item.action == 'before' || item.action == 'after' || item.action == 'replace')) {\n\t\t\t\t\t\tif ($scope.isChildren(item.elem)) {\n\t\t\t\t\t\t\t$scope.listVisible = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (item.action == 'append' && item.elem.id == $scope.element.id) {\n\t\t\t\t\t\t$scope.listVisible = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tvar loaded = false;\n\t\t\t\t$scope.$watch('element.builder.name', function(name) {\n\t\t\t\t\tif (loaded) {\n\t\t\t\t\t\t$rootScope.$broadcast('exportShortcode');\n\t\t\t\t\t}\n\t\t\t\t\tloaded = true;\n\t\t\t\t});\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/factories/FormlyUtils.js":"define([\n    'angular',\n    'underscore'\n], function(angular, _) {\n\n\tvar uniqueid = function (size) {\n        var code = Math.random() * 25 + 65 | 0,\n            idstr = String.fromCharCode(code);\n\n        size = size || 12;\n\n        while (idstr.length < size) {\n            code = Math.floor(Math.random() * 42 + 48);\n\n            if (code < 58 || code > 64) {\n                idstr += String.fromCharCode(code);\n            }\n        }\n\n        return idstr.toLowerCase();\n    };\n\n    var processFields = function(array, separator, level, key) {\n        if (level === undefined) {\n            level = 0;\n        }\n        var types = [];\n        var i = 0,length;\n        var children = [];\n        array  = _.compact(array);\n        length = array.length;\n        for (i; i < length; i++) {\n            var orgiKey = key;\n            var row  = array[i];\n            var elem = row['config'];\n            if (elem['templateOptions']['element']) {\n                if (!elem['data']) elem['data'] = {};\n                elem['data']['element'] = elem['templateOptions']['element'];\n            }\n            if (elem['key']) {\n                if (key) {\n                    key += '.' + elem['key'];\n                } else {\n                    key = elem['key'];\n                }\n                elem['key'] = key;\n            }\n            // Dynamic Rows\n            if (row.config.templateOptions.children) {\n                key = '';\n                row.config.templateOptions.children = this.processFields(row.config.templateOptions.children, separator, level, key);\n            }\n            if (row.hasOwnProperty(separator)) {\n                level++;\n                elem['wrapper']    = this.getUniqueId();\n                elem['fieldGroup'] = this.processFields(row[separator], separator, level, key);\n            } else {\n                elem['type'] = this.getUniqueId();\n                elem['id']   = this.getUniqueId();\n            }\n\n            if (!elem['className']) elem['className'] = '';\n            elem['className'] += ' mgz__field';\n            elem['className'] += ' mgz_field-' + elem.templateOptions.elementId;\n            elem['className'] += ' mgz_field-type-' + elem.templateOptions.builderType;\n\n            if (elem.templateOptions.required) {\n                elem['className'] += ' _required';\n            }\n\n            if (elem.templateOptions.templateUrl) {\n                elem.templateOptions.templateUrl = window.magezonBuilder.viewFileUrl + elem.templateOptions.templateUrl;\n            }\n\n            if (elem.templateOptions.wrapperTemplateUrl) {\n                elem.templateOptions.wrapperTemplateUrl = window.magezonBuilder.viewFileUrl + elem.templateOptions.wrapperTemplateUrl;\n            }\n\n            // overide wrapepr template url\n            if (elem.templateOptions.wrapperTemplateUrl) {\n                var wrapperId = this.getUniqueId();\n                if (!elem['data']) elem['data'] = {};\n                elem['data']['wrapperType'] = wrapperId;\n                elem['wrapper'] = wrapperId;\n            }\n            children.push(elem);\n            key = orgiKey;\n        }\n        return children;\n    }\n\n    var getComponentDefault = function() {\n        return {\n            visible: true,\n            control: true\n        };   \n    }\n\n    var getDefaultValues = function(element) {\n        var defaultValues        = angular.copy(processDefaultValues(element.tabs, {}));\n        defaultValues['type']    = element.type;\n        defaultValues['builder'] = getComponentDefault();\n        return defaultValues;\n    }\n\n    var processDefaultValues = function(fields) {\n        var defaultValues = {};\n        _.each(fields, function(field, k) {\n            if (field.fieldGroup) {\n                var _defaultValues = processDefaultValues(field.fieldGroup);\n                if (_defaultValues) {\n                    if (field.key) {\n                        defaultValues[field.key] = _defaultValues;\n                    } else {\n                        defaultValues = angular.merge(defaultValues, _defaultValues);\n                    }\n                }\n            } else if (field.hasOwnProperty('key') && field.hasOwnProperty('defaultValue')) {\n                defaultValues[field.key] = field['defaultValue'];\n            }\n        });\n        return defaultValues;\n    };\n\n    return {\n        getUniqueId: uniqueid,\n        processFields: processFields\n    }\n});","Magezon_Builder/js/factories/config.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar array_diff = function(arr1) {\n\t\tvar retArr = {}\n\t\tvar argl = arguments.length\n\t\tvar k1 = ''\n\t\tvar i = 1\n\t\tvar k = ''\n\t\tvar arr = {}\n\n\t\t  \tarr1keys: for (k1 in arr1) {\n\t\t  \t\tfor (i = 1; i < argl; i++) {\n\t\t  \t\t\tarr = arguments[i]\n\t\t  \t\t\tfor (k in arr) {\n\t\t  \t\t\t\tif (arr[k] === arr1[k1]) {\n\t\t          \t\t\tcontinue arr1keys;\n\t\t      \t\t\t}\n\t\t  \t\t\t}\n\t\t  \t\t\tretArr[k1] = arr1[k1]\n\t\t\t\t}\n\t\t\t}\n\t\treturn retArr\n\t}\n\n\tvar array_values = function (input) {\n\t\tvar tmpArr = []\n\t\tvar key = ''\n\n\t\tfor (key in input) {\n\t\t\ttmpArr[tmpArr.length] = input[key]\n\t\t}\n\n\t\treturn tmpArr\n\t}\n\n\treturn function(formlyConfigProvider) {\n\t\tvar elements      = {};\n\t\tvar groups        = {};\n\t\tvar $config       = {};\n\t\tvar $directives   = {};\n\n\t\treturn {\n\t\t\tregisterConfig: function(config) {\n\t\t\t\t$config = config;\n\t\t\t},\n\n\t\t\tregisterGroup: function(name, group) {\n\t\t\t\tif (!groups[name]) {\n\t\t\t\t\tgroups[name] = group;\n\t\t\t\t} else {\n\t\t\t\t\tangular.extend(groups[name], group);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tregisterElement: function(name, element) {\n\t\t\t\tif (!element['element']) {\n\t\t\t\t\tif (element['is_collection']) {\n\t\t\t\t\t\telement['element'] = 'Magezon_Builder/js/builder/element/list';\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement['element'] = 'Magezon_Builder/js/builder/element/base';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!element['navigator']) element['navigator'] = 'Magezon_Builder/js/navigator/element/base';\n\t\t\t\tif (element['is_collection']) {\n\t\t\t\t\tif (!element['templateUrl']) {\n\t\t\t\t\t\telement['templateUrl'] = 'Magezon_Builder/js/templates/builder/element/list.html'\n\t\t\t\t\t}\n\t\t\t\t\tif (!element['navigatorTemplateUrl']) {\n\t\t\t\t\t\telement['navigatorTemplateUrl'] = 'Magezon_Builder/js/templates/navigator/element/list.html'\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (element.hasOwnProperty('visible') && element.visible || !element.hasOwnProperty('visible')) {\n\t\t\t\t\tif (!elements[name]) {\n\t\t\t\t\t\telements[name] = element;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tangular.extend(elements[name], element);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tprocessAllowTypes: function() {\n\t\t\t\t$allTypes      = [];\n\t\t\t\tangular.forEach(elements, function(element, index) {\n\t\t\t\t\t$allTypes.push(element.type);\n\t\t\t\t});\n\n\t\t\t\t$childrenTypes = [];\n\t            angular.forEach(elements, function(element, index) {\n\t\t\t\t\t$allowedTypes  = element.allowed_types;\n\t\t\t\t\t$excludedTypes = element.excluded_types;\n\n\t                if (angular.isString($allowedTypes)) {\n\t                    element.allowed_types = $allowedTypes.split(',');\n\t                }\n\n\t                if (!element.allowed_types && $excludedTypes) {\n\t                    if (angular.isString($excludedTypes)) {\n\t                        $excludedTypes = $excludedTypes.split(',');\n\t                    }\n\t                    $allowedTypes = array_diff($allTypes, $excludedTypes);\n\t                    element.allowed_types = array_values($allowedTypes);\n\t                }\n\n\t                if (element.children) {\n\t                    $childrenTypes.push(element.children);\n\t                }\n\t            });\n\n\t            $validTypes = array_diff($allTypes, $childrenTypes);\n\t            angular.forEach(elements, function(element, index) {\n\t                $allowedTypes  = element.allowed_types;\n\t                if ($allowedTypes) {\n\t                    if ($.inArray( element.children, $allowedTypes) === -1) {\n\t\t\t\t\t\t\t$_allowedTypes        = array_diff($allowedTypes, $childrenTypes);\n\t\t\t\t\t\t\telement.allowed_types = array_values($_allowedTypes);\n\t                    }\n\t                } else {\n\t                    element.allowed_types = array_values($validTypes);\n\t                }\n\t            });\n\t\t\t},\n\n\t\t\tregisterDirectives: function(name, directive) {\n\t\t\t\t$directives[name] = directive;\n\t\t\t},\n\n\t\t\t$get: function() {\n\t\t\t\treturn {\n\t\t\t\t\telements: elements,\n\t\t\t\t\tgroups: groups,\n\t\t\t\t\tconfig: $config,\n\t\t\t\t\tdirectives: $directives\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/magento-widget.js":"define([\n\t'jquery'\n], function($) {\n\n\treturn {\n\t\tcontroller: function($rootScope, $scope, magezonBuilderService, magezonBuilderFilter, $sce) {\n\t\t\t$scope.ajax = true;\n\t\t\t$rootScope.$broadcast('disableSaveBtn');\n\t\t\tmagezonBuilderService.post('mgzbuilder/widget/index', {}, false, function(res) {\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t$scope.html = $sce.trustAsHtml(res);\n\t\t\t\t\t$rootScope.$broadcast('enableSaveBtn');\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$scope.$watch('html', function(value) {\n\t\t\t\tif ($scope.model[$scope.options.key] && value) {\n\t\t\t\t\tvar widgetCode   = angular.copy($scope.model[$scope.options.key]);\n\t\t\t\t\tvar optionValues = new Hash({});\n\t\t\t\t\tvar widgetValue;\n\n\t\t\t\t\t// mage/adminhtml/wysiwyg/widget.js - line 287\n\t                widgetCode.gsub(/([a-z0-9\\_]+)\\s*\\=\\s*[\\\"]{1}([^\\\"]+)[\\\"]{1}/i, function (match) {\n\t                    if (match[1] == 'type') { //eslint-disable-line eqeqeq\n\t                        widgetValue = match[2];\n\t                    } else {\n\t                        optionValues.set(match[1], match[2]);\n\t                    }\n\t                });\n\n\t                if (widgetValue) {\n\t                \t$rootScope.$broadcast('disableSaveBtn');\n\t                \tvar params = {\n\t\t\t                'widget_type': widgetValue,\n\t\t\t                values: optionValues\n\t\t\t            };\n\t\t\t            magezonBuilderService.post('mgzbuilder/widget/loadOptions', {\n\t\t\t            \twidget: Object.toJSON(params)\n\t\t\t            }, false, function(res) {\n\t\t\t            \t$rootScope.$broadcast('enableSaveBtn');\n\t\t\t            \tvar widgetCode = widgetValue.gsub(/\\//, '_');\n\t\t\t            \t$('#select_widget_type').val(widgetCode);\n\t\t\t            \tvar optionsContainerId = 'widget_options_' + widgetCode;\n\t\t\t            \tvar optionsContainer   = $('#' + optionsContainerId);\n\t\t\t            \tif (optionsContainer.length) {\n\t\t\t            \t\toptionsContainer.html(res);\n\t\t\t            \t} else {\n\t\t\t            \t\tvar html = '<div id=\"' + optionsContainerId + '\">';\n\t\t\t            \t\thtml += res;\n\t\t\t            \t\thtml += '</div>';\n\t\t\t            \t\t$('#widget_options').append(html);\n\t\t\t            \t}\n\t\t\t            });\n\t                }\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$scope.updateValue = function() {\n\t\t\t\tvar form  = $('#widget_options_form');\n\t\t\t\tvar valid = true;\n\t\t\t\tform.find('.error').each(function(index, el) {\n\t\t\t\t\tif ($(this).is(':visible')) {\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (form.valid() && $scope.ajax) {\n\t\t\t\t\t$scope.ajax = false;\n\t\t\t\t\t$rootScope.$broadcast('disableSaveBtn');\n\t\t\t\t\tmagezonBuilderService.post('mgzbuilder/widget/buildWidget', form.serialize(), false, function(res) {\n\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\t$scope.ajax = true;\n\t\t\t\t\t\t\t$rootScope.$broadcast('enableSaveBtn');\n\t\t\t\t\t\t\t$scope.model[$scope.options.key] = magezonBuilderFilter.decodeContent(res);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$(document).on('click', '.rule-param-apply,.rule-param-remove,.data-grid ._clickable,#select_widget_type,.x-tree-node-el', function() {\n\t\t\t\t$scope.updateValue();\n\t\t\t});\n\n\t\t\t$(document).on('change', \"#widget_options_form *[name^='parameters'],#select_widget_type\", function() {\n\t\t\t\tif ($(this).parents('.mgz-modal-form').length) {\n\t               $scope.updateValue();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/dynamic-rows.js":"define([\n\t'angular'\n], function(angular) {\n\n\treturn {\n\t\tcontroller: function($scope) {\n\t\t\t$scope.formOptions = {formState: $scope.formState};\n\t\t\t$scope.addNew = addNew;\n\n\t\t\tvar unique = 1;\n\n\t\t\tangular.forEach($scope.model[$scope.options.key], function(_item, index) {\n\t\t\t\t_item['position'] = index + 1;\n\t\t\t});\n\n\t\t\t$scope.copyFields = copyFields;\n\n\t\t\t$scope.$on('removeDynamicItem', function(event, item) {\n\t\t\t\tvar index = $scope.model[$scope.options.key].indexOf(item);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\t$scope.model[$scope.options.key].splice(index, 1);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$scope.$on('radioDefaultDynamicItem', function(event, data) {\n\t\t\t\tvar index = $scope.model[$scope.options.key].indexOf(data.item);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tangular.forEach($scope.model[$scope.options.key], function(_item, index) {\n\t\t\t\t\t\tif (_item===data.item) {\n\t\t\t\t\t\t\t_item[data.key] = 1;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_item[data.key] = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$scope.$on('sortDynamicItems', function(event, data) {\n\t\t\t\t$scope.model[$scope.options.key] = _.sortBy($scope.model[$scope.options.key], data.key);\n\t\t\t});\n\n\t\t\tfunction copyFields(fields) {\n\t\t\t\tfields = angular.copy(fields);\n\t\t\t\taddRandomIds(fields);\n\t\t\t\treturn fields;\n\t\t\t}\n\n\t\t\tfunction addNew() {\n\t\t\t\t$scope.model[$scope.options.key] = $scope.model[$scope.options.key] || [];\n\t\t\t\tvar repeatsection = $scope.model[$scope.options.key];\n\t\t\t\tvar lastSection   = repeatsection[repeatsection.length - 1];\n\t\t\t\tvar newsection    = {};\n\t\t\t\tif (lastSection) {\n\t\t\t\t\tnewsection = angular.copy(lastSection);\n\t\t\t\t}\n\t\t\t\tvar newsection = {};\n\t\t\t\tnewsection['position'] = repeatsection.length + 1;\n\t\t\t\trepeatsection.push(newsection);\n\t\t\t}\n\n\t\t\tfunction addRandomIds(fields) {\n\t\t\t\tunique++;\n\t\t\t\tangular.forEach(fields, function(field, index) {\n\t\t\t\t\tif (field.fieldGroup) {\n\t\t\t\t\t\taddRandomIds(field.fieldGroup);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (field.children) {\n\t\t\t\t\t\taddRandomIds(field.children);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (field.templateOptions && field.templateOptions.children) {\n\t\t\t\t\t\taddRandomIds(field.templateOptions.children);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (field.key) {\n\t\t\t\t\t\tfield.id = field.key.replace(/\\./g,'_') + '_' + index + '_' + unique + getRandomInt(0, 9999);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction getRandomInt(min, max) {\n\t\t\t\treturn Math.floor(Math.random() * (max - min)) + min;\n\t\t\t}\n\t\t}\n\t}\n})","Magezon_Builder/js/form/element/editor.js":"define([\n    'jquery',\n    'angular'\n], function($, angular) {\n\n    return {\n        controller: function($rootScope, $scope, magezonBuilderService, magezonBuilderEditor, magezonBuilderFilter) {\n            $scope.to.loading = true;\n            var config = Object.extend(angular.copy($rootScope.builderConfig.wysiwyg), $scope.to.wysiwyg);\n            $scope.id = magezonBuilderService.uniqueid();\n            $scope.content = $scope.model[$scope.options.key];\n            magezonBuilderEditor.initTinymce($scope.id, config, function(value) {\n                $scope.content = $scope.model[$scope.options.key] = magezonBuilderFilter.decodeContent(value);\n            }, function() {\n                $scope.to.loading = false;\n            });\n        }\n    }\n})","Magezon_Builder/js/form/element/dependency.js":"define([\n\t'angular',\n\t'jquery'\n], function(angular, $) {\n\n\treturn {\n\t\tcontroller: function($scope, $rootScope, $timeout) {\n\t\t\tvar initializing = true;\n\n\t\t\t$scope.$watch('model.' + $scope.options.key, function(value) {\n\t\t\t\tif (initializing) {\n\t\t\t\t\t$timeout(function() { initializing = false; });\n\t\t\t\t} else {\n\t\t\t\t\tif ($scope.to.values && $scope.to.values.hasOwnProperty(value)) {\n\t\t\t\t\t\tangular.forEach($scope.to.values[value], function(value, key) {\n\t\t\t\t\t\t\t$scope.model[key] = value;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif ($scope.to.groupsConfig) {\n\t\t\t\t$scope.$watch('model.' + $scope.options.key, function(value) {\n\t\t\t\t\t$rootScope.$broadcast('showField', {\n\t\t\t\t\t\tvalue: $scope.model[$scope.options.key],\n\t\t\t\t\t\tgroupsConfig: $scope.to.groupsConfig\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif ($scope.to.target) {\n\t\t\t\tangular.forEach($scope.to.target, function(value, index) {\n\t\t\t\t\t$scope.$watch('model.' + value, function(value) {\n\t\t\t\t\t\t$rootScope.$broadcast('showField', {\n\t\t\t\t\t\t\tvalue: $scope.model[$scope.options.key],\n\t\t\t\t\t\t\tgroupsConfig: $scope.to.groupsConfig\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\t$scope.$watchCollection('model.' + value, function(value) {\n\t\t\t\t\t\t$rootScope.$broadcast('showField', {\n\t\t\t\t\t\t\tvalue: $scope.model[$scope.options.key],\n\t\t\t\t\t\t\tgroupsConfig: $scope.to.groupsConfig\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/condition.js":"define([\n\t'jquery'\n], function($) {\n\n\t$(document).on('click', '.rule-param-remove', function() {\n\t\t$('.rule-tree').trigger('change');\n\t});\n\n\treturn {\n\t\tcontroller: function($rootScope, $scope, $sce, magezonBuilderService) {\n\t\t\t$scope.to.loading = true;\n\t\t\t$scope.id         = magezonBuilderService.uniqueid();\n\t\t\t$scope.status     = true;\n\n\t\t\t$scope.loadConditionsValue = function() {\n\t\t\t\tif ($scope.status) {\n\t\t\t\t\t$scope.status = false;\n\t\t\t\t\t$rootScope.$broadcast('disableSaveBtn');\n\t\t\t\t\tmagezonBuilderService.post('mgzbuilder/ajax/conditionsValue', {\n\t\t\t\t\t\tvalues: $('.mgz-modal-form form').serialize(),\n\t\t\t\t\t\tfield: $scope.options.key\n\t\t\t\t\t}, true, function(res) {\n\t\t\t\t\t\tif (res.status) {\n\t\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\t\t$scope.model[$scope.options.key] = res.value;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$rootScope.$broadcast('enableSaveBtn');\n\t\t\t\t\t\t$scope.status = true;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tmagezonBuilderService.post('mgzbuilder/ajax/conditions', {\n\t\t\t\tconditions: $scope.model[$scope.options.key],\n\t\t\t\tid: $scope.id\n\t\t\t}, true, function(res) {\n\t\t\t\tif (res.message) {\n\t\t\t\t\talert(res.message);\n\t\t\t\t}\n\t\t\t\tif (res.status) {\n\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t$scope.html       = $sce.trustAsHtml(res.html);\n\t\t\t\t\t\t$scope.to.loading = false;\n\n\t\t\t\t\t\t$('#' + $scope.id).on('click', '.rule-param-remove,.rule-param-apply,.data-grid ._clickable,#select_widget_type', function() {\n\t\t\t\t\t\t\t$scope.loadConditionsValue();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t$('#' + $scope.id).on('change', '.element-value-changer,.rule-tree', function() {\n\t\t\t\t\t\t\t$scope.loadConditionsValue();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/select.js":"define([\n\t'angular'\n], function(angular) {\n\n\treturn {\n\t\ttemplateOptions: {\n\t\t\tlabelProp: 'label',\n\t\t\tvalueProp: 'value'\n\t\t},\n\t\tcontroller: function($scope, $timeout, magezonBuilderService) {\n\t\t\t$scope.to.loading = false;\n\t\t\tif ($scope.to.lazyOptions) {\n\t\t\t\t$scope.to.options = eval($scope.to.lazyOptions);\n\t\t\t}\n\t\t\tif ($scope.to.builderConfig) {\n\t\t\t\t$scope.to.loading = true;\n\t\t\t\tmagezonBuilderService.getBuilderConfig($scope.to.builderConfig, function(options) {\n\t\t\t\t\t$timeout(function() {\n\t\t\t\t\t\t$scope.to.options = options;\n\t\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif ($scope.to.url) {\n\t\t\t\t$scope.to.loading = true;\n\t\t\t\tmagezonBuilderService.post($scope.to.url, {\n\t\t\t\t\tfield: $scope.options.key\n\t\t\t\t}, true, function(res) {\n\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t$scope.to.options = res;\n\t\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else if ($scope.to.source) {\n\t\t\t\t$scope.to.loading = true;\n\t\t\t\tmagezonBuilderService.post('mgzbuilder/ajax/itemList', {\n\t\t\t\t\ttype: $scope.to.source,\n\t\t\t\t\tfield: $scope.options.key\n\t\t\t\t}, true, function(res) {\n\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t$scope.to.options = res;\n\t\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n})","Magezon_Builder/js/form/element/animation-out.js":"define(function() {\n\n\treturn {\n\t\tcontroller: function($scope, $timeout, magezonBuilderService) {\n\t\t\t$scope.to.loading = true;\n\t\t\tmagezonBuilderService.getBuilderConfig('animationOut', function(options) {\n\t\t\t\t$scope.styles = angular.copy(options);\n\t\t\t\t$timeout(function() {\n\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t})\n\t\t\t});\n\t\t\t$scope.loadAnimate = function() {\n\t\t\t\t$scope.animateClass = $scope.fc.$viewValue + ' animated';\n\t\t\t\t$timeout(function() {\n\t\t\t\t\t$scope.animateClass = '';\n\t\t\t\t}, 1000);\n\t\t\t};\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/hide_on.js":"define([\n\t'jquery'\n], function($) {\n\n\treturn {\n\t\tcontroller: function($scope) {\n\t\t\t$scope.toggleHide = function(type) {\n\t\t\t\t$scope.model[type + '_hide'] = !$scope.model[type + '_hide'];\n\t\t\t}\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/color.js":"define([\n\t'jquery',\n\t'mgzspectrum',\n    'mgztinycolor',\n    'Magezon_Builder/js/ui/form/element/color-picker-palette'\n], function($, spectrum, tinycolor, palette) {\n\n\treturn {\n\t\tcontroller: function($scope, $timeout) {\n\n\t\t\t$scope.value = $scope.model[$scope.options.key];\n\t\t\tvar element = $('#' + $scope.id);\n\n\t\t\tvar getColor = function(color) {\n\t\t\t\tif (!color) color = $('#' + $scope.id).spectrum('get').toString();\n\t\t\t\treturn $scope.to.hex ? tinycolor(color).toHexString() : tinycolor(color).toString();\n\t\t\t}\n\n\t\t\tvar config = {\n\t\t\t\tcontainerClassName: 'mgz-spectrum',\n                chooseText: 'Apply',\n                cancelText: 'Cancel',\n                maxSelectionSize: 8,\n                clickoutFiresChange: true,\n                allowEmpty: true,\n                localStorageKey: 'magezon.spectrum',\n                palette: palette,\n                showInput: true,\n                showInitial: false,\n                showPalette: true,\n                showAlpha: $scope.to.hex ? false : true,\n                showSelectionPalette: true,\n                preferredFormat: 'hex',\n                color: $scope.value,\n                hide : function(c) {\n            \t\t$timeout(function() {\n                \t\tif ($('#' + $scope.id).spectrum('get')) {\n                \t\t\t$scope.model[$scope.options.key] = $scope.value = getColor();\n                \t\t\t$('#' + $scope.id).spectrum('set', $scope.value);\n                \t\t} else {\n                \t\t\t$scope.model[$scope.options.key] = $scope.value = '';\n                \t\t}\n                \t});\n                }\n            };\n            config = angular.extend(config, $scope.to.colorPickerConfig);\n\n\t\t\t$timeout(function() {\n\t\t\t\t$('#' + $scope.id).spectrum(config);\n\t\t\t\t$('#' + $scope.id + '-input').change(function(event) {\n\t\t\t\t\tvar value = $(this).val();\n\t\t\t\t\tif (value) {\n                        if (tinycolor(value).isValid()) {\n    \t\t\t\t\t\tvalue = getColor(value);\n    \t\t\t\t\t\t$('#' + $scope.id).spectrum('set', value);\n    \t\t\t\t\t\t$scope.model[$scope.options.key] = $scope.value = getColor();\n    \t\t\t\t\t\t$(this).val(value);\n                        }\n\t\t\t\t\t} else {\n                        $scope.model[$scope.options.key] = '';\n                    }\n\t\t\t\t});\n\t\t\t}, 200);\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/image.js":"define([\n\t'angular',\n\t'Magezon_Core/js/mage/browser'\n], function(angular) {\n\n\treturn {\n\t\tcontroller: function($scope, $rootScope) {\n\t\t\t$scope.openFileManager =  function() {\n\t            var fileManagerUrl = $rootScope.builderConfig.fileManagerUrl.replace('UID', $scope.id);\n\t            MgzMediabrowserUtility.openDialog(fileManagerUrl);\n\t        }\n\n\t        $scope.getSrc = function() {\n\t        \tif ($scope.model[$scope.options.key]) {\n\t\t\t\t\treturn $rootScope.builderConfig.mediaUrl + $scope.model[$scope.options.key];\n\t\t\t\t}\n\t        }\n\t\t}\n\t}\n})","Magezon_Builder/js/form/element/date.js":"define([\n\t'jquery',\n\t'mage/calendar'\n], function($) {\n\n\treturn {\n\t\tlink: function(scope, element) {\n\t\t\tsetTimeout(function() {\n\t\t\t\t$('#' + scope.id).calendar({\n\t\t\t\t\tdateFormat: \"mm/dd/yy\"\n\t\t\t\t});\n\t\t\t}, 100);\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/ui-select.js":"define([\n\t'angular',\n\t'jquery'\n], function(angular, $) {\n\n\treturn {\n\t\ttemplateOptions: {\n\t\t\tlabelProp: 'label',\n\t\t\tvalueProp: 'value'\n\t\t},\n\t\tcontroller: function($scope, $timeout, magezonBuilderService) {\n\t\t\t$scope.to.loading = false;\n\n\t\t\tif ($scope.to.builderConfig) {\n\t\t\t\t$scope.to.loading = true;\n\t\t\t\tmagezonBuilderService.getBuilderConfig($scope.to.builderConfig, function(options) {\n\t\t\t\t\t$timeout(function() {\n\t\t\t\t\t\t$scope.to.options = options;\n\t\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t$scope.refresh = function($select) {\n\t\t\t\tvar search = $select.search ? $select.search : $scope.model[$scope.options.key];\n\t\t\t\tif (search && (search.length >= 2 || !isNaN(search))) {\n\t\t\t\t\tif ($scope.to.url) {\n\t\t\t\t\t\t$scope.to.loading = true;\n\t\t\t\t\t\tmagezonBuilderService.post($scope.to.url, {\n\t\t\t\t\t\t\tfield: $scope.options.key,\n\t\t\t\t\t\t\tq: search\n\t\t\t\t\t\t}, true, function(res) {\n\t\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\t\t$scope.to.options = res;\n\t\t\t\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if ($scope.to.source) {\n\t\t\t\t\t\t$scope.to.loading = true;\n\t\t\t\t\t\tmagezonBuilderService.post('mgzbuilder/ajax/itemList', {\n\t\t\t\t\t\t\ttype: $scope.to.source,\n\t\t\t\t\t\t\tfield: $scope.options.key,\n\t\t\t\t\t\t\tq: search\n\t\t\t\t\t\t}, true, function(res) {\n\t\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\t\t$scope.to.options = res;\n\t\t\t\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n})","Magezon_Builder/js/form/element/simply.js":"define([\n\t'jquery'\n], function($) {\n\n\treturn {\n\t\texpressionProperties: {\n\t\t\t'templateOptions.disabled': function(viewValue, modelValue, scope) {\n\t\t\t\tif (viewValue) {\n\t\t\t\t\tvar prefix = scope.to.prefix;\n\t\t\t\t\t$('.mgz-design-layout').addClass('mgz-design-simply');\n\t\t\t\t\tscope.model[prefix + 'border_top_left_radius'] = scope.model[prefix + 'border_bottom_right_radius'] = scope.model[prefix + 'border_bottom_left_radius'] = scope.model[prefix + 'border_top_right_radius'];\n\t\t\t\t\tscope.model[prefix + 'margin_right'] = scope.model[prefix + 'margin_bottom'] = scope.model[prefix + 'margin_left'] = scope.model[prefix + 'margin_top'];\n\t\t\t\t\tscope.model[prefix + 'border_right_width'] = scope.model[prefix + 'border_bottom_width'] = scope.model[prefix + 'border_left_width'] = scope.model[prefix + 'border_top_width'];\n\t\t\t\t\tscope.model[prefix + 'padding_right'] = scope.model[prefix + 'padding_bottom'] = scope.model[prefix + 'padding_left'] = scope.model[prefix + 'padding_top'];\n\t\t\t\t} else {\n\t\t\t\t\t$('.mgz-design-layout').removeClass('mgz-design-simply');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n})","Magezon_Builder/js/form/element/icon.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\treturn {\n\t\ttemplateOptions: {\n\t\t\tlabelProp: 'label',\n\t\t\tvalueProp: 'value'\n\t\t},\n\t\tcontroller: function($rootScope, $scope, magezonBuilderService) {\n\t\t\t$scope.font  = $scope.to.defaultFont ? $scope.to.defaultFont : 'awesome';\n\t\t\t$scope.fonts = [];\n\t\t\tangular.forEach($rootScope.builderConfig.fonts, function(font) {\n\t\t\t\t$scope.fonts.push(font);\n\t\t\t});\n\n\t\t\t$scope.onSuccess = function(data) {\n\t\t\t\t$scope.to.loading = false;\n\t\t\t\t$scope.to.options = data;\n\t\t\t};\n\n\t\t\t$scope.to.loading = true;\n\t\t\tmagezonBuilderService.getBuilderConfig('fonts.' + $scope.font, $scope.onSuccess);\n\t\t\t$scope.listVisible = false;\n\n\t\t\t$scope.$watch('model.' + $scope.options.key, function(value) {\n\t\t\t\t$scope.listVisible = false;\n\t\t\t});\n\n\t\t\t$scope.$watch('font', function(value) {\n\t\t\t\t$scope.to.loading = true;\n\t\t\t\tif (value) magezonBuilderService.getBuilderConfig('fonts.' + value, $scope.onSuccess);\n\t\t\t});\n\n\t\t\t$scope.tagHandler = function (tag) {\n\t\t\t    return null;\n\t\t\t}\n\n\t\t\t$scope.outsideClick = function() {\n\t\t\t\t$scope.listVisible = false;\n\t\t\t}\n\n\t\t\t$scope.removeIcon = function() {\n\t\t\t\t$scope.model[$scope.options.key] = '';\n\t\t\t}\n\t\t},\n\t\tlink: function(scope, element, attrs, $select) {\n            element.find('.mgz-selector-button').click(function(event) {\n            \tif (scope.listVisible) {\n            \t\tsetTimeout(function () {\n            \t\t\t$(element).find('.ui-select-toggle').first().trigger('click');\n            \t\t}, 300);\n            \t}\n            });        \n        }\n\t}\n});","Magezon_Builder/js/form/element/tab.js":"define([\n\t'angular',\n    'jquery'\n], function(angular, $) {\n\n    return {\n        controller: function($scope) {\n\n\t\t\t$scope.tabs   = $scope.to.children;\n\t\t\t$scope.length = $scope.tabs.length;\n\n\t\t\t// Copy from forly.js\n        \tfunction formlyEval(scope, expression, $modelValue, $viewValue, extraLocals) {\n        \t\tif (angular.isFunction(expression)) {\n        \t\t\treturn expression($viewValue, $modelValue, scope, extraLocals);\n        \t\t} else {\n        \t\t\treturn scope.$eval(expression, angular.extend({ $viewValue: $viewValue, $modelValue: $modelValue }, extraLocals));\n        \t\t}\n        \t}\n\n        \t// Copy from forly.js\n        \tfunction getFormlyFieldLikeLocals(field, index) {\n        \t\treturn {\n        \t\t\tmodel: field.model,\n        \t\t\toptions: field,\n        \t\t\tindex: index,\n        \t\t\tformState: $scope.options.formState,\n        \t\t\toriginalModel: $scope.model,\n        \t\t\tformOptions: $scope.options,\n        \t\t\tformId: $scope.formId\n        \t\t};\n        \t}\n\n        \t// Copy from forly.js\n        \tfunction evalCloseToFormlyExpression(expression, val, field, index) {\n        \t\tvar extraLocals = arguments.length <= 4 || arguments[4] === undefined ? {} : arguments[4];\n        \t\textraLocals = angular.extend(getFormlyFieldLikeLocals(field, index), extraLocals);\n        \t\treturn formlyEval($scope, expression, val, val, extraLocals);\n        \t}\n\n\t\t\t$scope.$watch('model', function() {\n\t\t\t\tvar length = $scope.tabs.length;\n\t\t\t\tangular.forEach($scope.tabs, function (field, index) {\n\t\t\t\t\t// Copy from forly.js\n\t\t\t\t\tvar model = field.model || $scope.model;\n\t\t\t\t\tvar promise = field.runExpressions && field.runExpressions();\n\t\t\t\t\tif (field.hideExpression) {\n\t\t\t\t\t\tvar val = model[field.key];\n\t\t\t\t\t\tfield.hide = evalCloseToFormlyExpression(field.hideExpression, val, field, index, { model: model });\n\t\t\t\t\t\tif (field.hide) {\n\t\t\t\t\t\t\tlength--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t$scope.length = length;\n\t\t\t}, true);\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/templates.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\treturn {\n\t\ttemplateOptions: {\n\t\t\tlabelProp: 'label',\n\t\t\tvalueProp: 'value'\n\t\t},\n\t\tcontroller: function($rootScope, $scope, magezonBuilderService, elementManager, magezonBuilderModal, profileManager) {\n\t\t\t$scope.loadTemplates = function() {\n\t\t\t\t$rootScope.$broadcast('enableModalSpinner');\n\t\t\t\t$scope.to.loading = true;\n\t\t\t\tif ($scope.to.url) {\n\t\t\t\t\t$scope.to.loading = true;\n\t\t\t\t\tmagezonBuilderService.post($scope.to.url, {\n\t\t\t\t\t\tfield: $scope.options.key,\n\t\t\t\t\t\turl: $rootScope.builderConfig.profile.templateUrl\n\t\t\t\t\t}, true, function(res) {\n\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\tangular.forEach(res, function(item, key) {\n\t\t\t\t\t\t\t\tif (item.profile) {\n\t\t\t\t\t\t\t\t\tvar profile = profileManager.prepareProfile(item.profile, true);\n\t\t\t\t\t\t\t\t\titem.elements = profile.elements;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (item.label) item.name = item.label;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t$scope.to.options = res;\n\t\t\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t\t\t\t$rootScope.$broadcast('disableModalSpinner');\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t} else if ($scope.to.source) {\n\t\t\t\t\t$scope.to.loading = true;\n\t\t\t\t\tmagezonBuilderService.post('mgzbuilder/ajax/itemList', {\n\t\t\t\t\t\ttype: $scope.to.source,\n\t\t\t\t\t\turl: $rootScope.builderConfig.profile.templateUrl\n\t\t\t\t\t}, true, function(res) {\n\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\tangular.forEach(res, function(item, key) {\n\t\t\t\t\t\t\t\tif (item.profile) {\n\t\t\t\t\t\t\t\t\tvar profile = profileManager.prepareProfile(item.profile, true);\n\t\t\t\t\t\t\t\t\titem.elements = profile.elements;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (item.label) item.name = item.label;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t$scope.to.options = res;\n\t\t\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t\t\t\t$rootScope.$broadcast('disableModalSpinner');\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t$scope.loadTemplates();\n\n\t\t\t$scope.$on('loadTemplates', function() {\n\t\t\t\t$scope.loadTemplates();\n\t\t\t});\n\n\t\t\t$scope.openElements = function(item) {\n\t\t\t\titem['active'] = !item['active'];\n\t\t\t}\n\n\t\t    $scope.importItem = function(item) {\n\t\t    \tif (item.file || item.elements.length) {\n\t\t\t    \tvar elements;\n\t\t\t    \tif (item.elements && item.elements.length) {\n\t\t\t    \t\telements = angular.copy(elementManager.prepareElements(item.elements, true));\n\t\t\t\t\t\tangular.forEach(elements, function(elem, index) {\n\t\t\t\t\t\t\t$rootScope.profile.elements.push(angular.copy(elem));\n\t\t\t\t\t\t});\n\t\t\t\t\t\tmagezonBuilderModal.closeModal();\n\t\t\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\t\t\ttype: 'imported_template',\n\t\t\t\t\t\t\ttitle: item.name\n\t\t\t\t\t\t});\n\t\t\t\t\t\titem.importing = false;\n\t\t\t    \t}\n\t\t\t    \tif (item.file) {\n\t\t\t    \t\titem.importing = true;\n\t\t\t    \t\tmagezonBuilderService.post('mgzbuilder/ajax/template', {\n\t\t\t\t\t\t\titem: item\n\t\t\t\t\t\t}, true, function(res) {\n\t\t\t\t\t\t\telements = elementManager.prepareElements(res.elements, true);\n\t\t\t\t\t\t\tangular.forEach(elements, function(elem, index) {\n\t\t\t\t\t\t\t\t$rootScope.profile.elements.push(angular.copy(elem));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tmagezonBuilderModal.closeModal();\n\t\t\t\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\t\t\t\ttype: 'imported_template',\n\t\t\t\t\t\t\t\ttitle: item.name\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\t\titem.importing = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t    \t}\n\t\t\t\t}\n\t\t    }\n\t\t}\n\t}\n})","Magezon_Builder/js/form/element/multicheckbox.js":"define([\n\t'underscore'\n\t], function(_) {\n\n\t\treturn {\n\t\t\ttemplateOptions: {\n\t\t\t\tlabelProp: 'label',\n\t\t\t\tvalueProp: 'value'\n\t\t\t},\n\t\t\tcontroller: function($scope) {\n\t\t\t\tconst to = $scope.to;\n\t\t\t\tconst opts = $scope.options;\n\t\t\t\t$scope.multiCheckbox = {\n\t\t\t\t\tchecked: [],\n\t\t\t\t\tchange: setModel\n\t\t\t\t};\n\n        // initialize the checkboxes check property\n        $scope.$watch('model', function modelWatcher(newModelValue) {\n        \tvar modelValue, valueProp;\n\n        \tif (Object.keys(newModelValue).length) {\n        \t\tmodelValue = newModelValue[opts.key];\n\n        \t\t$scope.$watch('to.options', function optionsWatcher(newOptionsValues) {\n        \t\t\tif (newOptionsValues && Array.isArray(newOptionsValues) && Array.isArray(modelValue)) {\n        \t\t\t\tvalueProp = to.valueProp || 'value';\n        \t\t\t\tfor (var index = 0; index < newOptionsValues.length; index++) {\n        \t\t\t\t\t$scope.multiCheckbox.checked[index] = modelValue.indexOf(newOptionsValues[index][valueProp]) !== -1;\n        \t\t\t\t}\n        \t\t\t}\n        \t\t});\n        \t}\n        }, true);\n\n        function checkValidity(expressionValue) {\n        \tvar valid;\n\n        \tif ($scope.to.required) {\n        \t\tvalid = angular.isArray($scope.model[opts.key]) &&\n        \t\t$scope.model[opts.key].length > 0 &&\n        \t\texpressionValue;\n\n        \t\t$scope.fc.$setValidity('required', valid);\n        \t}\n        }\n\n        function setModel() {\n        \t$scope.model[opts.key] = [];\n        \tangular.forEach($scope.multiCheckbox.checked, (checkbox, index) => {\n        \t\tif (checkbox) {\n        \t\t\t$scope.model[opts.key].push(to.options[index][to.valueProp || 'value']);\n        \t\t}\n        \t});\n\n          // Must make sure we mark as touched because only the last checkbox due to a bug in angular.\n          $scope.fc.$setTouched();\n          checkValidity(true);\n          \n          if ($scope.to.onChange) {\n          \t$scope.to.onChange();\n          }\n      }\n\n      if (opts.expressionProperties && opts.expressionProperties['templateOptions.required']) {\n      \t$scope.$watch(function() {\n      \t\treturn $scope.to.required;\n      \t}, function(newValue) {\n      \t\tcheckValidity(newValue);\n      \t});\n      }\n\n      if ($scope.to.required) {\n      \tvar unwatchFormControl = $scope.$watch('fc', function(newValue) {\n      \t\tif (!newValue) {\n      \t\t\treturn;\n      \t\t}\n      \t\tcheckValidity(true);\n      \t\tunwatchFormControl();\n      \t});\n      }\n  }\n}\n})","Magezon_Builder/js/form/element/save-templates.js":"define([\n\t'jquery'\n], function($) {\n\n\treturn {\n\t\tcontroller: function($rootScope, $scope, $timeout, magezonBuilderUrl, profileManager) {\n\t\t\t$scope.text     = 'Save Template';\n\t\t\t$scope.disabled = false;\n\n\t\t\t$scope.saveTemplate = function() {\n\t\t\t\tif ($scope.to.saveTemplateUrl) {\n\t\t\t\t\tvar name = $scope.model[$scope.options.key];\n\t\t\t\t\tif (name && !$scope.disabled) {\n\t\t\t\t\t\t$scope.disabled = true;\n\t\t\t\t\t\t$scope.text     = 'Saving';\n\n\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\tprofile: profileManager.getShortCode(),\n\t\t\t\t\t\t\tis_active: 1\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t$.ajax({\n\t\t\t                url: magezonBuilderUrl.getUrl($scope.to.saveTemplateUrl),\n\t\t\t                type:'POST',\n\t\t\t                data: data,\n\t\t\t                success: function(res) {\n\t\t\t\t\t\t\t\tif (res.message) {\n\t\t\t\t\t\t\t\t\talert(res.message);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\t\t\t$scope.text = 'Saved';\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t$timeout(function() {\n\t\t\t\t\t\t\t\t\t$scope.model[$scope.options.key] = '';\n\t\t\t\t\t\t\t\t\t$scope.text                      = 'Save Template';\n\t\t\t\t\t\t\t\t\t$scope.disabled                  = false;\n\t\t\t\t\t\t\t\t\t$rootScope.$broadcast('loadTemplates');\n\t\t\t\t\t\t\t\t}, 1000);\n\t\t\t                }\n\t\t\t            });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n})","Magezon_Builder/js/form/element/link_entity.js":"define([\n\t'angular',\n\t'underscore',\n], function(angular, _) {\n\n\treturn {\n\t\tcontroller: function($scope, magezonBuilderService, $timeout) {\n\t\t\tvar initializing = true;\n\t\t\t$scope.to.options = [];\n\n\t\t\t$scope.$watch('model.type', function(type) {\n\t\t\t\tif (type !== 'custom') {\n\t\t\t\t\t$scope.to.label = magezonBuilderService.capitalize(type);\n\t\t\t\t}\n\t\t\t\tif (initializing) {\n\t\t\t\t\t$timeout(function() { initializing = false; });\n\t\t\t\t} else {\n\t\t\t\t\t$scope.model.id = '';\n\t\t\t\t\t$scope.to.options = [];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$scope.$watch('model.id', function(id) {\n\t\t\t\tif (id) {\n\t\t\t\t\tvar item = _.findWhere($scope.to.options, {value: id});\n\t\t\t\t\tif (!$scope.model.title) $scope.model.title = item.label;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$scope.refresh = function($select) {\n\t\t\t\tvar type = $scope.model.type;\n\t\t\t\tvar search = $select.search ? $select.search : $scope.model[$scope.options.key];\n\t\t\t\tif (search && ($select.search.length >= 2 || $scope.model[$scope.options.key])) {\n\t\t\t\t\t$scope.to.loading = true;\n\t\t\t\t\tmagezonBuilderService.post('mgzbuilder/ajax/itemList', {\n\t\t\t\t\t\ttype: $scope.model.type,\n\t\t\t\t\t\tq: search\n\t\t\t\t\t}, true, function(res) {\n\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\t$scope.to.options = res;\n\t\t\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n})","Magezon_Builder/js/form/element/link.js":"define([\n\t'jquery',\n\t'underscore',\n    'uiRegistry'\n], function($, _, registry) {\n\n\treturn {\n\t\tcontroller: function($scope, magezonBuilderModal, magezonBuilderService, magezonBuilderFilter) {\n\t\t\t$scope.type = 'Custom';\n\n            $scope.getLinkParams = function(link) {\n\t\t\t\tvar params = {\n\t\t\t\t\ttype: 'custom',\n\t\t\t\t\turl: '',\n\t\t\t\t\tid: 0,\n\t\t\t\t\ttitle: '',\n\t\t\t\t\textra: '',\n\t\t\t\t\tnofollow: 0,\n\t\t\t\t\tblank: 0\n\t\t    \t};\n\t\t    \tif (link) {\n\t\t\t\t\tif (link.indexOf('{{mgzlink') === -1) {\n\t\t\t\t\t\tparams['url']  = link;\n\t\t\t\t\t\tparams['type'] = 'custom';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlink.gsub(/\\{\\{mgzlink(.*?)\\}\\}/i, function (match) {\n\t\t\t\t\t\t\tparams = magezonBuilderFilter.parseAttributesString(match[1]);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (params['url']) params['url'] = magezonBuilderService.removeslashes(params['url']);\n\t\t\t\treturn params;\n            }\n\n\t\t\t$scope.selectUrl = function() {\n\t\t\t\tmagezonBuilderModal.open('link', {\n\t\t\t\t\tbackdrop: true,\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tform: {\n\t\t\t\t\t\t\tmodel: $scope.getLinkParams($scope.model[$scope.options.key])\t\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, function(model) {\n\t\t\t\t\tvar link = '{{mgzlink';\n\t\t\t\t\tangular.forEach(model, function (value, key) {\n\t\t\t\t\t\tif (angular.isString(value)) {\n\t\t\t\t\t\t\tlink += ' ' + key + '=\"' + magezonBuilderService.addslashes(value) + '\"';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlink += ' ' + key + '=' + value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tlink += '}}';\n\t\t\t\t\t$scope.model[$scope.options.key] = link;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t$scope.$watch('model.' + $scope.options.key, function(link) {\n\t\t\t\tvar params = $scope.getLinkParams(link);\n\t\t\t\tvar type = params.type;\n\t\t\t\tif (type == 'custom') {\n\t\t\t\t\t$scope.type = 'Custom Url';\n\t\t\t\t\t$scope.linkName = params.url;\n\t\t\t\t} else {\n\t\t\t\t\t$scope.to.loading = true;\n\t\t\t\t\tmagezonBuilderService.post('mgzbuilder/ajax/itemInfo', {\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\tq: params.id\n\t\t\t\t\t}, true, function(res) {\n\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\t$scope.title      = params.title;\n\t\t\t\t\t\t\t$scope.type       = magezonBuilderService.capitalize(type);\n\t\t\t\t\t\t\t$scope.linkName   = res.label;\n\t\t\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t\t\t})\n\t\t\t\t\t});\t\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/animation-in.js":"define(['angular'], function(angular) {\n\n\treturn {\n\t\tcontroller: function($scope, magezonBuilderService, $timeout) {\n\t\t\t$scope.to.loading = true;\n\t\t\tmagezonBuilderService.getBuilderConfig('animationIn', function(options) {\n\t\t\t\t$scope.styles = angular.copy(options);\n\t\t\t\t$timeout(function() {\n\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t})\n\t\t\t});\n\n\t\t\t$scope.loadAnimate = function() {\n\t\t\t\t$scope.animateClass = $scope.fc.$viewValue + ' animated';\n\t\t\t\t$timeout(function() {\n\t\t\t\t\t$scope.animateClass = '';\n\t\t\t\t}, 1000);\n\t\t\t};\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/code.js":"define([\n\t'jquery'\n], function($) {\n\n\treturn {\n\t\tcontroller: function($scope, $timeout) {\n\t\t\t$timeout(function() {\n\t\t\t\t$scope.refreshEditor = true;\n\t\t\t}, 200);\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/dynamic-rows/position.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\treturn {\n\t\tlink: function(scope, element, attrs, ctrl) {\n\t\t\t$(element).find('input').change(function(event) {\n\t\t\t\tscope.$emit('sortDynamicItems', {\n\t\t\t\t\tkey: scope.options.key\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/dynamic-rows/action-delete.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\treturn {\n\t\tlink: function(scope, element, attrs) {\n\t\t\tscope.removeItem = function() {\n\t\t\t\tscope.$emit('removeDynamicItem', scope.model);\n\t\t\t}\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/dynamic-rows/radio.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\treturn {\n\t\tlink: function(scope, element, attrs, ctrl) {\n\t\t\t$(element).find('input').click(function(event) {\n\t\t\t\tscope.$emit('radioDefaultDynamicItem', {\n\t\t\t\t\titem: scope.model,\n\t\t\t\t\tkey: scope.options.key\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n});","Magezon_Builder/js/builder/helper.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/helper.html')\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope) {\n\n\t\t\t\t$scope.addRowElement = function(columns) {\n\t\t\t\t\t$rootScope.$broadcast('addRootRowElement', columns);\n\t\t\t\t\t$rootScope.$broadcast('exportShortcode');\n\t\t\t\t}\n\n\t\t\t\t$scope.openModal = function() {\n\t\t\t\t\t$rootScope.$broadcast('openElementsModal', true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/control/updown.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/control/updown.html')\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope, elementManager) {\n\n\t\t\t\t$scope.upClass   = 'mgz-fa-chevron-up';\n\t\t\t\t$scope.upTitle   = 'Move up';\n\t\t\t\t$scope.downClass = 'mgz-fa-chevron-down';\n\t\t\t\t$scope.downTitle = 'Move down';\n\n\t\t\t\t$scope.isUpVisible = function() {\n\t\t\t\t\tvar el = elementManager.getEl($scope.element);\n\t\t\t\t\tif (!el.prev('.mgz-element').length || !el.prev('.mgz-element').is(':visible')) return false;\n\t\t\t\t\tvar elPosition   = el.position();\n\t\t\t\t\tvar nextPosition = el.prev('.mgz-element').position();\n\t\t\t\t\tif (elPosition.top == nextPosition.top) {\n\t\t\t\t\t\t$scope.upTitle = 'Move left';\n\t\t\t\t\t\t$scope.upClass = 'mgz-fa-chevron-left';\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t$scope.moveUp = function() {\n\t\t\t\t\t$rootScope.$broadcast('moveUpElement', $scope.element);\n\t\t\t\t}\n\n\t\t\t\t$scope.isDownVisible = function() {\n\t\t\t\t\tvar el = elementManager.getEl($scope.element);\n\t\t\t\t\tif (!el.next('.mgz-element').length || !el.next('.mgz-element').is(':visible')) return false;\n\t\t\t\t\tvar elPosition   = el.position();\n\t\t\t\t\tvar prevPosition = el.next('.mgz-element').position();\n\t\t\t\t\tif (elPosition.top == prevPosition.top) {\n\t\t\t\t\t\t$scope.downTitle = 'Move right';\n\t\t\t\t\t\t$scope.downClass = 'mgz-fa-chevron-right';\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\t\n\t\t\t\t}\n\n\t\t\t\t$scope.moveDown = function() {\n\t\t\t\t\t$rootScope.$broadcast('moveDownElement', $scope.element);\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/element/column.js":"define([\n\t'jquery',\n\t'angular',\n], function($, angular) {\n\n\tvar text = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getViewFileUrl('Magezon_Builder/js/templates/builder/element/list.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar loaded = false;\n\t\t\t\tvar parent = $controller('listController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t\tvar parentElement = $scope.$parent.$parent.element;\n\t\t\t\tthis.getWrapperClasses = function() {\n\t\t\t\t\tvar classes = parent.getWrapperClasses();\n\t\t\t\t\tvar gapType = parentElement.gap_type ? parentElement.gap_type : 'padding';\n\t\t\t\t\tif (gapType == 'margin') {\n\t\t\t\t\t\tclasses.push('mgz-row-gap-margin');\n\t\t\t\t\t}\n\t\t\t\t\treturn classes;\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn text;\n});","Magezon_Builder/js/builder/element/row.js":"define([\n\t'jquery',\n\t'angular',\n], function($, angular) {\n\n\tvar text = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getViewFileUrl('Magezon_Builder/js/templates/builder/element/row.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar loaded = false;\n\t\t\t\tvar parent = $controller('listController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t\tthis.getWrapperClasses = function() {\n\t\t\t\t\tvar classes = parent.getWrapperClasses();\n\t\t\t\t\tif ($scope.element.row_type == 'contained') {\n\t\t\t\t\t\tclasses.push('mgz-container');\n\t\t\t\t\t}\n\t\t\t\t\tif ($scope.element.equal_height) {\n\t\t\t\t\t\tclasses.push('mgz-row-equal-height');\n\t\t\t\t\t\tif ($scope.element.content_position) classes.push('content-' + $scope.element.content_position);\n\t\t\t\t\t}\n\t\t\t\t\tif ($scope.element.full_height) classes.push('mgz-row-full-height');\n\t\t\t\t\treturn classes;\n\t\t\t\t}\n\t\t\t},\n\t\t\tlink: function(scope, element) {\n\t\t\t\tvar height;\n\t\t\t\tscope.$watch('element.full_height', function(fullHeight) {\n\t\t\t\t\tif (fullHeight) {\n\t\t\t\t\t\theight = $(window).height();\n\t\t\t\t\t} else {\n\t\t\t\t\t\theight = '';\n\t\t\t\t\t}\n\t\t\t\t\telement.parent().css('min-height', height);\n\t\t\t\t});\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn text;\n});","Magezon_Builder/js/builder/element/text.js":"define([\n\t'jquery',\n\t'angular',\n], function($, angular) {\n\n\tvar text = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/element/text.html');\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope, $controller) {\n\t\t\t\tvar loaded = false;\n\t\t\t\tvar parent = $controller('baseController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\n\t\t\t\t$scope.onChange = function(value) {\n\t\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\t\ttype: 'edited',\n\t\t\t\t\t\ttitle: $scope.element.builder.name,\n\t\t\t\t\t\tsubtitle: 'Content'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn text;\n});","Magezon_Builder/js/builder/element/gmaps.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar directive = function($rootScope, magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/element/gmaps.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar parent = $controller('baseController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t},\n\t\t\tlink: function(scope, element) {\n\n\t\t\t\tscope.loadElement = function() {\n\t\t\t\t\tinitGoogleMap();\n\t\t\t\t}\n\n\t\t\t\tfunction getItems()\n\t\t\t\t{ \n\t\t\t\t\tvar $newItems = [];\n\t\t\t\t\t$items        = angular.copy(scope.element.items);\n\t\t\t\t\tif ($items) {\n\t\t\t\t\t\tangular.forEach($items, function($_item) {\n\t\t\t\t\t\t\tvar newItem = $_item;\n\t\t\t\t\t\t\tif (newItem['image']) {\n\t\t\t\t\t\t\t\tnewItem['image'] = magezonBuilderUrl.getImageUrl($_item['image']);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$newItems.push(newItem);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn $newItems;\n\t\t\t\t}\n\n\t\t\t\tfunction getCenterItem() {\n\t\t\t\t\tvar $result = '';\n\t\t\t\t\tangular.forEach(scope.element.items, function($_item) {\n\t\t\t\t\t\tif ($_item['center'] && $_item['lat'] && $_item['lng'] && !$result) {\n\t\t\t\t\t\t\t$result = $_item;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (!$result) {\n\t\t\t\t\t\tangular.forEach(scope.element.items, function($_item) {\n\t\t\t\t\t\t\tif ($_item['lat'] && $_item['lng'] && !$result) {\n\t\t\t\t\t\t\t\t$result = $_item;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn $result;\n\t\t\t\t}\n\n\t\t\t\tfunction initGoogleMap() {\n\t\t\t\t\tvar _element               = scope.element;\n\t\t\t\t\tvar uid                    = _element.id + '-map';\n\t\t\t\t\tvar google_map_zoom        = parseInt(_element.map_zoom);\n\t\t\t\t\tvar google_map_type        = _element.map_type;\n\t\t\t\t\tvar google_map_ui          = _element.map_ui;\n\t\t\t\t\tvar google_map_scrollwheel = _element.map_scrollwheel;\n\t\t\t\t\tvar google_map_draggable   = _element.map_draggable;\n\t\t\t\t\tvar items                  = getItems();\n\t\t\t\t\tvar centerItem             = getCenterItem();\n\t\t\t\t\tvar self      = this;\n\t\t\t\t\trequire([\n\t\t\t\t\t\t'https://maps.google.com/maps/api/js?key=' + $rootScope.builderConfig.googleApi + '&libraries=places'\n\t\t\t\t\t], function() {\n\t\t\t\t\t\tif (!$('#' + uid).length) return;\n\n\t\t\t\t\t\tvar config = {\n\t\t\t\t\t\t\tcenter: {\n\t\t\t\t\t\t\t\tlat: parseFloat(centerItem['lat']),\n\t\t\t\t\t\t\t\tlng: parseFloat(centerItem['lng'])\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tzoom: google_map_zoom,\n\t\t\t\t\t\t\tmapTypeId: google_map_type,\n\t\t\t\t\t\t\tdisableDefaultUI: google_map_ui,\n\t\t\t\t\t\t\tscrollwheel: google_map_scrollwheel,\n\t\t\t\t\t\t\tdraggable: google_map_draggable\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tvar map = new google.maps.Map(document.getElementById(uid), config);\n\n\t\t\t\t\t\tif (items && items.length) {\n\t\t\t\t\t\t\titems.each(function(option) {\n\t\t\t\t\t\t\t\tvar myLatLng = new google.maps.LatLng(option['lat'], option['lng']);\n\t\t\t\t\t\t\t\taddMarker(myLatLng, map, option);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction addMarker(location, map, option) {\n\t\t\t\t\t\t\tvar marker = new google.maps.Marker({\n\t\t\t\t\t\t\t\tposition: location,\n\t\t\t\t\t\t\t\tmap: map,\n\t\t\t\t\t\t\t\ticon: option['image']\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (option['info']) {\n\t\t\t\t\t\t\t\tvar infowindow = new google.maps.InfoWindow({\n\t\t\t\t\t\t\t\t\tcontent: option['info']\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tmarker.addListener('click', function() {\n\t\t\t\t\t\t\t\t\tinfowindow.open(map, marker);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif (element.infobox_opened) {\n\t\t\t\t\t\t\t\t\tinfowindow.open(map, marker);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tinitGoogleMap();\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/element/single-image.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/element/single-image.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar parent = $controller('baseController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\n\t\t\t\t$scope.getSrc = function() {\n\t\t\t\t\tvar src = magezonBuilderUrl.getImageUrl($scope.element.image);\n\n\t\t\t\t\tswitch($scope.element.source) {\n\t\t\t\t\t\tcase 'media_library':\n\t\t\t\t\t\t\tif ($scope.element.image)\n\t\t\t\t\t\t\tsrc = magezonBuilderUrl.getImageUrl($scope.element.image);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'external_link':\n\t\t\t\t\t\t\tif ($scope.element.custom_src)\n\t\t\t\t\t\t\tsrc = $scope.element.custom_src;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn src;\n\t\t\t\t}\n\t\t\t},\n\t\t\tlink: function(scope, element) {\n\t\t\t\telement.find('.mgz-single-image-inner').hover(function() {\n\t\t\t\t\tvar hoverImage = magezonBuilderUrl.getImageUrl(scope.element.hover_image);\n\t\t\t\t\tif (hoverImage) {\n\t\t\t\t\t\t$(this).find('img').attr('src', hoverImage);\n\t\t\t\t\t}\n\t\t\t\t}, function() {\n\t\t\t\t\tvar hoverImage = magezonBuilderUrl.getImageUrl(scope.element.hover_image);\n\t\t\t\t\tif (hoverImage && scope.getSrc()) {\n\t\t\t\t\t\t$(this).find('img').attr('src', scope.getSrc());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/element/base.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/element/default.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar parent = $controller('baseController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/element/list.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/element/list.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar parent = $controller('listController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/element/profile.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar directive = function(magezonBuilderService, magezonBuilderUrl) {\n\t\treturn {\n\t\t\tscope: {\n\t\t\t\telement: '='\n\t\t\t},\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/element/profile.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $rootScope, $controller, elementManager) {\n\t\t\t\t//$scope.element = $scope.profile;\n\t\t\t\t$scope.element.builder = elementManager.getBuilderConfig('profile');\n\t\t\t\t//$scope.element.elements = [];\n\t\t\t\tvar self = this;\n\t\t\t\tvar parent = $controller('listController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\n\t\t\t\tvar mainElement = $rootScope.builderConfig.mainElement;\n\n\t\t\t\t$scope.$on('addRootRowElement', function(event, columns) {\n\t\t\t\t\tvar row            = self.addElement(mainElement, null, false);\n\t\t\t\t\tvar builderElement = self.getBuilderElement(mainElement);\n\t\t\t\t\tvar viewMode       = magezonBuilderService.getViewMode();\n\t\t\t\t\tvar types          = columns.split('_');\n\t\t\t\t\tfor (var i = 0; i < types.length - 1; i++) {\n\t\t\t\t\t\tvar _type   = types[i].split('');\n\t\t\t\t\t\tvar element = self.addElement(builderElement.children, row);\n\t\t\t\t\t\tvar width;\n\t\t\t\t\t\tif (_type[1]==5) {\n\t\t\t\t\t\t\twidth = 15\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twidth = 12 * _type[0] / _type[1];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telement['xl_size'] = '';\n\t\t\t\t\t\telement['lg_size'] = '';\n\t\t\t\t\t\telement['md_size'] = width;\n\t\t\t\t\t\telement['sm_size'] = '';\n\t\t\t\t\t\telement['xs_size'] = '';\n\t\t\t\t\t}\n\n\t\t\t\t\t// First Column\n\t\t\t\t\trow['elements'][0]['xl_size'] = '';\n\t\t\t\t\trow['elements'][0]['lg_size'] = '';\n\t\t\t\t\trow['elements'][0]['md_size'] = width;\n\t\t\t\t\trow['elements'][0]['sm_size'] = '';\n\t\t\t\t\trow['elements'][0]['xs_size'] = '';\n\n\t\t\t\t\tif (!$('.mgz-fullscreen').length) {\n\t\t\t\t\t\t$rootScope.$broadcast('setViewMode', 'xl');\t\n\t\t\t\t\t}\n\n\t\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\t\ttype: 'changed',\n\t\t\t\t\t\tsubtitle: 'Row Layout'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/element/countdown.js":"define([\n\t'angular',\n\t'moment',\n\t'Magezon_Builder/js/countdown',\n\t'moment-timezone-with-data'\n], function(angular, moment) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/element/countdown.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar parent = $controller('baseController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t},\n\t\t\tlink: function(scope, element) {\n\t\t\t\tvar loadCountdown = function() {\n\t\t\t\t\tvar _element = scope.element;\n\t\t\t\t\tvar timeStr  = _element.year + '-' + _element.month + '-' + _element.day + ' ' + _element.hours + ':' + _element.minutes;\n\t\t\t\t\tvar time     = moment(timeStr, 'YYYY-MM-DD HH:mm').tz(_element.time_zone);\t\n\t\t\t\t\tif (element.data(\"countdown\")) {\n\t\t\t\t\t\telement.data(\"countdown\").clearInterval();\n\t\t\t\t\t\telement.find('.mgz-element-bar').css({\n\t\t\t\t\t\t\t'stroke-dashoffset': '',\n\t\t\t\t\t\t\t'width': ''\n\t\t\t\t\t\t});\n\t\t\t\t\t\telement.countdown('destroy');\n\t\t\t\t\t}\n\t\t\t\t\tvar time1 = time.isValid() ? time.format() : moment().format();\n\t\t\t\t\telement.countdown({\n\t\t\t\t\t\ttype:_element.layout,\n\t\t\t\t\t\ttime: time1\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tscope.loadElement = function() {\n\t\t\t\t\tloadCountdown();\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/element/separator.js":"define([\n\t'jquery',\n\t'angular',\n], function($, angular) {\n\n\tvar heading = function(magezonBuilderUrl, $compile) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/element/separator.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar parent = $controller('baseController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t\tvar self = this;\n\t\t\t},\n\t\t\tlink: function($scope, $element, $attr) {\n\t\t\t\tvar $parent = $element.parent();\n\t\t\t\t$scope.$watch('element.title_tag', function(newVal) {\n\t\t\t\t\tvar template = '<' + newVal + ' class=\"title mgz-inline-edit\">';\n\t\t\t\t\t\tif ($scope.element.add_icon && $scope.element.icon_position == 'left') {\n\t\t\t\t\t\t\ttemplate += '<i class=\"mgz-icon-element ' + $scope.element.icon + '\"></i>';\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttemplate += '<span content-editable=\"true\" ng-model=\"element.title\">' + $scope.element.title + '</span>';\n\t\t\t\t\t\tif ($scope.element.add_icon && $scope.element.icon_position == 'right') {\n\t\t\t\t\t\t\ttemplate += '<i class=\"mgz-icon-element ' + $scope.element.icon + '\"></i>';\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttemplate += '</' + newVal + '>';\n\t\t\t\t\t\tvar html = $compile(template)($scope);\n\t\t\t\t\t\t$parent.find('.mgz-inline-edit').replaceWith(html);\n\t\t\t\t});\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn heading;\n});","Magezon_Builder/js/builder/element/heading.js":"define([\n\t'jquery',\n\t'angular',\n], function($, angular) {\n\n\tvar heading = function(magezonBuilderUrl, $compile, $timeout) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/element/heading.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar parent = $controller('baseController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t\tvar self = this;\n\t\t\t},\n\t\t\tlink: function($scope, $element, $attr) {\n\t\t\t\tvar $parent = $element.parent();\n\t\t\t\t$scope.$watch('element.heading_type', function(newVal) {\n\t\t\t\t\tvar template = '<' + newVal + ' class=\"mgz-element-heading-text\" content-editable=\"true\" type=\"multiple\" ng-model=\"element.text\" ng-model-options=\"{ debounce: 300 }\" data-placeholder=\"Edit Heading Text\">' + $scope.element.text + '</' + newVal + '>';\n\t\t\t\t\tvar html = $compile(template)($scope);\n                    $parent.html(html);\n                    if ($scope.loaded) {\n                    \t$parent.children('.mgz-contenteditable-element').trigger('focus');\t\n                    }\n\t\t\t\t});\n\t\t\t\t$timeout(function() {\n\t\t\t\t\t$scope.loaded = true;\n\t\t\t\t}, 500);\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn heading;\n});","Magezon_Builder/js/builder/element/tabs.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl, $timeout) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getViewFileUrl('Magezon_Builder/js/templates/builder/element/tabs.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\n\t\t\t\tvar parent = $controller('listController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t\tvar self = this;\n\n\t\t\t\t$scope.element.builder.dndDisabled = true;\n\n\t\t\t\tangular.forEach($scope.element.elements, function(element, index) {\n\t\t\t\t\tif (index == 0) {\n\t\t\t\t\t\telement.builder.visible = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.builder.visible = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$scope.$on('afterAddElement', function(e, elem) {\n\t\t\t\t\t$scope.activeEventElement(elem);\n\t\t\t\t});\n\n\t\t\t\t$scope.$on('afterCloneElement', function(e, elem) {\n\t\t\t\t\tif ($scope.isChildren(elem)) {\n\t\t\t\t\t\t$scope.activeEventElement(elem);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$scope.$on('afterDropElement', function(e, elem) {\n\t\t\t\t\tif ($scope.isChildren(elem)) {\n\t\t\t\t\t\t$scope.activeEventElement(elem);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$scope.activeEventElement = function(elem) {\n\t\t\t\t\tif ($scope.isChildren(elem)) {\n\t\t\t\t\t\t$scope.activeElement(elem);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$scope.$on('beforeRemoveElement', function(e, elem) {\n\t\t\t\t\tif ($scope.isChildren(elem)) {\n\t\t\t\t\t\tvar index = $scope.getElemIndex(elem);\n\t\t\t\t\t\tvar elem2 = $scope.element.elements[index+1] ? $scope.element.elements[index+1] : 0;\n\t\t\t\t\t\tif(elem2) $scope.activeElement(elem2);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$scope.activeElement = function(element) {\n\t\t\t\t\tif (!element) return;\n\t\t\t\t\telement.builder.additionalClasses.push('mgz-tabs-tab-content');\n\t\t\t\t\tangular.forEach($scope.element.elements, function(el, index) {\n\t\t\t\t\t\tif (el !== element) {\n\t\t\t\t\t\t\tel.builder.visible = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\telement.builder.visible = true;\n\t\t\t\t\telement.builder.additionalClasses.push('mgz-active');\n\t\t\t\t}\n\n\t\t\t\t$scope.activeFirstElement = function() {\n\t\t\t\t\tvar active = true;\n\t\t\t\t\tangular.forEach($scope.element.elements, function(element) {\n\t\t\t\t\t\tif (!element.builder.visible) {\n\t\t\t\t\t\t\tactive = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (!active) {\n\t\t\t\t\t\t$scope.activeElement($scope.element.elements[0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t$scope.activeFirstElement();\n\n\t\t\t\t$scope.getClassess = function() {\n\t\t\t\t\tvar _elem = $scope.element;\n\t\t\t\t\tvar clasess = [];\n\t\t\t\t\tclasess.push('mgz-tabs');\n\t\t\t\t\tclasess.push('mgz-tabs-' + _elem.id);\n\t\t\t\t\tclasess.push('mgz-element-tab-align-' + _elem.tab_align);\n\t\t\t\t\tclasess.push('mgz-element-tab-position-' + _elem.tab_position);\n\t\t\t\t\tif (_elem.no_fill_content_area) clasess.push('mgz-tabs-no-fill-content');\n\t\t\t\t\tif (_elem.mobile_accordion) clasess.push('tabs-mobile-accordion');\n\t\t\t\t\treturn clasess;\n\t\t\t\t}\n\n\t\t\t\t$scope.getSpacing = function() {\n\t\t\t\t\treturn $scope.element.spacing ? parseFloat($scope.element.spacing) : 0;\n\t\t\t\t}\n\n\t\t\t\t$scope.getGap = function() {\n\t\t\t\t\treturn $scope.element.gap ? parseFloat($scope.element.gap) : 0;\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/element/heading/toolbar.js":"define([\n\t'jquery',\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getViewFileUrl('Magezon_Builder/js/templates/builder/element/heading/toolbar.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\n\t\t\t\tvar parent = $controller('toolbarController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t\tvar self = this;\n\n\t\t\t\t$scope.fontSize = $scope.element.font_size;\n\n\t\t\t\t$scope.updatedkey = function(key, value) {\n\t\t\t\t\tswitch(key) {\n\t\t\t\t\t\tcase 'elemHeading':\n\t\t\t\t\t\t\t$scope.element.heading_type = value;\n\t\t\t\t\t\t\t$scope.addHistory('edited', 'Type');\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'elemAlign':\n\t\t\t\t\t\t\t$scope.element.align = value;\n\t\t\t\t\t\t\t$scope.addHistory('edited', 'Alignment');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$scope.$watch('element.text', function(text, old) {\n\t\t\t\t\tif ($scope.isLoaded() && (text !== old)) {\n\t\t\t\t\t\t$scope.addHistory('edited', 'Text');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$scope.$watch('element.color', function(color, old) {\n\t\t\t\t\tif ($scope.isLoaded() && (color !== old)) {\n\t\t\t\t\t\t$scope.addHistory('edited', 'Color');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$scope.changeFontSize = function(e) {\n\t\t\t\t\t$scope.element.font_size = $scope.fontSize;\n\t\t\t\t\t$scope.addHistory('edited', 'Font Size');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/element/separator/toolbar.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getViewFileUrl('Magezon_Builder/js/templates/builder/element/separator/toolbar.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar parent = $controller('toolbarController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t\tvar self = this;\n\n\t\t\t\t$scope.updatedkey = function(key, value) {\n\t\t\t\t\tswitch(key) {\n\t\t\t\t\t\tcase 'elemHeading':\n\t\t\t\t\t\t\t$scope.element.title_tag = value;\n\t\t\t\t\t\t\t$scope.addHistory('edited', 'Tag');\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'elemAlign':\n\t\t\t\t\t\t\t$scope.element.title_align = value;\n\t\t\t\t\t\t\t$scope.addHistory('edited', 'Alignment');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$scope.$watch('element.text', function(text) {\n\t\t\t\t\tif ($scope.isLoaded()) {\n\t\t\t\t\t\t$scope.addHistory('edited', 'Text');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$scope.$watch('element.color', function(color) {\n\t\t\t\t\tif ($scope.isLoaded()) {\n\t\t\t\t\t\t$scope.addHistory('edited', 'Color');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/element/text/toolbar.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar parent = $controller('toolbarController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t\tvar self = this;\n\t\t\t\tvar loaded = false;\n\n\t\t\t\t$scope.$watch('element.content', function(content) {\n\t\t\t\t\tif (loaded) {\n\t\t\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\t\t\ttype: 'edited',\n\t\t\t\t\t\t\ttitle: $scope.element.builder.name,\n\t\t\t\t\t\t\tsubtitle: 'Content'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tloaded = true;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/navbar/fullscreen.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/navbar/fullscreen.html')\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope) {\n\t\t\t\t$scope.toggleFullscreen = function() {\n\t\t\t\t\t$rootScope.fullscreen = !$rootScope.fullscreen;\n\t\t\t\t\tif (!$rootScope.fullscreen) {\n\t\t\t\t\t\t$rootScope.$broadcast('setViewMode', 'xl');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/navbar/settings.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/navbar/settings.html')\n\t\t\t},\n\t\t\tcontroller: function($scope, magezonBuilderModal) {\n\t\t\t\t$scope.openModal = function () {\n\t\t\t\t\tmagezonBuilderModal.open('settings');\n\t\t        }\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/navbar/navigator.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/navbar/navigator.html')\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope, magezonBuilderModal) {\n\t\t\t\t$scope.$on('openNavigatorModal', function() {\n\t\t\t\t\t$scope.openModal();\n\t\t\t\t});\n\t\t\t\t$scope.openModal = function() {\n\t\t\t\t\tmagezonBuilderModal.open('navigator').result.then(function() {}, function() {\n\t\t\t\t\t\tif($rootScope.activedElement) $rootScope.activedElement.builder.actived = false;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/navbar/shortcode.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/navbar/shortcode.html')\n\t\t\t},\n\t\t\tcontroller: function($scope, magezonBuilderModal) {\n\t\t\t\t$scope.openProfileShortcodeModal = function() {\n\t\t\t\t\tmagezonBuilderModal.open('profileShortcode');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/navbar/clear.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/navbar/clear.html')\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope, magezonBuilderModal) {\n\t\t\t\t$scope.openModal = function(e) {\n\t\t\t\t\tmagezonBuilderModal.open('clear_layout');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/navbar/my-templates.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/navbar/my_templates.html')\n\t\t\t},\n\t\t\tcontroller: function($scope, magezonBuilderModal) {\n\t\t\t\t$scope.openTemplatesModal = function() {\n\t\t\t\t\tmagezonBuilderModal.open('templates');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/navbar/view_mode.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderService, magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/navbar/view_mode.html')\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope) {\n\n\t\t\t\t$scope.viewMode  = magezonBuilderService.getViewMode();\n\n\t\t\t\t$scope.viewModes = {\n\t\t\t\t\txl: {\n\t\t\t\t\t\ttitle: 'Desktop',\n\t\t\t\t\t\ticon: 'mgz-icon mgz-icon-desktop'\n\t\t\t\t\t},\n\t\t\t\t\tlg: {\n\t\t\t\t\t\ttitle: 'Tablet Landscape',\n\t\t\t\t\t\ticon: 'mgz-icon mgz-icon-tablet-landscape'\n\t\t\t\t\t},\n\t\t\t\t\tmd: {\n\t\t\t\t\t\ttitle: 'Tablet Portrait',\n\t\t\t\t\t\ticon: 'mgz-icon mgz-icon-tablet-portrait'\n\t\t\t\t\t},\n\t\t\t\t\tsm: {\n\t\t\t\t\t\ttitle: 'Mobile Landscape',\n\t\t\t\t\t\ticon: 'mgz-icon mgz-icon-mobile-landscape'\n\t\t\t\t\t},\n\t\t\t\t\txs: {\n\t\t\t\t\t\ttitle: 'Mobile Portrait',\n\t\t\t\t\t\ticon: 'mgz-icon mgz-icon-mobile-portrait'\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$scope.changeViewMode = function(viewMode) {\n\t\t\t\t\t$scope.viewMode = viewMode;\n\t\t\t\t\tmagezonBuilderService.setViewMode(viewMode);\n\t\t\t\t\t$rootScope.fullscreen = true;\n\t\t\t\t\t$rootScope.$broadcast('loadElements');\n\t\t\t\t}\n\n\t\t\t\t$scope.$watch('viewMode', function(viewMode) {\n\t\t\t\t\t$rootScope.$broadcast('changedViewMode', viewMode);\n\t\t\t\t});\n\n\t\t\t\t$scope.$on('setViewMode', function(event, viewMode) {\n\t\t\t\t\t$scope.viewMode = viewMode;\n\t\t\t\t\tmagezonBuilderService.setViewMode(viewMode);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/navbar/history.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/navbar/history.html')\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope, magezonBuilderModal) {\n\t\t\t\t$scope.$on('openHistoryModal', function() {\n\t\t\t\t\t$scope.openModal();\n\t\t\t\t});\n\t\t\t\t$scope.openModal = function() {\n\t\t\t\t\tmagezonBuilderModal.open('history');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/navbar/templates.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/navbar/add.html')\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope) {\n\t\t\t\t$scope.openModal = function() {\n\t\t\t\t\t$rootScope.$broadcast('openElementsModal', true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/navbar/add.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/navbar/add.html')\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope) {\n\t\t\t\t$scope.openElementsModal = function() {\n\t\t\t\t\t$rootScope.$broadcast('openElementsModal', true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/apply/main.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'underscore',\n    'jquery',\n    'mage/apply/scripts'\n], function (_, $, processScripts) {\n    'use strict';\n\n    var dataAttr = 'data-mage-init',\n        nodeSelector = '[' + dataAttr + ']';\n\n    /**\n     * Initializes components assigned to a specified element via data-* attribute.\n     *\n     * @param {HTMLElement} el - Element to initialize components with.\n     * @param {Object|String} config - Initial components' config.\n     * @param {String} component - Components' path.\n     */\n    function init(el, config, component) {\n        require([component], function (fn) {\n\n            if (typeof fn === 'object') {\n                fn = fn[component].bind(fn);\n            }\n\n            if (_.isFunction(fn)) {\n                fn(config, el);\n            } else if ($(el)[component]) {\n                $(el)[component](config);\n            }\n        }, function (error) {\n            if ('console' in window && typeof window.console.error === 'function') {\n                console.error(error);\n            }\n\n            return true;\n        });\n    }\n\n    /**\n     * Parses elements 'data-mage-init' attribute as a valid JSON data.\n     * Note: data-mage-init attribute will be removed.\n     *\n     * @param {HTMLElement} el - Element whose attribute should be parsed.\n     * @returns {Object}\n     */\n    function getData(el) {\n        var data = el.getAttribute(dataAttr);\n\n        el.removeAttribute(dataAttr);\n\n        return {\n            el: el,\n            data: JSON.parse(data)\n        };\n    }\n\n    return {\n        /**\n         * Initializes components assigned to HTML elements via [data-mage-init].\n         *\n         * @example Sample 'data-mage-init' declaration.\n         *      data-mage-init='{\"path/to/component\": {\"foo\": \"bar\"}}'\n         */\n        apply: function (context) {\n            var virtuals = processScripts(!context ? document : context),\n                nodes = document.querySelectorAll(nodeSelector);\n\n            _.toArray(nodes)\n                .map(getData)\n                .concat(virtuals)\n                .forEach(function (itemContainer) {\n                    var element = itemContainer.el;\n\n                    _.each(itemContainer.data, function (obj, key) {\n                            if(key.indexOf('Magezon_Builder') != -1 || key.indexOf('Magezon_PageBuilder') != -1) {\n                                if (obj.mixins) {\n                                    require(obj.mixins, function () { //eslint-disable-line max-nested-callbacks\n                                        var i, len;\n\n                                        for (i = 0, len = arguments.length; i < len; i++) {\n                                            $.extend(\n                                                true,\n                                                itemContainer.data[key],\n                                                arguments[i](itemContainer.data[key], element)\n                                            );\n                                        }\n\n                                        delete obj.mixins;\n                                        init.call(null, element, obj, key);\n                                    });\n                                } else {\n                                    init.call(null, element, obj, key);\n                                }\n                            }\n\n                        }\n                    );\n\n                });\n        },\n        applyFor: init\n    };\n});\n","Magezon_Builder/js/waypoints/zepto.waypoints.js":"/*!\nWaypoints - 4.0.1\nCopyright \u00a9 2011-2016 Caleb Troughton\nLicensed under the MIT license.\nhttps://github.com/imakewebthings/waypoints/blob/master/licenses.txt\n*/\n(function() {\n  'use strict'\n\n  var keyCounter = 0\n  var allWaypoints = {}\n\n  /* http://imakewebthings.com/waypoints/api/waypoint */\n  function Waypoint(options) {\n    if (!options) {\n      throw new Error('No options passed to Waypoint constructor')\n    }\n    if (!options.element) {\n      throw new Error('No element option passed to Waypoint constructor')\n    }\n    if (!options.handler) {\n      throw new Error('No handler option passed to Waypoint constructor')\n    }\n\n    this.key = 'waypoint-' + keyCounter\n    this.options = Waypoint.Adapter.extend({}, Waypoint.defaults, options)\n    this.element = this.options.element\n    this.adapter = new Waypoint.Adapter(this.element)\n    this.callback = options.handler\n    this.axis = this.options.horizontal ? 'horizontal' : 'vertical'\n    this.enabled = this.options.enabled\n    this.triggerPoint = null\n    this.group = Waypoint.Group.findOrCreate({\n      name: this.options.group,\n      axis: this.axis\n    })\n    this.context = Waypoint.Context.findOrCreateByElement(this.options.context)\n\n    if (Waypoint.offsetAliases[this.options.offset]) {\n      this.options.offset = Waypoint.offsetAliases[this.options.offset]\n    }\n    this.group.add(this)\n    this.context.add(this)\n    allWaypoints[this.key] = this\n    keyCounter += 1\n  }\n\n  /* Private */\n  Waypoint.prototype.queueTrigger = function(direction) {\n    this.group.queueTrigger(this, direction)\n  }\n\n  /* Private */\n  Waypoint.prototype.trigger = function(args) {\n    if (!this.enabled) {\n      return\n    }\n    if (this.callback) {\n      this.callback.apply(this, args)\n    }\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/destroy */\n  Waypoint.prototype.destroy = function() {\n    this.context.remove(this)\n    this.group.remove(this)\n    delete allWaypoints[this.key]\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/disable */\n  Waypoint.prototype.disable = function() {\n    this.enabled = false\n    return this\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/enable */\n  Waypoint.prototype.enable = function() {\n    this.context.refresh()\n    this.enabled = true\n    return this\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/next */\n  Waypoint.prototype.next = function() {\n    return this.group.next(this)\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/previous */\n  Waypoint.prototype.previous = function() {\n    return this.group.previous(this)\n  }\n\n  /* Private */\n  Waypoint.invokeAll = function(method) {\n    var allWaypointsArray = []\n    for (var waypointKey in allWaypoints) {\n      allWaypointsArray.push(allWaypoints[waypointKey])\n    }\n    for (var i = 0, end = allWaypointsArray.length; i < end; i++) {\n      allWaypointsArray[i][method]()\n    }\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/destroy-all */\n  Waypoint.destroyAll = function() {\n    Waypoint.invokeAll('destroy')\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/disable-all */\n  Waypoint.disableAll = function() {\n    Waypoint.invokeAll('disable')\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/enable-all */\n  Waypoint.enableAll = function() {\n    Waypoint.Context.refreshAll()\n    for (var waypointKey in allWaypoints) {\n      allWaypoints[waypointKey].enabled = true\n    }\n    return this\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/refresh-all */\n  Waypoint.refreshAll = function() {\n    Waypoint.Context.refreshAll()\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/viewport-height */\n  Waypoint.viewportHeight = function() {\n    return window.innerHeight || document.documentElement.clientHeight\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/viewport-width */\n  Waypoint.viewportWidth = function() {\n    return document.documentElement.clientWidth\n  }\n\n  Waypoint.adapters = []\n\n  Waypoint.defaults = {\n    context: window,\n    continuous: true,\n    enabled: true,\n    group: 'default',\n    horizontal: false,\n    offset: 0\n  }\n\n  Waypoint.offsetAliases = {\n    'bottom-in-view': function() {\n      return this.context.innerHeight() - this.adapter.outerHeight()\n    },\n    'right-in-view': function() {\n      return this.context.innerWidth() - this.adapter.outerWidth()\n    }\n  }\n\n  window.Waypoint = Waypoint\n}())\n;(function() {\n  'use strict'\n\n  function requestAnimationFrameShim(callback) {\n    window.setTimeout(callback, 1000 / 60)\n  }\n\n  var keyCounter = 0\n  var contexts = {}\n  var Waypoint = window.Waypoint\n  var oldWindowLoad = window.onload\n\n  /* http://imakewebthings.com/waypoints/api/context */\n  function Context(element) {\n    this.element = element\n    this.Adapter = Waypoint.Adapter\n    this.adapter = new this.Adapter(element)\n    this.key = 'waypoint-context-' + keyCounter\n    this.didScroll = false\n    this.didResize = false\n    this.oldScroll = {\n      x: this.adapter.scrollLeft(),\n      y: this.adapter.scrollTop()\n    }\n    this.waypoints = {\n      vertical: {},\n      horizontal: {}\n    }\n\n    element.waypointContextKey = this.key\n    contexts[element.waypointContextKey] = this\n    keyCounter += 1\n    if (!Waypoint.windowContext) {\n      Waypoint.windowContext = true\n      Waypoint.windowContext = new Context(window)\n    }\n\n    this.createThrottledScrollHandler()\n    this.createThrottledResizeHandler()\n  }\n\n  /* Private */\n  Context.prototype.add = function(waypoint) {\n    var axis = waypoint.options.horizontal ? 'horizontal' : 'vertical'\n    this.waypoints[axis][waypoint.key] = waypoint\n    this.refresh()\n  }\n\n  /* Private */\n  Context.prototype.checkEmpty = function() {\n    var horizontalEmpty = this.Adapter.isEmptyObject(this.waypoints.horizontal)\n    var verticalEmpty = this.Adapter.isEmptyObject(this.waypoints.vertical)\n    var isWindow = this.element == this.element.window\n    if (horizontalEmpty && verticalEmpty && !isWindow) {\n      this.adapter.off('.waypoints')\n      delete contexts[this.key]\n    }\n  }\n\n  /* Private */\n  Context.prototype.createThrottledResizeHandler = function() {\n    var self = this\n\n    function resizeHandler() {\n      self.handleResize()\n      self.didResize = false\n    }\n\n    this.adapter.on('resize.waypoints', function() {\n      if (!self.didResize) {\n        self.didResize = true\n        Waypoint.requestAnimationFrame(resizeHandler)\n      }\n    })\n  }\n\n  /* Private */\n  Context.prototype.createThrottledScrollHandler = function() {\n    var self = this\n    function scrollHandler() {\n      self.handleScroll()\n      self.didScroll = false\n    }\n\n    this.adapter.on('scroll.waypoints', function() {\n      if (!self.didScroll || Waypoint.isTouch) {\n        self.didScroll = true\n        Waypoint.requestAnimationFrame(scrollHandler)\n      }\n    })\n  }\n\n  /* Private */\n  Context.prototype.handleResize = function() {\n    Waypoint.Context.refreshAll()\n  }\n\n  /* Private */\n  Context.prototype.handleScroll = function() {\n    var triggeredGroups = {}\n    var axes = {\n      horizontal: {\n        newScroll: this.adapter.scrollLeft(),\n        oldScroll: this.oldScroll.x,\n        forward: 'right',\n        backward: 'left'\n      },\n      vertical: {\n        newScroll: this.adapter.scrollTop(),\n        oldScroll: this.oldScroll.y,\n        forward: 'down',\n        backward: 'up'\n      }\n    }\n\n    for (var axisKey in axes) {\n      var axis = axes[axisKey]\n      var isForward = axis.newScroll > axis.oldScroll\n      var direction = isForward ? axis.forward : axis.backward\n\n      for (var waypointKey in this.waypoints[axisKey]) {\n        var waypoint = this.waypoints[axisKey][waypointKey]\n        if (waypoint.triggerPoint === null) {\n          continue\n        }\n        var wasBeforeTriggerPoint = axis.oldScroll < waypoint.triggerPoint\n        var nowAfterTriggerPoint = axis.newScroll >= waypoint.triggerPoint\n        var crossedForward = wasBeforeTriggerPoint && nowAfterTriggerPoint\n        var crossedBackward = !wasBeforeTriggerPoint && !nowAfterTriggerPoint\n        if (crossedForward || crossedBackward) {\n          waypoint.queueTrigger(direction)\n          triggeredGroups[waypoint.group.id] = waypoint.group\n        }\n      }\n    }\n\n    for (var groupKey in triggeredGroups) {\n      triggeredGroups[groupKey].flushTriggers()\n    }\n\n    this.oldScroll = {\n      x: axes.horizontal.newScroll,\n      y: axes.vertical.newScroll\n    }\n  }\n\n  /* Private */\n  Context.prototype.innerHeight = function() {\n    /*eslint-disable eqeqeq */\n    if (this.element == this.element.window) {\n      return Waypoint.viewportHeight()\n    }\n    /*eslint-enable eqeqeq */\n    return this.adapter.innerHeight()\n  }\n\n  /* Private */\n  Context.prototype.remove = function(waypoint) {\n    delete this.waypoints[waypoint.axis][waypoint.key]\n    this.checkEmpty()\n  }\n\n  /* Private */\n  Context.prototype.innerWidth = function() {\n    /*eslint-disable eqeqeq */\n    if (this.element == this.element.window) {\n      return Waypoint.viewportWidth()\n    }\n    /*eslint-enable eqeqeq */\n    return this.adapter.innerWidth()\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/context-destroy */\n  Context.prototype.destroy = function() {\n    var allWaypoints = []\n    for (var axis in this.waypoints) {\n      for (var waypointKey in this.waypoints[axis]) {\n        allWaypoints.push(this.waypoints[axis][waypointKey])\n      }\n    }\n    for (var i = 0, end = allWaypoints.length; i < end; i++) {\n      allWaypoints[i].destroy()\n    }\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/context-refresh */\n  Context.prototype.refresh = function() {\n    /*eslint-disable eqeqeq */\n    var isWindow = this.element == this.element.window\n    /*eslint-enable eqeqeq */\n    var contextOffset = isWindow ? undefined : this.adapter.offset()\n    var triggeredGroups = {}\n    var axes\n\n    this.handleScroll()\n    axes = {\n      horizontal: {\n        contextOffset: isWindow ? 0 : contextOffset.left,\n        contextScroll: isWindow ? 0 : this.oldScroll.x,\n        contextDimension: this.innerWidth(),\n        oldScroll: this.oldScroll.x,\n        forward: 'right',\n        backward: 'left',\n        offsetProp: 'left'\n      },\n      vertical: {\n        contextOffset: isWindow ? 0 : contextOffset.top,\n        contextScroll: isWindow ? 0 : this.oldScroll.y,\n        contextDimension: this.innerHeight(),\n        oldScroll: this.oldScroll.y,\n        forward: 'down',\n        backward: 'up',\n        offsetProp: 'top'\n      }\n    }\n\n    for (var axisKey in axes) {\n      var axis = axes[axisKey]\n      for (var waypointKey in this.waypoints[axisKey]) {\n        var waypoint = this.waypoints[axisKey][waypointKey]\n        var adjustment = waypoint.options.offset\n        var oldTriggerPoint = waypoint.triggerPoint\n        var elementOffset = 0\n        var freshWaypoint = oldTriggerPoint == null\n        var contextModifier, wasBeforeScroll, nowAfterScroll\n        var triggeredBackward, triggeredForward\n\n        if (waypoint.element !== waypoint.element.window) {\n          elementOffset = waypoint.adapter.offset()[axis.offsetProp]\n        }\n\n        if (typeof adjustment === 'function') {\n          adjustment = adjustment.apply(waypoint)\n        }\n        else if (typeof adjustment === 'string') {\n          adjustment = parseFloat(adjustment)\n          if (waypoint.options.offset.indexOf('%') > - 1) {\n            adjustment = Math.ceil(axis.contextDimension * adjustment / 100)\n          }\n        }\n\n        contextModifier = axis.contextScroll - axis.contextOffset\n        waypoint.triggerPoint = Math.floor(elementOffset + contextModifier - adjustment)\n        wasBeforeScroll = oldTriggerPoint < axis.oldScroll\n        nowAfterScroll = waypoint.triggerPoint >= axis.oldScroll\n        triggeredBackward = wasBeforeScroll && nowAfterScroll\n        triggeredForward = !wasBeforeScroll && !nowAfterScroll\n\n        if (!freshWaypoint && triggeredBackward) {\n          waypoint.queueTrigger(axis.backward)\n          triggeredGroups[waypoint.group.id] = waypoint.group\n        }\n        else if (!freshWaypoint && triggeredForward) {\n          waypoint.queueTrigger(axis.forward)\n          triggeredGroups[waypoint.group.id] = waypoint.group\n        }\n        else if (freshWaypoint && axis.oldScroll >= waypoint.triggerPoint) {\n          waypoint.queueTrigger(axis.forward)\n          triggeredGroups[waypoint.group.id] = waypoint.group\n        }\n      }\n    }\n\n    Waypoint.requestAnimationFrame(function() {\n      for (var groupKey in triggeredGroups) {\n        triggeredGroups[groupKey].flushTriggers()\n      }\n    })\n\n    return this\n  }\n\n  /* Private */\n  Context.findOrCreateByElement = function(element) {\n    return Context.findByElement(element) || new Context(element)\n  }\n\n  /* Private */\n  Context.refreshAll = function() {\n    for (var contextId in contexts) {\n      contexts[contextId].refresh()\n    }\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/context-find-by-element */\n  Context.findByElement = function(element) {\n    return contexts[element.waypointContextKey]\n  }\n\n  window.onload = function() {\n    if (oldWindowLoad) {\n      oldWindowLoad()\n    }\n    Context.refreshAll()\n  }\n\n\n  Waypoint.requestAnimationFrame = function(callback) {\n    var requestFn = window.requestAnimationFrame ||\n      window.mozRequestAnimationFrame ||\n      window.webkitRequestAnimationFrame ||\n      requestAnimationFrameShim\n    requestFn.call(window, callback)\n  }\n  Waypoint.Context = Context\n}())\n;(function() {\n  'use strict'\n\n  function byTriggerPoint(a, b) {\n    return a.triggerPoint - b.triggerPoint\n  }\n\n  function byReverseTriggerPoint(a, b) {\n    return b.triggerPoint - a.triggerPoint\n  }\n\n  var groups = {\n    vertical: {},\n    horizontal: {}\n  }\n  var Waypoint = window.Waypoint\n\n  /* http://imakewebthings.com/waypoints/api/group */\n  function Group(options) {\n    this.name = options.name\n    this.axis = options.axis\n    this.id = this.name + '-' + this.axis\n    this.waypoints = []\n    this.clearTriggerQueues()\n    groups[this.axis][this.name] = this\n  }\n\n  /* Private */\n  Group.prototype.add = function(waypoint) {\n    this.waypoints.push(waypoint)\n  }\n\n  /* Private */\n  Group.prototype.clearTriggerQueues = function() {\n    this.triggerQueues = {\n      up: [],\n      down: [],\n      left: [],\n      right: []\n    }\n  }\n\n  /* Private */\n  Group.prototype.flushTriggers = function() {\n    for (var direction in this.triggerQueues) {\n      var waypoints = this.triggerQueues[direction]\n      var reverse = direction === 'up' || direction === 'left'\n      waypoints.sort(reverse ? byReverseTriggerPoint : byTriggerPoint)\n      for (var i = 0, end = waypoints.length; i < end; i += 1) {\n        var waypoint = waypoints[i]\n        if (waypoint.options.continuous || i === waypoints.length - 1) {\n          waypoint.trigger([direction])\n        }\n      }\n    }\n    this.clearTriggerQueues()\n  }\n\n  /* Private */\n  Group.prototype.next = function(waypoint) {\n    this.waypoints.sort(byTriggerPoint)\n    var index = Waypoint.Adapter.inArray(waypoint, this.waypoints)\n    var isLast = index === this.waypoints.length - 1\n    return isLast ? null : this.waypoints[index + 1]\n  }\n\n  /* Private */\n  Group.prototype.previous = function(waypoint) {\n    this.waypoints.sort(byTriggerPoint)\n    var index = Waypoint.Adapter.inArray(waypoint, this.waypoints)\n    return index ? this.waypoints[index - 1] : null\n  }\n\n  /* Private */\n  Group.prototype.queueTrigger = function(waypoint, direction) {\n    this.triggerQueues[direction].push(waypoint)\n  }\n\n  /* Private */\n  Group.prototype.remove = function(waypoint) {\n    var index = Waypoint.Adapter.inArray(waypoint, this.waypoints)\n    if (index > -1) {\n      this.waypoints.splice(index, 1)\n    }\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/first */\n  Group.prototype.first = function() {\n    return this.waypoints[0]\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/last */\n  Group.prototype.last = function() {\n    return this.waypoints[this.waypoints.length - 1]\n  }\n\n  /* Private */\n  Group.findOrCreate = function(options) {\n    return groups[options.axis][options.name] || new Group(options)\n  }\n\n  Waypoint.Group = Group\n}())\n;(function() {\n  'use strict'\n\n  var $ = window.Zepto\n  var Waypoint = window.Waypoint\n\n  function ZeptoAdapter(element) {\n    this.element = element\n    this.$element = $(element)\n  }\n\n  $.each([\n    'off',\n    'on',\n    'scrollLeft',\n    'scrollTop'\n  ], function(i, method) {\n    ZeptoAdapter.prototype[method] = function() {\n      var args = Array.prototype.slice.call(arguments)\n      return this.$element[method].apply(this.$element, args)\n    }\n  })\n\n  ZeptoAdapter.prototype.offset = function() {\n    if (this.element !== this.element.window) {\n      return this.$element.offset()\n    }\n  }\n\n  // Adapted from https://gist.github.com/wheresrhys/5823198\n  $.each([\n    'width',\n    'height'\n  ], function(i, dimension) {\n    function createDimensionMethod($element, includeBorder) {\n      return function(includeMargin) {\n        var $element = this.$element\n        var size = $element[dimension]()\n        var sides = {\n          width: ['left', 'right'],\n          height: ['top', 'bottom']\n        }\n\n        $.each(sides[dimension], function(i, side) {\n          size += parseInt($element.css('padding-' + side), 10)\n          if (includeBorder) {\n            size += parseInt($element.css('border-' + side + '-width'), 10)\n          }\n          if (includeMargin) {\n            size += parseInt($element.css('margin-' + side), 10)\n          }\n        })\n        return size\n      }\n    }\n\n    var innerMethod = $.camelCase('inner-' + dimension)\n    var outerMethod = $.camelCase('outer-' + dimension)\n\n    ZeptoAdapter.prototype[innerMethod] = createDimensionMethod(false)\n    ZeptoAdapter.prototype[outerMethod] = createDimensionMethod(true)\n  })\n\n  $.each([\n    'extend',\n    'inArray'\n  ], function(i, method) {\n    ZeptoAdapter[method] = $[method]\n  })\n\n  ZeptoAdapter.isEmptyObject = function(obj) {\n    /* eslint no-unused-vars: 0 */\n    for (var name in obj) {\n      return false\n    }\n    return true\n  }\n\n  Waypoint.adapters.push({\n    name: 'zepto',\n    Adapter: ZeptoAdapter\n  })\n  Waypoint.Adapter = ZeptoAdapter\n}())\n;(function() {\n  'use strict'\n\n  var Waypoint = window.Waypoint\n\n  function createExtension(framework) {\n    return function() {\n      var waypoints = []\n      var overrides = arguments[0]\n\n      if (framework.isFunction(arguments[0])) {\n        overrides = framework.extend({}, arguments[1])\n        overrides.handler = arguments[0]\n      }\n\n      this.each(function() {\n        var options = framework.extend({}, overrides, {\n          element: this\n        })\n        if (typeof options.context === 'string') {\n          options.context = framework(this).closest(options.context)[0]\n        }\n        waypoints.push(new Waypoint(options))\n      })\n\n      return waypoints\n    }\n  }\n\n  if (window.jQuery) {\n    window.jQuery.fn.waypoint = createExtension(window.jQuery)\n  }\n  if (window.Zepto) {\n    window.Zepto.fn.waypoint = createExtension(window.Zepto)\n  }\n}())\n;","Magezon_Builder/js/waypoints/waypoints.debug.js":"/*!\nWaypoints Debug - 4.0.1\nCopyright \u00a9 2011-2016 Caleb Troughton\nLicensed under the MIT license.\nhttps://github.com/imakewebthings/waypoints/blob/master/licenses.txt\n*/\n(function() {\n  'use strict'\n\n  var displayNoneMessage = [\n    'You have a Waypoint element with display none. For more information on ',\n    'why this is a bad idea read ',\n    'http://imakewebthings.com/waypoints/guides/debugging/#display-none'\n  ].join('')\n  var fixedMessage = [\n    'You have a Waypoint element with fixed positioning. For more ',\n    'information on why this is a bad idea read ',\n    'http://imakewebthings.com/waypoints/guides/debugging/#fixed-position'\n  ].join('')\n\n  function checkWaypointStyles() {\n    var originalRefresh = window.Waypoint.Context.prototype.refresh\n\n    window.Waypoint.Context.prototype.refresh = function() {\n      for (var axis in this.waypoints) {\n        for (var key in this.waypoints[axis]) {\n          var waypoint = this.waypoints[axis][key]\n          var style = window.getComputedStyle(waypoint.element)\n          if (!waypoint.enabled) {\n            continue\n          }\n          if (style && style.display === 'none') {\n            console.error(displayNoneMessage)\n          }\n          if (style && style.position === 'fixed') {\n            console.error(fixedMessage)\n          }\n        }\n      }\n      return originalRefresh.call(this)\n    }\n  }\n\n  checkWaypointStyles()\n}())\n;","Magezon_Builder/js/waypoints/zepto.waypoints.min.js":"/*!\nWaypoints - 4.0.1\nCopyright \u00a9 2011-2016 Caleb Troughton\nLicensed under the MIT license.\nhttps://github.com/imakewebthings/waypoints/blob/master/licenses.txt\n*/\n!function(){\"use strict\";function t(o){if(!o)throw new Error(\"No options passed to Waypoint constructor\");if(!o.element)throw new Error(\"No element option passed to Waypoint constructor\");if(!o.handler)throw new Error(\"No handler option passed to Waypoint constructor\");this.key=\"waypoint-\"+e,this.options=t.Adapter.extend({},t.defaults,o),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=o.handler,this.axis=this.options.horizontal?\"horizontal\":\"vertical\",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}var e=0,i={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var o in i)e.push(i[o]);for(var n=0,r=e.length;r>n;n++)e[n][t]()},t.destroyAll=function(){t.invokeAll(\"destroy\")},t.disableAll=function(){t.invokeAll(\"disable\")},t.enableAll=function(){t.Context.refreshAll();for(var e in i)i[e].enabled=!0;return this},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:\"default\",horizontal:!1,offset:0},t.offsetAliases={\"bottom-in-view\":function(){return this.context.innerHeight()-this.adapter.outerHeight()},\"right-in-view\":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){\"use strict\";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=n.Adapter,this.adapter=new this.Adapter(t),this.key=\"waypoint-context-\"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,o[t.waypointContextKey]=this,i+=1,n.windowContext||(n.windowContext=!0,n.windowContext=new e(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var i=0,o={},n=window.Waypoint,r=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?\"horizontal\":\"vertical\";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical),i=this.element==this.element.window;t&&e&&!i&&(this.adapter.off(\".waypoints\"),delete o[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on(\"resize.waypoints\",function(){e.didResize||(e.didResize=!0,n.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on(\"scroll.waypoints\",function(){(!e.didScroll||n.isTouch)&&(e.didScroll=!0,n.requestAnimationFrame(t))})},e.prototype.handleResize=function(){n.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:\"right\",backward:\"left\"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:\"down\",backward:\"up\"}};for(var i in e){var o=e[i],n=o.newScroll>o.oldScroll,r=n?o.forward:o.backward;for(var s in this.waypoints[i]){var a=this.waypoints[i][s];if(null!==a.triggerPoint){var l=o.oldScroll<a.triggerPoint,h=o.newScroll>=a.triggerPoint,p=l&&h,u=!l&&!h;(p||u)&&(a.queueTrigger(r),t[a.group.id]=a.group)}}}for(var c in t)t[c].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?n.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?n.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var o=0,n=t.length;n>o;o++)t[o].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,i=e?void 0:this.adapter.offset(),o={};this.handleScroll(),t={horizontal:{contextOffset:e?0:i.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:\"right\",backward:\"left\",offsetProp:\"left\"},vertical:{contextOffset:e?0:i.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:\"down\",backward:\"up\",offsetProp:\"top\"}};for(var r in t){var s=t[r];for(var a in this.waypoints[r]){var l,h,p,u,c,d=this.waypoints[r][a],f=d.options.offset,w=d.triggerPoint,y=0,g=null==w;d.element!==d.element.window&&(y=d.adapter.offset()[s.offsetProp]),\"function\"==typeof f?f=f.apply(d):\"string\"==typeof f&&(f=parseFloat(f),d.options.offset.indexOf(\"%\")>-1&&(f=Math.ceil(s.contextDimension*f/100))),l=s.contextScroll-s.contextOffset,d.triggerPoint=Math.floor(y+l-f),h=w<s.oldScroll,p=d.triggerPoint>=s.oldScroll,u=h&&p,c=!h&&!p,!g&&u?(d.queueTrigger(s.backward),o[d.group.id]=d.group):!g&&c?(d.queueTrigger(s.forward),o[d.group.id]=d.group):g&&s.oldScroll>=d.triggerPoint&&(d.queueTrigger(s.forward),o[d.group.id]=d.group)}}return n.requestAnimationFrame(function(){for(var t in o)o[t].flushTriggers()}),this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in o)o[t].refresh()},e.findByElement=function(t){return o[t.waypointContextKey]},window.onload=function(){r&&r(),e.refreshAll()},n.requestAnimationFrame=function(e){var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t;i.call(window,e)},n.Context=e}(),function(){\"use strict\";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function i(t){this.name=t.name,this.axis=t.axis,this.id=this.name+\"-\"+this.axis,this.waypoints=[],this.clearTriggerQueues(),o[this.axis][this.name]=this}var o={vertical:{},horizontal:{}},n=window.Waypoint;i.prototype.add=function(t){this.waypoints.push(t)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var o=this.triggerQueues[i],n=\"up\"===i||\"left\"===i;o.sort(n?e:t);for(var r=0,s=o.length;s>r;r+=1){var a=o[r];(a.options.continuous||r===o.length-1)&&a.trigger([i])}}this.clearTriggerQueues()},i.prototype.next=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints),o=i===this.waypoints.length-1;return o?null:this.waypoints[i+1]},i.prototype.previous=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints);return i?this.waypoints[i-1]:null},i.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},i.prototype.remove=function(t){var e=n.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(t){return o[t.axis][t.name]||new i(t)},n.Group=i}(),function(){\"use strict\";function t(t){this.element=t,this.$element=e(t)}var e=window.Zepto,i=window.Waypoint;e.each([\"off\",\"on\",\"scrollLeft\",\"scrollTop\"],function(e,i){t.prototype[i]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[i].apply(this.$element,t)}}),t.prototype.offset=function(){return this.element!==this.element.window?this.$element.offset():void 0},e.each([\"width\",\"height\"],function(i,o){function n(t,i){return function(t){var n=this.$element,r=n[o](),s={width:[\"left\",\"right\"],height:[\"top\",\"bottom\"]};return e.each(s[o],function(e,o){r+=parseInt(n.css(\"padding-\"+o),10),i&&(r+=parseInt(n.css(\"border-\"+o+\"-width\"),10)),t&&(r+=parseInt(n.css(\"margin-\"+o),10))}),r}}var r=e.camelCase(\"inner-\"+o),s=e.camelCase(\"outer-\"+o);t.prototype[r]=n(!1),t.prototype[s]=n(!0)}),e.each([\"extend\",\"inArray\"],function(i,o){t[o]=e[o]}),t.isEmptyObject=function(t){for(var e in t)return!1;return!0},i.adapters.push({name:\"zepto\",Adapter:t}),i.Adapter=t}(),function(){\"use strict\";function t(t){return function(){var i=[],o=arguments[0];return t.isFunction(arguments[0])&&(o=t.extend({},arguments[1]),o.handler=arguments[0]),this.each(function(){var n=t.extend({},o,{element:this});\"string\"==typeof n.context&&(n.context=t(this).closest(n.context)[0]),i.push(new e(n))}),i}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}();","Magezon_Builder/js/waypoints/jquery.waypoints.js":"/*!\nWaypoints - 4.0.1\nCopyright \u00a9 2011-2016 Caleb Troughton\nLicensed under the MIT license.\nhttps://github.com/imakewebthings/waypoints/blob/master/licenses.txt\n*/\ndefine(['jquery'], function($) {\n(function() {\n  'use strict'\n\n  var keyCounter = 0\n  var allWaypoints = {}\n\n  /* http://imakewebthings.com/waypoints/api/waypoint */\n  function Waypoint(options) {\n    if (!options) {\n      throw new Error('No options passed to Waypoint constructor')\n    }\n    if (!options.element) {\n      throw new Error('No element option passed to Waypoint constructor')\n    }\n    if (!options.handler) {\n      throw new Error('No handler option passed to Waypoint constructor')\n    }\n\n    this.key = 'waypoint-' + keyCounter\n    this.options = Waypoint.Adapter.extend({}, Waypoint.defaults, options)\n    this.element = this.options.element\n    this.adapter = new Waypoint.Adapter(this.element)\n    this.callback = options.handler\n    this.axis = this.options.horizontal ? 'horizontal' : 'vertical'\n    this.enabled = this.options.enabled\n    this.triggerPoint = null\n    this.group = Waypoint.Group.findOrCreate({\n      name: this.options.group,\n      axis: this.axis\n    })\n    this.context = Waypoint.Context.findOrCreateByElement(this.options.context)\n\n    if (Waypoint.offsetAliases[this.options.offset]) {\n      this.options.offset = Waypoint.offsetAliases[this.options.offset]\n    }\n    this.group.add(this)\n    this.context.add(this)\n    allWaypoints[this.key] = this\n    keyCounter += 1\n  }\n\n  /* Private */\n  Waypoint.prototype.queueTrigger = function(direction) {\n    this.group.queueTrigger(this, direction)\n  }\n\n  /* Private */\n  Waypoint.prototype.trigger = function(args) {\n    if (!this.enabled) {\n      return\n    }\n    if (this.callback) {\n      this.callback.apply(this, args)\n    }\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/destroy */\n  Waypoint.prototype.destroy = function() {\n    this.context.remove(this)\n    this.group.remove(this)\n    delete allWaypoints[this.key]\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/disable */\n  Waypoint.prototype.disable = function() {\n    this.enabled = false\n    return this\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/enable */\n  Waypoint.prototype.enable = function() {\n    this.context.refresh()\n    this.enabled = true\n    return this\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/next */\n  Waypoint.prototype.next = function() {\n    return this.group.next(this)\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/previous */\n  Waypoint.prototype.previous = function() {\n    return this.group.previous(this)\n  }\n\n  /* Private */\n  Waypoint.invokeAll = function(method) {\n    var allWaypointsArray = []\n    for (var waypointKey in allWaypoints) {\n      allWaypointsArray.push(allWaypoints[waypointKey])\n    }\n    for (var i = 0, end = allWaypointsArray.length; i < end; i++) {\n      allWaypointsArray[i][method]()\n    }\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/destroy-all */\n  Waypoint.destroyAll = function() {\n    Waypoint.invokeAll('destroy')\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/disable-all */\n  Waypoint.disableAll = function() {\n    Waypoint.invokeAll('disable')\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/enable-all */\n  Waypoint.enableAll = function() {\n    Waypoint.Context.refreshAll()\n    for (var waypointKey in allWaypoints) {\n      allWaypoints[waypointKey].enabled = true\n    }\n    return this\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/refresh-all */\n  Waypoint.refreshAll = function() {\n    Waypoint.Context.refreshAll()\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/viewport-height */\n  Waypoint.viewportHeight = function() {\n    return window.innerHeight || document.documentElement.clientHeight\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/viewport-width */\n  Waypoint.viewportWidth = function() {\n    return document.documentElement.clientWidth\n  }\n\n  Waypoint.adapters = []\n\n  Waypoint.defaults = {\n    context: window,\n    continuous: true,\n    enabled: true,\n    group: 'default',\n    horizontal: false,\n    offset: 0\n  }\n\n  Waypoint.offsetAliases = {\n    'bottom-in-view': function() {\n      return this.context.innerHeight() - this.adapter.outerHeight()\n    },\n    'right-in-view': function() {\n      return this.context.innerWidth() - this.adapter.outerWidth()\n    }\n  }\n\n  window.Waypoint = Waypoint\n}())\n;(function() {\n  'use strict'\n\n  function requestAnimationFrameShim(callback) {\n    window.setTimeout(callback, 1000 / 60)\n  }\n\n  var keyCounter = 0\n  var contexts = {}\n  var Waypoint = window.Waypoint\n  var oldWindowLoad = window.onload\n\n  /* http://imakewebthings.com/waypoints/api/context */\n  function Context(element) {\n    this.element = element\n    this.Adapter = Waypoint.Adapter\n    this.adapter = new this.Adapter(element)\n    this.key = 'waypoint-context-' + keyCounter\n    this.didScroll = false\n    this.didResize = false\n    this.oldScroll = {\n      x: this.adapter.scrollLeft(),\n      y: this.adapter.scrollTop()\n    }\n    this.waypoints = {\n      vertical: {},\n      horizontal: {}\n    }\n\n    element.waypointContextKey = this.key\n    contexts[element.waypointContextKey] = this\n    keyCounter += 1\n    if (!Waypoint.windowContext) {\n      Waypoint.windowContext = true\n      Waypoint.windowContext = new Context(window)\n    }\n\n    this.createThrottledScrollHandler()\n    this.createThrottledResizeHandler()\n  }\n\n  /* Private */\n  Context.prototype.add = function(waypoint) {\n    var axis = waypoint.options.horizontal ? 'horizontal' : 'vertical'\n    this.waypoints[axis][waypoint.key] = waypoint\n    this.refresh()\n  }\n\n  /* Private */\n  Context.prototype.checkEmpty = function() {\n    var horizontalEmpty = this.Adapter.isEmptyObject(this.waypoints.horizontal)\n    var verticalEmpty = this.Adapter.isEmptyObject(this.waypoints.vertical)\n    var isWindow = this.element == this.element.window\n    if (horizontalEmpty && verticalEmpty && !isWindow) {\n      this.adapter.off('.waypoints')\n      delete contexts[this.key]\n    }\n  }\n\n  /* Private */\n  Context.prototype.createThrottledResizeHandler = function() {\n    var self = this\n\n    function resizeHandler() {\n      self.handleResize()\n      self.didResize = false\n    }\n\n    this.adapter.on('resize.waypoints', function() {\n      if (!self.didResize) {\n        self.didResize = true\n        Waypoint.requestAnimationFrame(resizeHandler)\n      }\n    })\n  }\n\n  /* Private */\n  Context.prototype.createThrottledScrollHandler = function() {\n    var self = this\n    function scrollHandler() {\n      self.handleScroll()\n      self.didScroll = false\n    }\n\n    this.adapter.on('scroll.waypoints', function() {\n      if (!self.didScroll || Waypoint.isTouch) {\n        self.didScroll = true\n        Waypoint.requestAnimationFrame(scrollHandler)\n      }\n    })\n  }\n\n  /* Private */\n  Context.prototype.handleResize = function() {\n    Waypoint.Context.refreshAll()\n  }\n\n  /* Private */\n  Context.prototype.handleScroll = function() {\n    var triggeredGroups = {}\n    var axes = {\n      horizontal: {\n        newScroll: this.adapter.scrollLeft(),\n        oldScroll: this.oldScroll.x,\n        forward: 'right',\n        backward: 'left'\n      },\n      vertical: {\n        newScroll: this.adapter.scrollTop(),\n        oldScroll: this.oldScroll.y,\n        forward: 'down',\n        backward: 'up'\n      }\n    }\n\n    for (var axisKey in axes) {\n      var axis = axes[axisKey]\n      var isForward = axis.newScroll > axis.oldScroll\n      var direction = isForward ? axis.forward : axis.backward\n\n      for (var waypointKey in this.waypoints[axisKey]) {\n        var waypoint = this.waypoints[axisKey][waypointKey]\n        if (waypoint.triggerPoint === null) {\n          continue\n        }\n        var wasBeforeTriggerPoint = axis.oldScroll < waypoint.triggerPoint\n        var nowAfterTriggerPoint = axis.newScroll >= waypoint.triggerPoint\n        var crossedForward = wasBeforeTriggerPoint && nowAfterTriggerPoint\n        var crossedBackward = !wasBeforeTriggerPoint && !nowAfterTriggerPoint\n        if (crossedForward || crossedBackward) {\n          waypoint.queueTrigger(direction)\n          triggeredGroups[waypoint.group.id] = waypoint.group\n        }\n      }\n    }\n\n    for (var groupKey in triggeredGroups) {\n      triggeredGroups[groupKey].flushTriggers()\n    }\n\n    this.oldScroll = {\n      x: axes.horizontal.newScroll,\n      y: axes.vertical.newScroll\n    }\n  }\n\n  /* Private */\n  Context.prototype.innerHeight = function() {\n    /*eslint-disable eqeqeq */\n    if (this.element == this.element.window) {\n      return Waypoint.viewportHeight()\n    }\n    /*eslint-enable eqeqeq */\n    return this.adapter.innerHeight()\n  }\n\n  /* Private */\n  Context.prototype.remove = function(waypoint) {\n    delete this.waypoints[waypoint.axis][waypoint.key]\n    this.checkEmpty()\n  }\n\n  /* Private */\n  Context.prototype.innerWidth = function() {\n    /*eslint-disable eqeqeq */\n    if (this.element == this.element.window) {\n      return Waypoint.viewportWidth()\n    }\n    /*eslint-enable eqeqeq */\n    return this.adapter.innerWidth()\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/context-destroy */\n  Context.prototype.destroy = function() {\n    var allWaypoints = []\n    for (var axis in this.waypoints) {\n      for (var waypointKey in this.waypoints[axis]) {\n        allWaypoints.push(this.waypoints[axis][waypointKey])\n      }\n    }\n    for (var i = 0, end = allWaypoints.length; i < end; i++) {\n      allWaypoints[i].destroy()\n    }\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/context-refresh */\n  Context.prototype.refresh = function() {\n    /*eslint-disable eqeqeq */\n    var isWindow = this.element == this.element.window\n    /*eslint-enable eqeqeq */\n    var contextOffset = isWindow ? undefined : this.adapter.offset()\n    var triggeredGroups = {}\n    var axes\n\n    this.handleScroll()\n    axes = {\n      horizontal: {\n        contextOffset: isWindow ? 0 : contextOffset.left,\n        contextScroll: isWindow ? 0 : this.oldScroll.x,\n        contextDimension: this.innerWidth(),\n        oldScroll: this.oldScroll.x,\n        forward: 'right',\n        backward: 'left',\n        offsetProp: 'left'\n      },\n      vertical: {\n        contextOffset: isWindow ? 0 : contextOffset.top,\n        contextScroll: isWindow ? 0 : this.oldScroll.y,\n        contextDimension: this.innerHeight(),\n        oldScroll: this.oldScroll.y,\n        forward: 'down',\n        backward: 'up',\n        offsetProp: 'top'\n      }\n    }\n\n    for (var axisKey in axes) {\n      var axis = axes[axisKey]\n      for (var waypointKey in this.waypoints[axisKey]) {\n        var waypoint = this.waypoints[axisKey][waypointKey]\n        var adjustment = waypoint.options.offset\n        var oldTriggerPoint = waypoint.triggerPoint\n        var elementOffset = 0\n        var freshWaypoint = oldTriggerPoint == null\n        var contextModifier, wasBeforeScroll, nowAfterScroll\n        var triggeredBackward, triggeredForward\n\n        if (waypoint.element !== waypoint.element.window) {\n          elementOffset = waypoint.adapter.offset()[axis.offsetProp]\n        }\n\n        if (typeof adjustment === 'function') {\n          adjustment = adjustment.apply(waypoint)\n        }\n        else if (typeof adjustment === 'string') {\n          adjustment = parseFloat(adjustment)\n          if (waypoint.options.offset.indexOf('%') > - 1) {\n            adjustment = Math.ceil(axis.contextDimension * adjustment / 100)\n          }\n        }\n\n        contextModifier = axis.contextScroll - axis.contextOffset\n        waypoint.triggerPoint = Math.floor(elementOffset + contextModifier - adjustment)\n        wasBeforeScroll = oldTriggerPoint < axis.oldScroll\n        nowAfterScroll = waypoint.triggerPoint >= axis.oldScroll\n        triggeredBackward = wasBeforeScroll && nowAfterScroll\n        triggeredForward = !wasBeforeScroll && !nowAfterScroll\n\n        if (!freshWaypoint && triggeredBackward) {\n          waypoint.queueTrigger(axis.backward)\n          triggeredGroups[waypoint.group.id] = waypoint.group\n        }\n        else if (!freshWaypoint && triggeredForward) {\n          waypoint.queueTrigger(axis.forward)\n          triggeredGroups[waypoint.group.id] = waypoint.group\n        }\n        else if (freshWaypoint && axis.oldScroll >= waypoint.triggerPoint) {\n          waypoint.queueTrigger(axis.forward)\n          triggeredGroups[waypoint.group.id] = waypoint.group\n        }\n      }\n    }\n\n    Waypoint.requestAnimationFrame(function() {\n      for (var groupKey in triggeredGroups) {\n        triggeredGroups[groupKey].flushTriggers()\n      }\n    })\n\n    return this\n  }\n\n  /* Private */\n  Context.findOrCreateByElement = function(element) {\n    return Context.findByElement(element) || new Context(element)\n  }\n\n  /* Private */\n  Context.refreshAll = function() {\n    for (var contextId in contexts) {\n      contexts[contextId].refresh()\n    }\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/context-find-by-element */\n  Context.findByElement = function(element) {\n    return contexts[element.waypointContextKey]\n  }\n\n  window.onload = function() {\n    if (oldWindowLoad) {\n      oldWindowLoad()\n    }\n    Context.refreshAll()\n  }\n\n\n  Waypoint.requestAnimationFrame = function(callback) {\n    var requestFn = window.requestAnimationFrame ||\n      window.mozRequestAnimationFrame ||\n      window.webkitRequestAnimationFrame ||\n      requestAnimationFrameShim\n    requestFn.call(window, callback)\n  }\n  Waypoint.Context = Context\n}())\n;(function() {\n  'use strict'\n\n  function byTriggerPoint(a, b) {\n    return a.triggerPoint - b.triggerPoint\n  }\n\n  function byReverseTriggerPoint(a, b) {\n    return b.triggerPoint - a.triggerPoint\n  }\n\n  var groups = {\n    vertical: {},\n    horizontal: {}\n  }\n  var Waypoint = window.Waypoint\n\n  /* http://imakewebthings.com/waypoints/api/group */\n  function Group(options) {\n    this.name = options.name\n    this.axis = options.axis\n    this.id = this.name + '-' + this.axis\n    this.waypoints = []\n    this.clearTriggerQueues()\n    groups[this.axis][this.name] = this\n  }\n\n  /* Private */\n  Group.prototype.add = function(waypoint) {\n    this.waypoints.push(waypoint)\n  }\n\n  /* Private */\n  Group.prototype.clearTriggerQueues = function() {\n    this.triggerQueues = {\n      up: [],\n      down: [],\n      left: [],\n      right: []\n    }\n  }\n\n  /* Private */\n  Group.prototype.flushTriggers = function() {\n    for (var direction in this.triggerQueues) {\n      var waypoints = this.triggerQueues[direction]\n      var reverse = direction === 'up' || direction === 'left'\n      waypoints.sort(reverse ? byReverseTriggerPoint : byTriggerPoint)\n      for (var i = 0, end = waypoints.length; i < end; i += 1) {\n        var waypoint = waypoints[i]\n        if (waypoint.options.continuous || i === waypoints.length - 1) {\n          waypoint.trigger([direction])\n        }\n      }\n    }\n    this.clearTriggerQueues()\n  }\n\n  /* Private */\n  Group.prototype.next = function(waypoint) {\n    this.waypoints.sort(byTriggerPoint)\n    var index = Waypoint.Adapter.inArray(waypoint, this.waypoints)\n    var isLast = index === this.waypoints.length - 1\n    return isLast ? null : this.waypoints[index + 1]\n  }\n\n  /* Private */\n  Group.prototype.previous = function(waypoint) {\n    this.waypoints.sort(byTriggerPoint)\n    var index = Waypoint.Adapter.inArray(waypoint, this.waypoints)\n    return index ? this.waypoints[index - 1] : null\n  }\n\n  /* Private */\n  Group.prototype.queueTrigger = function(waypoint, direction) {\n    this.triggerQueues[direction].push(waypoint)\n  }\n\n  /* Private */\n  Group.prototype.remove = function(waypoint) {\n    var index = Waypoint.Adapter.inArray(waypoint, this.waypoints)\n    if (index > -1) {\n      this.waypoints.splice(index, 1)\n    }\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/first */\n  Group.prototype.first = function() {\n    return this.waypoints[0]\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/last */\n  Group.prototype.last = function() {\n    return this.waypoints[this.waypoints.length - 1]\n  }\n\n  /* Private */\n  Group.findOrCreate = function(options) {\n    return groups[options.axis][options.name] || new Group(options)\n  }\n\n  Waypoint.Group = Group\n}())\n;(function() {\n  'use strict'\n\n  var $ = window.jQuery\n  var Waypoint = window.Waypoint\n\n  function JQueryAdapter(element) {\n    this.$element = $(element)\n  }\n\n  $.each([\n    'innerHeight',\n    'innerWidth',\n    'off',\n    'offset',\n    'on',\n    'outerHeight',\n    'outerWidth',\n    'scrollLeft',\n    'scrollTop'\n  ], function(i, method) {\n    JQueryAdapter.prototype[method] = function() {\n      var args = Array.prototype.slice.call(arguments)\n      return this.$element[method].apply(this.$element, args)\n    }\n  })\n\n  $.each([\n    'extend',\n    'inArray',\n    'isEmptyObject'\n  ], function(i, method) {\n    JQueryAdapter[method] = $[method]\n  })\n\n  Waypoint.adapters.push({\n    name: 'jquery',\n    Adapter: JQueryAdapter\n  })\n  Waypoint.Adapter = JQueryAdapter\n}())\n;(function() {\n  'use strict'\n\n  var Waypoint = window.Waypoint\n\n  function createExtension(framework) {\n    return function() {\n      var waypoints = []\n      var overrides = arguments[0]\n\n      if (framework.isFunction(arguments[0])) {\n        overrides = framework.extend({}, arguments[1])\n        overrides.handler = arguments[0]\n      }\n\n      this.each(function() {\n        var options = framework.extend({}, overrides, {\n          element: this\n        })\n        if (typeof options.context === 'string') {\n          options.context = framework(this).closest(options.context)[0]\n        }\n        waypoints.push(new Waypoint(options))\n      })\n\n      return waypoints\n    }\n  }\n\n  if (window.jQuery) {\n    window.jQuery.fn.waypoint = createExtension(window.jQuery)\n  }\n  if (window.Zepto) {\n    window.Zepto.fn.waypoint = createExtension(window.Zepto)\n  }\n}())\n;\n})","Magezon_Builder/js/waypoints/noframework.waypoints.js":"/*!\nWaypoints - 4.0.1\nCopyright \u00a9 2011-2016 Caleb Troughton\nLicensed under the MIT license.\nhttps://github.com/imakewebthings/waypoints/blob/master/licenses.txt\n*/\n(function() {\n  'use strict'\n\n  var keyCounter = 0\n  var allWaypoints = {}\n\n  /* http://imakewebthings.com/waypoints/api/waypoint */\n  function Waypoint(options) {\n    if (!options) {\n      throw new Error('No options passed to Waypoint constructor')\n    }\n    if (!options.element) {\n      throw new Error('No element option passed to Waypoint constructor')\n    }\n    if (!options.handler) {\n      throw new Error('No handler option passed to Waypoint constructor')\n    }\n\n    this.key = 'waypoint-' + keyCounter\n    this.options = Waypoint.Adapter.extend({}, Waypoint.defaults, options)\n    this.element = this.options.element\n    this.adapter = new Waypoint.Adapter(this.element)\n    this.callback = options.handler\n    this.axis = this.options.horizontal ? 'horizontal' : 'vertical'\n    this.enabled = this.options.enabled\n    this.triggerPoint = null\n    this.group = Waypoint.Group.findOrCreate({\n      name: this.options.group,\n      axis: this.axis\n    })\n    this.context = Waypoint.Context.findOrCreateByElement(this.options.context)\n\n    if (Waypoint.offsetAliases[this.options.offset]) {\n      this.options.offset = Waypoint.offsetAliases[this.options.offset]\n    }\n    this.group.add(this)\n    this.context.add(this)\n    allWaypoints[this.key] = this\n    keyCounter += 1\n  }\n\n  /* Private */\n  Waypoint.prototype.queueTrigger = function(direction) {\n    this.group.queueTrigger(this, direction)\n  }\n\n  /* Private */\n  Waypoint.prototype.trigger = function(args) {\n    if (!this.enabled) {\n      return\n    }\n    if (this.callback) {\n      this.callback.apply(this, args)\n    }\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/destroy */\n  Waypoint.prototype.destroy = function() {\n    this.context.remove(this)\n    this.group.remove(this)\n    delete allWaypoints[this.key]\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/disable */\n  Waypoint.prototype.disable = function() {\n    this.enabled = false\n    return this\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/enable */\n  Waypoint.prototype.enable = function() {\n    this.context.refresh()\n    this.enabled = true\n    return this\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/next */\n  Waypoint.prototype.next = function() {\n    return this.group.next(this)\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/previous */\n  Waypoint.prototype.previous = function() {\n    return this.group.previous(this)\n  }\n\n  /* Private */\n  Waypoint.invokeAll = function(method) {\n    var allWaypointsArray = []\n    for (var waypointKey in allWaypoints) {\n      allWaypointsArray.push(allWaypoints[waypointKey])\n    }\n    for (var i = 0, end = allWaypointsArray.length; i < end; i++) {\n      allWaypointsArray[i][method]()\n    }\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/destroy-all */\n  Waypoint.destroyAll = function() {\n    Waypoint.invokeAll('destroy')\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/disable-all */\n  Waypoint.disableAll = function() {\n    Waypoint.invokeAll('disable')\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/enable-all */\n  Waypoint.enableAll = function() {\n    Waypoint.Context.refreshAll()\n    for (var waypointKey in allWaypoints) {\n      allWaypoints[waypointKey].enabled = true\n    }\n    return this\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/refresh-all */\n  Waypoint.refreshAll = function() {\n    Waypoint.Context.refreshAll()\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/viewport-height */\n  Waypoint.viewportHeight = function() {\n    return window.innerHeight || document.documentElement.clientHeight\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/viewport-width */\n  Waypoint.viewportWidth = function() {\n    return document.documentElement.clientWidth\n  }\n\n  Waypoint.adapters = []\n\n  Waypoint.defaults = {\n    context: window,\n    continuous: true,\n    enabled: true,\n    group: 'default',\n    horizontal: false,\n    offset: 0\n  }\n\n  Waypoint.offsetAliases = {\n    'bottom-in-view': function() {\n      return this.context.innerHeight() - this.adapter.outerHeight()\n    },\n    'right-in-view': function() {\n      return this.context.innerWidth() - this.adapter.outerWidth()\n    }\n  }\n\n  window.Waypoint = Waypoint\n}())\n;(function() {\n  'use strict'\n\n  function requestAnimationFrameShim(callback) {\n    window.setTimeout(callback, 1000 / 60)\n  }\n\n  var keyCounter = 0\n  var contexts = {}\n  var Waypoint = window.Waypoint\n  var oldWindowLoad = window.onload\n\n  /* http://imakewebthings.com/waypoints/api/context */\n  function Context(element) {\n    this.element = element\n    this.Adapter = Waypoint.Adapter\n    this.adapter = new this.Adapter(element)\n    this.key = 'waypoint-context-' + keyCounter\n    this.didScroll = false\n    this.didResize = false\n    this.oldScroll = {\n      x: this.adapter.scrollLeft(),\n      y: this.adapter.scrollTop()\n    }\n    this.waypoints = {\n      vertical: {},\n      horizontal: {}\n    }\n\n    element.waypointContextKey = this.key\n    contexts[element.waypointContextKey] = this\n    keyCounter += 1\n    if (!Waypoint.windowContext) {\n      Waypoint.windowContext = true\n      Waypoint.windowContext = new Context(window)\n    }\n\n    this.createThrottledScrollHandler()\n    this.createThrottledResizeHandler()\n  }\n\n  /* Private */\n  Context.prototype.add = function(waypoint) {\n    var axis = waypoint.options.horizontal ? 'horizontal' : 'vertical'\n    this.waypoints[axis][waypoint.key] = waypoint\n    this.refresh()\n  }\n\n  /* Private */\n  Context.prototype.checkEmpty = function() {\n    var horizontalEmpty = this.Adapter.isEmptyObject(this.waypoints.horizontal)\n    var verticalEmpty = this.Adapter.isEmptyObject(this.waypoints.vertical)\n    var isWindow = this.element == this.element.window\n    if (horizontalEmpty && verticalEmpty && !isWindow) {\n      this.adapter.off('.waypoints')\n      delete contexts[this.key]\n    }\n  }\n\n  /* Private */\n  Context.prototype.createThrottledResizeHandler = function() {\n    var self = this\n\n    function resizeHandler() {\n      self.handleResize()\n      self.didResize = false\n    }\n\n    this.adapter.on('resize.waypoints', function() {\n      if (!self.didResize) {\n        self.didResize = true\n        Waypoint.requestAnimationFrame(resizeHandler)\n      }\n    })\n  }\n\n  /* Private */\n  Context.prototype.createThrottledScrollHandler = function() {\n    var self = this\n    function scrollHandler() {\n      self.handleScroll()\n      self.didScroll = false\n    }\n\n    this.adapter.on('scroll.waypoints', function() {\n      if (!self.didScroll || Waypoint.isTouch) {\n        self.didScroll = true\n        Waypoint.requestAnimationFrame(scrollHandler)\n      }\n    })\n  }\n\n  /* Private */\n  Context.prototype.handleResize = function() {\n    Waypoint.Context.refreshAll()\n  }\n\n  /* Private */\n  Context.prototype.handleScroll = function() {\n    var triggeredGroups = {}\n    var axes = {\n      horizontal: {\n        newScroll: this.adapter.scrollLeft(),\n        oldScroll: this.oldScroll.x,\n        forward: 'right',\n        backward: 'left'\n      },\n      vertical: {\n        newScroll: this.adapter.scrollTop(),\n        oldScroll: this.oldScroll.y,\n        forward: 'down',\n        backward: 'up'\n      }\n    }\n\n    for (var axisKey in axes) {\n      var axis = axes[axisKey]\n      var isForward = axis.newScroll > axis.oldScroll\n      var direction = isForward ? axis.forward : axis.backward\n\n      for (var waypointKey in this.waypoints[axisKey]) {\n        var waypoint = this.waypoints[axisKey][waypointKey]\n        if (waypoint.triggerPoint === null) {\n          continue\n        }\n        var wasBeforeTriggerPoint = axis.oldScroll < waypoint.triggerPoint\n        var nowAfterTriggerPoint = axis.newScroll >= waypoint.triggerPoint\n        var crossedForward = wasBeforeTriggerPoint && nowAfterTriggerPoint\n        var crossedBackward = !wasBeforeTriggerPoint && !nowAfterTriggerPoint\n        if (crossedForward || crossedBackward) {\n          waypoint.queueTrigger(direction)\n          triggeredGroups[waypoint.group.id] = waypoint.group\n        }\n      }\n    }\n\n    for (var groupKey in triggeredGroups) {\n      triggeredGroups[groupKey].flushTriggers()\n    }\n\n    this.oldScroll = {\n      x: axes.horizontal.newScroll,\n      y: axes.vertical.newScroll\n    }\n  }\n\n  /* Private */\n  Context.prototype.innerHeight = function() {\n    /*eslint-disable eqeqeq */\n    if (this.element == this.element.window) {\n      return Waypoint.viewportHeight()\n    }\n    /*eslint-enable eqeqeq */\n    return this.adapter.innerHeight()\n  }\n\n  /* Private */\n  Context.prototype.remove = function(waypoint) {\n    delete this.waypoints[waypoint.axis][waypoint.key]\n    this.checkEmpty()\n  }\n\n  /* Private */\n  Context.prototype.innerWidth = function() {\n    /*eslint-disable eqeqeq */\n    if (this.element == this.element.window) {\n      return Waypoint.viewportWidth()\n    }\n    /*eslint-enable eqeqeq */\n    return this.adapter.innerWidth()\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/context-destroy */\n  Context.prototype.destroy = function() {\n    var allWaypoints = []\n    for (var axis in this.waypoints) {\n      for (var waypointKey in this.waypoints[axis]) {\n        allWaypoints.push(this.waypoints[axis][waypointKey])\n      }\n    }\n    for (var i = 0, end = allWaypoints.length; i < end; i++) {\n      allWaypoints[i].destroy()\n    }\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/context-refresh */\n  Context.prototype.refresh = function() {\n    /*eslint-disable eqeqeq */\n    var isWindow = this.element == this.element.window\n    /*eslint-enable eqeqeq */\n    var contextOffset = isWindow ? undefined : this.adapter.offset()\n    var triggeredGroups = {}\n    var axes\n\n    this.handleScroll()\n    axes = {\n      horizontal: {\n        contextOffset: isWindow ? 0 : contextOffset.left,\n        contextScroll: isWindow ? 0 : this.oldScroll.x,\n        contextDimension: this.innerWidth(),\n        oldScroll: this.oldScroll.x,\n        forward: 'right',\n        backward: 'left',\n        offsetProp: 'left'\n      },\n      vertical: {\n        contextOffset: isWindow ? 0 : contextOffset.top,\n        contextScroll: isWindow ? 0 : this.oldScroll.y,\n        contextDimension: this.innerHeight(),\n        oldScroll: this.oldScroll.y,\n        forward: 'down',\n        backward: 'up',\n        offsetProp: 'top'\n      }\n    }\n\n    for (var axisKey in axes) {\n      var axis = axes[axisKey]\n      for (var waypointKey in this.waypoints[axisKey]) {\n        var waypoint = this.waypoints[axisKey][waypointKey]\n        var adjustment = waypoint.options.offset\n        var oldTriggerPoint = waypoint.triggerPoint\n        var elementOffset = 0\n        var freshWaypoint = oldTriggerPoint == null\n        var contextModifier, wasBeforeScroll, nowAfterScroll\n        var triggeredBackward, triggeredForward\n\n        if (waypoint.element !== waypoint.element.window) {\n          elementOffset = waypoint.adapter.offset()[axis.offsetProp]\n        }\n\n        if (typeof adjustment === 'function') {\n          adjustment = adjustment.apply(waypoint)\n        }\n        else if (typeof adjustment === 'string') {\n          adjustment = parseFloat(adjustment)\n          if (waypoint.options.offset.indexOf('%') > - 1) {\n            adjustment = Math.ceil(axis.contextDimension * adjustment / 100)\n          }\n        }\n\n        contextModifier = axis.contextScroll - axis.contextOffset\n        waypoint.triggerPoint = Math.floor(elementOffset + contextModifier - adjustment)\n        wasBeforeScroll = oldTriggerPoint < axis.oldScroll\n        nowAfterScroll = waypoint.triggerPoint >= axis.oldScroll\n        triggeredBackward = wasBeforeScroll && nowAfterScroll\n        triggeredForward = !wasBeforeScroll && !nowAfterScroll\n\n        if (!freshWaypoint && triggeredBackward) {\n          waypoint.queueTrigger(axis.backward)\n          triggeredGroups[waypoint.group.id] = waypoint.group\n        }\n        else if (!freshWaypoint && triggeredForward) {\n          waypoint.queueTrigger(axis.forward)\n          triggeredGroups[waypoint.group.id] = waypoint.group\n        }\n        else if (freshWaypoint && axis.oldScroll >= waypoint.triggerPoint) {\n          waypoint.queueTrigger(axis.forward)\n          triggeredGroups[waypoint.group.id] = waypoint.group\n        }\n      }\n    }\n\n    Waypoint.requestAnimationFrame(function() {\n      for (var groupKey in triggeredGroups) {\n        triggeredGroups[groupKey].flushTriggers()\n      }\n    })\n\n    return this\n  }\n\n  /* Private */\n  Context.findOrCreateByElement = function(element) {\n    return Context.findByElement(element) || new Context(element)\n  }\n\n  /* Private */\n  Context.refreshAll = function() {\n    for (var contextId in contexts) {\n      contexts[contextId].refresh()\n    }\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/context-find-by-element */\n  Context.findByElement = function(element) {\n    return contexts[element.waypointContextKey]\n  }\n\n  window.onload = function() {\n    if (oldWindowLoad) {\n      oldWindowLoad()\n    }\n    Context.refreshAll()\n  }\n\n\n  Waypoint.requestAnimationFrame = function(callback) {\n    var requestFn = window.requestAnimationFrame ||\n      window.mozRequestAnimationFrame ||\n      window.webkitRequestAnimationFrame ||\n      requestAnimationFrameShim\n    requestFn.call(window, callback)\n  }\n  Waypoint.Context = Context\n}())\n;(function() {\n  'use strict'\n\n  function byTriggerPoint(a, b) {\n    return a.triggerPoint - b.triggerPoint\n  }\n\n  function byReverseTriggerPoint(a, b) {\n    return b.triggerPoint - a.triggerPoint\n  }\n\n  var groups = {\n    vertical: {},\n    horizontal: {}\n  }\n  var Waypoint = window.Waypoint\n\n  /* http://imakewebthings.com/waypoints/api/group */\n  function Group(options) {\n    this.name = options.name\n    this.axis = options.axis\n    this.id = this.name + '-' + this.axis\n    this.waypoints = []\n    this.clearTriggerQueues()\n    groups[this.axis][this.name] = this\n  }\n\n  /* Private */\n  Group.prototype.add = function(waypoint) {\n    this.waypoints.push(waypoint)\n  }\n\n  /* Private */\n  Group.prototype.clearTriggerQueues = function() {\n    this.triggerQueues = {\n      up: [],\n      down: [],\n      left: [],\n      right: []\n    }\n  }\n\n  /* Private */\n  Group.prototype.flushTriggers = function() {\n    for (var direction in this.triggerQueues) {\n      var waypoints = this.triggerQueues[direction]\n      var reverse = direction === 'up' || direction === 'left'\n      waypoints.sort(reverse ? byReverseTriggerPoint : byTriggerPoint)\n      for (var i = 0, end = waypoints.length; i < end; i += 1) {\n        var waypoint = waypoints[i]\n        if (waypoint.options.continuous || i === waypoints.length - 1) {\n          waypoint.trigger([direction])\n        }\n      }\n    }\n    this.clearTriggerQueues()\n  }\n\n  /* Private */\n  Group.prototype.next = function(waypoint) {\n    this.waypoints.sort(byTriggerPoint)\n    var index = Waypoint.Adapter.inArray(waypoint, this.waypoints)\n    var isLast = index === this.waypoints.length - 1\n    return isLast ? null : this.waypoints[index + 1]\n  }\n\n  /* Private */\n  Group.prototype.previous = function(waypoint) {\n    this.waypoints.sort(byTriggerPoint)\n    var index = Waypoint.Adapter.inArray(waypoint, this.waypoints)\n    return index ? this.waypoints[index - 1] : null\n  }\n\n  /* Private */\n  Group.prototype.queueTrigger = function(waypoint, direction) {\n    this.triggerQueues[direction].push(waypoint)\n  }\n\n  /* Private */\n  Group.prototype.remove = function(waypoint) {\n    var index = Waypoint.Adapter.inArray(waypoint, this.waypoints)\n    if (index > -1) {\n      this.waypoints.splice(index, 1)\n    }\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/first */\n  Group.prototype.first = function() {\n    return this.waypoints[0]\n  }\n\n  /* Public */\n  /* http://imakewebthings.com/waypoints/api/last */\n  Group.prototype.last = function() {\n    return this.waypoints[this.waypoints.length - 1]\n  }\n\n  /* Private */\n  Group.findOrCreate = function(options) {\n    return groups[options.axis][options.name] || new Group(options)\n  }\n\n  Waypoint.Group = Group\n}())\n;(function() {\n  'use strict'\n\n  var Waypoint = window.Waypoint\n\n  function isWindow(element) {\n    return element === element.window\n  }\n\n  function getWindow(element) {\n    if (isWindow(element)) {\n      return element\n    }\n    return element.defaultView\n  }\n\n  function NoFrameworkAdapter(element) {\n    this.element = element\n    this.handlers = {}\n  }\n\n  NoFrameworkAdapter.prototype.innerHeight = function() {\n    var isWin = isWindow(this.element)\n    return isWin ? this.element.innerHeight : this.element.clientHeight\n  }\n\n  NoFrameworkAdapter.prototype.innerWidth = function() {\n    var isWin = isWindow(this.element)\n    return isWin ? this.element.innerWidth : this.element.clientWidth\n  }\n\n  NoFrameworkAdapter.prototype.off = function(event, handler) {\n    function removeListeners(element, listeners, handler) {\n      for (var i = 0, end = listeners.length - 1; i < end; i++) {\n        var listener = listeners[i]\n        if (!handler || handler === listener) {\n          element.removeEventListener(listener)\n        }\n      }\n    }\n\n    var eventParts = event.split('.')\n    var eventType = eventParts[0]\n    var namespace = eventParts[1]\n    var element = this.element\n\n    if (namespace && this.handlers[namespace] && eventType) {\n      removeListeners(element, this.handlers[namespace][eventType], handler)\n      this.handlers[namespace][eventType] = []\n    }\n    else if (eventType) {\n      for (var ns in this.handlers) {\n        removeListeners(element, this.handlers[ns][eventType] || [], handler)\n        this.handlers[ns][eventType] = []\n      }\n    }\n    else if (namespace && this.handlers[namespace]) {\n      for (var type in this.handlers[namespace]) {\n        removeListeners(element, this.handlers[namespace][type], handler)\n      }\n      this.handlers[namespace] = {}\n    }\n  }\n\n  /* Adapted from jQuery 1.x offset() */\n  NoFrameworkAdapter.prototype.offset = function() {\n    if (!this.element.ownerDocument) {\n      return null\n    }\n\n    var documentElement = this.element.ownerDocument.documentElement\n    var win = getWindow(this.element.ownerDocument)\n    var rect = {\n      top: 0,\n      left: 0\n    }\n\n    if (this.element.getBoundingClientRect) {\n      rect = this.element.getBoundingClientRect()\n    }\n\n    return {\n      top: rect.top + win.pageYOffset - documentElement.clientTop,\n      left: rect.left + win.pageXOffset - documentElement.clientLeft\n    }\n  }\n\n  NoFrameworkAdapter.prototype.on = function(event, handler) {\n    var eventParts = event.split('.')\n    var eventType = eventParts[0]\n    var namespace = eventParts[1] || '__default'\n    var nsHandlers = this.handlers[namespace] = this.handlers[namespace] || {}\n    var nsTypeList = nsHandlers[eventType] = nsHandlers[eventType] || []\n\n    nsTypeList.push(handler)\n    this.element.addEventListener(eventType, handler)\n  }\n\n  NoFrameworkAdapter.prototype.outerHeight = function(includeMargin) {\n    var height = this.innerHeight()\n    var computedStyle\n\n    if (includeMargin && !isWindow(this.element)) {\n      computedStyle = window.getComputedStyle(this.element)\n      height += parseInt(computedStyle.marginTop, 10)\n      height += parseInt(computedStyle.marginBottom, 10)\n    }\n\n    return height\n  }\n\n  NoFrameworkAdapter.prototype.outerWidth = function(includeMargin) {\n    var width = this.innerWidth()\n    var computedStyle\n\n    if (includeMargin && !isWindow(this.element)) {\n      computedStyle = window.getComputedStyle(this.element)\n      width += parseInt(computedStyle.marginLeft, 10)\n      width += parseInt(computedStyle.marginRight, 10)\n    }\n\n    return width\n  }\n\n  NoFrameworkAdapter.prototype.scrollLeft = function() {\n    var win = getWindow(this.element)\n    return win ? win.pageXOffset : this.element.scrollLeft\n  }\n\n  NoFrameworkAdapter.prototype.scrollTop = function() {\n    var win = getWindow(this.element)\n    return win ? win.pageYOffset : this.element.scrollTop\n  }\n\n  NoFrameworkAdapter.extend = function() {\n    var args = Array.prototype.slice.call(arguments)\n\n    function merge(target, obj) {\n      if (typeof target === 'object' && typeof obj === 'object') {\n        for (var key in obj) {\n          if (obj.hasOwnProperty(key)) {\n            target[key] = obj[key]\n          }\n        }\n      }\n\n      return target\n    }\n\n    for (var i = 1, end = args.length; i < end; i++) {\n      merge(args[0], args[i])\n    }\n    return args[0]\n  }\n\n  NoFrameworkAdapter.inArray = function(element, array, i) {\n    return array == null ? -1 : array.indexOf(element, i)\n  }\n\n  NoFrameworkAdapter.isEmptyObject = function(obj) {\n    /* eslint no-unused-vars: 0 */\n    for (var name in obj) {\n      return false\n    }\n    return true\n  }\n\n  Waypoint.adapters.push({\n    name: 'noframework',\n    Adapter: NoFrameworkAdapter\n  })\n  Waypoint.Adapter = NoFrameworkAdapter\n}())\n;","Magezon_Builder/js/waypoints/noframework.waypoints.min.js":"/*!\nWaypoints - 4.0.1\nCopyright \u00a9 2011-2016 Caleb Troughton\nLicensed under the MIT license.\nhttps://github.com/imakewebthings/waypoints/blob/master/licenses.txt\n*/\n!function(){\"use strict\";function t(n){if(!n)throw new Error(\"No options passed to Waypoint constructor\");if(!n.element)throw new Error(\"No element option passed to Waypoint constructor\");if(!n.handler)throw new Error(\"No handler option passed to Waypoint constructor\");this.key=\"waypoint-\"+e,this.options=t.Adapter.extend({},t.defaults,n),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=n.handler,this.axis=this.options.horizontal?\"horizontal\":\"vertical\",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}var e=0,i={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var n in i)e.push(i[n]);for(var o=0,r=e.length;r>o;o++)e[o][t]()},t.destroyAll=function(){t.invokeAll(\"destroy\")},t.disableAll=function(){t.invokeAll(\"disable\")},t.enableAll=function(){t.Context.refreshAll();for(var e in i)i[e].enabled=!0;return this},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:\"default\",horizontal:!1,offset:0},t.offsetAliases={\"bottom-in-view\":function(){return this.context.innerHeight()-this.adapter.outerHeight()},\"right-in-view\":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){\"use strict\";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=o.Adapter,this.adapter=new this.Adapter(t),this.key=\"waypoint-context-\"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,n[t.waypointContextKey]=this,i+=1,o.windowContext||(o.windowContext=!0,o.windowContext=new e(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var i=0,n={},o=window.Waypoint,r=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?\"horizontal\":\"vertical\";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical),i=this.element==this.element.window;t&&e&&!i&&(this.adapter.off(\".waypoints\"),delete n[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on(\"resize.waypoints\",function(){e.didResize||(e.didResize=!0,o.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on(\"scroll.waypoints\",function(){(!e.didScroll||o.isTouch)&&(e.didScroll=!0,o.requestAnimationFrame(t))})},e.prototype.handleResize=function(){o.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:\"right\",backward:\"left\"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:\"down\",backward:\"up\"}};for(var i in e){var n=e[i],o=n.newScroll>n.oldScroll,r=o?n.forward:n.backward;for(var s in this.waypoints[i]){var l=this.waypoints[i][s];if(null!==l.triggerPoint){var a=n.oldScroll<l.triggerPoint,h=n.newScroll>=l.triggerPoint,p=a&&h,u=!a&&!h;(p||u)&&(l.queueTrigger(r),t[l.group.id]=l.group)}}}for(var d in t)t[d].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?o.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?o.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var n=0,o=t.length;o>n;n++)t[n].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,i=e?void 0:this.adapter.offset(),n={};this.handleScroll(),t={horizontal:{contextOffset:e?0:i.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:\"right\",backward:\"left\",offsetProp:\"left\"},vertical:{contextOffset:e?0:i.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:\"down\",backward:\"up\",offsetProp:\"top\"}};for(var r in t){var s=t[r];for(var l in this.waypoints[r]){var a,h,p,u,d,f=this.waypoints[r][l],c=f.options.offset,w=f.triggerPoint,y=0,g=null==w;f.element!==f.element.window&&(y=f.adapter.offset()[s.offsetProp]),\"function\"==typeof c?c=c.apply(f):\"string\"==typeof c&&(c=parseFloat(c),f.options.offset.indexOf(\"%\")>-1&&(c=Math.ceil(s.contextDimension*c/100))),a=s.contextScroll-s.contextOffset,f.triggerPoint=Math.floor(y+a-c),h=w<s.oldScroll,p=f.triggerPoint>=s.oldScroll,u=h&&p,d=!h&&!p,!g&&u?(f.queueTrigger(s.backward),n[f.group.id]=f.group):!g&&d?(f.queueTrigger(s.forward),n[f.group.id]=f.group):g&&s.oldScroll>=f.triggerPoint&&(f.queueTrigger(s.forward),n[f.group.id]=f.group)}}return o.requestAnimationFrame(function(){for(var t in n)n[t].flushTriggers()}),this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in n)n[t].refresh()},e.findByElement=function(t){return n[t.waypointContextKey]},window.onload=function(){r&&r(),e.refreshAll()},o.requestAnimationFrame=function(e){var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t;i.call(window,e)},o.Context=e}(),function(){\"use strict\";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function i(t){this.name=t.name,this.axis=t.axis,this.id=this.name+\"-\"+this.axis,this.waypoints=[],this.clearTriggerQueues(),n[this.axis][this.name]=this}var n={vertical:{},horizontal:{}},o=window.Waypoint;i.prototype.add=function(t){this.waypoints.push(t)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var n=this.triggerQueues[i],o=\"up\"===i||\"left\"===i;n.sort(o?e:t);for(var r=0,s=n.length;s>r;r+=1){var l=n[r];(l.options.continuous||r===n.length-1)&&l.trigger([i])}}this.clearTriggerQueues()},i.prototype.next=function(e){this.waypoints.sort(t);var i=o.Adapter.inArray(e,this.waypoints),n=i===this.waypoints.length-1;return n?null:this.waypoints[i+1]},i.prototype.previous=function(e){this.waypoints.sort(t);var i=o.Adapter.inArray(e,this.waypoints);return i?this.waypoints[i-1]:null},i.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},i.prototype.remove=function(t){var e=o.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(t){return n[t.axis][t.name]||new i(t)},o.Group=i}(),function(){\"use strict\";function t(t){return t===t.window}function e(e){return t(e)?e:e.defaultView}function i(t){this.element=t,this.handlers={}}var n=window.Waypoint;i.prototype.innerHeight=function(){var e=t(this.element);return e?this.element.innerHeight:this.element.clientHeight},i.prototype.innerWidth=function(){var e=t(this.element);return e?this.element.innerWidth:this.element.clientWidth},i.prototype.off=function(t,e){function i(t,e,i){for(var n=0,o=e.length-1;o>n;n++){var r=e[n];i&&i!==r||t.removeEventListener(r)}}var n=t.split(\".\"),o=n[0],r=n[1],s=this.element;if(r&&this.handlers[r]&&o)i(s,this.handlers[r][o],e),this.handlers[r][o]=[];else if(o)for(var l in this.handlers)i(s,this.handlers[l][o]||[],e),this.handlers[l][o]=[];else if(r&&this.handlers[r]){for(var a in this.handlers[r])i(s,this.handlers[r][a],e);this.handlers[r]={}}},i.prototype.offset=function(){if(!this.element.ownerDocument)return null;var t=this.element.ownerDocument.documentElement,i=e(this.element.ownerDocument),n={top:0,left:0};return this.element.getBoundingClientRect&&(n=this.element.getBoundingClientRect()),{top:n.top+i.pageYOffset-t.clientTop,left:n.left+i.pageXOffset-t.clientLeft}},i.prototype.on=function(t,e){var i=t.split(\".\"),n=i[0],o=i[1]||\"__default\",r=this.handlers[o]=this.handlers[o]||{},s=r[n]=r[n]||[];s.push(e),this.element.addEventListener(n,e)},i.prototype.outerHeight=function(e){var i,n=this.innerHeight();return e&&!t(this.element)&&(i=window.getComputedStyle(this.element),n+=parseInt(i.marginTop,10),n+=parseInt(i.marginBottom,10)),n},i.prototype.outerWidth=function(e){var i,n=this.innerWidth();return e&&!t(this.element)&&(i=window.getComputedStyle(this.element),n+=parseInt(i.marginLeft,10),n+=parseInt(i.marginRight,10)),n},i.prototype.scrollLeft=function(){var t=e(this.element);return t?t.pageXOffset:this.element.scrollLeft},i.prototype.scrollTop=function(){var t=e(this.element);return t?t.pageYOffset:this.element.scrollTop},i.extend=function(){function t(t,e){if(\"object\"==typeof t&&\"object\"==typeof e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}for(var e=Array.prototype.slice.call(arguments),i=1,n=e.length;n>i;i++)t(e[0],e[i]);return e[0]},i.inArray=function(t,e,i){return null==e?-1:e.indexOf(t,i)},i.isEmptyObject=function(t){for(var e in t)return!1;return!0},n.adapters.push({name:\"noframework\",Adapter:i}),n.Adapter=i}();","Magezon_Builder/js/waypoints/shortcuts/sticky.js":"/*!\nWaypoints Sticky Element Shortcut - 4.0.1\nCopyright \u00a9 2011-2016 Caleb Troughton\nLicensed under the MIT license.\nhttps://github.com/imakewebthings/waypoints/blob/master/licenses.txt\n*/\n(function() {\n  'use strict'\n\n  var $ = window.jQuery\n  var Waypoint = window.Waypoint\n\n  /* http://imakewebthings.com/waypoints/shortcuts/sticky-elements */\n  function Sticky(options) {\n    this.options = $.extend({}, Waypoint.defaults, Sticky.defaults, options)\n    this.element = this.options.element\n    this.$element = $(this.element)\n    this.createWrapper()\n    this.createWaypoint()\n  }\n\n  /* Private */\n  Sticky.prototype.createWaypoint = function() {\n    var originalHandler = this.options.handler\n\n    this.waypoint = new Waypoint($.extend({}, this.options, {\n      element: this.wrapper,\n      handler: $.proxy(function(direction) {\n        var shouldBeStuck = this.options.direction.indexOf(direction) > -1\n        var wrapperHeight = shouldBeStuck ? this.$element.outerHeight(true) : ''\n\n        this.$wrapper.height(wrapperHeight)\n        this.$element.toggleClass(this.options.stuckClass, shouldBeStuck)\n\n        if (originalHandler) {\n          originalHandler.call(this, direction)\n        }\n      }, this)\n    }))\n  }\n\n  /* Private */\n  Sticky.prototype.createWrapper = function() {\n    if (this.options.wrapper) {\n      this.$element.wrap(this.options.wrapper)\n    }\n    this.$wrapper = this.$element.parent()\n    this.wrapper = this.$wrapper[0]\n  }\n\n  /* Public */\n  Sticky.prototype.destroy = function() {\n    if (this.$element.parent()[0] === this.wrapper) {\n      this.waypoint.destroy()\n      this.$element.removeClass(this.options.stuckClass)\n      if (this.options.wrapper) {\n        this.$element.unwrap()\n      }\n    }\n  }\n\n  Sticky.defaults = {\n    wrapper: '<div class=\"sticky-wrapper\" />',\n    stuckClass: 'stuck',\n    direction: 'down right'\n  }\n\n  Waypoint.Sticky = Sticky\n}())\n;","Magezon_Builder/js/waypoints/shortcuts/inview.js":"/*!\nWaypoints Inview Shortcut - 4.0.1\nCopyright \u00a9 2011-2016 Caleb Troughton\nLicensed under the MIT license.\nhttps://github.com/imakewebthings/waypoints/blob/master/licenses.txt\n*/\n(function() {\n  'use strict'\n\n  function noop() {}\n\n  var Waypoint = window.Waypoint\n\n  /* http://imakewebthings.com/waypoints/shortcuts/inview */\n  function Inview(options) {\n    this.options = Waypoint.Adapter.extend({}, Inview.defaults, options)\n    this.axis = this.options.horizontal ? 'horizontal' : 'vertical'\n    this.waypoints = []\n    this.element = this.options.element\n    this.createWaypoints()\n  }\n\n  /* Private */\n  Inview.prototype.createWaypoints = function() {\n    var configs = {\n      vertical: [{\n        down: 'enter',\n        up: 'exited',\n        offset: '100%'\n      }, {\n        down: 'entered',\n        up: 'exit',\n        offset: 'bottom-in-view'\n      }, {\n        down: 'exit',\n        up: 'entered',\n        offset: 0\n      }, {\n        down: 'exited',\n        up: 'enter',\n        offset: function() {\n          return -this.adapter.outerHeight()\n        }\n      }],\n      horizontal: [{\n        right: 'enter',\n        left: 'exited',\n        offset: '100%'\n      }, {\n        right: 'entered',\n        left: 'exit',\n        offset: 'right-in-view'\n      }, {\n        right: 'exit',\n        left: 'entered',\n        offset: 0\n      }, {\n        right: 'exited',\n        left: 'enter',\n        offset: function() {\n          return -this.adapter.outerWidth()\n        }\n      }]\n    }\n\n    for (var i = 0, end = configs[this.axis].length; i < end; i++) {\n      var config = configs[this.axis][i]\n      this.createWaypoint(config)\n    }\n  }\n\n  /* Private */\n  Inview.prototype.createWaypoint = function(config) {\n    var self = this\n    this.waypoints.push(new Waypoint({\n      context: this.options.context,\n      element: this.options.element,\n      enabled: this.options.enabled,\n      handler: (function(config) {\n        return function(direction) {\n          self.options[config[direction]].call(self, direction)\n        }\n      }(config)),\n      offset: config.offset,\n      horizontal: this.options.horizontal\n    }))\n  }\n\n  /* Public */\n  Inview.prototype.destroy = function() {\n    for (var i = 0, end = this.waypoints.length; i < end; i++) {\n      this.waypoints[i].destroy()\n    }\n    this.waypoints = []\n  }\n\n  Inview.prototype.disable = function() {\n    for (var i = 0, end = this.waypoints.length; i < end; i++) {\n      this.waypoints[i].disable()\n    }\n  }\n\n  Inview.prototype.enable = function() {\n    for (var i = 0, end = this.waypoints.length; i < end; i++) {\n      this.waypoints[i].enable()\n    }\n  }\n\n  Inview.defaults = {\n    context: window,\n    enabled: true,\n    enter: noop,\n    entered: noop,\n    exit: noop,\n    exited: noop\n  }\n\n  Waypoint.Inview = Inview\n}())\n;","Magezon_Builder/js/waypoints/shortcuts/sticky.min.js":"/*!\nWaypoints Sticky Element Shortcut - 4.0.1\nCopyright \u00a9 2011-2016 Caleb Troughton\nLicensed under the MIT license.\nhttps://github.com/imakewebthings/waypoints/blob/master/licenses.txt\n*/\n!function(){\"use strict\";function t(s){this.options=e.extend({},i.defaults,t.defaults,s),this.element=this.options.element,this.$element=e(this.element),this.createWrapper(),this.createWaypoint()}var e=window.jQuery,i=window.Waypoint;t.prototype.createWaypoint=function(){var t=this.options.handler;this.waypoint=new i(e.extend({},this.options,{element:this.wrapper,handler:e.proxy(function(e){var i=this.options.direction.indexOf(e)>-1,s=i?this.$element.outerHeight(!0):\"\";this.$wrapper.height(s),this.$element.toggleClass(this.options.stuckClass,i),t&&t.call(this,e)},this)}))},t.prototype.createWrapper=function(){this.options.wrapper&&this.$element.wrap(this.options.wrapper),this.$wrapper=this.$element.parent(),this.wrapper=this.$wrapper[0]},t.prototype.destroy=function(){this.$element.parent()[0]===this.wrapper&&(this.waypoint.destroy(),this.$element.removeClass(this.options.stuckClass),this.options.wrapper&&this.$element.unwrap())},t.defaults={wrapper:'<div class=\"sticky-wrapper\" />',stuckClass:\"stuck\",direction:\"down right\"},i.Sticky=t}();","Magezon_Builder/js/waypoints/shortcuts/infinite.js":"/*!\nWaypoints Infinite Scroll Shortcut - 4.0.1\nCopyright \u00a9 2011-2016 Caleb Troughton\nLicensed under the MIT license.\nhttps://github.com/imakewebthings/waypoints/blob/master/licenses.txt\n*/\n(function() {\n  'use strict'\n\n  var $ = window.jQuery\n  var Waypoint = window.Waypoint\n\n  /* http://imakewebthings.com/waypoints/shortcuts/infinite-scroll */\n  function Infinite(options) {\n    this.options = $.extend({}, Infinite.defaults, options)\n    this.container = this.options.element\n    if (this.options.container !== 'auto') {\n      this.container = this.options.container\n    }\n    this.$container = $(this.container)\n    this.$more = $(this.options.more)\n\n    if (this.$more.length) {\n      this.setupHandler()\n      this.waypoint = new Waypoint(this.options)\n    }\n  }\n\n  /* Private */\n  Infinite.prototype.setupHandler = function() {\n    this.options.handler = $.proxy(function() {\n      this.options.onBeforePageLoad()\n      this.destroy()\n      this.$container.addClass(this.options.loadingClass)\n\n      $.get($(this.options.more).attr('href'), $.proxy(function(data) {\n        var $data = $($.parseHTML(data))\n        var $newMore = $data.find(this.options.more)\n\n        var $items = $data.find(this.options.items)\n        if (!$items.length) {\n          $items = $data.filter(this.options.items)\n        }\n\n        this.$container.append($items)\n        this.$container.removeClass(this.options.loadingClass)\n\n        if (!$newMore.length) {\n          $newMore = $data.filter(this.options.more)\n        }\n        if ($newMore.length) {\n          this.$more.replaceWith($newMore)\n          this.$more = $newMore\n          this.waypoint = new Waypoint(this.options)\n        }\n        else {\n          this.$more.remove()\n        }\n\n        this.options.onAfterPageLoad($items)\n      }, this))\n    }, this)\n  }\n\n  /* Public */\n  Infinite.prototype.destroy = function() {\n    if (this.waypoint) {\n      this.waypoint.destroy()\n    }\n  }\n\n  Infinite.defaults = {\n    container: 'auto',\n    items: '.infinite-item',\n    more: '.infinite-more-link',\n    offset: 'bottom-in-view',\n    loadingClass: 'infinite-loading',\n    onBeforePageLoad: $.noop,\n    onAfterPageLoad: $.noop\n  }\n\n  Waypoint.Infinite = Infinite\n}())\n;","Magezon_Builder/js/waypoints/shortcuts/infinite.min.js":"/*!\nWaypoints Infinite Scroll Shortcut - 4.0.1\nCopyright \u00a9 2011-2016 Caleb Troughton\nLicensed under the MIT license.\nhttps://github.com/imakewebthings/waypoints/blob/master/licenses.txt\n*/\n!function(){\"use strict\";function t(n){this.options=i.extend({},t.defaults,n),this.container=this.options.element,\"auto\"!==this.options.container&&(this.container=this.options.container),this.$container=i(this.container),this.$more=i(this.options.more),this.$more.length&&(this.setupHandler(),this.waypoint=new o(this.options))}var i=window.jQuery,o=window.Waypoint;t.prototype.setupHandler=function(){this.options.handler=i.proxy(function(){this.options.onBeforePageLoad(),this.destroy(),this.$container.addClass(this.options.loadingClass),i.get(i(this.options.more).attr(\"href\"),i.proxy(function(t){var n=i(i.parseHTML(t)),e=n.find(this.options.more),s=n.find(this.options.items);s.length||(s=n.filter(this.options.items)),this.$container.append(s),this.$container.removeClass(this.options.loadingClass),e.length||(e=n.filter(this.options.more)),e.length?(this.$more.replaceWith(e),this.$more=e,this.waypoint=new o(this.options)):this.$more.remove(),this.options.onAfterPageLoad(s)},this))},this)},t.prototype.destroy=function(){this.waypoint&&this.waypoint.destroy()},t.defaults={container:\"auto\",items:\".infinite-item\",more:\".infinite-more-link\",offset:\"bottom-in-view\",loadingClass:\"infinite-loading\",onBeforePageLoad:i.noop,onAfterPageLoad:i.noop},o.Infinite=t}();","Magezon_Builder/js/waypoints/shortcuts/inview.min.js":"/*!\nWaypoints Inview Shortcut - 4.0.1\nCopyright \u00a9 2011-2016 Caleb Troughton\nLicensed under the MIT license.\nhttps://github.com/imakewebthings/waypoints/blob/master/licenses.txt\n*/\n!function(){\"use strict\";function t(){}function e(t){this.options=i.Adapter.extend({},e.defaults,t),this.axis=this.options.horizontal?\"horizontal\":\"vertical\",this.waypoints=[],this.element=this.options.element,this.createWaypoints()}var i=window.Waypoint;e.prototype.createWaypoints=function(){for(var t={vertical:[{down:\"enter\",up:\"exited\",offset:\"100%\"},{down:\"entered\",up:\"exit\",offset:\"bottom-in-view\"},{down:\"exit\",up:\"entered\",offset:0},{down:\"exited\",up:\"enter\",offset:function(){return-this.adapter.outerHeight()}}],horizontal:[{right:\"enter\",left:\"exited\",offset:\"100%\"},{right:\"entered\",left:\"exit\",offset:\"right-in-view\"},{right:\"exit\",left:\"entered\",offset:0},{right:\"exited\",left:\"enter\",offset:function(){return-this.adapter.outerWidth()}}]},e=0,i=t[this.axis].length;i>e;e++){var n=t[this.axis][e];this.createWaypoint(n)}},e.prototype.createWaypoint=function(t){var e=this;this.waypoints.push(new i({context:this.options.context,element:this.options.element,enabled:this.options.enabled,handler:function(t){return function(i){e.options[t[i]].call(e,i)}}(t),offset:t.offset,horizontal:this.options.horizontal}))},e.prototype.destroy=function(){for(var t=0,e=this.waypoints.length;e>t;t++)this.waypoints[t].destroy();this.waypoints=[]},e.prototype.disable=function(){for(var t=0,e=this.waypoints.length;e>t;t++)this.waypoints[t].disable()},e.prototype.enable=function(){for(var t=0,e=this.waypoints.length;e>t;t++)this.waypoints[t].enable()},e.defaults={context:window,enabled:!0,enter:t,entered:t,exit:t,exited:t},i.Inview=e}();","Magezon_Builder/js/controllers/modal.js":"define([\n\t'jquery',\n\t'angular',\n  \t'mgzcodemirror'\n], function($, angular, CodeMirror) {\n\twindow.mgzCodeMirror = CodeMirror;\n\n\tvar baseCtrl = function(\n\t\t$scope,\n\t\t$uibModalInstance,\n\t\tmagezonBuilderModal,\n\t\tmodal,\n\t\tmagezonBuilderService\n\t) {\n\t\tvar self = this;\n\t\tself.id  = '.' + magezonBuilderModal.getModalId(modal.key);\n\n\t\t$scope.modal    = modal;\n\t\t$scope.title    = modal.title ? modal.title : modal.name;\n\t\t$scope.subtitle = modal.subtitle;\n\t\tvar localStorageKey = 'modal.' + modal.key;\n\n\t\tif (magezonBuilderService.getFromLocalStorage(localStorageKey + '.sizes')) $scope.modal.sizes = magezonBuilderService.getFromLocalStorage(localStorageKey + '.sizes');\n\t\tif (magezonBuilderService.getFromLocalStorage(localStorageKey + '.position')) {\n\t\t\tvar position = magezonBuilderService.getFromLocalStorage(localStorageKey + '.position');\n\t\t\tif (position.top < 0) position.top = 0;\n\t\t\t$scope.modal.position = position;\n\t\t}\n\n\t\tself.cancel = function() {\n\t\t\t$uibModalInstance.dismiss('cancel');\n\t\t}\n\n\t\tself.getModalSelector = function() {\n\t\t\treturn $(self.id);\n\t\t}\n\n\t\tself.getModalWidth = function() {\n\t\t\tvar windowWidth = $(window).width();\n\t\t\tvar modalWidth  = '80%';\n\t\t\tif (modal.size.width) modalWidth = modal.size.width;\n\t\t\tif (angular.isString(modalWidth) && modalWidth.indexOf('%') !== -1) modalWidth = windowWidth / 100 * modalWidth.replace(\"%\", \"\");\n\t\t\treturn modalWidth;\n\t\t}\n\n\t\tself.getModalHeight = function() {\n\t\t\tvar windowHeight = $(window).height();\n\t\t\tvar modalHeight  = '90%';\n\t\t\tif (modal.size.height) modalHeight = modal.size.height;\n\t\t\tif (angular.isString(modalHeight) && modalHeight.indexOf('%') !== -1) modalHeight = windowHeight / 100 * modalHeight.replace(\"%\", \"\");\n\t\t\tif (modal.position.top && modal.position.bottom) {\n\t\t\t\tself.getModalSelector().css('max-height', '');\n\t\t\t\tself.getModalSelector().css('height', '');\n\t\t\t}\n\t\t\treturn modalHeight;\n\t\t}\n\n\t\tself.getMinHeight = function() {\n\t\t\treturn modal.size.minHeight ? modal.size.minHeight : '';\n\t\t}\n\n\t\tself.getModalTop = function() {\n\t\t\tvar top;\n\t\t\tif (modal.position.top) {\n\t\t\t\ttop = modal.position.top;\n\t\t\t} else {\n\t\t\t\ttop = ($(window).height() - self.getModalHeight()) / 2;\n\t\t\t}\n\t\t\treturn top;\n\t\t}\n\n\t\tself.getModalRight = function() {\n\t\t\tvar right = 'auto';\n\t\t\tif (modal.position.right) {\n\t\t\t\tright = modal.position.right;\n\t\t\t}\n\t\t\treturn right;\n\t\t}\n\n\t\tself.getModalBottom = function() {\n\t\t\tvar bottom;\n\t\t\tif (modal.position.bottom) {\n\t\t\t\tbottom = modal.position.bottom;\n\t\t\t}\n\t\t\treturn bottom;\n\t\t}\n\n\t\tself.getModalLeft = function() {\n\t\t\tvar left = 'auto';\n\t\t\tif (modal.position.left) {\n\t\t\t\tleft = modal.position.left;\n\t\t\t} else {\n\t\t\t\tif (!modal.position.right) {\n\t\t\t\t\tleft = ($(window).width() - self.getModalWidth()) / 2;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn left;\n\t\t}\n\n\t\tself.getModalMaxWidth = function() {\n\t\t\tvar maxWidth;\n\t\t\tif (modal.size.maxWidth) {\n\t\t\t\tmaxWidth = parseFloat(modal.size.maxWidth) + 'px';\n\t\t\t} else {\n\t\t\t\tmaxWidth = parseFloat(modal.size.maxWidth) + 'px';\n\t\t\t}\n\t\t\treturn maxWidth;\n\t\t}\n\n\t\tself.getHeaderSelector = function() {\n\t\t\treturn $(self.id + ' .mgz-modal-header');\n\t\t}\n\n\t\tself.getHeaderHeight = function() {\n\t\t\treturn self.getHeaderSelector().length ? self.getHeaderSelector().outerHeight() : 0;\n\t\t}\n\n\t\tself.getContentSelector = function() {\n\t\t\treturn $(self.id + ' .mgz-modal-content');\n\t\t}\n\n\t\tself.getFooterSelector = function() {\n\t\t\treturn $(self.id + ' .mgz-modal-footer');\n\t\t}\n\n\t\tself.getFooterHeight = function() {\n\t\t\treturn self.getFooterSelector().length ? self.getFooterSelector().outerHeight() : 0;\n\t\t}\n\n\t\tself.isTabsModal = function() {\n\t\t\treturn self.getModalSelector().find('.mgz-modal-tab > .tab-content').length ? true : false;\n\t\t}\n\n\t\tself.resizeInner = function() {\n\t\t\tvar headerHeight = self.getHeaderHeight();\n\t\t\tvar footerHeight = self.getFooterHeight();\n\t\t\tvar modalHeight  = self.getModalHeight();\n\t\t\tvar height       = modalHeight - headerHeight - footerHeight;\n\t\t\tif (self.isTabsModal()) {\n\t\t\t\theight -= self.getModalSelector().find('.mgz-modal-tab > .nav-tabs').outerHeight();\n\t\t\t\tself.getModalSelector().find('.mgz-modal-tab > .tab-content').css('max-height', height);\n\t\t\t\tself.getModalSelector().find('.mgz-modal-content').css('overflow', 'visible');\n\t\t\t\tself.getModalSelector().addClass('mgz-modal-form');\n\t\t\t} else {\n\t\t\t\tself.getModalSelector().css('height', modalHeight);\n\t\t\t\tself.getModalSelector().removeClass('mgz-modal-form');\n\t\t\t}\n\t\t}\n\n\t\t$scope.$on('afterLoadModalTabs', function() {\n\t\t\tself.resizeInner();\n\t\t\tsetTimeout(function() {\n\t\t\t\tself.resizeInner();\n\t\t\t}, 500);\n\t\t});\n\n\t\t$uibModalInstance.rendered.then(function() {\n\t\t\tif (modal.resizable) {\n\t\t\t\tvar minHeight = 150 + self.getHeaderSelector().outerHeight() + self.getFooterSelector().outerHeight();\n\t\t\t\tsetTimeout(function() {\n\t\t\t    \tself.getModalSelector().resizable({\n\t\t\t    \t\tminHeight: minHeight,\n\t\t\t    \t\tminWidth: 380,\n\t\t\t    \t\thandles: \"all\",\n\t\t\t    \t\tresize: function( event, ui ) {\n\t\t\t    \t\t\tmodal.size.width = ui.size.width;\n\t\t\t\t\t\t\tif (!self.getModalSelector().hasClass('mgz-minimized')) {\n\t\t\t    \t\t\t\tmodal.size.height = ui.size.height;\n\t\t\t    \t\t\t}\n\t\t\t    \t\t\tself.resizeInner();\n\t\t\t    \t\t\tmagezonBuilderService.saveToLocalStorage(localStorageKey + '.sizes', ui.size);\n\t\t\t    \t\t}\n\t\t\t    \t});\n\t\t\t\t}, 2000);\n\t    \t\tself.getModalSelector().draggable({\n\t    \t\t\tcontainment: \"window\",\n\t    \t\t\thandle: \".mgz-modal-header\",\n\t    \t\t\tscroll: false,\n\t    \t\t\tdrag: function( event, ui ) {\n\t    \t\t\t\tif (modal.position.top >= 0) {\n\t\t    \t\t\t\tmodal.position = ui.position;\n\t\t\t\t    \t\tmagezonBuilderService.saveToLocalStorage(localStorageKey + '.position', ui.position);\n\t\t\t\t    \t}\n\t    \t\t\t}\n\t    \t\t});\n\t    \t\tself.getHeaderSelector().addClass('mgz-draggable-handle');\n\t\t    }\n\t\t    self.resizeInner();\n\t\t    self.getModalSelector().find('.mgz-modal-tab > .nav.nav-tabs > li > a').click(function(e) {\n\t\t\t\tself.resizeInner();\n\t\t\t});\n\t\t\tsetTimeout(function() {\n\t\t\t\tself.getModalSelector().find('.mgz-modal-tab > .tab-content').scroll(function(e) {\n\t\t\t\t\t$('.sp-active').siblings('.colorpicker-spectrum').spectrum(\"hide\");\n\t\t\t\t});\n\t\t\t}, 2000);\n\t\t});\n\n\t\tself.getModalStyle = function($topModalIndex) {\n\t\t\tvar style = {\n\t\t\t\t'z-index': 800 + $topModalIndex * 10,\n\t\t\t\t'display': 'block'\n\t\t\t};\n\t\t\tstyle['width'] = self.getModalWidth();\n\t\t\tif ($scope.modal.form) {\n\t\t\t\tstyle['max-height'] = self.getModalHeight();\n\t\t\t} else {\n\t\t\t\tstyle['height'] = self.getModalHeight();\n\t\t\t}\n\t\t\tstyle['top']        = self.getModalTop();\n\t\t\tstyle['right']      = self.getModalRight();\n\t\t\tstyle['left']       = self.getModalLeft();\n\t\t\tstyle['max-width']  = self.getModalMaxWidth();\n\t\t\tstyle['min-height'] = self.getMinHeight();\n\t\t\treturn style;\n\t\t}\n\n\t\t$(window).resize(function(event) {\n\t    \tif (self.getModalSelector().is(':visible')) {\n\t    \t\tself.resizeInner();\n\t    \t}\n\t    });\n\n\t    $scope.$on('enableModalSpinner', function() {\n\t\t\t$scope.spinner = true;\n\t\t});\n\n\t    $scope.$on('disableModalSpinner', function() {\n\t\t\t$scope.spinner = false;\n\t\t});\n\n\t\treturn angular.copy(self);\n\t};\n\n\treturn baseCtrl;\n});","Magezon_Builder/js/controllers/base.js":"define([\n\t'jquery',\n\t'underscore',\n\t'angular',\n\t'Magezon_Builder/js/apply/main',\n\t'Magezon_Builder/js/parallax'\n], function($, _, angular, mage, parallax) {\n\n\tvar isMobile = /Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/g.test(navigator.userAgent || navigator.vendor || window.opera);\n\n\tvar baseCtrl = function(\n\t\t$scope,\n\t\t$rootScope,\n\t\t$timeout,\n\t\tmagezonBuilderService,\n\t\tmagezonBuilderUrl,\n\t\tmagezonBuilderFilter,\n\t\telementManager,\n\t\t$sce,\n\t\t$interpolate,\n\t\tmagezonBuilderModal,\n\t\t$compile\n\t) {\n\n\t\tvar self = this;\n\t\tvar element = $scope.element;\n\n\t\tself.getBuilderElement = function(type) {\n\t\t\treturn elementManager.getElement(type);\n\t\t}\n\n\t\t$scope.controls            = [];\n\t\t$scope.controlsTemplateUrl = magezonBuilderUrl.getViewFileUrl('Magezon_Builder/js/templates/builder/controls.html');\n\t\t$scope.headingTypes        = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\n\t\t$scope.alignTypes          = ['left', 'center', 'right'];\n\t\t$scope.loaded              = false;\n\t\t$scope.toolbarLoaded       = false;\n\t\t$scope.toolbar             = true;\n\t\t$scope.resizableLoaded     = false;\n\t\t$scope.resizable           = true;\n\t\t$scope.addBlock            = true;\n\n\t\t$scope.$on('loadElements', function(event, elem) {\n\t\t\tself.afterRender();\n\t\t});\n\t\t$scope.loadElement = function() {}\n\n\t\t$scope.getEl = function() {\n\t\t\treturn elementManager.getEl(element);\n\t\t}\n\n\t\tself.isProfile = function() {\n\t\t\tif (!element.id || element.type == 'profile') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\t$scope.getElemIndex = function(elem) {\n\t\t\treturn _.findIndex(element.elements, function(_elem) {\n\t\t\t\treturn _elem.id == elem.id;\n\t\t\t});\n\t\t}\n\n\t\t$scope.isChildren = function(elem) {\n\t\t\tvar index = $scope.getElemIndex(elem);\n\t\t\treturn (index !== -1) ? true : false;\n\t\t}\n\n\t\tself.onDragstart = function(elem) {\n\t\t\t$rootScope.draggingElement = elem;\n\t\t\t$rootScope.$broadcast('onDragstart', elem);\n\t\t}\n\n\t\tself.onDragend = function(elem) {\n\t\t\t$rootScope.draggingElement = '';\n\t\t\t$scope.controls = [];\n\t\t\t$rootScope.$broadcast('onDragend', elem);\n\t\t\t$('.mgz-element-collection-dragover').removeClass('mgz-element-collection-dragover');\n\t\t}\n\n\t\tself.onCanceled = function(elem) {\n\t\t\t$rootScope.draggingElement = '';\n\t\t\t$scope.controls = [];\n\t\t\t$rootScope.$broadcast('onCanceled', elem);\n\t\t}\n\n\t\tself.onMoved = function(elem) {\n\t\t\t$rootScope.draggingElement = '';\n\t\t\t$scope.controls = [];\n\t\t\t$rootScope.$broadcast('onMoved', elem);\n\t\t}\n\n\t\tself.getWrapperClasses = function() {\n\t\t\tvar classes = [];\n\t\t\tif (element.animation_in) {\n\t\t\t\tclasses.push('mgz-animated');\n\t\t\t\tclasses.push(element.animation_in);\n\t\t\t\t// classes.push('mgz_start_animation');\n\t\t\t\t// classes.push('animated');\n\t\t\t\tif (element.animation_infinite) {\n\t\t\t\t\tclasses.push('mgz-animated-infinite');\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (element.el_class) classes.push(element.el_class);\n\t\t\tif (element.hidden_default) classes.push('mgz-element-hide-default');\n\t\t\tif (element.title_align) classes.push('mgz-element-title-align-' + element.title_align);\n\t\t\tif (element.el_float) {\n\t\t\t\tvar _float = magezonBuilderService.getDesignValue(element, 'el_float');\n\t\t\t\tif (_float) classes.push('f-' + _float);\n\t\t\t}\n\t\t\tclasses.push(element.id);\n\t\t\tclasses.push('mgz-element');\n\t\t\tif (!element.builder.is_collection) classes.push('mgz-child');\n\t\t\tclasses.push('mgz-element-' + element.type);\n\t\t\tif (element.builder.is_collection) classes.push('mgz-element-collection');\n\t\t\tif (element.builder.is_collection && !element.elements.length) {\n\t\t\t\tclasses.push('mgz-element-empty');\n\t\t\t}\n\t\t\tif (element.disable_element) classes.push('mgz-element-disabled');\n\t\t\tif (element.builder.actived || ($rootScope.editingElement && element.id == $rootScope.editingElement.id)) classes.push('mgz-element-actived');\n\t\t\tif (element.builder.editing) classes.push('mgz-element-editing');\n\t\t\tif (element.builder.hovered) classes.push('mgz-element-hover');\n\t\t\tif (element.elements && element.elements.length) {\n\t\t\t\tclasses.push('has-children');\t\n\t\t\t}\n\t\t\tvar viewMode = magezonBuilderService.getViewMode();\n\t\t\tif (element[viewMode + '_hide']) classes.push('mgz-hidden');\n\t\t\tclasses = classes.concat(self.getViewModeClass(element));\n\t\t\tif (element.builder.additionalClasses) {\n\t\t\t\tclasses = classes.concat(element.builder.additionalClasses);\n\t\t\t}\n\t\t\treturn classes;\n\t\t}\n\n\t\tself.getInnerClasses = function() {\n\t\t\tvar classes = [];\n\t\t\tclasses.push('mgz-element-inner');\n\t\t\tclasses.push(self.getStyleHtmlId());\n\t\t\tif (element.el_inner_class) classes.push(element.el_inner_class);\n\t\t\treturn classes;\n\t\t}\n\n\t\tself.getViewModeClass = function(elem) {\n\t\t\tvar classes = [];\n\t\t\tif (elem.builder && elem.builder.resizable) {\n\t\t\t\tvar responsiveClass = magezonBuilderService.getResponiveValue(elem, 'size');\n\t\t\t\tif (responsiveClass) {\n\t\t\t\t\tclasses.push('mgz-col-xs-' + responsiveClass);\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push('mgz-col-xs-12');\n\t\t\t\t}\n\t\t\t\tvar modeOffset = magezonBuilderService.getResponiveValue(elem,'offset_size');\n\t\t\t\tif (modeOffset) classes.push('mgz-col-xs-offset-' +  modeOffset);\n\t\t\t}\n\t\t\treturn classes;\n\t\t}\n\n\t\t$scope.getTrustedHtml = function(html) {\n\t\t\treturn $sce.trustAsHtml(magezonBuilderFilter.encodeContent(html));\n\t\t}\n\n\t\t$scope.trustAsResourceUrl = function(url) {\n\t\t\treturn $sce.valueOf($sce.trustAsResourceUrl(url));\n\t\t}\n\n\t\t$scope.getBuilderElementDescription = function() {\n\t\t\tvar builderElement = element.builder;\n\t\t\treturn builderElement.builder_description ? $interpolate(builderElement.builder_description)($scope) : '';\n\t\t}\n\n\t\t$scope.getPlaceHolderClassess = function() {\n\t\t\tvar classes;\n\t\t\tif ($rootScope.draggingElement) {\n\t\t\t\tvar elem = $rootScope.draggingElement;\n\t\t\t\tvar classes = self.getViewModeClass(elem);\n\t\t\t\tif (elem.el_float) classes += ' f-' + elem.el_float;\n\t\t\t}\n\t\t\treturn classes;\n\t\t}\n\n\t\t$scope.getTitleHtml = function() {\n\t\t\tif (!element.title_tag) element.title_tag = 'h4';\n\t\t\t\tvar html = '<' + element.title_tag + ' class=\"title\">';\n\t\t\tif (element.add_icon && element.icon_position == 'left') {\n\t\t\t\thtml += '<i class=\"mgz-icon-element ' + element.icon + '\"></i>';\n\t\t\t}\n\t\t\tif (element.title) {\n\t\t\t\thtml += '<span>' + element.title + '</span>';\n\t\t\t}\n\t\t\tif (element.add_icon && element.icon_position == 'right') {\n\t\t\t\thtml += '<i class=\"mgz-icon-element ' + element.icon + '\"></i>';\n\t\t\t}\n\t\t\thtml += '</' + element.title_tag + '>';\n\t\t\treturn html;\n\t\t}\n\n\t\tself.getParallaxId = function() {\n\t\t\treturn element.id ? element.id + '-p' : '';\n\t\t}\n\n\t\tself.getStyleHtmlId = function() {\n\t\t\treturn element.id ? element.id + '-s' : '';\n\t\t}\n\n\t\tself.onMouseEnter = function(e) {\n\t\t\tif (!$rootScope.draggingElement || ($('.mgz-element-editing').length && $('.mgz-element-editing') !== $scope.getEl())) {\n\t\t\t\tif (!$scope.toolbarLoaded && $scope.toolbar) {\n\t\t\t\t\tvar html = $compile('<magezon-builder-element-actions></magezon-builder-element-actions>')($scope);\n\t\t\t\t\t$scope.getEl().prepend(html);\n\t\t\t\t\t$scope.toolbarLoaded = true;\n\t\t\t\t}\n\t\t\t\tif (!$scope.resizableLoaded && $scope.resizable && element.builder.resizable) {\n\t\t\t\t\tvar html = $compile('<magezon-builder-element-resizable></magezon-builder-element-resizable>')($scope);\n\t\t\t\t\t$scope.getEl().append(html);\n\t\t\t\t\t$scope.resizableLoaded = true;\n\t\t\t\t}\n\n\t\t\t\telement.builder.hovered = true;\n\t\t\t\tvar target = $(e.currentTarget);\n\t\t\t\t$scope.controls = self.getControls();\n\t\t\t\tangular.forEach($scope.controls, function(elem, index) {\n\t\t\t\t\telem.builder.controlsVisible = false;\n\t\t\t\t});\n\t\t\t\t$timeout(function() {\n\t\t\t\t\tconsole.log('Mouse Enter');\n\t\t\t\t\tvar controlSelector = target.children('.mgz-element-wrap-top').children('.mgz-element-controls');\n\t\t\t\t\tif (target.find('.mgz-element-hover').length) {\n\t\t\t\t\t\telement.builder.controlsVisible = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.builder.controlsVisible = true;\n\t\t\t\t\t}\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tif (controlSelector.length) {\n\t\t\t\t\t\t\tvar navSelector    = $('#' + $rootScope.builderConfig.htmlId + ' .mgz-navbar');\n\t\t\t\t\t\t\tif (navSelector.length) {\n\t\t\t\t\t\t\t\tvar navOffsetRight = navSelector.offset().left + navSelector.width();\n\t\t\t\t\t\t\t\tvar controlSelectorOffsetRight = controlSelector.offset().left + controlSelector.width() + 2;\n\t\t\t\t\t\t\t\tif (controlSelectorOffsetRight > navOffsetRight) {\n\t\t\t\t\t\t\t\t\tcontrolSelector.css('right', '0');\n\t\t\t\t\t\t\t\t\tcontrolSelector.css('left', 'auto');\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcontrolSelector.css('right', 'auto');\n\t\t\t\t\t\t\t\t\tif (target.css('position') == 'static') {\n\t\t\t\t\t\t\t\t\t\tcontrolSelector.css('left', target.position().left);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tcontrolSelector.css('left', '0');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}, 200);\n\t\t\t}\n\t\t}\n\n\t\tself.onMouseLeave = function(e) {\n\t\t\telement.builder.hovered = false;\n\t\t\tif (!$rootScope.draggingElement) {\n\t\t\t\tvar target = $(e.currentTarget);\n\t\t\t\t$scope.controls = [];\n\t\t\t\telement.builder.controlsVisible = false;\n\t\t\t}\n\t\t}\n\n\t\tself.getParents = function() {\n\t\t\tvar parents = {};\n\t\t\tvar prepareParents = function(_scope, _parents) {\n\t\t\t\tif (_scope.$parent) {\n\t\t\t\t\tvar _element = _scope.element;\n\t\t\t\t\tif (_element && _element.id && !_parents.hasOwnProperty(_element.id)) {\n\t\t\t\t\t\t_parents[_element.id] = _element;\n\t\t\t\t\t}\n\t\t\t\t\tprepareParents(_scope.$parent, _parents);\n\t\t\t\t}\n\t\t\t}\n\t\t\tprepareParents($scope.$parent, parents);\n\t\t\treturn _.values(parents).reverse();\n\t\t}\n\n\t\tself.getControls = function() {\n\t\t\tvar parents = self.getParents();\n\t\t\treturn parents;\n\t\t}\n\n\t\tself.getControlClasses = function(elem, $last) {\n\t\t\tvar classes = [];\n\t\t\tclasses.push('mgz-element-control');\n\t\t\tclasses.push('mgz-element-' + elem.type + '-control');\n\t\t\tif ($last) classes.push('mgz-element-control-last mgz-element-control-green');\n\t\t\treturn classes;\n\t\t}\n\n\t\t$scope.$on('editElement', function($e, elem, activeTab) {\n\t\t\tif (elem.id == element.id && !$rootScope.editingElement) {\n\t\t\t\tself.editElement(elem, activeTab);\n\t\t\t\t$rootScope.$broadcast('elementReloaded', element);\n\t\t\t}\n\t\t})\n\n\t\tself.editElement = function(elem, activeTab) {\n\t\t\telem.builder.editing = false;\n\t\t\telem.builder.hovered = false;\n\t\t\t$rootScope.editingElement = elem;\n\t\t\tvar modal = magezonBuilderModal.open('element', {\n\t\t\t\twindowClass: 'mgz-modal-' + elem.type,\n\t\t\t\tresolve: {\n\t\t\t\t\tform: {\n\t\t\t\t\t\telement: elem,\n\t\t\t\t\t\tactiveTab: activeTab\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, function() {\n\t\t\t\tself.deactiveElement(elem);\n\t\t\t\t$rootScope.editingElement = '';\n\t\t\t}, function() {\n\t\t\t\tself.deactiveElement(elem);\n\t\t\t\t$rootScope.editingElement = '';\n\t\t\t});\n\t\t}\n\n\t\tself.dropElement = function(elem, index, parent) {\n\t\t\t$rootScope.$broadcast('removeElement', elem, {history: false});\n\t\t\t$rootScope.$broadcast('beforeDropElement', elem);\n\t\t\t$scope.$apply(function() {\n\t\t\t\tparent.elements.splice(index, 0, elem);\n\t\t\t\tself.deactiveElement(elem);\n\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\ttype: 'moved',\n\t\t\t\t\ttitle: elem.builder.name\n\t\t\t\t});\n\t\t\t});\n\t\t\tself.onDragend();\n\t\t\t$rootScope.$broadcast('afterDropElement', elem);\n\t\t\treturn true;\n\t\t}\n\n\t\t$scope.$on('activeElement', function(event, elem) {\n\t\t\tif (elem.id == element.id) {\n\t\t\t\tself.activeElement(element);\n\t\t\t} else {\n\t\t\t\telement.builder.actived = false;\n\t\t\t}\n\t\t});\n\n\t\tself.activeElement = function(elem) {\n\t\t\telem.builder.actived = true;\n\t\t\t$rootScope.activedElement = elem;\n\t\t}\n\n\t\t$scope.$on('deactiveElement', function(event, elem) {\n\t\t\tself.deactiveElement(element);\n\t\t});\n\n\t\tself.deactiveElement = function(elem) {\n\t\t\telem.builder.actived = false;\n\t\t\t$rootScope.activedElement = '';\n\t\t}\n\n\t\t$scope.$on('gotoElement', function(event, elem) {\n\t\t\tif (elem.id == element.id) {\n\t\t\t\tvar height = $('.page-main-actions > .page-actions._fixed').outerHeight() + 5;\n\t\t\t\tvar _elem  = $(\".mgz-builder .mgz-element.\" + element.id);\n\t\t\t\tif (_elem.is(':visible')) {\n\t\t\t\t\t$('html, body').stop().animate({\n\t\t\t\t\t\tscrollTop: _elem.offset().top - height\n\t\t\t\t\t}, 1000);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$scope.removeSpinner = function() {\n\t\t\t$scope.getEl().children('.mgz-spinner').remove();\n\t\t}\n\n\t\tvar addAddBlock = function() {\n\t\t\tif ($scope.addBlock && !self.isProfile()) {\n\t\t\t\tvar _elem = element;\n\t\t\t\tif (_elem.builder.is_collection) {\n\t\t\t\t\t$scope.removeSpinner();\n\t\t\t\t\tif (!_elem.elements.length) {\n\t\t\t\t\t\tvar html = $compile('<i class=\"mgz-icon mgz-icon-add\" ng-if=\"element.builder.is_collection&&!element.elements.length\" ng-click=\"$root.$broadcast(\\'addElement\\', {elem: element, action: \\'append\\' })\"></i>')($scope);\n\t\t\t\t\t\t$scope.getEl().prepend(html);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t$scope.addAddBlock = function() {\n\t\t\taddAddBlock();\n\t\t\tif ($scope.getEl().find('.mgz-icon-add')) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\taddAddBlock();\n\t\t\t\t}, 500);\n\t\t\t}\n\t\t}\n\n\t\tself.loadLiveElement = function(elem) {\n\t\t\tif (elem.builder.livePreview) {\n\t\t\t\tmagezonBuilderService.elemPost(elem, $rootScope.builderConfig.loadElementUrl, {\n\t\t\t\t\telement: angular.toJson(elem)\n\t\t\t\t}, false, function(res) {\n\t\t\t\t\tvar _elem = $('.' + elem.id);\n\t\t\t\t\tvar _inner = _elem.children('.mgz-element-inner');\n\t\t\t\t\tif (res) {\n\t\t\t\t\t\t_inner.html(res);\n\t\t\t\t\t\t$(mage.apply);\n\t\t\t\t\t\t_inner.on('click', '.action.tocart,.action.towishlist,.action.tocompare', function (e) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_inner.find('a').attr('target', '_blank');\n\t\t\t\t\t\t_inner.find('form[data-role=tocart-form]').removeAttr('action');\n\t\t\t\t\t\t_inner.find('form[data-role=tocart-form]').removeAttr('method');\n\t\t\t\t\t\t_inner.find('*').addClass('mgz-builder-dnd-disable');\n\t\t\t\t\t\t$('body').trigger('magezonPageBuilderUpdated');\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t_elem.find('.mgz-waypoint').trigger('mgz:animation:run');\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t$rootScope.$broadcast('loadElements');\n\t\t\t\t\t}\n\t\t\t\t}, function() {}, function() {\n\t\t\t\t\t$scope.removeSpinner();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tsetTimeout(function() {\n\t\t\tself.loadLiveElement(element);\t\n\t\t});\n\n\t\tself.getParallaxClasses = function() {\n\t\t\tvar parallax      = magezonBuilderService.getDesignValue(element, 'parallax_type');\n\t\t\tvar mouseParallax = magezonBuilderService.getDesignValue(element, 'mouse_parallax');\n\t\t\tvar classes  = [];\n\t\t\tclasses.push('mgz-parallax');\n\t\t\tclasses.push(self.getParallaxId());\n\t\t\tif (parallax && mouseParallax) classes.push('mgz-parallax-mouse-parallax');\n\t\t\treturn classes;\n\t\t}\n\n\t\tself.afterParallaxRender = function(e) {\n\t\t\tsetTimeout(function() {\n\t\t\t\tself.initParallax();\n\t\t\t}, 1000);\n\t\t}\n\n\t\tself.initParallax = function() {\n\t\t\tvar parallax   = magezonBuilderService.getDesignValue(element, 'parallax_type');\n\t\t\tvar elParallax = $scope.getEl().children('.mgz-element-inner').children('.mgz-parallax').children('.mgz-parallax-inner');\n\n\t\t\tjarallax(elParallax, 'destroy');\n\t\t\tif (parallax) {\n\t\t\t\telParallax.css('background-image', 'none');\t\n\t\t\t} else {\n\t\t\t\telParallax.css('background-image', '');\t\n\t\t\t}\n\t\t\tif (!self.isEnabledParallax()) return;\n\t\t\tvar _elem           = element;\n\t\t\tvar backgroundType  = magezonBuilderService.getDesignValue(_elem, 'background_type');\n\t\t\tvar imageBgSize     = '';\n\t\t\tvar imageBgPosition = magezonBuilderService.getDesignValue(_elem, 'background_position').replace(/-/g, ' ');\n\t\t\tvar video           = false;\n\t\t\tvar videoStartTime  = 0;\n\t\t\tvar videoEndTime    = 0;\n\t\t\tvar videoVolume     = 0;\n\t\t\tvar videoLoop       = true;\n\t\t\tvar videoAlwaysPlay = true;\n\t\t\tvar videoMobile     = false;\n\t\t\tvar parallax        = magezonBuilderService.getDesignValue(_elem, 'parallax_type');\n\t\t\tvar parallaxSpeed   = magezonBuilderService.getDesignValue(_elem, 'parallax_speed');\n\t\t\tvar parallaxMobile  = magezonBuilderService.getDesignValue(_elem, 'parallax_mobile');\n\n\t        // video type\n\t        if ( backgroundType === 'yt_vm_video' || backgroundType === 'video' ) {\n\t        \tvideo           = magezonBuilderService.getDesignValue(_elem, 'background_video');\n\t        \tvideoStartTime  = parseFloat( magezonBuilderService.getDesignValue(_elem, 'video_start_time') ) || 0;\n\t        \tvideoEndTime    = parseFloat( magezonBuilderService.getDesignValue(_elem, 'video_end_time') ) || 0;\n\t        \tvideoVolume     = parseFloat( magezonBuilderService.getDesignValue(_elem, 'video_volume') ) || 0;\n\t        \tvideoLoop       = true;\n\t        \tvideoAlwaysPlay = true;\n\t        \tvideoMobile     = magezonBuilderService.getDesignValue(_elem, 'video_mobile');\n\n\t        \tif ( video && ! parallax && ! parallaxSpeed ) {\n\t        \t\tparallax       = 'scroll';\n\t        \t\tparallaxSpeed  = 1;\n\t        \t\tparallaxMobile = videoMobile;\n\t        \t}\n\t        }\n\n\t        // prevent if no parallax and no video\n\t        if ( !parallax && !video ) return;\n\n\t        var jarallaxParams = {\n\t        \tautomaticResize: true,\n\t        \ttype: parallax,\n\t        \tspeed: parallaxSpeed,\n\t        \tdisableParallax() {\n\t        \t\treturn parallaxMobile ? false : isMobile;\n\t        \t},\n\t        \tdisableVideo() {\n\t        \t\treturn videoMobile ? false : isMobile;\n\t        \t},\n\t        \timgSize: imageBgSize || 'cover',\n\t        \timgPosition: imageBgPosition || '50% 50%',\n\t        };\n\n\t        if ( imageBgSize === 'pattern' ) {\n\t        \tjarallaxParams.imgSize   = 'auto';\n\t        \tjarallaxParams.imgRepeat = 'repeat';\n\t        }\n\n\t        if ( video ) {\n\t\t\t\tjarallaxParams.speed                = parallax ? parallaxSpeed : 1;\n\t\t\t\tjarallaxParams.videoSrc             = video;\n\t\t\t\tjarallaxParams.videoStartTime       = videoStartTime;\n\t\t\t\tjarallaxParams.videoEndTime         = videoEndTime;\n\t\t\t\tjarallaxParams.videoVolume          = videoVolume;\n\t\t\t\tjarallaxParams.videoLoop            = videoLoop;\n\t\t\t\tjarallaxParams.videoPlayOnlyVisible = !videoAlwaysPlay;\n\t        }\n\n\t        var backgroundImage = magezonBuilderService.getDesignValue(element, 'background_image');\n\t        if (backgroundImage) jarallaxParams.imgSrc = magezonBuilderUrl.getImageUrl(backgroundImage);\n\t        var elParallax = $scope.getEl().children('.mgz-element-inner').children('.mgz-parallax').children('.mgz-parallax-inner');\n\t        jarallax(elParallax, jarallaxParams);\n\t        window.mgzParallaxMouse(true);\n\t\t}\n\n\t\tself.processParallax = function() {\n\t\t\t$scope.getEl().children('.mgz-element-inner').children('.mgz-parallax').remove();\n\t\t\tif (self.isEnabledParallax()) {\n\t\t\t\tvar html = $compile(self.getParallaxHtml())($scope);\n\t\t\t\t$scope.getEl().children('.mgz-element-inner').prepend(html);\n\t\t\t}\n\t\t}\n\n\t\t$scope.$on('editedElement', function(event, elem) {\n\t\t\tif (element.id === elem.id) {\n\t\t\t\tself.afterRender();\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('resetElement', function(event) {\n\t\t\telement.builder.hovered = false;\n\t\t\telement.builder.editing = false;\n\t\t\telement.builder.actived = false;\n\t\t});\n\n\t\tself.isEnabledParallax = function() {\n\t\t\tvar _elem           = element;\n\t\t\tvar parallax        = magezonBuilderService.getDesignValue(_elem, 'parallax_type');\n\t\t\tvar backgroundType  = magezonBuilderService.getDesignValue(_elem, 'background_type');\n\t\t\tvar backgroundImage = magezonBuilderService.getDesignValue(_elem, 'background_image');\n\t\t\tvar backgroundColor = magezonBuilderService.getDesignValue(_elem, 'background_color');\n\t\t\tvar video           = magezonBuilderService.getDesignValue(_elem, 'background_video');\n\t\t\treturn (backgroundColor || backgroundImage || (backgroundType === 'yt_vm_video' && video));\n\t\t}\n\n\t\tself.processWaypoints = function() {\n\t\t\t$scope.getEl().waypoint(function() {\n\t\t\t\tvar self = this;\n\t\t\t\tvar delayTime = 0;\n\t\t\t\tif ($(this.element).data('animation-delay')) {\n\t\t\t\t\tdelayTime = $(this.element).data('animation-delay');\n\t\t\t\t}\n\t\t\t\tvar durationTime = 0;\n\t\t\t\tif ($(this.element).data('animation-duration')) {\n\t\t\t\t\tdurationTime = $(this.element).data('animation-duration');\n\t\t\t\t}\n\t\t\t\tif (durationTime) $(self.element).css(\"animation-duration\", durationTime + 's');\n\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t$(self.element).addClass(\"mgz_start_animation animated\")\n\t\t\t\t}, delayTime * 1000);\n\t\t\t}, {\n\t\t\t\toffset: \"85%\"\n\t\t\t});\n\t\t}\n\n\t\tself.afterRender = function() {\n\t\t\t$scope.loadElement();\n\t\t\tself.processParallax();\n\t\t\tself.processWaypoints();\n\t\t\t$scope.loaded = true;\n\t\t\t$rootScope.$broadcast('elementReloaded', element);\n\t\t\tif (element.el_id) {\n\t\t\t\t$scope.getEl().attr('id', element.el_id);\n\t\t\t} else {\n\t\t\t\t$scope.getEl().removeAttr('id');\n\t\t\t}\n\t\t}\n\n\t\tself.getStyles = function() {\n\t\t\tvar _elem = element;\n\t\t\tvar styles = {};\n\t\t\tif (_elem.animation_in && _elem.animation_duration) {\n\t\t\t\tstyles['animation-duration'] = _elem.animation_duration + 's';\n\t\t\t}\n\t\t\treturn styles;\n\t\t}\n\n\t\tself.getParallaxHtml = function() {\n\t\t\treturn '<div ng-if=\"mgz.isEnabledParallax()\" ng-class=\"mgz.getParallaxClasses()\" data-parallax-mouse-parallax-size=\"{{ $root.magezonBuilderService.getDesignValue(element, \\'mouse_parallax_size\\') }}\" data-parallax-mouse-parallax-speed=\"{{ $root.magezonBuilderService.getDesignValue(element, \\'mouse_parallax_speed\\') }}\"><div class=\"mgz-parallax-inner\" after-render=\"mgz.afterParallaxRender()\"></div></div>';\n\t\t}\n\n\t\t$scope.addHistory = function(type, subtitle) {\n\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\ttype: type,\n\t\t\t\ttitle: element.builder.name,\n\t\t\t\tsubtitle: subtitle\n\t\t\t});\n\t\t}\n\n\t\t$scope.isLoaded = function() {\n\t\t\treturn $scope.loaded;\n\t\t}\n\n\t\t$scope.getDesignValue = function(key) {\n\t\t\treturn magezonBuilderService.getDesignValue(element, key);\t\n\t\t}\n\n\t\t$timeout(function() {\n\t\t\t$scope.loaded = true;\n\t\t\tself.afterRender();\n\t\t}, 500);\n\n\t\tsetTimeout(function() {\n\t\t\twindow.mgzParallaxMouse(true);\n\t\t}, 3000);\n\t\t\n\t\treturn angular.copy(this);\n\t};\n\n\treturn baseCtrl;\n});","Magezon_Builder/js/controllers/list.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar listCtrl = function(\n\t\t$scope,\n\t\t$rootScope,\n\t\tmagezonBuilderService,\n\t\telementManager,\n\t\t$sce,\n\t\t$controller,\n\t\t$timeout,\n\t\tmagezonBuilderUrl\n\t) {\n\n\tvar parent = $controller('baseController', {$scope: $scope});\n\tangular.extend(this, parent);\n\n\tvar self = this;\n\n\tself.getElemName = function(type) {\n        if (!$.isArray($scope.elementCache[type])) {\n            $scope.elementCache[type] = [];\n        }\n\n        var elemName = type + '-' + $scope.getRandomInt();\n        elemName = elemName.replace('bfb_', '');\n\n        while (($.inArray(elemName, $scope.elementCache[type]) !== -1)) {\n            elemName = type + '-' + $scope.getRandomInt();\n        }\n        $scope.elementCache[type].push(elemName);\n\n        return elemName;\n    }\n\n\t// ADD\n\tself.addElement = function(type, parent, openModal, data, index, replace) {\n\t\tvar builderElement = self.getBuilderElement(type);\n\t\tvar elem = elementManager.getNewElement(type);\n\t\tif (data) elem = angular.extend(elem, data);\n\n\t\tif (builderElement.children) {\n\t\t\tvar childrenCount = builderElement.childrenCount ? builderElement.childrenCount : 1;\n\t\t\tfor (var i = 0; i < childrenCount; i++) {\n\t\t\t\tvar newElement = self.addElement(builderElement.children, elem, false);\n\t\t\t\tif (newElement && newElement.hasOwnProperty('title')) {\n\t\t\t\t\tnewElement['title'] = newElement['title'] + ' ' + (i+1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (parent) {\n\t\t\tif (_.isNumber(index)) {\n\t\t\t\tif (replace) {\n\t\t\t\t\tparent.elements.splice(index, 1, elem);\n\t\t\t\t} else {\n\t\t\t\t\tparent.elements.splice(index, 0, elem);\t\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tparent.elements.push(elem);\t\n\t\t\t}\n\t\t} else {\n\t\t\tif (_.isNumber(index)) {\n\t\t\t\tif (replace) {\n\t\t\t\t\t$scope.element.elements.splice(index, 1, elem);\n\t\t\t\t} else {\n\t\t\t\t\t$scope.element.elements.splice(index, 0, elem);\t\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$scope.element.elements.push(elem);\t\n\t\t\t}\n\t\t}\n\n\t\tif (openModal && (builderElement.hasOwnProperty('newOpenModal') && builderElement.newOpenModal || !builderElement.hasOwnProperty('newOpenModal'))) {\n\t\t\tself.editElement(elem);\t\n\t\t}\n\n\t\t$scope.addAddBlock();\n\n\t\treturn elem;\n\t}\n\n\t$scope.$on('addNewElment', function(e, item) {\n\t\tvar type           = item.type;\n\t\tvar mainElement    = $rootScope.builderConfig.mainElement;\n\t\tvar builderElement = self.getBuilderElement(type);\n\t\tvar openModal      = builderElement.hasOwnProperty('openModal') ? builderElement.openModal : true;\n\t\tif (!_.isNull(item.openModal) && !_.isUndefined(item.openModal)) openModal = item.openModal;\n\t\tvar data = item.data ? item.data : {};\n\t\tvar elem, historyType;\n\t\tif (item.elem) {\n\t\t\tif ((item.action == 'before' || item.action == 'after' || item.action == 'replace')) {\n\t\t\t\tvar index = $scope.getElemIndex(item.elem);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tswitch(item.action) {\n\t\t\t\t\t\tcase 'before':\n\t\t\t\t\t\t\thistoryType = 'inserted_before';\n\t\t\t\t\t\t\tif (self.isProfile() && type != mainElement) {\n\t\t\t\t\t\t\t\tvar row = self.addElement(mainElement, null, false, {}, index);\n\t\t\t\t\t\t\t\telem = self.addElement(type, row['elements'][0], openModal, data);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\telem = self.addElement(type, null, openModal, data, index);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'after':\n\t\t\t\t\t\t\thistoryType = 'inserted_after';\n\t\t\t\t\t\t\tif (self.isProfile() && type != mainElement) {\n\t\t\t\t\t\t\t\tvar row = self.addElement(mainElement, null, false, {}, index + 1);\n\t\t\t\t\t\t\t\telem = self.addElement(type, row['elements'][0], openModal, data);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\telem = self.addElement(type, null, openModal, data, index + 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'replace':\n\t\t\t\t\t\t\thistoryType = 'replaced';\n\t\t\t\t\t\t\tif (self.isProfile() && type != mainElement) {\n\t\t\t\t\t\t\t\tvar row = self.addElement(mainElement, null, false, {}, index, true);\n\t\t\t\t\t\t\t\telem = self.addElement(type, row['elements'][0], openModal, data);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\telem = self.addElement(type, null, openModal, data, index, true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (item.action == 'append' && item.elem.id == $scope.element.id) {\n\t\t\t\telem = self.addElement(type, null, openModal, data);\n\t\t\t\thistoryType = 'added';\n\t\t\t}\n\t\t} else {\n\t\t\tif (self.isProfile()) {\n\t\t\t\thistoryType = 'added';\n\t\t\t\tif (type === mainElement) {\n\t\t\t\t\telem = self.addElement(type, null, openModal, data);\t\n\t\t\t\t} else {\n\t\t\t\t\tvar row = self.addElement(mainElement, null, false, {}, index, true);\n\t\t\t\t\telem = self.addElement(type, row['elements'][0], openModal, data);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (elem && historyType && (!data.hasOwnProperty('history') || (data.hasOwnProperty('history') && data.history))) {\n\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\ttype: historyType,\n\t\t\t\ttitle: elem.builder.name\n\t\t\t});\n\t\t\t$rootScope.$broadcast('afterAddElement', elem);\n\t\t}\n\t});\n\n\t// REMOVE\n\t$scope.$on('removeElement', function(e, elem, data) {\n\t\tself.removeElement(elem, data);\n\t});\n\n\tself.removeElement = function(elem, data) {\n\t\tif ($scope.isChildren(elem)) {\n\t\t\tvar index = $scope.getElemIndex(elem);\n\t\t\t$rootScope.$broadcast('beforeRemoveElement', elem);\n\t\t\tvar _elem = $scope.element.elements.splice(index, 1)[0];\n\t\t\t$rootScope.$broadcast('removeParentElement', $scope.element);\n\t\t\tif (!data || (data && (data.hasOwnProperty('history') && data.history) || !data.hasOwnProperty('history'))) {\n\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\ttype: 'removed',\n\t\t\t\t\ttitle: _elem.builder.name\n\t\t\t\t});\n\t\t\t}\n\t\t\t$rootScope.$broadcast('afterRemoveElement', _elem);\n\t\t\t$scope.addAddBlock();\n\t\t}\n\t}\n\n\t$scope.$on('removeParentElement', function(e, elem) {\n\t\tself.removeParentElement(elem);\n\t});\n\n\tself.removeParentElement = function(parent) {\n\t\tif ($scope.isChildren(parent)) {\n\t\t\tvar index = $scope.getElemIndex(parent);\n\t\t\tif (parent.builder.children && !parent.elements.length) {\n\t\t\t\t$scope.element.elements.splice(index, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\t// CLONE\n\t$scope.$on('cloneElement', function(e, elem) {\n\t\tself.cloneElement(elem);\n\t});\n\n\tself.cloneElement = function(elem) {\n\t\tif ($scope.isChildren(elem)) {\n\t\t\tvar index   = $scope.getElemIndex(elem);\n\t\t\tvar newElem = angular.copy(elem);\n\t\t\telementManager.prepareElement(newElem, true);\n\t\t\t$scope.element.elements.splice(index + 1, 0, newElem);\n\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\ttype: 'duplicated',\n\t\t\t\ttitle: newElem.builder.name\n\t\t\t});\n\t\t\t$rootScope.$broadcast('afterCloneElement', newElem);\n\t\t}\n\t}\n\n\t// CHANGE ELEMENT LAYOUT\n\t$scope.$on('changeElementLayout', function(e, data) {\n\t\tself.changeElementLayout(data);\n\t});\n\n\tself.changeElementLayout = function(data) {\n\t\tif ($scope.element.id === data.elem.id) {\n\t\t\tvar types = data.type.split('_');\n\t\t\tfor (var i = 0; i < types.length; i++) {\n\t\t\t\tvar _type = types[i].split('');\n\t\t\t\tvar elem  = $scope.element.elements[i];\n\t\t\t\tif (!elem) {\n\t\t\t\t\telem = self.addElement($scope.element.builder.children, $scope.element);\n\t\t\t\t}\n\t\t\t\tvar width;\n\t\t\t\tif (_type[1]==5) {\n\t\t\t\t\twidth = 15\n\t\t\t\t} else {\n\t\t\t\t\twidth = 12 * _type[0] / _type[1];\n\t\t\t\t}\n\t\t\t\tmagezonBuilderService.setResponiveValue(elem, 'size', width);\n\t\t\t}\n\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\ttype: 'changed',\n\t\t\t\ttitle: $scope.element.builder.name + ' Layout'\n\t\t\t});\n\t\t}\n\t}\n\n\t// Open Navigator Modal\n\t$scope.$on('openElementNavigator', function(e, elem) {\n\t\tif ($scope.isChildren(elem)) {\n\t\t\t$rootScope.activedElement = elem;\n\t\t\telem.builder.actived = true;\n\t\t\tvar parents = self.getParents();\n\t\t\tif ($scope.element.id) parents.push($scope.element);\n\t\t\tangular.forEach(parents, function(_elem) {\n\t\t\t\t_elem.builder.navigator.listVisible = true;\n\t\t\t});\n\t\t\t$rootScope.builderConfig.navigatorListVisible = true;\n\t\t\t$rootScope.$broadcast('openNavigatorModal');\n\t\t}\n\t});\n\n\t$scope.$on('editedElement', function(e, elem) {\n\t\tif ($scope.isChildren(elem)) {\n\t\t\tself.loadLiveElement(elem);\n\t\t}\n\t});\n\n\t// REMOVE\n\tvar move = function (origin, destination) {\n        var temp = $scope.element.elements[destination];\n        $scope.element.elements[destination] = $scope.element.elements[origin];\n        $scope.element.elements[origin] = temp;\n    };\n\n\t$scope.$on('moveUpElement', function(e, elem) {\n\t\tself.moveUpElement(elem);\n\t\t$rootScope.$broadcast('resetElement');\n\t});\n\n\tself.moveUpElement = function(elem) {\n\t\tif ($scope.isChildren(elem)) {\n\t\t\tvar index = $scope.getElemIndex(elem);\n\t\t\tif (index>0) {\n\t\t\t\tmove(index, index - 1);\n\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\ttype: 'move_up',\n\t\t\t\t\ttitle: elem.builder.name\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t$scope.$on('moveDownElement', function(e, elem) {\n\t\tself.moveDownElement(elem);\n\t});\n\n\tself.moveDownElement = function(elem) {\n\t\tif ($scope.isChildren(elem)) {\n\t\t\tvar index = $scope.getElemIndex(elem);\n\t\t\tif (index<$scope.element.elements.length-1) {\n\t\t\t\tmove(index, index + 1);\n\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\ttype: 'move_down',\n\t\t\t\t\ttitle: elem.builder.name\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t$timeout(function() {\n\t\t$scope.addAddBlock();\n\t}, 100);\n\n\treturn angular.copy(self);\n};\n\nreturn listCtrl;\n\n});","Magezon_Builder/js/controllers/toolbar.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar baseCtrl = function(\n\t\t$scope,\n\t\t$timeout\n\t) {\n\t\tvar self = this;\n\t\t$scope.headingTypes = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\n\t\t$scope.alignTypes   = ['left', 'center', 'right'];\n\n\t\t$scope.colorPickerConfig = {\n\t\t\tappendTo: \"parent\"\n\t\t}\n\n\t\t$scope.changeToolbar = function(e, value, key) {\n\t\t\tif (angular.isFunction($scope.updatedkey)) {\n\t\t\t\t$scope.updatedkey(key, value);\n\t\t\t}\n\t\t\t$('.' + $scope.element.id).find('.mgz-contenteditable-element').trigger('focus');\n\t\t\te.stopPropagation();\n\t\t}\n\n\t\t$scope.outsideClick = function() {\n\t\t\t$scope.element.builder.editing = false;\n\t\t}\n\t\t\n\t\treturn angular.copy(this);\n\t};\n\n\treturn baseCtrl;\n});","Magezon_Builder/js/vimeo/player.js":"/*! @vimeo/player v2.8.1 | (c) 2019 Vimeo | MIT License | https://github.com/vimeo/player.js */\n!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):((e=e||self).Vimeo=e.Vimeo||{},e.Vimeo.Player=t())}(this,function(){\"use strict\";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var e=\"undefined\"!=typeof global&&\"[object global]\"==={}.toString.call(global);function i(e,t){return 0===e.indexOf(t.toLowerCase())?e:\"\".concat(t.toLowerCase()).concat(e.substr(0,1).toUpperCase()).concat(e.substr(1))}function s(e){return/^(https?:)?\\/\\/((player|www)\\.)?vimeo\\.com(?=$|\\/)/.test(e)}function l(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.id,r=t.url,o=n||r;if(!o)throw new Error(\"An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.\");if(e=o,!isNaN(parseFloat(e))&&isFinite(e)&&Math.floor(e)==e)return\"https://vimeo.com/\".concat(o);if(s(o))return o.replace(\"http:\",\"https:\");if(n)throw new TypeError(\"\u201c\".concat(n,\"\u201d is not a valid video id.\"));throw new TypeError(\"\u201c\".concat(o,\"\u201d is not a vimeo.com url.\"))}var t=void 0!==Array.prototype.indexOf,n=\"undefined\"!=typeof window&&void 0!==window.postMessage;if(!(e||t&&n))throw new Error(\"Sorry, the Vimeo Player API is not available in this browser.\");var o=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{};!function(e){if(!e.WeakMap){var n=Object.prototype.hasOwnProperty,o=function(e,t,n){Object.defineProperty?Object.defineProperty(e,t,{configurable:!0,writable:!0,value:n}):e[t]=n};e.WeakMap=function(){function e(){if(void 0===this)throw new TypeError(\"Constructor WeakMap requires 'new'\");if(o(this,\"_id\",\"_WeakMap\"+\"_\"+t()+\".\"+t()),0<arguments.length)throw new TypeError(\"WeakMap iterable is not supported\")}function r(e,t){if(!i(e)||!n.call(e,\"_id\"))throw new TypeError(t+\" method called on incompatible receiver \"+typeof e)}function t(){return Math.random().toString().substring(2)}return o(e.prototype,\"delete\",function(e){if(r(this,\"delete\"),!i(e))return!1;var t=e[this._id];return!(!t||t[0]!==e)&&(delete e[this._id],!0)}),o(e.prototype,\"get\",function(e){if(r(this,\"get\"),i(e)){var t=e[this._id];return t&&t[0]===e?t[1]:void 0}}),o(e.prototype,\"has\",function(e){if(r(this,\"has\"),!i(e))return!1;var t=e[this._id];return!(!t||t[0]!==e)}),o(e.prototype,\"set\",function(e,t){if(r(this,\"set\"),!i(e))throw new TypeError(\"Invalid value used as weak map key\");var n=e[this._id];return n&&n[0]===e?n[1]=t:o(e,this._id,[e,t]),this}),o(e,\"_polyfill\",!0),e}()}function i(e){return Object(e)===e}}(\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:o);var a,f=(function(e){var t,n,r;r=function(){var t,a,n,e=Object.prototype.toString,r=\"undefined\"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},\"x\",{}),t=function(e,t,n,r){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==r})}}catch(e){t=function(e,t,n){return e[t]=n,e}}function i(e,t){n.add(e,t),a||(a=r(n.drain))}function u(e){var t,n=typeof e;return null==e||\"object\"!=n&&\"function\"!=n||(t=e.then),\"function\"==typeof t&&t}function c(){for(var e=0;e<this.chain.length;e++)o(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function o(e,t,n){var r,o;try{!1===t?n.reject(e.msg):(r=!0===t?e.msg:t.call(void 0,e.msg))===n.promise?n.reject(TypeError(\"Promise-chain cycle\")):(o=u(r))?o.call(r,n.resolve,n.reject):n.resolve(r)}catch(e){n.reject(e)}}function s(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,0<t.chain.length&&i(c,t))}function l(e,n,r,o){for(var t=0;t<n.length;t++)!function(t){e.resolve(n[t]).then(function(e){r(t,e)},o)}(t)}function f(e){this.def=e,this.triggered=!1}function d(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function h(e){if(\"function\"!=typeof e)throw TypeError(\"Not a function\");if(0!==this.__NPO__)throw TypeError(\"Not a promise\");this.__NPO__=1;var r=new d(this);this.then=function(e,t){var n={success:\"function\"!=typeof e||e,failure:\"function\"==typeof t&&t};return n.promise=new this.constructor(function(e,t){if(\"function\"!=typeof e||\"function\"!=typeof t)throw TypeError(\"Not a function\");n.resolve=e,n.reject=t}),r.chain.push(n),0!==r.state&&i(c,r),n.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,function(e){(function e(n){var r,o=this;if(!o.triggered){o.triggered=!0,o.def&&(o=o.def);try{(r=u(n))?i(function(){var t=new f(o);try{r.call(n,function(){e.apply(t,arguments)},function(){s.apply(t,arguments)})}catch(e){s.call(t,e)}}):(o.msg=n,o.state=1,0<o.chain.length&&i(c,o))}catch(e){s.call(new f(o),e)}}}).call(r,e)},function(e){s.call(r,e)})}catch(e){s.call(r,e)}}n=function(){var n,r,o;function i(e,t){this.fn=e,this.self=t,this.next=void 0}return{add:function(e,t){o=new i(e,t),r?r.next=o:n=o,r=o,o=void 0},drain:function(){var e=n;for(n=r=a=void 0;e;)e.fn.call(e.self),e=e.next}}}();var v=t({},\"constructor\",h,!1);return t(h.prototype=v,\"__NPO__\",0,!1),t(h,\"resolve\",function(n){return n&&\"object\"==typeof n&&1===n.__NPO__?n:new this(function(e,t){if(\"function\"!=typeof e||\"function\"!=typeof t)throw TypeError(\"Not a function\");e(n)})}),t(h,\"reject\",function(n){return new this(function(e,t){if(\"function\"!=typeof e||\"function\"!=typeof t)throw TypeError(\"Not a function\");t(n)})}),t(h,\"all\",function(t){var a=this;return\"[object Array]\"!=e.call(t)?a.reject(TypeError(\"Not an array\")):0===t.length?a.resolve([]):new a(function(n,e){if(\"function\"!=typeof n||\"function\"!=typeof e)throw TypeError(\"Not a function\");var r=t.length,o=Array(r),i=0;l(a,t,function(e,t){o[e]=t,++i===r&&n(o)},e)})}),t(h,\"race\",function(t){var r=this;return\"[object Array]\"!=e.call(t)?r.reject(TypeError(\"Not an array\")):new r(function(n,e){if(\"function\"!=typeof n||\"function\"!=typeof e)throw TypeError(\"Not a function\");l(r,t,function(e,t){n(t)},e)})}),h},(n=o)[t=\"Promise\"]=n[t]||r(),e.exports&&(e.exports=n[t])}(a={exports:{}},a.exports),a.exports),d=new WeakMap;function u(e,t,n){var r=d.get(e.element)||{};t in r||(r[t]=[]),r[t].push(n),d.set(e.element,r)}function c(e,t){return(d.get(e.element)||{})[t]||[]}function h(e,t,n){var r=d.get(e.element)||{};if(!r[t])return!0;if(!n)return r[t]=[],d.set(e.element,r),!0;var o=r[t].indexOf(n);return-1!==o&&r[t].splice(o,1),d.set(e.element,r),r[t]&&0===r[t].length}var v=[\"autopause\",\"autoplay\",\"background\",\"byline\",\"color\",\"height\",\"id\",\"loop\",\"maxheight\",\"maxwidth\",\"muted\",\"playsinline\",\"portrait\",\"responsive\",\"speed\",\"title\",\"transparent\",\"url\",\"width\"];function p(r){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return v.reduce(function(e,t){var n=r.getAttribute(\"data-vimeo-\".concat(t));return(n||\"\"===n)&&(e[t]=\"\"===n?1:n),e},e)}function y(e,t){var n=e.html;if(!t)throw new TypeError(\"An element must be provided\");if(null!==t.getAttribute(\"data-vimeo-initialized\"))return t.querySelector(\"iframe\");var r=document.createElement(\"div\");return r.innerHTML=n,t.appendChild(r.firstChild),t.setAttribute(\"data-vimeo-initialized\",\"true\"),t.querySelector(\"iframe\")}function m(i){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},u=2<arguments.length?arguments[2]:void 0;return new Promise(function(t,n){if(!s(i))throw new TypeError(\"\u201c\".concat(i,\"\u201d is not a vimeo.com url.\"));var e=\"https://vimeo.com/api/oembed.json?url=\".concat(encodeURIComponent(i),\"&domain=\").concat(window.location.hostname);for(var r in a)a.hasOwnProperty(r)&&(e+=\"&\".concat(r,\"=\").concat(encodeURIComponent(a[r])));var o=\"XDomainRequest\"in window?new XDomainRequest:new XMLHttpRequest;o.open(\"GET\",e,!0),o.onload=function(){if(404!==o.status)if(403!==o.status)try{var e=JSON.parse(o.responseText);if(403===e.domain_status_code)return y(e,u),void n(new Error(\"\u201c\".concat(i,\"\u201d is not embeddable.\")));t(e)}catch(e){n(e)}else n(new Error(\"\u201c\".concat(i,\"\u201d is not embeddable.\")));else n(new Error(\"\u201c\".concat(i,\"\u201d was not found.\")))},o.onerror=function(){var e=o.status?\" (\".concat(o.status,\")\"):\"\";n(new Error(\"There was an error fetching the embed code from Vimeo\".concat(e,\".\")))},o.send()})}function g(e){if(\"string\"==typeof e)try{e=JSON.parse(e)}catch(e){return console.warn(e),{}}return e}function w(e,t,n){if(e.element.contentWindow&&e.element.contentWindow.postMessage){var r={method:t};void 0!==n&&(r.value=n);var o=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\\d+).*$/,\"$1\"));8<=o&&o<10&&(r=JSON.stringify(r)),e.element.contentWindow.postMessage(r,e.origin)}}function b(n,r){var t,e=[];if((r=g(r)).event){if(\"error\"===r.event)c(n,r.data.method).forEach(function(e){var t=new Error(r.data.message);t.name=r.data.name,e.reject(t),h(n,r.data.method,e)});e=c(n,\"event:\".concat(r.event)),t=r.data}else if(r.method){var o=function(e,t){var n=c(e,t);if(n.length<1)return!1;var r=n.shift();return h(e,t,r),r}(n,r.method);o&&(e.push(o),t=r.value)}e.forEach(function(e){try{if(\"function\"==typeof e)return void e.call(n,t);e.resolve(t)}catch(e){}})}var k=new WeakMap,E=new WeakMap,Player=function(){function Player(u){var e,c=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Player),window.jQuery&&u instanceof jQuery&&(1<u.length&&window.console&&console.warn&&console.warn(\"A jQuery object with multiple elements was passed, using the first element.\"),u=u[0]),\"undefined\"!=typeof document&&\"string\"==typeof u&&(u=document.getElementById(u)),e=u,!Boolean(e&&1===e.nodeType&&\"nodeName\"in e&&e.ownerDocument&&e.ownerDocument.defaultView))throw new TypeError(\"You must pass either a valid element or a valid id.\");var r=u.ownerDocument.defaultView;if(\"IFRAME\"!==u.nodeName){var t=u.querySelector(\"iframe\");t&&(u=t)}if(\"IFRAME\"===u.nodeName&&!s(u.getAttribute(\"src\")||\"\"))throw new Error(\"The player element passed isn\u2019t a Vimeo embed.\");if(k.has(u))return k.get(u);this.element=u,this.origin=\"*\";var o=new f(function(i,a){var e=function(e){if(s(e.origin)&&c.element.contentWindow===e.source){\"*\"===c.origin&&(c.origin=e.origin);var t=g(e.data);if(t&&\"error\"===t.event&&t.data&&\"ready\"===t.data.method){var n=new Error(t.data.message);return n.name=t.data.name,void a(n)}var r=t&&\"ready\"===t.event,o=t&&\"ping\"===t.method;if(r||o)return c.element.setAttribute(\"data-ready\",\"true\"),void i();b(c,t)}};if(r.addEventListener?r.addEventListener(\"message\",e,!1):r.attachEvent&&r.attachEvent(\"onmessage\",e),\"IFRAME\"!==c.element.nodeName){var t=p(u,n);m(l(t),t,u).then(function(e){var t,n,r,o=y(e,u);return c.element=o,c._originalElement=u,t=u,n=o,r=d.get(t),d.set(n,r),d.delete(t),k.set(c.element,c),e}).catch(a)}});return E.set(this,o),k.set(this.element,this),\"IFRAME\"===this.element.nodeName&&w(this,\"ping\"),this}var e,t,n;return e=Player,(t=[{key:\"callMethod\",value:function(n){var r=this,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return new f(function(e,t){return r.ready().then(function(){u(r,n,{resolve:e,reject:t}),w(r,n,o)}).catch(t)})}},{key:\"get\",value:function(n){var r=this;return new f(function(e,t){return n=i(n,\"get\"),r.ready().then(function(){u(r,n,{resolve:e,reject:t}),w(r,n)}).catch(t)})}},{key:\"set\",value:function(n,r){var o=this;return new f(function(e,t){if(n=i(n,\"set\"),null==r)throw new TypeError(\"There must be a value to set.\");return o.ready().then(function(){u(o,n,{resolve:e,reject:t}),w(o,n,r)}).catch(t)})}},{key:\"on\",value:function(e,t){if(!e)throw new TypeError(\"You must pass an event name.\");if(!t)throw new TypeError(\"You must pass a callback function.\");if(\"function\"!=typeof t)throw new TypeError(\"The callback must be a function.\");0===c(this,\"event:\".concat(e)).length&&this.callMethod(\"addEventListener\",e).catch(function(){}),u(this,\"event:\".concat(e),t)}},{key:\"off\",value:function(e,t){if(!e)throw new TypeError(\"You must pass an event name.\");if(t&&\"function\"!=typeof t)throw new TypeError(\"The callback must be a function.\");h(this,\"event:\".concat(e),t)&&this.callMethod(\"removeEventListener\",e).catch(function(e){})}},{key:\"loadVideo\",value:function(e){return this.callMethod(\"loadVideo\",e)}},{key:\"ready\",value:function(){var e=E.get(this)||new f(function(e,t){t(new Error(\"Unknown player. Probably unloaded.\"))});return f.resolve(e)}},{key:\"addCuePoint\",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.callMethod(\"addCuePoint\",{time:e,data:t})}},{key:\"removeCuePoint\",value:function(e){return this.callMethod(\"removeCuePoint\",e)}},{key:\"enableTextTrack\",value:function(e,t){if(!e)throw new TypeError(\"You must pass a language.\");return this.callMethod(\"enableTextTrack\",{language:e,kind:t})}},{key:\"disableTextTrack\",value:function(){return this.callMethod(\"disableTextTrack\")}},{key:\"pause\",value:function(){return this.callMethod(\"pause\")}},{key:\"play\",value:function(){return this.callMethod(\"play\")}},{key:\"unload\",value:function(){return this.callMethod(\"unload\")}},{key:\"destroy\",value:function(){var t=this;return new f(function(e){E.delete(t),k.delete(t.element),t._originalElement&&(k.delete(t._originalElement),t._originalElement.removeAttribute(\"data-vimeo-initialized\")),t.element&&\"IFRAME\"===t.element.nodeName&&t.element.parentNode&&t.element.parentNode.removeChild(t.element),e()})}},{key:\"getAutopause\",value:function(){return this.get(\"autopause\")}},{key:\"setAutopause\",value:function(e){return this.set(\"autopause\",e)}},{key:\"getBuffered\",value:function(){return this.get(\"buffered\")}},{key:\"getColor\",value:function(){return this.get(\"color\")}},{key:\"setColor\",value:function(e){return this.set(\"color\",e)}},{key:\"getCuePoints\",value:function(){return this.get(\"cuePoints\")}},{key:\"getCurrentTime\",value:function(){return this.get(\"currentTime\")}},{key:\"setCurrentTime\",value:function(e){return this.set(\"currentTime\",e)}},{key:\"getDuration\",value:function(){return this.get(\"duration\")}},{key:\"getEnded\",value:function(){return this.get(\"ended\")}},{key:\"getLoop\",value:function(){return this.get(\"loop\")}},{key:\"setLoop\",value:function(e){return this.set(\"loop\",e)}},{key:\"getPaused\",value:function(){return this.get(\"paused\")}},{key:\"getPlaybackRate\",value:function(){return this.get(\"playbackRate\")}},{key:\"setPlaybackRate\",value:function(e){return this.set(\"playbackRate\",e)}},{key:\"getPlayed\",value:function(){return this.get(\"played\")}},{key:\"getSeekable\",value:function(){return this.get(\"seekable\")}},{key:\"getSeeking\",value:function(){return this.get(\"seeking\")}},{key:\"getTextTracks\",value:function(){return this.get(\"textTracks\")}},{key:\"getVideoEmbedCode\",value:function(){return this.get(\"videoEmbedCode\")}},{key:\"getVideoId\",value:function(){return this.get(\"videoId\")}},{key:\"getVideoTitle\",value:function(){return this.get(\"videoTitle\")}},{key:\"getVideoWidth\",value:function(){return this.get(\"videoWidth\")}},{key:\"getVideoHeight\",value:function(){return this.get(\"videoHeight\")}},{key:\"getVideoUrl\",value:function(){return this.get(\"videoUrl\")}},{key:\"getVolume\",value:function(){return this.get(\"volume\")}},{key:\"setVolume\",value:function(e){return this.set(\"volume\",e)}}])&&r(e.prototype,t),n&&r(e,n),Player}();return e||(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document,t=[].slice.call(e.querySelectorAll(\"[data-vimeo-id], [data-vimeo-url]\")),n=function(e){\"console\"in window&&console.error&&console.error(\"There was an error creating an embed: \".concat(e))};t.forEach(function(t){try{if(null!==t.getAttribute(\"data-vimeo-defer\"))return;var e=p(t);m(l(e),e,t).then(function(e){return y(e,t)}).catch(n)}catch(e){n(e)}})}(),function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document;if(!window.VimeoPlayerResizeEmbeds_){window.VimeoPlayerResizeEmbeds_=!0;var e=function(e){if(s(e.origin)&&e.data&&\"spacechange\"===e.data.event)for(var t=r.querySelectorAll(\"iframe\"),n=0;n<t.length;n++)if(t[n].contentWindow===e.source){t[n].parentElement.style.paddingBottom=\"\".concat(e.data.data[0].bottom,\"px\");break}};window.addEventListener?window.addEventListener(\"message\",e,!1):window.attachEvent&&window.attachEvent(\"onmessage\",e)}}()),Player});","Magezon_Builder/js/modal/settings.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\treturn {\n\t\ttemplateUrl: 'Magezon_Builder/js/templates/modal/form.html',\n\t\tcontroller: function(\n\t\t\t$rootScope, \n\t\t\t$scope, \n\t\t\t$uibModalInstance, \n\t\t\t$controller, \n\t\t\tform,\n\t\t\tmodal,\n\t\t\tmagezonBuilderForm\n\t\t) {\n\t\t\tvar parent = $controller('modalBaseController', {$scope: $scope, $uibModalInstance: $uibModalInstance, modal: modal, form: form});\n\t\t\tangular.extend(this, parent);\n\n\t\t\tvar self = this;\n\n\t\t\t$scope.$emit('enableModalSpinner');\n\t\t\tmagezonBuilderForm.getForm('modals.settings', function(tabs) {\n\t\t\t\tself.tabs = tabs;\n\t\t\t\tself.model = angular.copy($rootScope.profile);\n\t\t\t\t$scope.$emit('disableModalSpinner');\n\t\t\t});\n\n\t\t\tself.onSubmit = function() {\n\t\t\t\tangular.merge($rootScope.profile, self.model);\n\t\t\t\t$rootScope.$broadcast('exportShortcode');\n\t\t\t\t$uibModalInstance.close(self.model);\n\t\t\t}\n\t\t}\n\t}\n});","Magezon_Builder/js/modal/elements.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\treturn {\n\t\ttemplateUrl: 'Magezon_Builder/js/templates/modal/elements.html',\n\t\tcontroller: function(\n\t\t\t$rootScope, \n\t\t\t$scope, \n\t\t\t$uibModalInstance, \n\t\t\t$controller, \n\t\t\tform,\n\t\t\tmodal,\n\t\t\telementManager,\n\t\t\tmagezonBuilderModal\n\t\t) {\n\t\t\tvar parent = $controller('modalBaseController', {$scope: $scope, $uibModalInstance: $uibModalInstance, modal: modal, form: form});\n\t\t\tangular.extend(this, parent);\n\n\t\t\tvar self = this;\n\t\t\tself.allTab = {\n\t\t\t\tname: 'All',\n\t\t\t\ttype: 'all',\n\t\t\t\telements: _.filter(elementManager.elements, function(element) {\n\t\t\t\t\treturn elementManager.isVisibleElement(element);\n\t\t\t\t})\n\t\t\t};\n\n\t\t\tself.search         = '';\n\t\t\tself.searchElements = [];\n\t\t\tself.model          = {};\n\t\t\tself.tabs           = {};\n\t\t\tself.tabs['all']    = angular.copy(self.allTab);\n\n\t\t\t_.each(elementManager.groups, function(group) {\n\t\t\t\tgroup['elements'] = _.filter(self.allTab.elements, function(element) {\n\t\t\t\t\treturn element.group == group.type;\n\t\t\t\t});\n\t\t\t\tif (group.elements.length) self.tabs[group.type] = group;\n\t\t\t});\n\n\t\t\tself.clearSearch = function() {\n\t\t\t\tself.search         = '';\n\t\t\t\tself.searchElements = [];\n\t\t\t\tself.tabs['all']    = angular.copy(self.allTab);\n\t\t\t}\n\n\t\t\tself.activeTab = function(tab) {\n\t\t\t\tself.clearSearch();\n\t\t\t}\n\n\t\t\tself.addElement = function(element) {\n\t\t\t\t$uibModalInstance.dismiss('cancel');\n\t\t\t\t$rootScope.$broadcast('addNewElment', {\n\t\t\t\t\telem: magezonBuilderModal.getElement(),\n\t\t\t\t\ttype: element.type,\n\t\t\t\t\taction: magezonBuilderModal.getAction(),\n\t\t\t\t\topenModal: magezonBuilderModal.getOpenModal(),\n\t\t\t\t\tdata: magezonBuilderModal.getData()\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n});","Magezon_Builder/js/modal/profileShortcode.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\treturn {\n\t\ttemplateUrl: 'Magezon_Builder/js/templates/modal/form.html',\n\t\tcontroller: function(\n\t\t\t$rootScope, \n\t\t\t$scope, \n\t\t\t$uibModalInstance, \n\t\t\t$controller, \n\t\t\t$timeout,\n\t\t\tform,\n\t\t\tmodal,\n\t\t\tprofileManager,\n\t\t\tmagezonBuilderForm,\n\t\t\telementManager\n\t\t) {\n\t\t\tvar parent = $controller('modalBaseController', {$scope: $scope, $uibModalInstance: $uibModalInstance, modal: modal, form: form});\n\t\t\tangular.extend(this, parent);\n\n\t\t\tvar self = this;\n\t\t\tvar elements = angular.toJson(profileManager.getJsonElements());\n\t\t\tself.model = {\n\t\t\t\tshortcode: elements == '[]' ? '' : elements\n\t\t\t};\n\n\t\t\t$scope.$emit('enableModalSpinner');\n\t\t\tmagezonBuilderForm.getForm('modals.profileShortcode', function(tabs) {\n\t\t\t\tself.tabs = tabs;\n\t\t\t\t$scope.$emit('disableModalSpinner');\n\t\t\t});\n\n\t\t\tself.onSubmit = function() {\n\t\t\t\ttry {\n\t\t\t\t\tvar shortcode = self.model.shortcode ? self.model.shortcode : [];\n\t\t\t\t\tvar elements = elementManager.prepareElements(angular.fromJson(shortcode));\n\t\t\t\t\tprofileManager.updateElements(elements);\n\t\t\t\t\t$timeout(function() {\n\t\t\t\t\t\t$uibModalInstance.dismiss('cancel');\n\t\t\t\t\t}, 100);\n\t\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\t\ttype: 'edited',\n\t\t\t\t\t\ttitle: 'Profile Shortcode'\n\t\t\t\t\t});\n\t\t\t\t} catch (e) {\n\t\t\t\t\talert('Invalid JSON string');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});","Magezon_Builder/js/modal/navigator.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\treturn {\n\t\ttemplateUrl: 'Magezon_Builder/js/templates/modal/navigator.html',\n\t\tcontroller: function(\n\t\t\t$rootScope, \n\t\t\t$scope, \n\t\t\t$uibModalInstance, \n\t\t\t$controller,\n\t\t\tform, \n\t\t\tmodal\n\t\t) {\n\t\t\tvar parent = $controller('modalBaseController', {$scope: $scope, $uibModalInstance: $uibModalInstance, modal: modal, form: form});\n\t\t\tangular.extend(this, parent);\n\n\t\t\t$scope.listVisible = $rootScope.builderConfig.navigatorListVisible;\n\t\t\t$scope.expandAll = function() {\n\t\t\t\t$scope.listVisible = !$scope.listVisible;\n\t\t\t\t$rootScope.builderConfig.navigatorListVisible = $scope.listVisible;\n\t\t\t\tvar parents = {};\n\t\t\t\tvar activeListControl = function(elements, status) {\n\t\t\t\t\tangular.forEach(elements, function(element) {\n\t\t\t\t\t\telement.builder.navigator.listVisible = status;\n\t\t\t\t\t\tif (element.elements) {\n\t\t\t\t\t\t\tactiveListControl(element.elements, status);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tactiveListControl($scope.profile.elements, $scope.listVisible);\n\t\t\t}\n\t\t}\n\t}\n});","Magezon_Builder/js/modal/form.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\treturn {\n\t\ttemplateUrl: 'Magezon_Builder/js/templates/modal/form.html',\n\t\tcontroller: function(\n\t\t\t$rootScope, \n\t\t\t$scope, \n\t\t\t$uibModalInstance, \n\t\t\t$controller,\n\t\t\tform,\n\t\t\tmodal,\n\t\t\tmagezonBuilderForm\n\t\t) {\n\t\t\tvar parent = $controller('modalBaseController', {$scope: $scope, $uibModalInstance: $uibModalInstance, modal: modal, form: form});\n\t\t\tangular.extend(this, parent);\n\n\t\t\tthis.model = form.model;\n\t\t\tvar self = this;\n\n\t\t\t$scope.$emit('enableModalSpinner');\n\t\t\tmagezonBuilderForm.getForm('modals.' + modal.key, function(tabs) {\n\t\t\t\tself.tabs = tabs;\n\t\t\t\t$scope.$emit('disableModalSpinner');\n\t\t\t});\n\n\t\t\tself.onSubmit = function() {\n\t\t\t\t$rootScope.$broadcast('modal_' + modal.key + '_saved');\n\t\t\t\t$uibModalInstance.close(self.model);\n\t\t\t}\n\t\t}\n\t}\n});","Magezon_Builder/js/modal/history.js":"define([\n\t'jquery',\n\t'angular',\n\t'moment'\n], function($, angular, moment) {\n\n\treturn {\n\t\ttemplateUrl: 'Magezon_Builder/js/templates/modal/history.html',\n\t\tcontroller: function(\n\t\t\t$scope, \n\t\t\t$uibModalInstance,\n\t\t\t$controller, \n\t\t\tform,\n\t\t\tmodal,\n\t\t\thistoryManager\n\t\t) {\n\t\t\tvar parent = $controller('modalBaseController', {$scope: $scope, $uibModalInstance: $uibModalInstance, modal: modal, form: form});\n\t\t\tangular.extend(this, parent);\n\n\t\t\t$scope.previewItem = function(item) {\n\t\t\t\thistoryManager.previewItem(item);\n\t\t\t}\n\n\t\t\t$scope.applyItem = function(item) {\n\t\t\t\thistoryManager.applyItem(item);\n\t\t\t}\n\n\t\t\t$scope.getDateTime = function(item) {\n\t\t\t\treturn moment(item.time).fromNow();\n\t\t\t}\n\n\t\t\t$scope.getDateTimeTitle = function(item) {\n\t\t\t\treturn moment(item.time).format('MM/DD/YYYY HH:mm:s');\n\t\t\t}\n\n\t\t\tvar timer;\n\t\t\tsetTimeout(function() {\n\t\t\t\ttimer = setInterval(function() {\n\t\t\t\t\t$scope.$apply();\n\t\t\t\t}, 1000);\n\t\t\t}, 10000);\n\n\t\t\t$scope.$on('$destroy', function() {\n\t\t\t\tif (timer) {\n\t\t\t\t\tclearInterval(timer);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n});","Magezon_Builder/js/modal/templates.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\treturn {\n\t\ttemplateUrl: 'Magezon_Builder/js/templates/modal/form.html',\n\t\tcontroller: function(\n\t\t\t$scope, \n\t\t\t$uibModalInstance, \n\t\t\t$controller,\n\t\t\tform, \n\t\t\tmodal,\n\t\t\tmagezonBuilderForm\n\t\t) {\n\t\t\tvar parent = $controller('modalBaseController', {$scope: $scope, $uibModalInstance: $uibModalInstance, modal: modal, form: form});\n\t\t\tangular.extend(this, parent);\n\t\t\t\n\t\t\tvar self = this;\n\n\t\t\t$scope.$emit('enableModalSpinner');\n\t\t\tmagezonBuilderForm.getForm('modals.templates', function(tabs) {\n\t\t\t\tself.tabs = tabs;\n\t\t\t\t$scope.$emit('disableModalSpinner');\n\t\t\t});\n\t\t}\n\t}\n});","Magezon_Builder/js/modal/clearLayout.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\treturn {\n\t\ttemplateUrl: 'Magezon_Builder/js/templates/modal/clear-layout.html',\n\t\tcontroller: function(\n\t\t\t$rootScope, \n\t\t\t$scope, \n\t\t\t$uibModalInstance, \n\t\t\t$controller,\n\t\t\tform, \n\t\t\tmodal\n\t\t) {\n\t\t\tvar parent = $controller('modalBaseController', {$scope: $scope, $uibModalInstance: $uibModalInstance, modal: modal, form: form});\n\t\t\tangular.extend(this, parent);\n\n\t\t\tvar self = this;\n\n\t\t\tself.onSubmit = function() {\n\t\t\t\t$rootScope.profile.elements = [];\n\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\ttype: 'cleared_layout'\n\t\t\t\t});\n\t\t\t\t$uibModalInstance.close(self.model);\n\t\t\t}\n\t\t}\n\t}\n});","Magezon_Builder/js/modal/element.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\treturn {\n\t\ttemplateUrl: 'Magezon_Builder/js/templates/modal/form.html',\n\t\tcontroller: function(\n\t\t\t$rootScope, \n\t\t\t$scope, \n\t\t\t$uibModalInstance, \n\t\t\t$controller, \n\t\t\tmodal,\n\t\t\tform,\n\t\t\tmagezonBuilderForm,\n\t\t\tmagezonBuilderFilter\n\t\t) {\n\t\t\tvar parent = $controller('modalBaseController', {$scope: $scope, $uibModalInstance: $uibModalInstance, modal: modal, form: form});\n\t\t\tangular.extend(this, parent);\n\n\t\t\tvar self     = this;\n\t\t\tvar element  = form.element;\n\t\t\tvar builder  = form.element.builder;\n\t\t\t$scope.title = element.builder.name;\n\t\t\tself.model   = angular.copy(form.element);\n\t\t\tself.element = form.element;\n\n\t\t\t$scope.$emit('enableModalSpinner');\n\t\t\tmagezonBuilderForm.getForm('elements.' + element.type, function(tabs, result) {\n\t\t\t\tangular.forEach(tabs[0]['templateOptions']['children'], function(tab, index) {\n\t\t\t\t\tif (!tab.fieldGroup) {\n\t\t\t\t\t\tdelete tabs[0]['templateOptions']['children'][index];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\ttabs[0]['templateOptions']['children'] = tabs[0]['templateOptions']['children'].filter(function(){return true;});\n\t\t\t\tself.tabs = tabs;\n\t\t\t\t$scope.activeTab();\n\t\t\t\tbuilder.fields = result.fields;\n\t\t\t\t$scope.spinner = false;\n\t\t\t\t$scope.$emit('disableModalSpinner');\n\t\t\t});\n\n\t\t\t$scope.activeTab = function() {\n\t\t\t\tvar activeIndex = 0;\n\t\t\t\tif (form.activeTab) {\n\t\t\t\t\tangular.forEach(self.tabs[0]['templateOptions']['children'], function(tab, index) {\n\t\t\t\t\t\tif (tab.templateOptions.elementId == form.activeTab) {\n\t\t\t\t\t\t\tactiveIndex = index;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tself.tabs[0]['templateOptions']['activeTab'] = activeIndex;\n\t\t\t\t} else {\n\t\t\t\t\tself.tabs[0]['templateOptions']['activeTab'] = activeIndex;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tself.onSubmit = function() {\n\t\t\t\tvar excludeFields = ['builder', 'elements'];\n\t\t\t\tvar newData = self.model;\n\t\t\t\tangular.forEach(newData, function(value, key) {\n\t\t\t\t\tif ($.inArray(key, excludeFields)===-1) {\n\t\t\t\t\t\tif (angular.isString(value)) {\n\t\t\t\t\t\t\tvalue = magezonBuilderFilter.processContent(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telement[key] = value;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t$uibModalInstance.close(element);\n\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\ttype: 'edited',\n\t\t\t\t\ttitle: element.builder.name\n\t\t\t\t});\n\t\t\t\t$rootScope.$broadcast('editedElement', element);\n\t\t    }\n\n\t\t\tself.findField = function(fieldGroup, value) {\n\t\t\t\tvar result;\n\t\t\t\tangular.forEach(fieldGroup, function(field, index) {\n\t\t\t\t\tif ((field.className.indexOf('mgz_field-' + value + ' ') !== -1)) {\n\t\t\t\t\t\tresult = field;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (field.fieldGroup && !result) {\n\t\t\t\t\t\tresult = self.findField(field.fieldGroup, value);\n\t\t\t\t\t}\n\t\t\t\t\tif (field.templateOptions.children && !result) {\n\t\t\t\t\t\tresult = self.findField(field.templateOptions.children, value);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t    $rootScope.$on('showField', function(event, data) {\n\t\t\t\tvar indexesMap = {};\n\t\t\t\tvar valuesMap = {};\n\n\t\t\t\tangular.forEach(data.groupsConfig, function (fields, group) {\n\t                angular.forEach(fields, function (index) {\n\t                    if (!indexesMap[index]) {\n\t                        indexesMap[index] = [];\n\t                    }\n\t                    indexesMap[index].push(group);\n\t                });\n\t            });\n\n\t            angular.forEach(indexesMap, function (groups, field) {\n\t\t\t\t\tvar visible   = (groups.indexOf(data.value) !== -1);\n\t\t\t\t\tvar field     = self.findField(self.tabs, field);\n\t\t\t\t\tif (field) {\n\t\t\t\t\t\tvar hide = !visible;\n\t\t\t\t\t\tfield['status'] = !hide;\n\t\t\t\t\t\tif (hide) {\n\t\t\t\t\t\t\t$('.mgz_field-' + field.key).hide();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$('.mgz_field-' + field.key).show();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tif (hide) {\n\t\t\t\t\t\t\t\t$('.mgz_field-' + field.key).hide();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t$('.mgz_field-' + field.key).show();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 200);\n\t\t\t\t\t}\n\t            });\n\t\t\t});\n\t\t}\n\t}\n});","Magezon_Builder/js/modal/block/elements_search.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/modal/block/elements_search.html');\n\t\t\t},\n\t\t\tcontroller: function($scope) {\n\t\t\t\tvar $parent = $scope.$parent;\n\n\t\t\t\t$scope.filterElements = function() {\n\t\t\t\t\tvar q = $parent.mgz.search;\n\t\t\t\t\t$parent.mgz.active = 0;\n\t\t\t\t\t$parent.mgz.tabs['all']['elements'] = _.filter(angular.copy($parent.mgz.allTab.elements), function(element) {\n\t\t\t\t\t\tvar description = element.description;\n\t\t\t\t\t\tvar search = element.search;\n\t\t\t\t\t\tvar group = element.group;\n\t\t\t\t\t\treturn (element.name.toLowerCase().indexOf(q.toLowerCase()) !== -1) \n\t\t\t\t\t\t|| (description && description.toLowerCase().indexOf(q.toLowerCase()) !== -1) \n\t\t\t\t\t\t|| (search && search.toLowerCase().indexOf(q.toLowerCase()) !== -1\n\t\t\t\t\t\t|| (group && group.toLowerCase().indexOf(q.toLowerCase()) !== -1))\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t$scope.clearSearch = function() {\n\t\t\t\t\t$('.mgz-elements-filter').trigger('focus');\n\t\t\t\t\t$parent.mgz.clearSearch();\n\t\t\t\t}\n\t\t\t\t$('.mgz-elements-filter').trigger('focus');\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/modal/block/title.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/modal/block/title.html');\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope) {\n\t\t\t\tvar loaded = false;\n\t\t\t\t$scope.title    = $scope.$parent.title;\n\t\t\t\t$scope.subtitle = $scope.$parent.subtitle;\n\t\t\t\t$scope.$watch('title', function(title) {\n\t\t\t\t\tif (loaded) {\n\t\t\t\t\t\t$scope.$parent.mgz.element.builder.name = title;\n\t\t\t\t\t\t$rootScope.$broadcast('exportShortcode');\n\t\t\t\t\t}\n\t\t\t\t\tloaded = true;\n\t\t\t\t});\n\t\t\t},\n\t\t\tlink: function(scope, element) {\n\t\t\t\tif (scope.$parent.mgz.element) {\n\t\t\t\t\telement.find('.mgz-icon-edit').click(function(event) {\n\t\t\t\t\t\tvar span = element.find('.mgz-modal-title-inner');\n\t\t\t\t\t\tvar t = document.createRange();\n\t\t\t\t\t\tvar i = window.getSelection();\n\t\t\t\t\t\tt.selectNodeContents(span[0]);\n\t\t\t\t\t\ti.removeAllRanges();\n\t\t\t\t\t\ti.addRange(t);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\telement.find('span').eq(0).removeAttr('contenteditable').removeClass('mgz-contenteditable-element');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/modal/button/navigator_toggle.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/modal/button/navigator_toggle.html');\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope) {\n\t\t\t\t$scope.listVisible = $rootScope.builderConfig.navigatorListVisible;\n\t\t\t\t$scope.toggle = function() {\n\t\t\t\t\t$scope.listVisible = !$scope.listVisible;\n\t\t\t\t\t$rootScope.builderConfig.navigatorListVisible = $scope.listVisible;\n\t\t\t\t\tvar parents = {};\n\t\t\t\t\tvar activeListControl = function(elements, status) {\n\t\t\t\t\t\tangular.forEach(elements, function(element) {\n\t\t\t\t\t\t\telement.builder.navigator.listVisible = status;\n\t\t\t\t\t\t\tif (element.elements) {\n\t\t\t\t\t\t\t\tactiveListControl(element.elements, status);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tactiveListControl($rootScope.profile.elements, $scope.listVisible);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/modal/button/replace.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/modal/button/replace.html');\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope, elementManager) {\n\n\t\t\t\t$scope.replace = function() {\n\t\t\t\t\t$rootScope.$broadcast('addElement', {elem: $scope.$parent.mgz.element, action: 'replace' });\n\t\t\t\t}\n\n\t\t\t\t$scope.canReplace = function() {\n\t\t\t\t\treturn elementManager.canReplace($scope.$parent.mgz.element);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/modal/button/save.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/modal/button/save.html');\n\t\t\t},\n\t\t\tcontroller: function($scope) {\n\t\t\t\t$scope.disabled = false;\n\n\t\t\t\t$scope.$on('disableSaveBtn', function() {\n\t\t\t\t\t$scope.disabled = true;\n\t\t\t\t});\n\n\t\t\t\t$scope.$on('enableSaveBtn', function() {\n\t\t\t\t\t$scope.disabled = false;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/modal/button/minimize.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/modal/button/minimize.html');\n\t\t\t},\n\t\t\tcontroller: function($scope) {\n\t\t\t\t$scope.minimized = false;\n\t\t\t\t$scope.minimize = function() {\n\t\t\t\t\tvar modalSelector = $scope.$parent.mgz.getModalSelector();\n\t\t\t\t\tvar headerHeight  = $scope.$parent.mgz.getHeaderHeight();\n\t\t\t\t\tmodalSelector.stop();\n\t\t\t\t\tif ($scope.minimized) {\n\t\t\t\t\t\tvar height = parseFloat(modalSelector.css('max-height'));\n\t\t\t\t\t\tif (height) {\n\t\t\t\t\t\t\tmodalSelector.animate({\"height\": height}, \"medium\", function() {\n\t\t\t\t\t\t\t\tmodalSelector.css('height', '');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmodalSelector.css('height', '');\n\t\t\t\t\t\t\t$scope.$parent.mgz.resizeInner();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmodalSelector.removeClass('mgz-minimized');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmodalSelector.animate({\"height\": headerHeight}, \"medium\");\n\t\t\t\t\t\tmodalSelector.addClass('mgz-minimized');\n\t\t\t\t\t}\n\t\t\t\t\t$scope.minimized = !$scope.minimized;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/js/builder/element/row.js":"","Magezon_Builder/js/ui/form/element/wysiwyg.js":"define([\n    'jquery',\n    'underscore',\n    'Magento_Ui/js/form/element/textarea'\n], function ($, _, Textarea) {\n    'use strict';\n\n    return Textarea.extend({\n\n        defaults: {\n            elementTmpl: 'Magezon_Builder/ui/form/element/builder'\n        },\n\n        initialize: function () {\n            this._super();\n\n            return this;\n        }\n    })\n});","Magezon_Builder/js/ui/form/element/color-picker-palette.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/**\n * @api\n */\ndefine([], function () {\n    'use strict';\n\n    return [\n        [\n            'rgb(0,0,0)', 'rgb(52,52,52)', 'rgb(83,83,83)', 'rgb(135,135,135)', 'rgb(193,193,193)',\n            'rgb(234,234,234)', 'rgb(240,240,240)', 'rgb(255,255,255)'\n        ],\n        [\n            'rgb(252,0,9)', 'rgb(253,135,10)', 'rgb(255,255,13)', 'rgb(35,255,9)', 'rgb(33,255,255)',\n            'rgb(0,0,254)', 'rgb(132,0,254)', 'rgb(251,0,255)'\n        ],\n        [\n            'rgb(240,192,194)', 'rgb(251,223,194)', 'rgb(255,241,193)', 'rgb(210,230,201)',\n            'rgb(199,217,220)', 'rgb(197,219,240)', 'rgb(208,200,227)', 'rgb(229,199,212)'\n        ],\n        [\n            'rgb(228,133,135)', 'rgb(246,193,139)', 'rgb(254,225,136)', 'rgb(168,208,152)',\n            'rgb(146,184,190)', 'rgb(143,184,227)', 'rgb(165,148,204)', 'rgb(202,147,175)'\n        ],\n        [\n            'rgb(214,78,83)', 'rgb(243,163,88)', 'rgb(254,211,83)', 'rgb(130,187,106)',\n            'rgb(99,149,159)', 'rgb(93,150,211)', 'rgb(123,100,182)', 'rgb(180,100,142)'\n        ],\n        [\n            'rgb(190,0,5)', 'rgb(222,126,44)', 'rgb(236,183,39)', 'rgb(89,155,61)', 'rgb(55,110,123)',\n            'rgb(49,112,185)', 'rgb(83,55,150)', 'rgb(147,55,101)'\n        ],\n        [\n            'rgb(133,0,3)', 'rgb(163,74,10)', 'rgb(177,127,7)', 'rgb(45,101,23)', 'rgb(18,62,74)',\n            'rgb(14,62,129)', 'rgb(40,15,97)', 'rgb(95,16,55)'\n        ],\n        [\n            'rgb(81,0,1)', 'rgb(100,48,7)', 'rgb(107,78,3)', 'rgb(31,63,16)',\n            'rgb(13,39,46)', 'rgb(10,40,79)', 'rgb(24,12,59)', 'rgb(59,10,36)'\n        ]\n    ];\n});\n","Magezon_Builder/js/ui/form/element/builder.js":"define([\n    'jquery',\n    'underscore',\n    'Magento_Ui/js/form/element/textarea'\n], function ($, _, Textarea) {\n    'use strict';\n\n    return Textarea.extend({\n\n        defaults: {\n            elementTmpl: 'Magezon_Builder/ui/form/element/builder'\n        },\n\n        initialize: function () {\n            this._super();\n\n            return this;\n        }\n    })\n});","Magezon_Builder/js/jarallax/jarallax.min.js":"/*!\n * Name    : Just Another Parallax [Jarallax]\n * Version : 1.10.7\n * Author  : nK <https://nkdev.info>\n * GitHub  : https://github.com/nk-o/jarallax\n */!function(o){var n={};function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=o,i.c=n,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,\"a\",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p=\"\",i(i.s=11)}([,,function(e,t,o){\"use strict\";e.exports=function(e){\"complete\"===document.readyState||\"interactive\"===document.readyState?e.call():document.attachEvent?document.attachEvent(\"onreadystatechange\",function(){\"interactive\"===document.readyState&&e.call()}):document.addEventListener&&document.addEventListener(\"DOMContentLoaded\",e)}},,function(o,e,t){\"use strict\";(function(e){var t;t=\"undefined\"!=typeof window?window:void 0!==e?e:\"undefined\"!=typeof self?self:{},o.exports=t}).call(this,t(5))},function(e,t,o){\"use strict\";var n,i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};n=function(){return this}();try{n=n||Function(\"return this\")()||(0,eval)(\"this\")}catch(e){\"object\"===(\"undefined\"==typeof window?\"undefined\":i(window))&&(n=window)}e.exports=n},,,,,,function(e,t,o){e.exports=o(12)},function(e,t,o){\"use strict\";var n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},i=l(o(2)),a=o(4),r=l(o(13));function l(e){return e&&e.__esModule?e:{default:e}}var s=a.window.jarallax;if(a.window.jarallax=r.default,a.window.jarallax.noConflict=function(){return a.window.jarallax=s,this},void 0!==a.jQuery){var c=function(){var e=arguments||[];Array.prototype.unshift.call(e,this);var t=r.default.apply(a.window,e);return\"object\"!==(void 0===t?\"undefined\":n(t))?t:this};c.constructor=r.default.constructor;var u=a.jQuery.fn.jarallax;a.jQuery.fn.jarallax=c,a.jQuery.fn.jarallax.noConflict=function(){return a.jQuery.fn.jarallax=u,this}}(0,i.default)(function(){(0,r.default)(document.querySelectorAll(\"[data-jarallax]\"))})},function(e,j,S){\"use strict\";(function(e){Object.defineProperty(j,\"__esModule\",{value:!0});var d=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},t=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),p=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},o=a(S(2)),n=a(S(14)),i=S(4);function a(e){return e&&e.__esModule?e:{default:e}}var s=-1<navigator.userAgent.indexOf(\"MSIE \")||-1<navigator.userAgent.indexOf(\"Trident/\")||-1<navigator.userAgent.indexOf(\"Edge/\"),r=function(){for(var e=\"transform WebkitTransform MozTransform\".split(\" \"),t=document.createElement(\"div\"),o=0;o<e.length;o++)if(t&&void 0!==t.style[e[o]])return e[o];return!1}(),b=void 0,v=void 0,l=void 0,c=!1,u=!1;function m(e){b=i.window.innerWidth||document.documentElement.clientWidth,v=i.window.innerHeight||document.documentElement.clientHeight,\"object\"!==(void 0===e?\"undefined\":p(e))||\"load\"!==e.type&&\"dom-loaded\"!==e.type||(c=!0)}m(),i.window.addEventListener(\"resize\",m),i.window.addEventListener(\"orientationchange\",m),i.window.addEventListener(\"load\",m),(0,o.default)(function(){m({type:\"dom-loaded\"})});var f=[],y=!1;function g(){if(f.length){l=void 0!==i.window.pageYOffset?i.window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;var t=c||!y||y.width!==b||y.height!==v,o=u||t||!y||y.y!==l;u=c=!1,(t||o)&&(f.forEach(function(e){t&&e.onResize(),o&&e.onScroll()}),y={width:b,height:v,y:l}),(0,n.default)(g)}}var h=!!e.ResizeObserver&&new e.ResizeObserver(function(e){e&&e.length&&(0,n.default)(function(){e.forEach(function(e){e.target&&e.target.jarallax&&(c||e.target.jarallax.onResize(),u=!0)})})}),x=0,w=function(){function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,u);var o=this;o.instanceID=x++,o.$item=e,o.defaults={type:\"scroll\",speed:.5,imgSrc:null,imgElement:\".jarallax-img\",imgSize:\"cover\",imgPosition:\"50% 50%\",imgRepeat:\"no-repeat\",keepImg:!1,elementInViewport:null,zIndex:-100,disableParallax:!1,disableVideo:!1,automaticResize:!0,videoSrc:null,videoStartTime:0,videoEndTime:0,videoVolume:0,videoLoop:!0,videoPlayOnlyVisible:!0,onScroll:null,onInit:null,onDestroy:null,onCoverImage:null};var n=o.$item.getAttribute(\"data-jarallax\"),i=JSON.parse(n||\"{}\");n&&console.warn(\"Detected usage of deprecated data-jarallax JSON options, you should use pure data-attribute options. See info here - https://github.com/nk-o/jarallax/issues/53\");var a=o.$item.dataset||{},r={};if(Object.keys(a).forEach(function(e){var t=e.substr(0,1).toLowerCase()+e.substr(1);t&&void 0!==o.defaults[t]&&(r[t]=a[e])}),o.options=o.extend({},o.defaults,i,r,t),o.pureOptions=o.extend({},o.options),Object.keys(o.options).forEach(function(e){\"true\"===o.options[e]?o.options[e]=!0:\"false\"===o.options[e]&&(o.options[e]=!1)}),o.options.speed=Math.min(2,Math.max(-1,parseFloat(o.options.speed))),(o.options.noAndroid||o.options.noIos)&&(console.warn(\"Detected usage of deprecated noAndroid or noIos options, you should use disableParallax option. See info here - https://github.com/nk-o/jarallax/#disable-on-mobile-devices\"),o.options.disableParallax||(o.options.noIos&&o.options.noAndroid?o.options.disableParallax=/iPad|iPhone|iPod|Android/:o.options.noIos?o.options.disableParallax=/iPad|iPhone|iPod/:o.options.noAndroid&&(o.options.disableParallax=/Android/))),\"string\"==typeof o.options.disableParallax&&(o.options.disableParallax=new RegExp(o.options.disableParallax)),o.options.disableParallax instanceof RegExp){var l=o.options.disableParallax;o.options.disableParallax=function(){return l.test(navigator.userAgent)}}if(\"function\"!=typeof o.options.disableParallax&&(o.options.disableParallax=function(){return!1}),\"string\"==typeof o.options.disableVideo&&(o.options.disableVideo=new RegExp(o.options.disableVideo)),o.options.disableVideo instanceof RegExp){var s=o.options.disableVideo;o.options.disableVideo=function(){return s.test(navigator.userAgent)}}\"function\"!=typeof o.options.disableVideo&&(o.options.disableVideo=function(){return!1});var c=o.options.elementInViewport;c&&\"object\"===(void 0===c?\"undefined\":p(c))&&void 0!==c.length&&(c=d(c,1)[0]);c instanceof Element||(c=null),o.options.elementInViewport=c,o.image={src:o.options.imgSrc||null,$container:null,useImgTag:!1,position:/iPad|iPhone|iPod|Android/.test(navigator.userAgent)?\"absolute\":\"fixed\"},o.initImg()&&o.canInitParallax()&&o.init()}return t(u,[{key:\"css\",value:function(t,o){return\"string\"==typeof o?i.window.getComputedStyle(t).getPropertyValue(o):(o.transform&&r&&(o[r]=o.transform),Object.keys(o).forEach(function(e){t.style[e]=o[e]}),t)}},{key:\"extend\",value:function(o){var n=arguments;return o=o||{},Object.keys(arguments).forEach(function(t){n[t]&&Object.keys(n[t]).forEach(function(e){o[e]=n[t][e]})}),o}},{key:\"getWindowData\",value:function(){return{width:b,height:v,y:l}}},{key:\"initImg\",value:function(){var e=this,t=e.options.imgElement;return t&&\"string\"==typeof t&&(t=e.$item.querySelector(t)),t instanceof Element||(t=null),t&&(e.options.keepImg?e.image.$item=t.cloneNode(!0):(e.image.$item=t,e.image.$itemParent=t.parentNode),e.image.useImgTag=!0),!!e.image.$item||(null===e.image.src&&(e.image.src=e.css(e.$item,\"background-image\").replace(/^url\\(['\"]?/g,\"\").replace(/['\"]?\\)$/g,\"\")),!(!e.image.src||\"none\"===e.image.src))}},{key:\"canInitParallax\",value:function(){return r&&!this.options.disableParallax()}},{key:\"init\",value:function(){var e=this,t={position:\"absolute\",top:0,left:0,width:\"100%\",height:\"100%\",overflow:\"hidden\",pointerEvents:\"none\"},o={};if(!e.options.keepImg){var n=e.$item.getAttribute(\"style\");if(n&&e.$item.setAttribute(\"data-jarallax-original-styles\",n),e.image.useImgTag){var i=e.image.$item.getAttribute(\"style\");i&&e.image.$item.setAttribute(\"data-jarallax-original-styles\",i)}}if(\"static\"===e.css(e.$item,\"position\")&&e.css(e.$item,{position:\"relative\"}),\"auto\"===e.css(e.$item,\"z-index\")&&e.css(e.$item,{zIndex:0}),e.image.$container=document.createElement(\"div\"),e.css(e.image.$container,t),e.css(e.image.$container,{\"z-index\":e.options.zIndex}),s&&e.css(e.image.$container,{opacity:.9999}),e.image.$container.setAttribute(\"id\",\"jarallax-container-\"+e.instanceID),e.$item.appendChild(e.image.$container),e.image.useImgTag?o=e.extend({\"object-fit\":e.options.imgSize,\"object-position\":e.options.imgPosition,\"font-family\":\"object-fit: \"+e.options.imgSize+\"; object-position: \"+e.options.imgPosition+\";\",\"max-width\":\"none\"},t,o):(e.image.$item=document.createElement(\"div\"),e.image.src&&(o=e.extend({\"background-position\":e.options.imgPosition,\"background-size\":e.options.imgSize,\"background-repeat\":e.options.imgRepeat,\"background-image\":'url(\"'+e.image.src+'\")'},t,o))),\"opacity\"!==e.options.type&&\"scale\"!==e.options.type&&\"scale-opacity\"!==e.options.type&&1!==e.options.speed||(e.image.position=\"absolute\"),\"fixed\"===e.image.position)for(var a=0,r=e.$item;null!==r&&r!==document&&0===a;){var l=e.css(r,\"-webkit-transform\")||e.css(r,\"-moz-transform\")||e.css(r,\"transform\");l&&\"none\"!==l&&(a=1,e.image.position=\"absolute\"),r=r.parentNode}o.position=e.image.position,e.css(e.image.$item,o),e.image.$container.appendChild(e.image.$item),e.onResize(),e.onScroll(!0),e.options.automaticResize&&h&&h.observe(e.$item),e.options.onInit&&e.options.onInit.call(e),\"none\"!==e.css(e.$item,\"background-image\")&&e.css(e.$item,{\"background-image\":\"none\"}),e.addToParallaxList()}},{key:\"addToParallaxList\",value:function(){f.push(this),1===f.length&&g()}},{key:\"removeFromParallaxList\",value:function(){var o=this;f.forEach(function(e,t){e.instanceID===o.instanceID&&f.splice(t,1)})}},{key:\"destroy\",value:function(){var e=this;e.removeFromParallaxList();var t=e.$item.getAttribute(\"data-jarallax-original-styles\");if(e.$item.removeAttribute(\"data-jarallax-original-styles\"),t?e.$item.setAttribute(\"style\",t):e.$item.removeAttribute(\"style\"),e.image.useImgTag){var o=e.image.$item.getAttribute(\"data-jarallax-original-styles\");e.image.$item.removeAttribute(\"data-jarallax-original-styles\"),o?e.image.$item.setAttribute(\"style\",t):e.image.$item.removeAttribute(\"style\"),e.image.$itemParent&&e.image.$itemParent.appendChild(e.image.$item)}e.$clipStyles&&e.$clipStyles.parentNode.removeChild(e.$clipStyles),e.image.$container&&e.image.$container.parentNode.removeChild(e.image.$container),e.options.onDestroy&&e.options.onDestroy.call(e),delete e.$item.jarallax}},{key:\"clipContainer\",value:function(){if(\"fixed\"===this.image.position){var e=this,t=e.image.$container.getBoundingClientRect(),o=t.width,n=t.height;if(!e.$clipStyles)e.$clipStyles=document.createElement(\"style\"),e.$clipStyles.setAttribute(\"type\",\"text/css\"),e.$clipStyles.setAttribute(\"id\",\"jarallax-clip-\"+e.instanceID),(document.head||document.getElementsByTagName(\"head\")[0]).appendChild(e.$clipStyles);var i=\"#jarallax-container-\"+e.instanceID+\" {\\n           clip: rect(0 \"+o+\"px \"+n+\"px 0);\\n           clip: rect(0, \"+o+\"px, \"+n+\"px, 0);\\n        }\";e.$clipStyles.styleSheet?e.$clipStyles.styleSheet.cssText=i:e.$clipStyles.innerHTML=i}}},{key:\"coverImage\",value:function(){var e=this,t=e.image.$container.getBoundingClientRect(),o=t.height,n=e.options.speed,i=\"scroll\"===e.options.type||\"scroll-opacity\"===e.options.type,a=0,r=o,l=0;return i&&(n<0?(a=n*Math.max(o,v),v<o&&(a-=n*(o-v))):a=n*(o+v),1<n?r=Math.abs(a-v):n<0?r=a/n+Math.abs(a):r+=(v-o)*(1-n),a/=2),e.parallaxScrollDistance=a,l=i?(v-r)/2:(o-r)/2,e.css(e.image.$item,{height:r+\"px\",marginTop:l+\"px\",left:\"fixed\"===e.image.position?t.left+\"px\":\"0\",width:t.width+\"px\"}),e.options.onCoverImage&&e.options.onCoverImage.call(e),{image:{height:r,marginTop:l},container:t}}},{key:\"isVisible\",value:function(){return this.isElementInViewport||!1}},{key:\"onScroll\",value:function(e){var t=this,o=t.$item.getBoundingClientRect(),n=o.top,i=o.height,a={},r=o;if(t.options.elementInViewport&&(r=t.options.elementInViewport.getBoundingClientRect()),t.isElementInViewport=0<=r.bottom&&0<=r.right&&r.top<=v&&r.left<=b,e||t.isElementInViewport){var l=Math.max(0,n),s=Math.max(0,i+n),c=Math.max(0,-n),u=Math.max(0,n+i-v),d=Math.max(0,i-(n+i-v)),p=Math.max(0,-n+v-i),m=1-2*(v-n)/(v+i),f=1;if(i<v?f=1-(c||u)/i:s<=v?f=s/v:d<=v&&(f=d/v),\"opacity\"!==t.options.type&&\"scale-opacity\"!==t.options.type&&\"scroll-opacity\"!==t.options.type||(a.transform=\"translate3d(0,0,0)\",a.opacity=f),\"scale\"===t.options.type||\"scale-opacity\"===t.options.type){var y=1;t.options.speed<0?y-=t.options.speed*f:y+=t.options.speed*(1-f),a.transform=\"scale(\"+y+\") translate3d(0,0,0)\"}if(\"scroll\"===t.options.type||\"scroll-opacity\"===t.options.type){var g=t.parallaxScrollDistance*m;\"absolute\"===t.image.position&&(g-=n),a.transform=\"translate3d(0,\"+g+\"px,0)\"}t.css(t.image.$item,a),t.options.onScroll&&t.options.onScroll.call(t,{section:o,beforeTop:l,beforeTopEnd:s,afterTop:c,beforeBottom:u,beforeBottomEnd:d,afterBottom:p,visiblePercent:f,fromViewportCenter:m})}}},{key:\"onResize\",value:function(){this.coverImage(),this.clipContainer()}}]),u}(),$=function(e){(\"object\"===(\"undefined\"==typeof HTMLElement?\"undefined\":p(HTMLElement))?e instanceof HTMLElement:e&&\"object\"===(void 0===e?\"undefined\":p(e))&&null!==e&&1===e.nodeType&&\"string\"==typeof e.nodeName)&&(e=[e]);for(var t=arguments[1],o=Array.prototype.slice.call(arguments,2),n=e.length,i=0,a=void 0;i<n;i++)if(\"object\"===(void 0===t?\"undefined\":p(t))||void 0===t?e[i].jarallax||(e[i].jarallax=new w(e[i],t)):e[i].jarallax&&(a=e[i].jarallax[t].apply(e[i].jarallax,o)),void 0!==a)return a;return e};$.constructor=w,j.default=$}).call(this,S(5))},function(e,t,o){\"use strict\";var n=o(4),i=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||function(e){var t=+new Date,o=Math.max(0,16-(t-a)),n=setTimeout(e,o);return a=t,n},a=+new Date;var r=n.cancelAnimationFrame||n.webkitCancelAnimationFrame||n.mozCancelAnimationFrame||clearTimeout;Function.prototype.bind&&(i=i.bind(n),r=r.bind(n)),(e.exports=i).cancel=r}]);","Magezon_Builder/js/jarallax/jarallax-video.js":"/*!\n * Name    : Video Background Extension for Jarallax\n * Version : 1.0.1\n * Author  : nK <https://nkdev.info>\n * GitHub  : https://github.com/nk-o/jarallax\n */\n!function(o) {\n    var i = {};\n    function n(e) {\n        if (i[e])\n            return i[e].exports;\n        var t = i[e] = {\n            i: e,\n            l: !1,\n            exports: {}\n        };\n        return o[e].call(t.exports, t, t.exports, n),\n        t.l = !0,\n        t.exports\n    }\n    n.m = o,\n    n.c = i,\n    n.d = function(e, t, o) {\n        n.o(e, t) || Object.defineProperty(e, t, {\n            enumerable: !0,\n            get: o\n        })\n    }\n    ,\n    n.r = function(e) {\n        \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n            value: \"Module\"\n        }),\n        Object.defineProperty(e, \"__esModule\", {\n            value: !0\n        })\n    }\n    ,\n    n.t = function(t, e) {\n        if (1 & e && (t = n(t)),\n        8 & e)\n            return t;\n        if (4 & e && \"object\" == typeof t && t && t.__esModule)\n            return t;\n        var o = Object.create(null);\n        if (n.r(o),\n        Object.defineProperty(o, \"default\", {\n            enumerable: !0,\n            value: t\n        }),\n        2 & e && \"string\" != typeof t)\n            for (var i in t)\n                n.d(o, i, function(e) {\n                    return t[e]\n                }\n                .bind(null, i));\n        return o\n    }\n    ,\n    n.n = function(e) {\n        var t = e && e.__esModule ? function() {\n            return e.default\n        }\n        : function() {\n            return e\n        }\n        ;\n        return n.d(t, \"a\", t),\n        t\n    }\n    ,\n    n.o = function(e, t) {\n        return Object.prototype.hasOwnProperty.call(e, t)\n    }\n    ,\n    n.p = \"\",\n    n(n.s = 6)\n}([, , function(e, t, o) {\n    \"use strict\";\n    e.exports = function(e) {\n        \"complete\" === document.readyState || \"interactive\" === document.readyState ? e.call() : document.attachEvent ? document.attachEvent(\"onreadystatechange\", function() {\n            \"interactive\" === document.readyState && e.call()\n        }) : document.addEventListener && document.addEventListener(\"DOMContentLoaded\", e)\n    }\n}\n, , function(o, e, t) {\n    \"use strict\";\n    (function(e) {\n        var t;\n        t = \"undefined\" != typeof window ? window : void 0 !== e ? e : \"undefined\" != typeof self ? self : {},\n        o.exports = t\n    }\n    ).call(this, t(5))\n}\n, function(e, t, o) {\n    \"use strict\";\n    var i, n = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(e) {\n        return typeof e\n    }\n    : function(e) {\n        return e && \"function\" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? \"symbol\" : typeof e\n    }\n    ;\n    i = function() {\n        return this\n    }();\n    try {\n        i = i || Function(\"return this\")() || (0,\n        eval)(\"this\")\n    } catch (e) {\n        \"object\" === (\"undefined\" == typeof window ? \"undefined\" : n(window)) && (i = window)\n    }\n    e.exports = i\n}\n, function(e, t, o) {\n    e.exports = o(7)\n}\n, function(e, t, o) {\n    \"use strict\";\n    var i = l(o(8))\n      , n = l(o(4))\n      , a = l(o(2))\n      , r = l(o(10));\n    function l(e) {\n        return e && e.__esModule ? e : {\n            default: e\n        }\n    }\n    n.default.VideoWorker = n.default.VideoWorker || i.default,\n    (0,\n    r.default)(),\n    (0,\n    a.default)(function() {\n        \"undefined\" != typeof jarallax && jarallax(document.querySelectorAll(\"[data-jarallax-video]\"))\n    })\n}\n, function(e, t, o) {\n    \"use strict\";\n    e.exports = o(9)\n}\n, function(e, t, o) {\n    \"use strict\";\n    Object.defineProperty(t, \"__esModule\", {\n        value: !0\n    });\n    var n = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(e) {\n        return typeof e\n    }\n    : function(e) {\n        return e && \"function\" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? \"symbol\" : typeof e\n    }\n      , a = function() {\n        function i(e, t) {\n            for (var o = 0; o < t.length; o++) {\n                var i = t[o];\n                i.enumerable = i.enumerable || !1,\n                i.configurable = !0,\n                \"value\"in i && (i.writable = !0),\n                Object.defineProperty(e, i.key, i)\n            }\n        }\n        return function(e, t, o) {\n            return t && i(e.prototype, t),\n            o && i(e, o),\n            e\n        }\n    }();\n    function i() {\n        this._done = [],\n        this._fail = []\n    }\n    i.prototype = {\n        execute: function(e, t) {\n            var o = e.length;\n            for (t = Array.prototype.slice.call(t); o--; )\n                e[o].apply(null, t)\n        },\n        resolve: function() {\n            this.execute(this._done, arguments)\n        },\n        reject: function() {\n            this.execute(this._fail, arguments)\n        },\n        done: function(e) {\n            this._done.push(e)\n        },\n        fail: function(e) {\n            this._fail.push(e)\n        }\n    };\n    var r = 0\n      , l = 0\n      , u = 0\n      , p = 0\n      , d = 0\n      , s = new i\n      , y = new i\n      , c = function() {\n        function i(e, t) {\n            !function(e, t) {\n                if (!(e instanceof t))\n                    throw new TypeError(\"Cannot call a class as a function\")\n            }(this, i);\n            var o = this;\n            o.url = e,\n            o.options_default = {\n                autoplay: !1,\n                loop: !1,\n                mute: !1,\n                volume: 100,\n                showContols: !0,\n                startTime: 0,\n                endTime: 0\n            },\n            o.options = o.extend({}, o.options_default, t),\n            o.videoID = o.parseURL(e),\n            o.videoID && (o.ID = r++,\n            o.loadAPI(),\n            o.init())\n        }\n        return a(i, [{\n            key: \"extend\",\n            value: function(o) {\n                var i = arguments;\n                return o = o || {},\n                Object.keys(arguments).forEach(function(t) {\n                    i[t] && Object.keys(i[t]).forEach(function(e) {\n                        o[e] = i[t][e]\n                    })\n                }),\n                o\n            }\n        }, {\n            key: \"parseURL\",\n            value: function(e) {\n                var t, o, i, n, a, r = !(!(t = e.match(/.*(?:youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=)([^#\\&\\?]*).*/)) || 11 !== t[1].length) && t[1], l = !(!(o = e.match(/https?:\\/\\/(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/)) || !o[3]) && o[3], u = (i = e.split(/,(?=mp4\\:|webm\\:|ogv\\:|ogg\\:)/),\n                n = {},\n                a = 0,\n                i.forEach(function(e) {\n                    var t = e.match(/^(mp4|webm|ogv|ogg)\\:(.*)/);\n                    t && t[1] && t[2] && (n[\"ogv\" === t[1] ? \"ogg\" : t[1]] = t[2],\n                    a = 1)\n                }),\n                !!a && n);\n                return r ? (this.type = \"youtube\",\n                r) : l ? (this.type = \"vimeo\",\n                l) : !!u && (this.type = \"local\",\n                u)\n            }\n        }, {\n            key: \"isValid\",\n            value: function() {\n                return !!this.videoID\n            }\n        }, {\n            key: \"on\",\n            value: function(e, t) {\n                this.userEventsList = this.userEventsList || [],\n                (this.userEventsList[e] || (this.userEventsList[e] = [])).push(t)\n            }\n        }, {\n            key: \"off\",\n            value: function(o, i) {\n                var n = this;\n                this.userEventsList && this.userEventsList[o] && (i ? this.userEventsList[o].forEach(function(e, t) {\n                    e === i && (n.userEventsList[o][t] = !1)\n                }) : delete this.userEventsList[o])\n            }\n        }, {\n            key: \"fire\",\n            value: function(e) {\n                var t = this\n                  , o = [].slice.call(arguments, 1);\n                this.userEventsList && void 0 !== this.userEventsList[e] && this.userEventsList[e].forEach(function(e) {\n                    e && e.apply(t, o)\n                })\n            }\n        }, {\n            key: \"play\",\n            value: function(e) {\n                var t = this;\n                t.player && (\"youtube\" === t.type && t.player.playVideo && (void 0 !== e && t.player.seekTo(e || 0),\n                YT.PlayerState.PLAYING !== t.player.getPlayerState() && t.player.playVideo()),\n                \"vimeo\" === t.type && (void 0 !== e && t.player.setCurrentTime(e),\n                t.player.getPaused().then(function(e) {\n                    e && t.player.play()\n                })),\n                \"local\" === t.type && (void 0 !== e && (t.player.currentTime = e),\n                t.player.paused && t.player.play()))\n            }\n        }, {\n            key: \"pause\",\n            value: function() {\n                var t = this;\n                t.player && (\"youtube\" === t.type && t.player.pauseVideo && YT.PlayerState.PLAYING === t.player.getPlayerState() && t.player.pauseVideo(),\n                \"vimeo\" === t.type && t.player.getPaused().then(function(e) {\n                    e || t.player.pause()\n                }),\n                \"local\" === t.type && (t.player.paused || t.player.pause()))\n            }\n        }, {\n            key: \"mute\",\n            value: function() {\n                var e = this;\n                e.player && (\"youtube\" === e.type && e.player.mute && e.player.mute(),\n                \"vimeo\" === e.type && e.player.setVolume && e.player.setVolume(0),\n                \"local\" === e.type && (e.$video.muted = !0))\n            }\n        }, {\n            key: \"unmute\",\n            value: function() {\n                var e = this;\n                e.player && (\"youtube\" === e.type && e.player.mute && e.player.unMute(),\n                \"vimeo\" === e.type && e.player.setVolume && e.player.setVolume(e.options.volume),\n                \"local\" === e.type && (e.$video.muted = !1))\n            }\n        }, {\n            key: \"setVolume\",\n            value: function() {\n                var e = 0 < arguments.length && void 0 !== arguments[0] && arguments[0]\n                  , t = this;\n                t.player && e && (\"youtube\" === t.type && t.player.setVolume && t.player.setVolume(e),\n                \"vimeo\" === t.type && t.player.setVolume && t.player.setVolume(e),\n                \"local\" === t.type && (t.$video.volume = e / 100))\n            }\n        }, {\n            key: \"getVolume\",\n            value: function(t) {\n                var e = this;\n                e.player ? (\"youtube\" === e.type && e.player.getVolume && t(e.player.getVolume()),\n                \"vimeo\" === e.type && e.player.getVolume && e.player.getVolume().then(function(e) {\n                    t(e)\n                }),\n                \"local\" === e.type && t(100 * e.$video.volume)) : t(!1)\n            }\n        }, {\n            key: \"getMuted\",\n            value: function(t) {\n                var e = this;\n                e.player ? (\"youtube\" === e.type && e.player.isMuted && t(e.player.isMuted()),\n                \"vimeo\" === e.type && e.player.getVolume && e.player.getVolume().then(function(e) {\n                    t(!!e)\n                }),\n                \"local\" === e.type && t(e.$video.muted)) : t(null)\n            }\n        }, {\n            key: \"getImageURL\",\n            value: function(t) {\n                var o = this;\n                if (o.videoImage)\n                    t(o.videoImage);\n                else {\n                    if (\"youtube\" === o.type) {\n                        var e = [\"maxresdefault\", \"sddefault\", \"hqdefault\", \"0\"]\n                          , i = 0\n                          , n = new Image;\n                        n.onload = function() {\n                            120 !== (this.naturalWidth || this.width) || i === e.length - 1 ? (o.videoImage = \"https://img.youtube.com/vi/\" + o.videoID + \"/\" + e[i] + \".jpg\",\n                            t(o.videoImage)) : (i++,\n                            this.src = \"https://img.youtube.com/vi/\" + o.videoID + \"/\" + e[i] + \".jpg\")\n                        }\n                        ,\n                        n.src = \"https://img.youtube.com/vi/\" + o.videoID + \"/\" + e[i] + \".jpg\"\n                    }\n                    if (\"vimeo\" === o.type) {\n                        var a = new XMLHttpRequest;\n                        a.open(\"GET\", \"https://vimeo.com/api/v2/video/\" + o.videoID + \".json\", !0),\n                        a.onreadystatechange = function() {\n                            if (4 === this.readyState && 200 <= this.status && this.status < 400) {\n                                var e = JSON.parse(this.responseText);\n                                o.videoImage = e[0].thumbnail_large,\n                                t(o.videoImage)\n                            }\n                        }\n                        ,\n                        a.send(),\n                        a = null\n                    }\n                }\n            }\n        }, {\n            key: \"getIframe\",\n            value: function(e) {\n                this.getVideo(e)\n            }\n        }, {\n            key: \"getVideo\",\n            value: function(u) {\n                var p = this;\n                p.$video ? u(p.$video) : p.onAPIready(function() {\n                    var e = void 0;\n                    if (p.$video || ((e = document.createElement(\"div\")).style.display = \"none\"),\n                    \"youtube\" === p.type) {\n                        p.playerOptions = {},\n                        p.playerOptions.videoId = p.videoID,\n                        p.playerOptions.playerVars = {\n                            autohide: 1,\n                            rel: 0,\n                            autoplay: 0,\n                            playsinline: 1\n                        },\n                        p.options.showContols || (p.playerOptions.playerVars.iv_load_policy = 3,\n                        p.playerOptions.playerVars.modestbranding = 1,\n                        p.playerOptions.playerVars.controls = 0,\n                        p.playerOptions.playerVars.showinfo = 0,\n                        p.playerOptions.playerVars.disablekb = 1);\n                        var t = void 0\n                          , o = void 0;\n                        p.playerOptions.events = {\n                            onReady: function(t) {\n                                if (p.options.mute ? t.target.mute() : p.options.volume && t.target.setVolume(p.options.volume),\n                                p.options.autoplay && p.play(p.options.startTime),\n                                p.fire(\"ready\", t),\n                                p.options.loop && !p.options.endTime) {\n                                    p.options.endTime = p.player.getDuration() - .1\n                                }\n                                setInterval(function() {\n                                    p.getVolume(function(e) {\n                                        p.options.volume !== e && (p.options.volume = e,\n                                        p.fire(\"volumechange\", t))\n                                    })\n                                }, 150)\n                            },\n                            onStateChange: function(e) {\n                                p.options.loop && e.data === YT.PlayerState.ENDED && p.play(p.options.startTime),\n                                t || e.data !== YT.PlayerState.PLAYING || (t = 1,\n                                p.fire(\"started\", e)),\n                                e.data === YT.PlayerState.PLAYING && p.fire(\"play\", e),\n                                e.data === YT.PlayerState.PAUSED && p.fire(\"pause\", e),\n                                e.data === YT.PlayerState.ENDED && p.fire(\"ended\", e),\n                                e.data === YT.PlayerState.PLAYING ? o = setInterval(function() {\n                                    p.fire(\"timeupdate\", e),\n                                    p.options.endTime && p.player.getCurrentTime() >= p.options.endTime && (p.options.loop ? p.play(p.options.startTime) : p.pause())\n                                }, 150) : clearInterval(o)\n                            }\n                        };\n                        var i = !p.$video;\n                        if (i) {\n                            var n = document.createElement(\"div\");\n                            n.setAttribute(\"id\", p.playerID),\n                            e.appendChild(n),\n                            document.body.appendChild(e)\n                        }\n                        p.player = p.player || new window.YT.Player(p.playerID,p.playerOptions),\n                        i && (p.$video = document.getElementById(p.playerID),\n                        p.videoWidth = parseInt(p.$video.getAttribute(\"width\"), 10) || 1280,\n                        p.videoHeight = parseInt(p.$video.getAttribute(\"height\"), 10) || 720)\n                    }\n                    if (\"vimeo\" === p.type) {\n                        if (p.playerOptions = {\n                            id: p.videoID,\n                            autopause: 0,\n                            transparent: 0,\n                            autoplay: p.options.autoplay ? 1 : 0,\n                            loop: p.options.loop ? 1 : 0,\n                            muted: p.options.mute ? 1 : 0\n                        },\n                        p.options.volume && (p.playerOptions.volume = p.options.volume),\n                        p.options.showContols || (p.playerOptions.badge = 0,\n                        p.playerOptions.byline = 0,\n                        p.playerOptions.portrait = 0,\n                        p.playerOptions.title = 0),\n                        !p.$video) {\n                            var a = \"\";\n                            Object.keys(p.playerOptions).forEach(function(e) {\n                                \"\" !== a && (a += \"&\"),\n                                a += e + \"=\" + encodeURIComponent(p.playerOptions[e])\n                            }),\n                            p.$video = document.createElement(\"iframe\"),\n                            p.$video.setAttribute(\"id\", p.playerID),\n                            p.$video.setAttribute(\"src\", \"https://player.vimeo.com/video/\" + p.videoID + \"?\" + a),\n                            p.$video.setAttribute(\"frameborder\", \"0\"),\n                            p.$video.setAttribute(\"mozallowfullscreen\", \"\"),\n                            p.$video.setAttribute(\"allowfullscreen\", \"\"),\n                            e.appendChild(p.$video),\n                            document.body.appendChild(e)\n                        }\n                        p.player = p.player || new Vimeo(p.$video,p.playerOptions),\n                        p.options.startTime && p.options.autoplay && p.player.setCurrentTime(p.options.startTime),\n                        p.player.getVideoWidth().then(function(e) {\n                            p.videoWidth = e || 1280\n                        }),\n                        p.player.getVideoHeight().then(function(e) {\n                            p.videoHeight = e || 720\n                        });\n                        var r = void 0;\n                        p.player.on(\"timeupdate\", function(e) {\n                            r || (p.fire(\"started\", e),\n                            r = 1),\n                            p.fire(\"timeupdate\", e),\n                            p.options.endTime && p.options.endTime && e.seconds >= p.options.endTime && (p.options.loop ? p.play(p.options.startTime) : p.pause())\n                        }),\n                        p.player.on(\"play\", function(e) {\n                            p.fire(\"play\", e),\n                            p.options.startTime && 0 === e.seconds && p.play(p.options.startTime)\n                        }),\n                        p.player.on(\"pause\", function(e) {\n                            p.fire(\"pause\", e)\n                        }),\n                        p.player.on(\"ended\", function(e) {\n                            p.fire(\"ended\", e)\n                        }),\n                        p.player.on(\"loaded\", function(e) {\n                            p.fire(\"ready\", e)\n                        }),\n                        p.player.on(\"volumechange\", function(e) {\n                            p.fire(\"volumechange\", e)\n                        })\n                    }\n                    if (\"local\" === p.type) {\n                        p.$video || (p.$video = document.createElement(\"video\"),\n                        p.options.showContols && (p.$video.controls = !0),\n                        p.options.mute ? p.$video.muted = !0 : p.$video.volume && (p.$video.volume = p.options.volume / 100),\n                        p.options.loop && (p.$video.loop = !0),\n                        p.$video.setAttribute(\"playsinline\", \"\"),\n                        p.$video.setAttribute(\"webkit-playsinline\", \"\"),\n                        p.$video.setAttribute(\"id\", p.playerID),\n                        e.appendChild(p.$video),\n                        document.body.appendChild(e),\n                        Object.keys(p.videoID).forEach(function(e) {\n                            var t, o, i, n;\n                            t = p.$video,\n                            o = p.videoID[e],\n                            i = \"video/\" + e,\n                            (n = document.createElement(\"source\")).src = o,\n                            n.type = i,\n                            t.appendChild(n)\n                        })),\n                        p.player = p.player || p.$video;\n                        var l = void 0;\n                        p.player.addEventListener(\"playing\", function(e) {\n                            l || p.fire(\"started\", e),\n                            l = 1\n                        }),\n                        p.player.addEventListener(\"timeupdate\", function(e) {\n                            p.fire(\"timeupdate\", e),\n                            p.options.endTime && p.options.endTime && this.currentTime >= p.options.endTime && (p.options.loop ? p.play(p.options.startTime) : p.pause())\n                        }),\n                        p.player.addEventListener(\"play\", function(e) {\n                            p.fire(\"play\", e)\n                        }),\n                        p.player.addEventListener(\"pause\", function(e) {\n                            p.fire(\"pause\", e)\n                        }),\n                        p.player.addEventListener(\"ended\", function(e) {\n                            p.fire(\"ended\", e)\n                        }),\n                        p.player.addEventListener(\"loadedmetadata\", function() {\n                            p.videoWidth = this.videoWidth || 1280,\n                            p.videoHeight = this.videoHeight || 720,\n                            p.fire(\"ready\"),\n                            p.options.autoplay && p.play(p.options.startTime)\n                        }),\n                        p.player.addEventListener(\"volumechange\", function(e) {\n                            p.getVolume(function(e) {\n                                p.options.volume = e\n                            }),\n                            p.fire(\"volumechange\", e)\n                        })\n                    }\n                    u(p.$video)\n                })\n            }\n        }, {\n            key: \"init\",\n            value: function() {\n                this.playerID = \"VideoWorker-\" + this.ID\n            }\n        }, {\n            key: \"loadAPI\",\n            value: function() {\n            \tif (this.type == \"vimeo\") {\n\t            \trequire(['https://player.vimeo.com/api/player.js'], function(Vimeo) {\n\t\t                if (!l || !u) {\n\t\t                \twindow.Vimeo = Vimeo;\n\t\t                }\n\t            \t});\n            \t} else {\n            \t\tif (!l || !u) {\n\t                    var e = \"\";\n\t                    if (\"youtube\" !== this.type || l || (l = 1,\n\t                    e = \"https://www.youtube.com/iframe_api\"),\n\t                    \"vimeo\" !== this.type || u || (u = 1,\n\t                    e = \"https://player.vimeo.com/api/player.js\"),\n\t                    e) {\n\t                        var t = document.createElement(\"script\")\n\t                          , o = document.getElementsByTagName(\"head\")[0];\n\t                        t.src = e,\n\t                        o.appendChild(t),\n\t                        t = o = null\n\t                    }\n\t                }\n            \t}\n            }\n        }, {\n            key: \"onAPIready\",\n            value: function(e) {\n                if (\"youtube\" === this.type && (\"undefined\" != typeof YT && 0 !== YT.loaded || p ? \"object\" === (\"undefined\" == typeof YT ? \"undefined\" : n(YT)) && 1 === YT.loaded ? e() : s.done(function() {\n                    e()\n                }) : (p = 1,\n                window.onYouTubeIframeAPIReady = function() {\n                    window.onYouTubeIframeAPIReady = null,\n                    s.resolve(\"done\"),\n                    e()\n                }\n                )),\n                \"vimeo\" === this.type)\n                    if (\"undefined\" != typeof Vimeo || d)\n                        \"undefined\" != typeof Vimeo ? e() : y.done(function() {\n                            e()\n                        });\n                    else {\n                        d = 1;\n                        var t = setInterval(function() {\n                            \"undefined\" != typeof Vimeo && (clearInterval(t),\n                            y.resolve(\"done\"),\n                            e())\n                        }, 20)\n                    }\n                \"local\" === this.type && e()\n            }\n        }]),\n        i\n    }();\n    t.default = c\n}\n, function(e, t, o) {\n    \"use strict\";\n    Object.defineProperty(t, \"__esModule\", {\n        value: !0\n    }),\n    t.default = function() {\n        var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : u.default.jarallax;\n        if (void 0 === e)\n            return;\n        var t = e.constructor\n          , i = t.prototype.init;\n        t.prototype.init = function() {\n            var o = this;\n            i.apply(o),\n            o.video && !o.options.disableVideo() && o.video.getVideo(function(e) {\n                var t = e.parentNode;\n                o.css(e, {\n                    position: o.image.position,\n                    top: \"0px\",\n                    left: \"0px\",\n                    right: \"0px\",\n                    bottom: \"0px\",\n                    width: \"100%\",\n                    height: \"100%\",\n                    maxWidth: \"none\",\n                    maxHeight: \"none\",\n                    margin: 0,\n                    zIndex: -1\n                }),\n                o.$video = e,\n                o.image.$container.appendChild(e),\n                t.parentNode.removeChild(t)\n            })\n        }\n        ;\n        var l = t.prototype.coverImage;\n        t.prototype.coverImage = function() {\n            var e = this\n              , t = l.apply(e)\n              , o = !!e.image.$item && e.image.$item.nodeName;\n            if (t && e.video && o && (\"IFRAME\" === o || \"VIDEO\" === o)) {\n                var i = t.image.height\n                  , n = i * e.image.width / e.image.height\n                  , a = (t.container.width - n) / 2\n                  , r = t.image.marginTop;\n                t.container.width > n && (n = t.container.width,\n                i = n * e.image.height / e.image.width,\n                a = 0,\n                r += (t.image.height - i) / 2),\n                \"IFRAME\" === o && (i += 400,\n                r -= 200),\n                e.css(e.$video, {\n                    width: n + \"px\",\n                    marginLeft: a + \"px\",\n                    height: i + \"px\",\n                    marginTop: r + \"px\"\n                })\n            }\n            return t\n        }\n        ;\n        var o = t.prototype.initImg;\n        t.prototype.initImg = function() {\n            var e = this\n              , t = o.apply(e);\n            return e.options.videoSrc || (e.options.videoSrc = e.$item.getAttribute(\"data-jarallax-video\") || null),\n            e.options.videoSrc ? (e.defaultInitImgResult = t,\n            !0) : t\n        }\n        ;\n        var n = t.prototype.canInitParallax;\n        t.prototype.canInitParallax = function() {\n            var o = this\n              , e = n.apply(o);\n            if (!o.options.videoSrc)\n                return e;\n            var t = new r.default(o.options.videoSrc,{\n                autoplay: !0,\n                loop: o.options.videoLoop,\n                showContols: !1,\n                startTime: o.options.videoStartTime || 0,\n                endTime: o.options.videoEndTime || 0,\n                mute: o.options.videoVolume ? 0 : 1,\n                volume: o.options.videoVolume || 0\n            });\n            if (t.isValid())\n                if (e) {\n                    if (t.on(\"ready\", function() {\n                        if (o.options.videoPlayOnlyVisible) {\n                            var e = o.onScroll;\n                            o.onScroll = function() {\n                                e.apply(o),\n                                (o.options.videoLoop || !o.options.videoLoop && !o.videoEnded) && (o.isVisible() ? t.play() : t.pause())\n                            }\n                        } else\n                            t.play()\n                    }),\n                    t.on(\"started\", function() {\n                        o.image.$default_item = o.image.$item,\n                        o.image.$item = o.$video,\n                        o.image.width = o.video.videoWidth || 1280,\n                        o.image.height = o.video.videoHeight || 720,\n                        o.coverImage(),\n                        o.clipContainer(),\n                        o.onScroll(),\n                        o.image.$default_item && (o.image.$default_item.style.display = \"none\")\n                    }),\n                    t.on(\"ended\", function() {\n                        o.videoEnded = !0,\n                        o.options.videoLoop || o.image.$default_item && (o.image.$item = o.image.$default_item,\n                        o.image.$item.style.display = \"block\",\n                        o.coverImage(),\n                        o.clipContainer(),\n                        o.onScroll())\n                    }),\n                    o.video = t,\n                    !o.defaultInitImgResult)\n                        return \"local\" !== t.type ? (t.getImageURL(function(e) {\n                            o.image.src = e,\n                            o.init()\n                        }),\n                        !1) : (o.image.src = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\",\n                        !0)\n                } else\n                    o.defaultInitImgResult || t.getImageURL(function(e) {\n                        var t = o.$item.getAttribute(\"style\");\n                        t && o.$item.setAttribute(\"data-jarallax-original-styles\", t),\n                        o.css(o.$item, {\n                            \"background-image\": 'url(\"' + e + '\")',\n                            \"background-position\": \"center\",\n                            \"background-size\": \"cover\"\n                        })\n                    });\n            return e\n        }\n        ;\n        var a = t.prototype.destroy;\n        t.prototype.destroy = function() {\n            var e = this;\n            e.image.$default_item && (e.image.$item = e.image.$default_item,\n            delete e.image.$default_item),\n            a.apply(e)\n        }\n    }\n    ;\n    var r = i(o(8))\n      , u = i(o(4));\n    function i(e) {\n        return e && e.__esModule ? e : {\n            default: e\n        }\n    }\n}\n]);","Magezon_Builder/js/services/modal.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar modal = function($rootScope, $uibModal, magezonBuilderUrl) {\n\n\t\tthis.action = 'append';\n\t\tvar self = this;\n\t\tself.modals = {};\n\n\t\t$rootScope.$on('closeAllModals', function(e) {\n\t\t\tself.closeModal();\n\t\t});\n\n\t\tthis.registerModals = function(modals) {\n\t\t\tvar newModals = {};\n\t\t\tangular.forEach(modals, function(modal, key) {\n\t\t\t\tmodal['key'] = key;\n\t\t\t\tif (!modal.hasOwnProperty('key')) modal['size'] = {};\n\t\t\t\tif (!modal.hasOwnProperty('position')) modal['position'] = {};\n\t\t\t\trequire([modal['element']], function (config) {\n\t\t\t\t\tself.modals[key] = angular.merge(modal, config);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tthis.getModal = function(name) {\n\t\t\treturn self.modals[name];\n\t\t}\n\n\t\tthis.getElement = function() {\n\t\t\treturn this.element;\n\t\t}\n\n\t\tthis.setElement = function(element) {\n\t\t\tthis.element = element;\n\t\t}\n\n\t\tthis.getAction = function() {\n\t\t\treturn this.action;\n\t\t}\n\n\t\tthis.setAction = function(action) {\n\t\t\tthis.action = action;\n\t\t}\n\n\t\tthis.getData = function() {\n\t\t\treturn this.data;\n\t\t}\n\n\t\tthis.setData = function(data) {\n\t\t\tthis.data = data;\n\t\t}\n\n\t\tthis.getOpenModal = function() {\n\t\t\treturn this.openModal;\n\t\t}\n\n\t\tthis.setOpenModal = function(openModal) {\n\t\t\tthis.openModal = openModal;\n\t\t}\n\n\t\tthis.open = function(name, config, closeCallback, cancelCallback) {\n\t\t\tif (!config) config = {};\n\t\t\tif (!closeCallback) closeCallback = function() {};\n\t\t\tif (!cancelCallback) cancelCallback = function() {};\n\t\t\tif (!config.backdrop) {\n\t\t\t\tself.closeModal();\n\t\t\t}\n\t\t\tvar modal = self.getModal(name);\n\t\t\tif (modal) {\n\t\t\t\tif (modal.controller) {\n\t\t\t\t\tconfig.controller = modal.controller;\n\t\t\t\t} else {\n\t\t\t\t\tconfig.controller = 'modalBaseController';\n\t\t\t\t}\n\t\t\t\tif (!config.templateUrl && modal.templateUrl) config.templateUrl = modal.templateUrl;\n\t\t\t\tif (!config.controllerAs) config.controllerAs = 'mgz';\n\t\t\t\tconfig.windowTemplateUrl = magezonBuilderUrl.getViewFileUrl(config.windowTemplateUrl ? config.windowTemplateUrl : 'Magezon_Builder/js/templates/modal/window.html');\n\t\t\t\tif (config.openedClass) {\n\t\t\t\t\tconfig.openedClass += ' mgz-modal-open';\n\t\t\t\t} else {\n\t\t\t\t\tconfig.openedClass = 'mgz-modal-open';\n\t\t\t\t}\n\t\t\t\tif (config.windowClass) {\n\t\t\t\t\tconfig.windowClass += ' mgz-modal';\n\t\t\t\t} else {\n\t\t\t\t\tconfig.windowClass = 'mgz-modal';\n\t\t\t\t}\n\t\t\t\tconfig.windowClass += ' ' + self.getModalId(name);\n\t\t\t\tif (config.templateUrl) config.templateUrl = magezonBuilderUrl.getViewFileUrl(config.templateUrl);\n\t\t\t\tif (!config.hasOwnProperty('backdrop')) config['backdrop'] = false;\n\t\t\t\tif (!config.hasOwnProperty('keyboard')) config['keyboard'] = false;\n\t\t\t\tif (modal.resizable) config.windowClass += ' mgz-modal-resizable';\n\t\t\t\tvar resolve = {\n\t\t\t\t\tmodal: modal,\n\t\t\t\t\tform: {}\n\t\t\t\t};\n\t\t\t\tif (config.resolve) {\n\t\t\t\t\tconfig.resolve = angular.extend(resolve, config.resolve);\n\t\t\t\t} else {\n\t\t\t\t\tconfig.resolve = resolve;\n\t\t\t\t}\n\t\t\t\tvar uibModal = $uibModal.open(config);\n\t\t\t\tuibModal.result.then(closeCallback, cancelCallback);\n\t\t\t\tif (!config.backdrop) {\n\t\t\t\t\tself.currentModal = uibModal;\n\t\t\t\t\tself.currentModal.name = name;\n\t\t\t\t}\n\t\t\t\treturn uibModal;\n\t\t\t} else {\n\t\t\t\talert('There is no modal with name ' + name);\n\t\t\t}\n\t\t}\n\n\t\tthis.getModalId = function(name) {\n\t\t\treturn 'mgz-modal-' + name;\n\t\t}\n\n\t\tthis.closeModal = function(name) {\n\t\t\tif (!name && self.currentModal) {\n\t\t\t\tself.currentModal.dismiss('cancel');\n\t\t\t}\n\t\t}\n\t}\n\n\treturn modal;\n});","Magezon_Builder/js/services/url.js":"define([\n\t'jquery',\n\t'angular',\n], function ($, angular) {\n\n\tvar magezonBuilderUrl = function($rootScope, elementManager) {\n\n\t    this.getTemplateUrl = function(elem, defaultTemplate) {\n\t    \tvar templateUrl;\n\t    \tvar matches = elem.context.localName.match(\"mgz-element-navigator-(.*)-mgz\");\n\t    \tif (matches) {\n\t    \t\tvar name = matches[1];\n\t\t\t\ttemplateUrl = elementManager.getElement(name).navigatorTemplateUrl;\n\t    \t} else {\n\t\t\t\tvar matches2 = elem.context.localName.match(\"mgz-element-(.*)-mgz\");\n\t\t\t\tif (matches2) {\n\t\t\t\t\tvar name = matches2[1];\n\t\t\t\t\ttemplateUrl = elementManager.getElement(name).templateUrl;\n\t\t\t\t} else {\n\t\t\t\t\ttemplateUrl = elem.attr('templateUrl');\n\t\t\t\t\tif (!templateUrl) templateUrl = elem.attr('template-url');\n\t\t\t\t\tif (!templateUrl) templateUrl = elem.parent().attr('template-url');\n\t\t\t\t\tif (!templateUrl) templateUrl = elem.parent().attr('templateUrl');\n\t\t\t\t}\n\t    \t}\n\t\t\tif (!templateUrl && defaultTemplate) templateUrl = defaultTemplate;\n\t    \treturn this.getViewFileUrl(templateUrl);\n\t    }\n\n\t\tthis.getViewFileUrl = function(file) {\n\t\t\tif (file.indexOf('http') === -1) {\n\t\t\t\treturn $rootScope.builderConfig.viewFileUrl + file;\n\t\t\t} else {\n\t\t\t\treturn file;\n\t\t\t}\n\t\t}\n\n\t\tthis.getImageUrl = function(file) {\n\t\t\tif (file && (file.indexOf('http:://') === -1 || file.indexOf('https://') === -1)) {\n\t\t\t\treturn $rootScope.builderConfig.mediaUrl + file;\n\t\t\t} else {\n\t\t\t\treturn file;\n\t\t\t}\n\t\t}\n\n\t\tthis.getUrl = function(url, params) {\n\t\t\tif (url.indexOf('http') === -1) {\n\t\t\t\turl = $rootScope.builderConfig.baseUrl + url;\n\t\t\t}\n\t\t\tif (params) {\n\t\t\t\turl += '?' + $.param(params);\n\t\t\t}\n\t\t\treturn url;\n\t\t}\n\n\t\tthis.getFrontendUrl = function(url, params) {\n\t\t\tif (url.indexOf('http') === -1) {\n\t\t\t\turl = $rootScope.builderConfig.frontend_url + url;\n\t\t\t}\n\t\t\tif (params) {\n\t\t\t\turl += '?' + $.param(params);\n\t\t\t}\n\t\t\treturn url;\n\t\t}\n\t}\n\n\treturn magezonBuilderUrl;\n});","Magezon_Builder/js/services/editor.js":"define([\n\t'jquery',\n\t'angular',\n    'mage/adminhtml/wysiwyg/tiny_mce/html5-schema',\n    'mage/adminhtml/events'\n], function ($, angular, html5Schema) {\n\n\tif (typeof tinyMceEditors == 'undefined') {\n        window.tinyMceEditors = $H({});\n    }\n\n\tvar editor = function($rootScope, $timeout, magezonBuilderFilter) {\n\t\tvar self     = this;\n\t\tself.wysiwyg = angular.copy($rootScope.builderConfig.wysiwyg);\n\t\tself.schema  = html5Schema;\n\n\t\tself.initTinymce = function(id, config, onChange, onInit) {\n\t\t\t$timeout(function() {\n\t\t\t\tif (self.wysiwyg.tinymce4) {\n\t\t\t\t\tself.setupTinymce4(id, config, onChange, onInit);\n\t\t\t\t} else {\n\t\t\t\t\tself.setupTinymce3(id, config, onChange, onInit);\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t}\n\n\t\tself.setupTinymce4 = function (id, config, onChange, onInit) {\n\t\t    var settings;\n\t\t    var deferreds = [];\n\n\t\t    settings = {\n\t\t    \tselector: '#' + id,\n\t\t    \tmode: 'inline',\n\t\t        theme: 'modern',\n\t\t        entity_encoding: 'raw',\n\t\t        convert_urls: false,\n\t\t        relative_urls: false,\n\t\t        remove_script_host: false,\n\t\t        verify_html: false,\n\t\t        menubar: false,\n\t\t        adapter: this,\n\t\t        setup: function(editor) {\n\t\t        \teditor.on('BeforeSetContent', function (evt) {\n\t\t        \t\tif (evt.content) {\n\t\t        \t\t\tevt.content = magezonBuilderFilter.encodeContent(evt.content);\n\t\t        \t\t}\n\t\t        \t});\n\n\t\t            editor.on('change', function(evt) {\n\t\t            \tvar value = window.tinyMCE.get(evt.target.id).getContent();\n\t\t            \tvalue = magezonBuilderFilter.decodeContent(value);\n\t\t            \tself._onChange(onChange, value);\n\t\t            });\n\t\t        }\n\t\t    };\n\t\t    settings = Object.extend(settings, config);\n\t\t    delete settings['plugins'];\n\n\t\t    if (config.baseStaticUrl && config.baseStaticDefaultUrl) {\n\t\t        settings['document_base_url'] = config.baseStaticUrl;\n\t\t    }\n\t\t    // Set the document base URL\n\t\t    if (config['document_base_url']) {\n\t\t        settings['document_base_url'] = config['document_base_url'];\n\t\t    }\n\n\t\t    if (config['files_browser_window_url']) {\n\t\t        /**\n\t\t         * @param {*} fieldName\n\t\t         * @param {*} url\n\t\t         * @param {*} objectType\n\t\t         * @param {*} w\n\t\t         */\n\t\t        settings['file_browser_callback'] = function (fieldName, url, objectType, w) {\n\t\t            self.openFileBrowser4({\n\t\t                win: w,\n\t\t                type: objectType,\n\t\t                field: fieldName\n\t\t            });\n\t\t        }.bind(this);\n\t\t    }\n\n\t\t    if (config.width) {\n\t\t        settings.width = config.width;\n\t\t    }\n\n\t\t    if (config.height) {\n\t\t        settings.height = config.height;\n\t\t    }\n\n\t\t    var plugins = [];\n\t\t    //var plugins = config.plugins ? config.plugins.split(' ') : [];\n\t\t    var toolbar = config.plugins ? config.toolbar.split(' ') : [];\n\n\t\t    if (config.plugins) {\n\t\t        config.plugins.forEach(function (plugin) {\n\t\t            var deferred;\n\t\t            if (angular.isString(plugin)) {\n\t\t                plugins.push(plugin);\n\t\t                return;\n\t\t            }\n\n\t\t            if (plugins.indexOf(plugin.name) === -1) {\n\t\t                plugins.push(plugin.name);\n\t\t            }\n\n\t\t            if (toolbar.indexOf(plugin.name) === -1) {\n\t\t                toolbar.push('|', plugin.name);\n\t\t            }\n\n\t\t            if (!plugin.src) {\n\t\t                return;\n\t\t            }\n\n\t\t            deferred = $.Deferred();\n\t\t            deferreds.push(deferred);\n\n\t\t            require([plugin.src], function (factoryFn) {\n\t\t                if (typeof factoryFn === 'function') {\n\t\t                    factoryFn(plugin.options);\n\t\t                }\n\t\t                window.tinyMCE.PluginManager.load(plugin.name, plugin.src);\n\t\t                deferred.resolve();\n\t\t            });\n\n\t\t            if (deferreds.length) {\n\t\t                jQuery.when.apply(jQuery, deferreds).done(function () {\n\t\t                    $timeout(function() {\n\t\t                    \tself._initTinymce(id, onInit, settings);\n\t\t                    });\n\t\t                });\n\t\t            }\n\t\t        });\n\t\t    }\n\t\t    settings['plugins'] = plugins.join(' ');\n\t\t    settings['toolbar'] = toolbar.join(' ');\n\t\t    if (!deferreds.length) {\n\t\t    \tself._initTinymce(id, onInit, settings);\n\t\t    }\n\t\t}\n\n\t\tself.openFileBrowser4 = function (o) {\n\t\t    var typeTitle = self.translate('Select Images'),\n\t\t        storeId = 0,\n\t\t        frameDialog = jQuery('div.mce-container[role=\"dialog\"]');\n\n\t\t    var id   = frameDialog.find('.mce-textbox').eq(0).attr('id');\n\t\t    var wUrl = self.wysiwyg.files_browser_window_url +\n\t\t            'target_element_id/' + id + '/' +\n\t\t            'store/' + storeId + '/';\n\t\t    self.mediaBrowserOpener = o.win;\n\t\t    self.mediaBrowserTargetElementId = o.field;\n\n\t\t    if (typeof o.type !== 'undefined' && o.type !== '') { //eslint-disable-line eqeqeq\n\t\t        wUrl = wUrl + 'type/' + o.type + '/';\n\t\t    }\n\n\t\t    frameDialog.hide();\n\t\t    jQuery('#mce-modal-block').hide();\n\n\t\t    require(['mage/adminhtml/browser'], function () {\n\t\t        MediabrowserUtility.openDialog(wUrl, false, false, typeTitle, {\n\t\t            /**\n\t\t             * Closed.\n\t\t             */\n\t\t            closed: function () {\n\t\t                frameDialog.show();\n\t\t                jQuery('#mce-modal-block').show();\n\t\t            }\n\t\t        });\n\t\t    });\n\t\t}\n\n\t\tthis.setupTinymce3 = function(id, config, onChange, onInit) {\n\t\t    var plugins = 'inlinepopups,safari,pagebreak,style,layer,table,advhr,advimage,emotions,iespell,media,searchreplace,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras';\n\n\t\t    if (config.widget_plugin_src) {\n\t\t        //plugins = 'magentowidget,' + plugins;\n\t\t    }\n\n\t\t    var magentoPluginsOptions = $H({});\n\t\t    var magentoPlugins = '';\n\n\t\t    if (config.plugins) {\n\t\t        config.plugins.each(function(plugin) {\n\t\t            magentoPlugins = plugin.name + ',' + magentoPlugins;\n\t\t            magentoPluginsOptions.set(plugin.name, plugin.options);\n\t\t        });\n\t\t        if (magentoPlugins) {\n\t\t            plugins = '-' + magentoPlugins + plugins;\n\t\t        }\n\t\t    }\n\n\t\t    var settings = {\n\t\t        'entity_encoding': 'raw',\n\t\t        mode: 'exact',\n\t\t        elements: id,\n\t\t        theme: 'advanced',\n\t\t        plugins: plugins,\n\t\t        theme_advanced_buttons1: magentoPlugins + 'magentowidget,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect',\n\t\t        theme_advanced_buttons2: 'cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,forecolor,backcolor',\n\t\t        theme_advanced_buttons3: 'tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,iespell,media,advhr,|,ltr,rtl,|,fullscreen',\n\t\t        theme_advanced_buttons4: 'insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,pagebreak',\n\t\t        theme_advanced_toolbar_location: 'top',\n\t\t        theme_advanced_toolbar_align: 'left',\n\t\t        theme_advanced_statusbar_location: 'bottom',\n\t\t        valid_elements: self.schema.validElements.join(','),\n\t\t        valid_children: self.schema.validChildren.join(','),\n\t\t        theme_advanced_resizing: true,\n\t\t        theme_advanced_resize_horizontal: false,\n\t\t        convert_urls: false,\n\t\t        relative_urls: false,\n\t\t        content_css: config.content_css,\n\t\t        custom_popup_css: config.popup_css,\n\t\t        magentowidget_url: config.widget_window_url,\n\t\t        magentoPluginsOptions: magentoPluginsOptions,\n\t\t        doctype: '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">',\n\t\t        setup: function (ed) {\n\n\t\t        \tvar onChange1;\n\n\t\t        \ted.onPreInit.add(self.onEditorPreInit.bind(self));\n\n\t\t        \ted.onInit.add(self.onEditorInit.bind(self));\n\n\t\t            ed.onSubmit.add(function (edi, e) {\n\t\t                varienGlobalEvents.fireEvent('tinymceSubmit', e);\n\t\t            });\n\n\t\t            ed.onPaste.add(function (edi, e, o) {\n\t\t                varienGlobalEvents.fireEvent('tinymcePaste', o);\n\t\t            });\n\n\t\t            ed.onBeforeSetContent.add(function (edi, o) {\n\t\t                varienGlobalEvents.fireEvent('tinymceBeforeSetContent', o);\n\t\t                if (o.content) {\n\t\t        \t\t\to.content = magezonBuilderFilter.encodeContent(o.content);\n\t\t        \t\t}\n\t\t            });\n\n\t\t            ed.onSetContent.add(function (edi, o) {\n\t\t                varienGlobalEvents.fireEvent('tinymceSetContent', o);\n\t\t                self.updateTextArea(onChange, id);\n\t\t            });\n\n\t\t            ed.onSaveContent.add(function (edi, o) {\n\t\t                varienGlobalEvents.fireEvent('tinymceSaveContent', o);\n\t\t                self.updateTextArea(onChange, id);\n\t\t            });\n\n\t\t            onChange1 = function (edi, l) {\n\t\t                varienGlobalEvents.fireEvent('tinymceChange', l);\n\t\t                self.updateTextArea(onChange, id);\n\t\t            };\n\n\t\t            ed.onChange.add(onChange1);\n                    ed.onKeyUp.add(onChange1);\n\n\t\t            ed.onExecCommand.add(function (edi, cmd) {\n\t\t                varienGlobalEvents.fireEvent('tinymceExecCommand', cmd);\n\t\t                self.updateTextArea(onChange, id);\n\t\t            });\n\t\t        }\n\t\t    };\n\n\t\t    // Set the document base URL\n\t\t    if (config.document_base_url) {\n\t\t        settings.document_base_url = config.document_base_url;\n\t\t    }\n\n\t\t    if (config.files_browser_window_url) {\n\t\t        settings['file_browser_callback'] = function (fieldName, url, objectType, w) {\n\t\t            self.openFileBrowser3(id, {\n\t\t                win: w,\n\t\t                type: objectType,\n\t\t                field: fieldName\n\t\t            });\n\t\t        }.bind(this);\n\t\t    }\n\n\t\t    if (config.width) {\n\t\t        settings.width = config.width;\n\t\t    }\n\n\t\t    if (config.height) {\n\t\t        settings.height = config.height;\n\t\t    }\n\n\t\t    if (config.settings) {\n\t\t        Object.extend(settings, config.settings)\n\t\t    }\n\n\t\t    setTimeout(function() {\n\t\t        self._initTinymce(id, onInit, settings);\n\t\t    }, 1000);\n\n\t\t    return settings;\n\t\t}\n\n\t\tself.openFileBrowser3 = function(id, o) {\n\t\t\tvar typeTitle,\n\t\t\tstoreId = 0,\n\t\t\tframeDialog = jQuery(o.win.frameElement).parents('[role=\"dialog\"]'),\n\t\t\twUrl = self.wysiwyg.files_browser_window_url +\n\t\t\t'target_element_id/' + id + '/' +\n\t\t\t'store/' + storeId + '/';\n\n\t\t\tself.mediaBrowserOpener = o.win;\n\t\t\tself.mediaBrowserTargetElementId = o.field;\n\n\t\t\tif (typeof(o.type) != 'undefined' && o.type != \"\") {\n\t\t\t\ttypeTitle = 'image' == o.type ? self.translate('Insert Image...') : self.translate('Insert Media...');\n\t\t\t\twUrl = wUrl + \"type/\" + o.type + \"/\";\n\t\t\t} else {\n\t\t\t\ttypeTitle = self.translate('Insert File...');\n\t\t\t}\n\n\t\t\tframeDialog.hide();\n\t\t\tjQuery('#mceModalBlocker').hide();\n\n\t\t\tMediabrowserUtility.openDialog(wUrl, false, false, typeTitle, {\n\t\t\t\tclosed: function() {\n\t\t\t\t\tframeDialog.show();\n\t\t\t\t\tjQuery('#mceModalBlocker').show();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tself.updateTextArea = function (onChange, id) {\n\t\t    var editor = window.tinyMCE.get(id),\n\t\t        content;\n\t\t    if (!editor) return;\n\t\t    self._onChange(onChange, editor.getContent());\n\t\t}\n\n\t\tself._initTinymce = function(id, onInit, settings) {\n\t\t\ttinymce.init(settings);\n\t\t\tvar editor = tinymce.get(id);\n\t\t\tself._onInit(onInit, editor);\n\t\t\ttinyMceEditors.set(id, self);\n\t\t}\n\n\t\tself.getMediaBrowserOpener = function () {\n            return this.mediaBrowserOpener;\n        }\n\n        self.getMediaBrowserTargetElementId = function () {\n            return this.mediaBrowserTargetElementId;\n        }\n\n\t\tself._onChange = function(onChange, value) {\n\t\t\tif (angular.isFunction(onChange)) {\n\t\t\t\t$timeout(function() {\n\t\t\t\t\tonChange(value);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tself._onInit = function(onInit, editor) {\n\t\t\tif (angular.isFunction(onInit)) {\n\t\t\t\tonInit(editor);\n\t\t\t}\n\t\t}\n\n\t\tself.onEditorInit = function (editor) {\n        }\n\n\t\tself.onEditorPreInit = function (editor) {\n            self.applySchema(editor);\n        }\n\n\t\tself.applySchema= function (editor) {\n            var schema      = editor.schema,\n                schemaData  = self.schema,\n                makeMap     = window.tinyMCE.makeMap;\n\n            jQuery.extend(true, {\n                nonEmpty: schema.getNonEmptyElements(),\n                boolAttrs: schema.getBoolAttrs(),\n                whiteSpace: schema.getWhiteSpaceElements(),\n                shortEnded: schema.getShortEndedElements(),\n                selfClosing: schema.getSelfClosingElements(),\n                blockElements: schema.getBlockElements()\n            }, {\n                nonEmpty: makeMap(schemaData.nonEmpty),\n                boolAttrs: makeMap(schemaData.boolAttrs),\n                whiteSpace: makeMap(schemaData.whiteSpace),\n                shortEnded: makeMap(schemaData.shortEnded),\n                selfClosing: makeMap(schemaData.selfClosing),\n                blockElements: makeMap(schemaData.blockElements)\n            });\n        }\n\n        /**\n         * @param {String} string\n         * @return {String}\n         */\n        self.translate = function (string) {\n            return jQuery.mage.__ ? jQuery.mage.__(string) : string;\n        }\n\n        self.remove = function(id) {\n        \tif (window.tinyMCE.get(id)) {\n        \t\twindow.tinyMCE.get(id).destroy();\n        \t}\n        }\n\t}\n\n\treturn editor;\n\n})","Magezon_Builder/js/services/form.js":"define([\n\t'jquery',\n\t'angular',\n\t'Magezon_Builder/js/factories/FormlyUtils'\n], function ($, angular, FormlyUtils) {\n\n\tvar form = function($rootScope, formlyConfig, magezonBuilderService, $timeout, magezonBuilderConfig) {\n\t\tvar self = this;\n\n\t\tthis.registerTypes = function(array) {\n\t\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\t\tvar elem = array[i];\n\t\t\t\t// DynamicRows\n\t\t\t\tif (elem.templateOptions.children) {\n\t\t\t\t\tself.registerTypes(elem.templateOptions.children, formlyConfig);\n\t\t\t\t}\n\t\t\t\tif (elem.hasOwnProperty('fieldGroup')) {\n\t\t\t\t\tformlyConfig.setWrapper({\n\t\t\t\t\t\tname: elem.wrapper,\n\t\t\t\t\t\ttemplateUrl: elem.templateOptions.templateUrl\n\t\t\t\t\t});\n\t\t\t\t\tself.registerTypes(elem['fieldGroup'], formlyConfig);\n\t\t\t\t} else {\n\t\t\t\t\tvar newType = {\n\t\t\t\t\t\tname: elem.type,\n\t\t\t\t\t\ttemplateUrl: elem.templateOptions.templateUrl\n\t\t\t\t\t};\n\t\t\t\t\tif (elem.defaultOptions) {\n\t\t\t\t\t\tnewType.defaultOptions = Object.assign({}, elem.defaultOptions);\n\t\t\t\t\t}\n\t\t\t\t\tformlyConfig.setType(newType);\n\t\t\t\t}\n\t\t\t\tif (elem.templateOptions.wrapperTemplateUrl) {\n\t\t\t\t\tformlyConfig.setWrapper({\n\t\t\t\t\t\tname: elem.data.wrapperType,\n\t\t\t\t\t\ttemplateUrl: elem.templateOptions.wrapperTemplateUrl\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.processFormFields = function(fields, callbackFunction) {\n\t\t\tvar excludedFields  = ['defaultOptions'];\n\t\t\tvar requireElements = [];\n\n\t\t\tvar processRequireElements = function(children) {\n\t\t\t\tangular.forEach(children, function(elem) {\n\t\t\t\t\tif (elem.data && elem.data.element && $.inArray(elem.data.element, requireElements)===-1) {\n\t\t\t\t\t\trequireElements.push(elem.data.element);\n\t\t\t\t\t}\n\t\t\t\t\tif (elem.fieldGroup) {\n\t\t\t\t\t\tprocessRequireElements(elem.fieldGroup);\n\t\t\t\t\t}\n\t\t\t\t\tif (elem.templateOptions.children) {\n\t\t\t\t\t\tprocessRequireElements(elem.templateOptions.children);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tprocessRequireElements(fields);\n\n\t\t\tvar extendProperties = ['templateOptions'];\n\t\t\tvar mergeElement = function(array, element, data) {\n\t\t\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\t\t\tvar row = array[i];\n\t\t\t\t\tif (row['data'] && row['data']['element'] && row['data']['element'] == element) {\n\t\t\t\t\t\t_.each(extendProperties, function(property) {\n\t\t\t\t\t\t\t_.each(data[property], function(value, key) {\n\t\t\t\t\t\t\t\tif (!row[property].hasOwnProperty(key)) {\n\t\t\t\t\t\t\t\t\trow[property][key] = value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tdelete data[property];\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_.each(data, function(value, key) {\n\t\t\t\t\t\t\trow[key] = value;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\tfor (var z = 0; z < excludedFields.length; z++) {\n\t\t\t\t\t\tdelete row[excludedFields[z]];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (row.hasOwnProperty('fieldGroup')) {\n\t\t\t\t\t\tmergeElement(row['fieldGroup'], element, data);\n\t\t\t\t\t}\n\t\t\t\t\tif (row.hasOwnProperty('fields')) {\n\t\t\t\t\t\tmergeElement(row['fields'], element, data);\n\t\t\t\t\t}\n\t\t\t\t\tif (row.templateOptions.children) {\n\t\t\t\t\t\tmergeElement(row.templateOptions.children, element, data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (requireElements.length) {\n\t\t\t\tvar loaded = 0;\n\t\t\t\t_.each(requireElements, function(element, index) {\n\t\t\t\t\trequire([element], function(data) {\n\t\t\t\t\t\tmergeElement(fields, element, data);\n\t\t\t\t\t\tloaded++;\n\t\t\t\t\t\tif (loaded == requireElements.length) {\n\t                \t\tcallbackFunction(fields);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t            callbackFunction(fields);\n\t\t\t}\n\t\t}\n\n\t\tthis.getForm = function(name, callback, ajaxData) {\n\t\t\tmagezonBuilderService.getBuilderConfig(name, function(result) {\n\t\t\t\tvar newFields = angular.copy(result.form);\n\t\t\t\tvar fields = FormlyUtils.processFields(newFields, 'children');\n\t\t\t\tself.registerTypes(fields);\n\t\t\t\tself.processFormFields(fields, function(tabs) {\n\t\t\t\t\t$timeout(function() {\n\t\t\t\t\t\t$rootScope.$broadcast('afterLoadModalTabs');\n\t\t\t\t\t\tcallback(tabs, result);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\treturn form;\n\n})","Magezon_Builder/js/services/profile.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar profileService = function($rootScope, elementManager, magezonBuilderForm, magezonBuilderService) {\n\n\t\tvar self = this;\n\t\tvar defaultSettings = [];\n\n\t\tmagezonBuilderForm.getForm('modals.settings', function(tabs, res) {\n\t\t\tself.defaultSettings = res.defaultValues;\n\t\t});\n\n        $rootScope.$on('exportShortcode', function(e) {\n\t\t\tself.export();\n\t\t\tsetTimeout(function() {\n        \t\t$rootScope.$broadcast('loadStyles');\n\t\t\t});\n\t\t});\n\n\t\t$rootScope.$on('importShortcode', function(e) {\n\t\t\tself.import();\n\t\t\tsetTimeout(function() {\n\t\t\t\t$rootScope.$broadcast('loadStyles');\n\t\t\t});\n\t\t});\n\n\t\tthis.export = function() {\n\t\t\tvar content  = this.getTargetContent();\n\t\t\tvar _content = this.getContent();\n\t\t\tif (magezonBuilderService.isJSON(_content)) {\n\t\t\t\tvar key = this.getKey();\n\t\t\t\tif (key) {\n\t\t\t\t\t_content = '[' + key + ']' + _content + '[/' + key + ']';\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar result = content.replace(_content, this.getShortCode());\n\t\t\tthis.getTargetSelector().val(result);\n\t\t\tthis.getTargetSelector().trigger('change');\n\t\t}\n\n\t\tthis.getShortCode = function() {\n\t\t\tvar key = this.getKey();\n\t\t\tvar result = '';\n\t\t\tif (key) {\n\t\t\t\tresult += '[' + key + ']';\n\t\t\t}\n\t\t\tresult += this.toString();\n\t\t\tif (key) {\n\t\t\t\tresult += '[/' + key + ']';\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\tthis.import = function() {\n\t\t\tvar content = this.getContent();\n\t\t\tvar isJSON  = magezonBuilderService.isJSON(content);\n\t\t\tvar profile = this.prepareProfile(content);\n\t\t\t$rootScope.$apply(function() {\n\t\t\t\t$rootScope.profile = angular.extend($rootScope.profile, profile);\n\t\t\t\tif (content) {\n\t\t\t\t\tif (!isJSON) {\n\t\t\t\t\t\t$rootScope.profile = angular.extend($rootScope.profile, self.defaultSettings);\n\t\t\t\t\t\t$rootScope.$broadcast('addElement', {\n\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\topenModal: false,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\thistory: false,\n\t\t\t\t\t\t\t\tcontent: content\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t$rootScope.$broadcast('exportShortcode');\n\t\t\t});\n\t\t}\n\n\t\tthis.getTargetSelector = function() {\n\t\t\treturn $('#' + this.getTargetId());\n\t\t}\n\n\t\tthis.getTargetId = function() {\n\t\t\treturn $rootScope.builderConfig.targetId;\n\t\t}\n\n\t\tthis.getKey = function() {\n\t\t\treturn $rootScope.builderConfig.profile.key;\n\t\t}\n\n\t\tthis.getContent = function() {\n\t\t\tvar key     = this.getKey();\n\t\t\tvar content = this.getTargetSelector().val();\n\t\t\tvar regExp  = '\\\\[' + key + '\\\\](.*)\\\\[/' + key + '\\\\]';\n\t\t\tvar matches = content.match(regExp);\n\t\t\tif (matches) content = matches[1];\n\t\t\treturn content;\n\t\t}\n\n\t\tthis.prepareProfile = function(content, force) {\n\t\t\tvar key = this.getKey();\n\t\t\tvar regExp  = '\\\\[' + key + '\\\\](.*)\\\\[/' + key + '\\\\]';\n\t\t\tvar matches = content.match(regExp);\n\t\t\tif (matches) content = matches[1];\n\t\t\tvar profile = {\n\t\t\t\tbuilder: elementManager.getBuilderConfig('profile'),\n\t\t\t\telements: []\n\t\t\t};\n\t\t\tvar isJSON = magezonBuilderService.isJSON(content);\n\t\t\tif (isJSON) {\n\t\t\t\tvar _profile = JSON.parse(content);\n\t\t\t\tangular.forEach(_profile, function(value, key) {\n\t\t\t\t\tif (key !== 'elements') {\n\t\t\t\t\t\tprofile[key] = value;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tprofile.elements = elementManager.prepareElements(angular.copy(_profile.elements), force);\n\t\t\t}\n\t\t\tif (!profile['pid']) profile['pid'] = magezonBuilderService.getUniqueId();\n\t\t\treturn profile;\n\t\t}\n\n\t\tthis.getJsonElements = function() {\n\t\t\treturn this.prepareElements($rootScope.profile.elements);\n\t\t}\n\n\t\tthis.toString = function() {\n\t\t\tvar profile = angular.copy($rootScope.profile);\n\t\t\tvar result = {};\n\t\t\tvar excludedFields = ['allowed_types', 'builder'];\n\t\t\tangular.forEach(profile, function(value, key) {\n\t\t\t\tif (excludedFields.indexOf(key) === -1) {\n\t\t\t\t\tresult[key] = value;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!result['pid']) result['pid'] = magezonBuilderService.getUniqueId();\n\t\t\tresult.elements = this.prepareElements($rootScope.profile.elements);\n\t\t\treturn angular.toJson(result);\n\t\t}\n\n\t\tthis.getTargetContent = function() {\n            return this.getTargetSelector().val();\n\t\t}\n\n\t\tthis.prepareElements = function(elements) {\n\t\t\tvar _elements = angular.copy(elements);\n\t\t\tvar newElements = [];\n\t\t\tangular.forEach(_elements, function(element) {\n\t\t\t\tvar builderElement = elementManager.getElement(element.type);\n\t\t\t\tif (builderElement.name !== element.builder.name) {\n\t\t\t\t\telement.builderName = element.builder.name;\n\t\t\t\t} else {\n\t\t\t\t\tdelete element.builderName;\n\t\t\t\t}\n\t\t\t\tdelete element.builder;\n\t\t\t\tif (builderElement) {\n\t\t\t\t\tif (element.elements) {\n\t\t\t\t\t\telement.elements = self.prepareElements(element.elements);\n\t\t\t\t\t}\n\t\t\t\t\tnewElements.push(element);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn newElements;\n\t\t}\n\n\t\tthis.updateElements = function(elements) {\n\t\t\t$rootScope.profile.elements = elements;\n\t\t}\n\t}\n\n\treturn profileService;\n});","Magezon_Builder/js/services/magezonBuilder.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar magezonBuilderService = function($rootScope, magezonBuilderUrl, elementManager) {\n\t\tvar self = this;\n\t\tself.data = {};\n\t\tself.cacheRequests = {};\n\n\t\tthis.viewMode = 'xl';\n\n\t\tthis.setViewMode = function(viewMode) {\n\t\t\tthis.viewMode = viewMode;\n\t\t}\n\n\t\tthis.getViewMode = function(viewMode) {\n\t\t\treturn this.viewMode;\n\t\t}\n\n\t\tthis.getBuilderConfig = function(requestKey, callbackFunction) {\n\t\t\tvar self = this;\n\t\t\tif (!self.data.hasOwnProperty(requestKey)) {\n\t\t\t\tif (!self.cacheRequests.hasOwnProperty(requestKey)) {\n\t\t\t\t\t$.ajax({\n\t\t                url: magezonBuilderUrl.getUrl('mgzbuilder/ajax/loadConfig'),\n\t\t                type:'POST',\n\t\t                data: {\n\t\t                \tarea: $rootScope.builderConfig.area,\n\t\t                \thandle: $rootScope.builderConfig.handle,\n\t\t                \tkey: requestKey,\n\t\t                \tclass: $rootScope.builderConfig.profile.builder\n\t\t                },\n\t\t            \tdataType: 'json',\n\t\t                success: function(data) {\n\t                \t\tself.data[requestKey] = data.config;\n\t                \t\tself.processBuilderConfig(requestKey, data.config);\n\t\t                }\n\t\t            });\n\t\t\t\t}\n\t\t\t\tif (!self.cacheRequests.hasOwnProperty(requestKey)) self.cacheRequests[requestKey] = [];\n\t\t\t\tself.cacheRequests[requestKey].push(callbackFunction);\n\t\t\t} else if (typeof callbackFunction === 'function') {\n\t\t\t\tcallbackFunction(self.data[requestKey]);\n\t\t\t}\n\t\t}\n\n\t\tthis.processBuilderConfig = function(requestKey, result) {\n\t\t    angular.forEach(self.cacheRequests[requestKey], function(callbackFunction) {\n\t\t    \tif (angular.isFunction(callbackFunction)) {\n\t\t    \t\tcallbackFunction(result);\n\t\t    \t} else {\n\t\t    \t\tcallbackFunction = result;\n\t\t    \t}\n\t\t    });\n\t\t}\n\n\t\tthis.saveToCache = function(key, data) {\n\t\t\tthis.data[key] = data;\n\t\t}\n\n\t\tthis.getFromCache = function(key) {\n\t\t\tif (this.data.hasOwnProperty(key)) {\n\t\t\t\treturn this.data[key];\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.getData = function() {\n\t\t\treturn this.data;\n\t\t}\n\n\t    /**\n\t     * Processing options list\n\t     *\n\t     * @param {Array} array - Property array\n\t     * @param {String} separator - Level separator\n\t     * @param {Array} created - list to add new options\n\t     *\n\t     * @return {Array} Plain options list\n\t     */\n\t    this.flattenCollection = function(array, separator, created) {\n\t        var i = 0,\n\t            length,\n\t            childCollection;\n\n\t        array = _.compact(array);\n\t        length = array.length;\n\t        created = created || [];\n\n\t        for (i; i < length; i++) {\n\t            created.push(array[i]);\n\n\t            if (array[i].hasOwnProperty(separator)) {\n\t                childCollection = array[i][separator];\n\t                delete array[i][separator];\n\t                this.flattenCollection.call(this, childCollection, separator, created);\n\t            }\n\t        }\n\n\t        return created;\n\t    }\n\n\t    /**\n\t     * Set levels to options list\n\t     *\n\t     * @param {Array} array - Property array\n\t     * @param {String} separator - Level separator\n\t     * @param {Number} level - Starting level\n\t     * @param {String} path - path to root\n\t     *\n\t     * @returns {Array} Array with levels\n\t     */\n\t    this.setProperty = function(array, separator, level, path) {\n\t        var i = 0,\n\t            length,\n\t            nextLevel,\n\t            nextPath;\n\n\t        array = _.compact(array);\n\t        length = array.length;\n\t        level = level || 0;\n\t        path = path || '';\n\n\t        for (i; i < length; i++) {\n\t            if (array[i]) {\n\t                _.extend(array[i], {\n\t                    level: level,\n\t                    path: path\n\t                });\n\t            }\n\n\t            if (array[i].hasOwnProperty(separator)) {\n\t                nextLevel = level + 1;\n\t                nextPath = path ? path + '.' + array[i].label : array[i].label;\n\t                this.setProperty.call(this, array[i][separator], separator, nextLevel, nextPath);\n\t            }\n\t        }\n\n\t        return array;\n\t    }\n\n\t    /**\n\t     * Preprocessing options list\n\t     *\n\t     * @param {Array} nodes - Options list\n\t     *\n\t     * @return {Object} Object with property - options(options list)\n\t     *      and cache options with plain and tree list\n\t     */\n\t    this.parseOptions = function(nodes) {\n\t        var caption,\n\t            value,\n\t            cacheNodes,\n\t            copyNodes;\n\n\t        nodes = this.setProperty(nodes, 'elements');\n\t        copyNodes = JSON.parse(JSON.stringify(nodes));\n\t        cacheNodes = this.flattenCollection(copyNodes, 'elements');\n\n\t        nodes = _.map(nodes, function (node) {\n\t            value = node.value;\n\n\t            if (value == null || value === '') {\n\t                if (_.isUndefined(caption)) {\n\t                    caption = node.label;\n\t                }\n\t            } else {\n\t                return node;\n\t            }\n\t        });\n\n\t        return {\n\t            options: _.compact(nodes),\n\t            cacheOptions: {\n\t                plain: _.compact(cacheNodes),\n\t                tree: _.compact(nodes)\n\t            }\n\t        };\n\t    }\n\n\t    this.uniqueid = function (size) {\n\t        var code = Math.random() * 25 + 65 | 0,\n\t            idstr = String.fromCharCode(code);\n\n\t        size = size || 12;\n\n\t        while (idstr.length < size) {\n\t            code = Math.floor(Math.random() * 42 + 48);\n\n\t            if (code < 58 || code > 64) {\n\t                idstr += String.fromCharCode(code);\n\t            }\n\t        }\n\n\t        return idstr.toLowerCase();\n\t    }\n\n\t\tthis.isBackend = function () {\n\t\t\treturn $('#html-body').length ? true : false;\n\t\t}\n\n\t\tthis.isJSON = function (str) {\n\t\t\ttry {\n\t\t\t\tvar result = JSON.parse(str);\n\t\t\t\tif (angular.isNumber(result)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.getDesignValue = function(elem, key) {\n\t\t\tvar viewMode = this.getViewMode();\n\t\t\tvar result = elem[key];\n\t\t\tvar start = false;\n\t\t\tvar sizes = ['lg', 'md', 'sm', 'xs'];\n\t\t\tif (elem.device_type == 'all') return result;\n\t\t\tangular.forEach(sizes, function(v, k) {\n\t\t\t\tif (v == viewMode) {\n\t\t\t\t\tstart = true;\n\t\t\t\t}\n\t\t\t\tif (start &&  elem[v + '_' + key]) {\n\t\t\t\t\tresult = elem[v + '_' + key];\n\t\t\t\t\tstart = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result;\n\t\t}\n\n\t\tthis.setDesignValue = function(elem, key, value) {\n\t\t\tvar viewMode = this.getViewMode();\n\t\t\tvar start    = false;\n\t\t\tvar sizes    = ['lg', 'md', 'sm', 'xs'];\n\t\t\tvar _key;\n\t\t\tif (elem.device_type == 'all') {\n\t\t\t\telem[_key] = value;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tangular.forEach(sizes, function(v, k) {\n\t\t\t\tif (v == viewMode) {\n\t\t\t\t\tstart = true;\n\t\t\t\t}\n\t\t\t\tif (start &&  elem[v + '_' + key]) {\n\t\t\t\t\t_key = v + '_' + key;\n\t\t\t\t\tstart = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!_key) _key = 'md';\n\t\t\telem[_key] = value;\n\t\t}\n\n\t\tthis.getResponiveValue = function(elem, key) {\n\t\t\tvar viewMode = this.getViewMode();\n\t\t\tvar result = elem[key];\n\t\t\tvar start = false;\n\t\t\tvar sizes = ['xl', 'lg', 'md', 'sm', 'xs'];\n\t\t\tangular.forEach(sizes, function(v, k) {\n\t\t\t\tif (v == viewMode) {\n\t\t\t\t\tstart = true;\n\t\t\t\t}\n\t\t\t\tif (start &&  elem[v + '_' + key]) {\n\t\t\t\t\tresult = elem[v + '_' + key];\n\t\t\t\t\tstart = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result;\n\t\t}\n\n\t\tthis.setResponiveValue = function(elem, key, value) {\n\t\t\tvar viewMode = this.getViewMode();\n\t\t\tvar start    = false;\n\t\t\tvar sizes    = ['xl', 'lg', 'md', 'sm', 'xs'];\n\t\t\tvar _key;\n\t\t\tangular.forEach(sizes, function(v, k) {\n\t\t\t\tif (v == viewMode) {\n\t\t\t\t\tstart = true;\n\t\t\t\t}\n\t\t\t\tif (start &&  elem[v + '_' + key]) {\n\t\t\t\t\t_key = v + '_' + key;\n\t\t\t\t\tstart = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!_key) _key = 'md_' + key;\n\t\t\telem[_key] = value;\n\t\t}\n\n\t\tthis.getFromLocalStorage = function(key) {\n\t\t\tif (window.localStorage) {\n\t\t\t\tkey = 'magezon.' + key;\n\t\t\t\tvar result = window.localStorage[key];\n\t\t\t\tif (this.isJSON(result)) {\n\t\t\t\t\tresult = angular.fromJson(result);\n\t\t\t\t}\n            \treturn result;\n        \t}\n        }\n\n\t\tthis.saveToLocalStorage = function(key, value) {\n\t\t\tif (window.localStorage) {\n\t\t\t\tkey = 'magezon.' + key;\n\t\t\t\tif (angular.isArray(value) || angular.isObject(value)) {\n\t\t\t\t\tvalue = angular.toJson(value);\n\t\t\t\t}\n            \treturn window.localStorage[key] = value;\n        \t}\n        }\n\n        this.elemPost = function(elem, url, data, isJson, successFunction, errorFunction, finallyFunction) {\n        \tvar spinnerHtml = '<div class=\"mgz-spinner\"><i></i></div>';\n\n        \tvar el = elementManager.getEl(elem);\n\n        \tif (!el.children('.mgz-spinner').length) {\n        \t\tel.prepend(spinnerHtml);\n        \t}\n\n        \tif (!data) data = {};\n        \tif (angular.isObject(data)) {\n        \t\tdata['form_key'] = window.FORM_KEY;\n        \t}\n        \t$.ajax({\n                url: magezonBuilderUrl.getUrl(url),\n                type: 'POST',\n                data: data,\n            \tdataType: isJson ? 'json' : 'text',\n                success: function(res) {\n                \tif (typeof successFunction === 'function') {\n            \t\t\tsuccessFunction(res);\n            \t\t}\n            \t\tif (typeof finallyFunction === 'function') {\n            \t\t\tfinallyFunction(res);\n            \t\t}\n            \t\tel.children('.mgz-spinner').remove();\n                },\n                error: function(jq, status, message) {\n                \tconsole.log(jq);\n                \tconsole.log(status);\n                \tconsole.log(message);\n                \tif (typeof errorFunction === 'function') {\n                \t\terrorFunction(jq, status, message);\n                \t}\n                \tif (typeof finallyFunction === 'function') {\n            \t\t\tfinallyFunction(jq, status, message);\n            \t\t}\n            \t\tel.children('.mgz-spinner').remove();\n                }\n            });\n        }\n\n        this.post = function(url, data, isJson, successFunction, errorFunction, finallyFunction) {\n        \tif (!data) data = {};\n        \tif (angular.isObject(data)) {\n        \t\tdata['form_key'] = window.FORM_KEY;\n        \t}\n        \t$.ajax({\n                url: magezonBuilderUrl.getUrl(url),\n                type: 'POST',\n                data: data,\n            \tdataType: isJson ? 'json' : 'text',\n                success: function(res) {\n                \tif (typeof successFunction === 'function') {\n            \t\t\tsuccessFunction(res);\n            \t\t}\n            \t\tif (typeof finallyFunction === 'function') {\n            \t\t\tfinallyFunction(res);\n            \t\t}\n                },\n                error: function(jq, status, message) {\n                \tconsole.log(jq);\n                \tconsole.log(status);\n                \tconsole.log(message);\n                \tif (typeof errorFunction === 'function') {\n                \t\terrorFunction(jq, status, message);\n                \t}\n                \tif (typeof finallyFunction === 'function') {\n            \t\t\tfinallyFunction(jq, status, message);\n            \t\t}\n                }\n            });\n        }\n\n        this.capitalize = function(str) {\n        \treturn str[0].toUpperCase() + str.slice(1);\n        }\n\n        //https://github.com/kvz/locutus/blob/master/src/php/strings/stripslashes.js\n\t\tthis.removeslashes = function(str) {\n\t\t\treturn (str + '')\n\t\t\t.replace(/\\\\(.?)/g, function (s, n1) {\n\t\t\t\tswitch (n1) {\n\t\t\t\t\tcase '\\\\':\n\t\t\t\t\treturn '\\\\'\n\t\t\t\t\tcase '0':\n\t\t\t\t\treturn '\\u0000'\n\t\t\t\t\tcase '':\n\t\t\t\t\treturn ''\n\t\t\t\t\tdefault:\n\t\t\t\t\treturn n1\n\t\t\t\t}\n\t\t\t});\n        }\n\n        //https://github.com/kvz/locutus/blob/master/src/php/strings/addcslashes.js\n        this.addslashes = function(str) {\n            return (str + '')\n            .replace(/[\\\\\"']/g, '\\\\$&')\n            .replace(/\\u0000/g, '\\\\0')\n            .replace(/{/g, '\\\\{')\n            .replace(/}/g, '\\\\}');\n        }\n\n        this.isBoolean = function(str) {\n            if (str) {\n                var _str = str.toLowerCase();\n                if (_str == 'true' || _str == 'false' || _str == '1' || _str == '0') {\n                    return true;\n                }\n            }\n            return false;\n        }\n\n        this.strToBoolean = function(str) {\n            if (this.isBoolean(str)) {\n                var _str = str.toLowerCase();\n                if (_str == 'true' || _str == '1') return true;\n                if (_str == 'false' || _str == '0') return false;\n            }\n        }\n\n\t\tthis.getUniqueId = function (size) {\n\t        var code = Math.random() * 25 + 65 | 0,\n\t            idstr = String.fromCharCode(code);\n\n\t        size = size || 12;\n\n\t        while (idstr.length < size) {\n\t            code = Math.floor(Math.random() * 42 + 48);\n\n\t            if (code < 58 || code > 64) {\n\t                idstr += String.fromCharCode(code);\n\t            }\n\t        }\n\n\t        return idstr.toLowerCase();\n\t    }\n\n\t    this.isEmpty = function(obj){\n\t    \treturn Object.keys(obj).length == 0;\n\t    }\n\t}\n\n\treturn magezonBuilderService;\n});","Magezon_Builder/js/services/history.js":"define([\n\t'jquery',\n\t'underscore',\n\t'angular',\n\t'moment',\n], function ($, _, angular, moment) {\n\n\tvar history = function($rootScope, profileManager, magezonBuilderService) {\n\t\tvar self = this;\n\n\t\t$rootScope.$on('exportShortcode', function(event) {\n\t\t\tif (!self.imported) {\n\t\t\t\tself.activeFirstItem();\n\t\t\t\tself.imported = true;\n\t\t\t}\n\t\t});\n\n\t\t$rootScope.$on('importShortcode', function(event) {\n\t\t\tif (!self.imported) {\n\t\t\t\tself.activeFirstItem();\n\t\t\t\tself.imported = true;\n\t\t\t}\n\t\t});\n\n\t\tthis.activeFirstItem = function() {\n\t\t\tvar item = this.addItem({\n\t\t\t\ttype: 'editing_started',\n\t\t\t\tprofile: profileManager.getShortCode()\n\t\t\t});\n\t\t\titem.selected = true;\n\t\t}\n\n\t\t$rootScope.$on('addHistory', function(event, data) {\n\t\t\tself.addItem(data);\n\t\t\t$rootScope.$broadcast('exportShortcode');\n\t\t});\n\n\t\tthis.getTitle = function(name) {\n\t\t\tvar title;\n\t\t\tangular.forEach($rootScope.builderConfig.historyLabels, function(_title, k) {\n\t\t\t\tif (k == name) {\n\t\t\t\t\ttitle = _title;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn title;\n\t\t}\n\n\t\tthis.addItem = function(data) {\n\t\t\tvar action = self.getTitle(data.type);\n\t\t\tif (action) {\n\t\t\t\tif (data && data.hasOwnProperty('action')) action = data.action;\n\t\t\t\tself.clearItem();\n\t\t\t\tvar profile = data.profile ? data.profile : profileManager.getShortCode();\n\t\t\t\tvar strings = [];\n\t\t\t\tif (data.title) strings.push('<span class=\"mgz-builder-history-item__title\">' + data.title + '</span>');\n\t\t\t\tif (data.subtitle) strings.push('<span class=\"mgz-builder-history-item__subtitle\">' + data.subtitle + '</span>');\n\t\t\t\tif (action) strings.push('<span class=\"mgz-builder-history-item__action\">' + action + '</span>');\n\t\t\t\tvar title = strings.join(' ');\n\t\t\t\tvar item = this.prepareItem(data.type, title, profile, false);\n\t\t\t\t$rootScope.history.push(item);\n\t\t\t\tself.activeItem(item);\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\n\t\tthis.prepareItem = function(type, title, profile, selected) {\n\t\t\treturn {\n\t\t\t\tid: magezonBuilderService.uniqueid(),\n\t\t\t\ttype: type,\n\t\t\t\ttitle: title,\n\t\t\t\ttime: moment().valueOf(),\n\t\t\t\tprofile: profileManager.getShortCode(),\n\t\t\t\tselected: selected\n\t\t\t};\n\t\t}\n\n\t\tthis.activeItem = function(item) {\n\t\t\tangular.forEach($rootScope.history, function(_item, index) {\n\t\t\t\tif (item.id === _item.id) {\n\t\t\t\t\t_item.selected = true;\n\t\t\t\t} else {\n\t\t\t\t\t_item.selected = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\tself.itemActived = item;\n\t\t}\n\n\t\tthis.previewItem = function(item) {\n\t\t\tself.activeItem(item);\n\t\t\tvar profile = profileManager.prepareProfile(item.profile);\n\t\t\tprofileManager.updateElements(profile.elements);\n\t\t\t$rootScope.$broadcast('loadStyles');\n\t\t}\n\n\t\tthis.clearItem = function() {\n\t\t\tvar found = false;\n\t\t\tvar history = angular.copy($rootScope.history);\n\t\t\tangular.forEach(history.reverse(), function(_item, index) {\n\t\t\t\tif (!found) {\n\t\t\t\t\t$rootScope.history.splice(history.length - index, 1);\n\t\t\t\t}\n\t\t\t\tif (_item.id === self.itemActived.id) {\n\t\t\t\t\tfound = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.applyItem = function(item) {\n\t\t\tself.previewItem(item);\n\t\t\tself.clearItem();\n\t\t\t$rootScope.$broadcast('exportShortcode');\n\t\t}\n\t}\n\n\treturn history;\n});","Magezon_Builder/js/services/filter.js":"define([\n    'jquery',\n    'angular'\n], function ($, angular) {\n\n    // vendor/magento/module-tinymce-3/view/base/web/tinymce3Adapter.js\n    // vendor/magento/magento2-base/lib/web/mage/adminhtml/wysiwyg/tiny_mce/tinymce4Adapter.js\n\n    var filter = function($rootScope, magezonBuilderUrl, magezonBuilderService) {\n        var self     = this;\n        var wysiwyg  = this.config = angular.copy($rootScope.builderConfig.wysiwyg);\n        var tinymce4 = wysiwyg.tinymce4;\n\n        /**\n         * Retrieve directives URL with substituted directive value.\n         *\n         * @param {String} directive\n         */\n        self.makeDirectiveUrl = function (directive) {\n            return this.config['directives_url']\n                .replace(/directive/, 'directive/___directive/' + directive)\n                .replace(/\\/$/, '');\n        }\n\n        /**\n         * @param {Object} attributes\n         * @return {Object}\n         */\n        self.parseAttributesString = function (attributes) {\n            var result = {};\n            attributes.gsub(\n                /(\\w+)(?:\\s*=\\s*(?:(?:\"((?:\\\\.|[^\"])*)\")|(?:'((?:\\\\.|[^'])*)')|([^>\\s]+)))?/,\n                function (match) {\n                    if (magezonBuilderService.isBoolean(match[2])) {\n                        result[match[1]] = magezonBuilderService.strToBoolean(match[2]);\n                    } else if (magezonBuilderService.isBoolean(match[4])) {\n                        result[match[1]] = magezonBuilderService.strToBoolean(match[4]);\n                    } else {\n                        result[match[1]] = match[2];  \n                    }\n                }\n            );\n            return result;\n        }\n\n        /**\n         * Tinymce has strange behavior with html and this removes one of its side-effects\n         * @param {String} content\n         * @return {String}\n         */\n        self.removeDuplicateAncestorWidgetSpanElement = function (content) {\n            var parser, doc;\n\n            if (!window.DOMParser) {\n                return content;\n            }\n\n            parser = new DOMParser();\n            doc = parser.parseFromString(content.replace(/&quot;/g, '&amp;quot;'), 'text/html');\n\n            [].forEach.call(doc.querySelectorAll('.magento-widget'), function (widgetEl) {\n                var widgetChildEl = widgetEl.querySelector('.magento-widget');\n\n                if (!widgetChildEl) {\n                    return;\n                }\n\n                [].forEach.call(widgetEl.childNodes, function (el) {\n                    widgetEl.parentNode.insertBefore(el, widgetEl);\n                });\n\n                widgetEl.parentNode.removeChild(widgetEl);\n            });\n\n            return doc.body ? doc.body.innerHTML.replace(/&amp;quot;/g, '&quot;') : content;\n        }\n\n        // vendor/magento/module-page-builder/view/adminhtml/web/js/utils/directives.js\n        self.convertMediaDirectivesToUrls = function(html) {\n            var mediaDirectiveRegExp = /\\{\\{\\s*media\\s+url\\s*=\\s*\"?[^\"\\s\\}]+\"?\\s*\\}\\}/g;\n            var mediaDirectiveMatches = html.match(mediaDirectiveRegExp);\n            if (mediaDirectiveMatches) {\n                mediaDirectiveMatches.forEach(function (mediaDirective) {\n                    var urlRegExp = /\\{\\{\\s*media\\s+url\\s*=\\s*(?:\"|&quot;)?(.+)(?=}})\\s*\\}\\}/;\n                    var urlMatches = mediaDirective.match(urlRegExp);\n                    if (urlMatches && typeof urlMatches[1] !== \"undefined\") {\n                        html = html.replace(mediaDirective, magezonBuilderUrl.getImageUrl(urlMatches[1].replace(/\"/g, \"\").replace(/&quot;/g, \"\").replace(/'/g, \"\")));\n                    }\n                });\n            }\n            return html;\n        }\n\n        self.encodeContent = function(content, convert) {\n            if (!content) return;\n            //if (convert) {\n                content = self.convertMediaDirectivesToUrls(content);\n            // } else {\n            //  if (tinymce4) {\n            //      content = self.tinymce4EncodeDirectives(content);\n            //  } else {\n            //      content = self.tinymce3EncodeDirectives(content);\n            //  }\n            // }\n            content = self.encodeWidgets(content);\n            return content;\n        }\n\n        /**\n         * Convert {{directive}} style attributes syntax to absolute URLs\n         * @param {Object} content\n         * @return {*}\n         */\n        self.tinymce4EncodeDirectives = function (content) {\n            // collect all HTML tags with attributes that contain directives\n            return content.gsub(/<([a-z0-9\\-\\_]+[^>]+?)([a-z0-9\\-\\_]+=\"[^\"]*?\\{\\{.+?\\}\\}.*?\".*?)>/i, function (match) {\n                var attributesString = match[2],\n                    decodedDirectiveString;\n\n                // process tag attributes string\n                attributesString = attributesString.gsub(/([a-z0-9\\-\\_]+)=\"(.*?)(\\{\\{.+?\\}\\})(.*?)\"/i, function (m) {\n                    decodedDirectiveString = encodeURIComponent(Base64.mageEncode(m[3].replace(/&quot;/g, '\"') + m[4]));\n\n                    return m[1] + '=\"' + m[2] + this.makeDirectiveUrl(decodedDirectiveString) + '\"';\n                }.bind(this));\n\n                return '<' + match[1] + attributesString + '>';\n            }.bind(this));\n        }\n\n        /**\n         * Convert {{directive}} style attributes syntax to absolute URLs\n         * @param {Object} content\n         * @return {*}\n         */\n        self.tinymce3EncodeDirectives = function (content) {\n            // collect all HTML tags with attributes that contain directives\n            return content.gsub(/<([a-z0-9\\-\\_]+[^>]+?)([a-z0-9\\-\\_]+=\"[^\"]*?\\{\\{.+?\\}\\}.*?\".*?)>/i, function (match) {\n                var attributesString = match[2],\n                    decodedDirectiveString;\n\n                // process tag attributes string\n                attributesString = attributesString.gsub(/([a-z0-9\\-\\_]+)=\"(.*?)(\\{\\{.+?\\}\\})(.*?)\"/i, function (m) {\n                    decodedDirectiveString = encodeURIComponent(Base64.mageEncode(m[3].replace(/&quot;/g, '\"')));\n\n                    return m[1] + '=\"' + m[2] + this.makeDirectiveUrl(decodedDirectiveString) + m[4] + '\"';\n                }.bind(this));\n\n                return '<' + match[1] + attributesString + '>';\n            }.bind(this));\n        }\n\n        self.decodeContent = function(content) {\n            if (tinymce4) {\n                content = self.tinymce4DecodeDirectives(content);\n            } else {\n                content = self.tinymce3DecodeDirectives(content);\n            }\n            content = self.decodeWidgets(content);\n            return content;\n        }\n\n        /**\n         * Convert absolute URLs to {{directive}} style attributes syntax\n         * @param {Object} content\n         * @return {*}\n         */\n        self.tinymce4DecodeDirectives = function (content) {\n            var directiveUrl = this.makeDirectiveUrl('%directive%').split('?')[0], // remove query string from directive\n                // escape special chars in directives url to use in regular expression\n                regexEscapedDirectiveUrl = directiveUrl.replace(/([$^.?*!+:=()\\[\\]{}|\\\\])/g, '\\\\$1'),\n                regexDirectiveUrl = regexEscapedDirectiveUrl\n                    .replace(\n                        '%directive%',\n                        '([a-zA-Z0-9,_-]+(?:%2[A-Z]|)+\\/?)(?:(?!\").)*'\n                    ) + '/?(\\\\\\\\?[^\"]*)?', // allow optional query string\n                reg = new RegExp(regexDirectiveUrl);\n\n            return content.gsub(reg, function (match) {\n                return Base64.mageDecode(decodeURIComponent(match[1]).replace(/\\/$/, '')).replace(/\"/g, '&quot;');\n            });\n        }\n\n        /**\n         * Convert absolute URLs to {{directive}} style attributes syntax\n         * @param {Object} content\n         * @return {*}\n         */\n        self.tinymce3DecodeDirectives = function (content) {\n            var directiveUrl = this.makeDirectiveUrl('%directive%').split('?')[0], // remove query string from directive\n                // escape special chars in directives url to use in regular expression\n                regexEscapedDirectiveUrl = directiveUrl.replace(/([$^.?*!+:=()\\[\\]{}|\\\\])/g, '\\\\$1'),\n                regexDirectiveUrl = regexEscapedDirectiveUrl\n                    .replace(\n                        '%directive%',\n                        '([a-zA-Z0-9,_-]+(?:%2[A-Z]|)+\\/?)(?:(?!\").)*'\n                    ) + '/?(\\\\\\\\?[^\"]*)?', // allow optional query string\n                reg = new RegExp(regexDirectiveUrl);\n\n            return content.gsub(reg, function (match) {\n                return Base64.mageDecode(decodeURIComponent(match[1]).replace(/\\/$/, '')).replace(/\"/g, '&quot;');\n            });\n        }\n\n        /**\n         * @param {Object} content\n         * @return {*}\n         */\n        self.encodeWidgets = function(content) {\n            if (tinymce4) {\n                content = self.tinymce4EncodeWidgets(self.decodeWidgets(content));\n                content = self.removeDuplicateAncestorWidgetSpanElement(content);\n            } else {\n                content = self.tinymce3EncodeWidgets(content);\n            }\n            return content;\n        }\n\n        /**\n         * Convert {{widget}} style syntax to image placeholder HTML\n         * @param {String} content\n         * @return {*}\n         */\n        self.tinymce4EncodeWidgets = function (content) {\n            return content.gsub(/\\{\\{widget(.*?)\\}\\}/i, function (match) {\n                var attributes = self.parseAttributesString(match[1]),\n                    imageSrc,\n                    imageHtml = '';\n\n                if (attributes.type) {\n                    attributes.type = attributes.type.replace(/\\\\\\\\/g, '\\\\');\n                    imageSrc = self.config.placeholders[attributes.type];\n\n                    if (imageSrc) {\n                        imageHtml += '<span class=\"magento-placeholder magento-widget mceNonEditable\" ' +\n                            'contenteditable=\"false\">';\n                    } else {\n                        imageSrc = config['error_image_url'];\n                        imageHtml += '<span ' +\n                            'class=\"magento-placeholder magento-placeholder-error magento-widget mceNonEditable\" ' +\n                            'contenteditable=\"false\">';\n                    }\n\n                    imageHtml += '<img';\n                    imageHtml += ' id=\"' + Base64.idEncode(match[0]) + '\"';\n                    imageHtml += ' src=\"' + imageSrc + '\"';\n                    imageHtml += ' />';\n\n                    if (self.config.widget_types[attributes.type]) {\n                        imageHtml += self.config.widget_types[attributes.type];\n                    }\n\n                    imageHtml += '</span>';\n\n                    return imageHtml;\n                }\n            });\n        }\n\n        /**\n         * @param {Object} content\n         * @return {*}\n         */\n        self.tinymce3EncodeWidgets = function (content) {\n            return content.gsub(/\\{\\{widget(.*?)\\}\\}/i, function (match) {\n                var attributes = self.parseAttributesString(match[1]),\n                    imageSrc,\n                    imageHtml;\n\n                if (attributes.type) {\n                    attributes.type = attributes.type.replace(/\\\\\\\\/g, '\\\\');\n                    imageSrc = this.config['widget_placeholders'][attributes.type];\n\n                    imageHtml = '<img';\n                    imageHtml += ' id=\"' + Base64.idEncode(match[0]) + '\"';\n                    imageHtml += ' src=\"' + imageSrc + '\"';\n                    imageHtml += ' title=\"' +\n                        match[0].replace(/\\{\\{/g, '{').replace(/\\}\\}/g, '}').replace(/\\\"/g, '&quot;') + '\"';\n                    imageHtml += '>';\n\n                    return imageHtml;\n                }\n            }.bind(this));\n        }\n\n        /**\n         * @param {Object} content\n         * @return {*}\n         */\n        self.decodeWidgets = function(content) {\n            if (tinymce4) {\n                content = self.tinymce4DecodeWidgets(content);\n            } else {\n                content = self.tinymce3DecodeWidgets(content);\n            }\n            return content;\n        }\n\n        /**\n         * Convert image placeholder HTML to {{widget}} style syntax\n         * @param {String} content\n         * @return {*}\n         */\n        self.tinymce4DecodeWidgets = function (content) {\n            return content.gsub(\n                /(<span class=\"[^\"]*magento-widget[^\"]*\"[^>]*>)?<img([^>]+id=\"[^>]+)>(([^>]*)<\\/span>)?/i,\n                function (match) {\n                    var attributes = self.parseAttributesString(match[2]),\n                        widgetCode;\n\n                    if (attributes.id) {\n                        widgetCode = Base64.idDecode(attributes.id);\n\n                        if (widgetCode.indexOf('{{widget') !== -1) {\n                            return widgetCode;\n                        }\n                    }\n\n                    return match[0];\n                }\n            );\n        }\n\n        /**\n         * @param {Object} content\n         * @return {*}\n         */\n        self.tinymce3DecodeWidgets = function (content) {\n            return content.gsub(/<img([^>]+id=\\\"[^>]+)>/i, function (match) {\n                var attributes = self.parseAttributesString(match[1]),\n                    widgetCode;\n\n                if (attributes.id) {\n                    widgetCode = Base64.idDecode(attributes.id);\n\n                    if (widgetCode.indexOf('{{widget') !== -1) {\n                        return widgetCode;\n                    }\n                }\n\n                return match[0];\n            }.bind(this));\n        }\n\n        self.processContent = function(content) {\n            var result = content.gsub(/<img\\s[^>]*?src\\s*=\\s*['\\\"]([^'\\\"]*?)['\\\"][^>]*?>/i, function (match) {\n                if (match[1].indexOf($rootScope.builderConfig.mediaUrl) !== -1) {\n                    return match[0].replace(match[1], self.urlToDirective(match[1]));\n                } else {\n                    return match[0];\n                }\n            });\n            return result;  \n        }\n\n        self.convertImageToDirective = function(content) {\n            content = content.replace(/(data-mce-selected=\"1\")/g, '\\\\$1');\n            content = content.gsub(/<img\\s[^>]*?src\\s*=\\s*['\\\"]([^'\\\"]*?)['\\\"][^>]*?>/i, function (match) {\n                var result;\n                if (match[1].indexOf($rootScope.builderConfig.mediaUrl) !== -1) {\n                    var mediaDirective = self.urlToDirective(match[1]);\n                    result = match[0].replace(match[1], mediaDirective);\n                    result = result.replace('data-mce-src=\"' + match[1] + '\"', '');\n                } else {\n                    result = match[0];\n                }\n                return result;\n            });\n            return content;\n        }\n\n        self.urlToDirective = function(imageUrl) {\n            var mediaUrl  = self.convertUrlToPathIfOtherUrlIsOnlyAPath($rootScope.builderConfig.mediaUrl, imageUrl);\n            var mediaPath = imageUrl.split(mediaUrl);\n            return \"{{media url=\" + mediaPath[1] + \"}}\";\n        }\n\n        self.convertUrlToPathIfOtherUrlIsOnlyAPath = function(url, otherUrl) {\n            return self.isPathOnly(otherUrl) ? self.getPathFromUrl(url) : url;\n        }\n\n        self.isPathOnly = function(url) {\n            return url.indexOf(\"/\") === 0;\n        }\n\n        self.getPathFromUrl = function(url) {\n            var a = document.createElement(\"a\");\n            a.href = url;\n            return a.pathname;\n        }\n\n    }\n\n    return filter;\n});","Magezon_Builder/js/services/element.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar elementManagerService = function($rootScope) {\n\t\tvar self = this;\n\t\tthis.elements = {};\n\t\tthis.groups   = {};\n\n\t\tthis.registerElements = function(elements) {\n\t\t\tvar newElements = {};\n\t\t\tangular.forEach(elements, function(element, index) {\n\t\t\t\tif (!element.hasOwnProperty('disabled') || !element['disabled']) {\n\t\t\t\t\tnewElements[index] = element;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.elements = newElements;\n\t\t}\n\n\t\tthis.getElement = function(type) {\n\t\t\tif (angular.isObject(type)) {\n\t\t\t\ttype = type.type;\n\t\t\t}\n\t\t\treturn this.elements[type];\n\t\t}\n\n\t\tthis.prepareElements = function(elements, force) {\n\t\t\tvar newElements = [];\n\t\t\tangular.forEach(elements, function(_element) {\n\t\t\t\tif (self.getElement(_element.type)) {\n\t\t\t\t\tnewElements.push(self.prepareElement(_element, force));\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn newElements;\n\t\t}\n\n\t\tthis.prepareElement = function(element, force) {\n\t\t\tvar oldId;\n\t\t\telement['builder'] = self.getBuilderConfig(element.type);\n\n\t\t\tif (element['id'] && force) {\n\t\t\t\toldId = element['id'];\n\t\t\t}\n\t\t\tif ($rootScope.builderConfig.area == 'bfb') {\n\t\t\t\tif (!element['id'] || force) element['id'] = self.getUniqueId(7);\n\t\t\t} else {\n\t\t\t\telement['id'] = self.getUniqueId(7);\n\t\t\t}\n\n\t\t\t// if (element['id'] && force) {\n\t\t\t// \toldId = element['id'];\n\t\t\t// }\n\t\t\t// if (!element['id'] || force) element['id'] = self.getUniqueId(7);\n\t\t\t\n\t\t\tif (element.builderName && element.builderName!=element['builder'].name) {\n\t\t\t\telement['builder'].name = element.builderName;\n\t\t\t}\n\t\t\tif (element.hasOwnProperty('elements')) {\n\t\t\t\telement['elements'] = self.prepareElements(element.elements, force);\n\t\t\t}\n\t\t\tif (force && oldId) {\n\t\t\t\tvar _elem = $('#' + oldId + '-style');\n\t\t\t\tif (_elem.length) {\n\t\t\t\t\tvar oldId = '\\\\.' + oldId;\n\t\t\t\t\tvar newId = '.' + element.id;\n\t\t\t\t\tvar regex = new RegExp(oldId, 'g');\n\t\t\t\t\tvar styleHtml = _elem[0].outerHTML.replace(regex, newId);\n\t\t\t\t\tstyleHtml = styleHtml.replace(oldId + '-style', element.id + '-style');\n\t\t\t\t\t_elem.after(styleHtml);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn element;\n\t\t}\n\n\t\tthis.getNewElement = function(type) {\n\t\t\tvar builderElement = this.getElement(type);\n\t\t\tvar element = angular.copy(builderElement.defaultValues);\n\t\t\telement['type'] = type;\n\t\t\tthis.prepareElement(element, true);\n\t\t\tif (builderElement.is_collection) {\n\t\t\t\telement['elements'] = [];\n\t\t\t}\n\t\t\treturn element;\n\t\t}\n\n\t\tthis.getBuilderConfig = function(type) {\n\t\t\tif (type=='profile') {\n\t\t\t\treturn {\n\t\t\t\t\tis_collection: true\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar config = angular.copy(this.getElement(type));\n\t\t\tconfig = angular.merge(config, {\n\t\t\t\tactive: false,\n\t\t\t\tvisible: true,\n\t\t\t\tcontrol: true,\n\t\t\t\tactived: false,\n\t\t\t\tadditionalClasses: [],\n\t\t\t\tnavigator: {}\n\t\t\t});\n\t\t\treturn config;\n\t    }\n\n\t    this.updateElementConfig = function(type) {\n\t    \tif (!self.elements[type]['loadConfig']) {\n\t\t    \tvar requestKey = 'elements.' + type;\n\t\t    \t$.ajax({\n\t                url: this.getUrl('mgzbuilder/ajax/loadConfig'),\n\t                type:'POST',\n\t                data: {\n\t                \tkey: requestKey,\n\t                \tclass: $rootScope.builderConfig.profile.builder\n\t                },\n\t            \tdataType: 'json',\n\t                success: function(data) {\n\t            \t\tself.elements[type]['fields'] = data.config.fields;\n\t            \t\tself.elements[type]['loadConfig'] = true;\n\t                }\n\t            });\n\t\t    }\n\t    }\n\n\t\tthis.getUrl = function(url) {\n\t\t\treturn $rootScope.builderConfig.baseUrl + url;\n\t\t}\n\n\t\tthis.getUniqueId = function (size) {\n\t        var code = Math.random() * 25 + 65 | 0,\n\t            idstr = String.fromCharCode(code);\n\n\t        size = size || 12;\n\n\t        while (idstr.length < size) {\n\t            code = Math.floor(Math.random() * 42 + 48);\n\n\t            if (code < 58 || code > 64) {\n\t                idstr += String.fromCharCode(code);\n\t            }\n\t        }\n\n\t        return idstr.toLowerCase();\n\t    }\n\n\t    this.canReplace = function(elem) {\n\t\t\tif (!elem.builder.modalVisible) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.isVisibleElement = function(elem) {\n\t\t\tif (elem.hasOwnProperty('modalVisible') && !elem['modalVisible']) return false;\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.getElementType = function(eleType) {\n\t\t\tvar _types = eleType.split('-');\n\t\t\tvar type = '';\n\t\t\tfor (var i = 0; i < _types.length; i++) {\n\t\t\t\tvar _types1 = _types[i].split('_');\n\t\t\t\tfor (var x = 0; x < _types1.length; x++) {\n\t\t\t\t\ttype += (_types1[x].charAt(0).toUpperCase() + _types1[x].substr(1));\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn type;\n\t\t}\n\n\t\tthis.getEl = function(elem) {\n\t\t\treturn $('.mgz-builder .' + elem.id);\n\t\t}\n\n\t\t// Clone parent styles\n\t\tthis.previewStyles = function(elem) {\n\t\t\tvar _elem = $('#' + elem.builder.oldId + '-style');\n\t\t\tvar oldId = '\\\\.' + elem.builder.oldId;\n\t\t\tvar newId = '.' + elem.id;\n\t\t\tvar regex = new RegExp(oldId, 'g');\n\t\t\tvar styleHtml = _elem[0].outerHTML.replace(regex, newId);\n\t\t\tstyleHtml = styleHtml.replace(elem.builder.oldId + '-style', elem.id + '-style');\n\t\t\t$('#' + elem.builder.oldId + '-style').after(styleHtml);\n\t\t\tif (elem.elements) {\n\t\t\t\tangular.forEach(elem.elements, function(_elem, index) {\n\t\t\t\t\tself.previewStyles(_elem);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn elementManagerService;\n});","Magento_LoginAsCustomerAssistance/js/opt-in.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    return function (config, element) {\n        $(element).on('submit', function () {\n            this.elements['assistance_allowed'].value =\n                this.elements['assistance_allowed_checkbox'].checked ?\n                    config.allowAccess : config.denyAccess;\n        });\n    };\n});\n","Magento_GoogleAnalytics/js/google-analytics.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/* jscs:disable */\n/* eslint-disable */\ndefine([\n    'jquery',\n    'mage/cookies'\n], function ($) {\n    'use strict';\n\n    /**\n     * @param {Object} config\n     */\n    return function (config) {\n        var allowServices = false,\n            allowedCookies,\n            allowedWebsites;\n\n        if (config.isCookieRestrictionModeEnabled) {\n            allowedCookies = $.mage.cookies.get(config.cookieName);\n\n            if (allowedCookies !== null) {\n                allowedWebsites = JSON.parse(allowedCookies);\n\n                if (allowedWebsites[config.currentWebsite] === 1) {\n                    allowServices = true;\n                }\n            }\n        } else {\n            allowServices = true;\n        }\n\n        if (allowServices) {\n            (function (i, s, o, g, r, a, m) {\n                i.GoogleAnalyticsObject = r;\n                i[r] = i[r] || function () {\n                        (i[r].q = i[r].q || []).push(arguments)\n                    }, i[r].l = 1 * new Date();\n                a = s.createElement(o),\n                    m = s.getElementsByTagName(o)[0];\n                a.async = 1;\n                a.src = g;\n                m.parentNode.insertBefore(a, m)\n            })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');\n\n            // Process page info\n            ga('create', config.pageTrackingData.accountId, 'auto');\n\n            if (config.pageTrackingData.isAnonymizedIpActive) {\n                ga('set', 'anonymizeIp', true);\n            }\n\n            // Process orders data\n            if (config.ordersTrackingData.hasOwnProperty('currency')) {\n                ga('require', 'ec', 'ec.js');\n\n                ga('set', 'currencyCode', config.ordersTrackingData.currency);\n\n                // Collect product data for GA\n                if (config.ordersTrackingData.products) {\n                    $.each(config.ordersTrackingData.products, function (index, value) {\n                        ga('ec:addProduct', value);\n                    });\n                }\n\n                // Collect orders data for GA\n                if (config.ordersTrackingData.orders) {\n                    $.each(config.ordersTrackingData.orders, function (index, value) {\n                        ga('ec:setAction', 'purchase', value);\n                    });\n                }\n\n                ga('send', 'pageview');\n            } else {\n                // Process Data if not orders\n                ga('send', 'pageview' + config.pageTrackingData.optPageUrl);\n            }\n        }\n    }\n});\n","Magento_Paypal/js/order-review.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Ui/js/modal/alert',\n    'jquery-ui-modules/widget',\n    'mage/translate',\n    'mage/mage',\n    'mage/validation'\n], function ($, alert) {\n    'use strict';\n\n    $.widget('mage.orderReview', {\n        options: {\n            orderReviewSubmitSelector: '#review-button',\n            shippingSelector: '#shipping_method',\n            shippingSubmitFormSelector: null,\n            updateOrderSelector: '#update-order',\n            billingAsShippingSelector: '#billing\\\\:as_shipping',\n            updateContainerSelector: '#details-reload',\n            waitLoadingContainer: '#review-please-wait',\n            shippingMethodContainer: '#shipping-method-container',\n            agreementSelector: 'div.checkout-agreements input',\n            isAjax: false,\n            updateShippingMethodSubmitSelector: '#update-shipping-method-submit',\n            shippingMethodUpdateUrl: null,\n            updateOrderSubmitUrl: null,\n            canEditShippingMethod: false\n        },\n\n        /**\n         * Widget instance properties\n         */\n        triggerPropertyChange: true,\n        isShippingSubmitForm: false,\n\n        /** @inheritdoc */\n        _create: function () {\n            var isDisable;\n\n            //change handler for ajaxEnabled\n            if (this.options.isAjax) {\n                this._submitOrder = this._ajaxSubmitOrder;\n            }\n\n            this.element.on('click', this.options.orderReviewSubmitSelector, $.proxy(this._submitOrder, this))\n                .on('click', this.options.billingAsShippingSelector, $.proxy(this._shippingTobilling, this))\n                .on('change',\n                    this.options.shippingSelector,\n                    $.proxy(this._submitUpdateOrder,\n                        this,\n                        this.options.updateOrderSubmitUrl,\n                        this.options.updateContainerSelector\n                    )\n                ).find(this.options.updateOrderSelector).on('click', $.proxy(this._updateOrderHandler, this)).end()\n                .find(this.options.updateShippingMethodSubmitSelector).hide().end();\n            this._shippingTobilling();\n\n            if ($(this.options.shippingSubmitFormSelector).length && this.options.canEditShippingMethod) {\n                this.isShippingSubmitForm = true;\n                $(this.options.shippingSubmitFormSelector)\n                    .find(this.options.updateShippingMethodSubmitSelector).hide().end()\n                    .on('change',\n                        this.options.shippingSelector,\n                        $.proxy(\n                            this._submitUpdateOrder,\n                            this,\n                            $(this.options.shippingSubmitFormSelector).prop('action'),\n                            this.options.updateContainerSelector\n                        )\n                    );\n                this._updateOrderSubmit(!$(this.options.shippingSubmitFormSelector)\n                    .find(this.options.shippingSelector).val());\n            } else {\n                isDisable = this.isShippingSubmitForm && this.element.find(this.options.shippingSelector).val();\n                this.element\n                    .on('input propertychange', ':input[name]',\n                        $.proxy(this._updateOrderSubmit, this, isDisable, this._onShippingChange)\n                    ).find('select').not(this.options.shippingSelector).on('change', this._propertyChange);\n                this._updateOrderSubmit(isDisable);\n            }\n        },\n\n        /**\n         * show ajax loader\n         */\n        _ajaxBeforeSend: function () {\n            this.element.find(this.options.waitLoadingContainer).show();\n        },\n\n        /**\n         * hide ajax loader\n         */\n        _ajaxComplete: function () {\n            this.element.find(this.options.waitLoadingContainer).hide();\n        },\n\n        /**\n         * trigger propertychange for input type select\n         */\n        _propertyChange: function () {\n            $(this).trigger('propertychange');\n        },\n\n        /**\n         * trigger change for the update of shipping methods from server\n         */\n        _updateOrderHandler: function () {\n            $(this.options.shippingSelector).trigger('change');\n        },\n\n        /**\n         * Attempt to submit order\n         */\n        _submitOrder: function () {\n            if (this._validateForm()) {\n                this.element.find(this.options.updateOrderSelector).fadeTo(0, 0.5)\n                    .end().find(this.options.waitLoadingContainer).show()\n                    .end().submit();\n                this._updateOrderSubmit(true);\n            }\n        },\n\n        /**\n         * Attempt to ajax submit order\n         */\n        _ajaxSubmitOrder: function () {\n            if (this.element.find(this.options.waitLoadingContainer).is(':visible')) {\n                return false;\n            }\n            $.ajax({\n                url: this.element.prop('action'),\n                type: 'post',\n                context: this,\n                data: {\n                    isAjax: 1\n                },\n                dataType: 'json',\n                beforeSend: this._ajaxBeforeSend,\n                complete: this._ajaxComplete,\n\n                /** @inheritdoc */\n                success: function (response) {\n                    var msg;\n\n                    if ($.type(response) === 'object' && !$.isEmptyObject(response)) {\n                        if (response['error_messages']) {\n                            this._ajaxComplete();\n                            msg = response['error_messages'];\n\n                            /* eslint-disable max-depth */\n                            if (msg) {\n                                if ($.type(msg) === 'array') {\n                                    msg = msg.join('\\n');\n                                }\n                            }\n\n                            /* eslint-enablemax-depth */\n                            alert({\n                                content: msg\n                            });\n\n                            return false;\n                        }\n\n                        if (response.redirect) {\n                            $.mage.redirect(response.redirect);\n\n                            return false;\n                        } else if (response.success) {\n                            $.mage.redirect(this.options.successUrl);\n\n                            return false;\n                        }\n                        this._ajaxComplete();\n                        alert({\n                            content: $.mage.__('Sorry, something went wrong.')\n                        });\n                    }\n                },\n\n                /** @inheritdoc */\n                error: function () {\n                    alert({\n                        content: $.mage.__('Sorry, something went wrong. Please try again later.')\n                    });\n                    this._ajaxComplete();\n                }\n            });\n        },\n\n        /**\n         * Validate Order form\n         */\n        _validateForm: function () {\n            this.element.find(this.options.agreementSelector).off('change').on('change', $.proxy(function () {\n                var isValid = this._validateForm();\n\n                this._updateOrderSubmit(!isValid);\n            }, this));\n\n            if (this.element.data('mageValidation')) {\n                return this.element.validation().valid();\n            }\n\n            return true;\n        },\n\n        /**\n         * Check/Set whether order can be submitted\n         * Also disables form submission element, if any\n         * @param {*} shouldDisable - whether should prevent order submission explicitly\n         * @param {Function} [fn] - function for shipping change handler\n         * @param {*} [*] - if true the property change will be set to true\n         */\n        _updateOrderSubmit: function (shouldDisable, fn) {\n            this._toggleButton(this.options.orderReviewSubmitSelector, shouldDisable);\n\n            if ($.type(fn) === 'function') {\n                fn.call(this);\n            }\n        },\n\n        /**\n         * Enable/Disable button\n         * @param {jQuery} button - button selector to be toggled\n         * @param {*} disable - boolean for toggling\n         */\n        _toggleButton: function (button, disable) {\n            $(button).prop({\n                'disabled': disable\n            }).toggleClass('no-checkout', disable).fadeTo(0, disable ? 0.5 : 1);\n        },\n\n        /**\n         * Copy element value from shipping to billing address\n         * @param {jQuery.Event} e - optional\n         */\n        _shippingTobilling: function (e) {\n            var isChecked, opacity;\n\n            if (this.options.shippingSubmitFormSelector) {\n                return false;\n            }\n            isChecked = $(this.options.billingAsShippingSelector).is(':checked');\n            opacity = isChecked ? 0.5 : 1;\n\n            if (isChecked) {\n                this.element.validation('clearError', ':input[name^=\"billing\"]');\n            }\n            $(':input[name^=\"shipping\"]', this.element).each($.proxy(function (key, value) {\n                var fieldObj = $(value.id.replace('shipping:', '#billing\\\\:'));\n\n                if (isChecked) {\n                    fieldObj = fieldObj.val($(value).val());\n                }\n                fieldObj.prop({\n                    'readonly': isChecked,\n                    'disabled': isChecked\n                }).fadeTo(0, opacity);\n\n                if (fieldObj.is('select')) {\n                    this.triggerPropertyChange = false;\n                    fieldObj.trigger('change');\n                }\n            }, this));\n\n            if (isChecked || e) {\n                this._updateOrderSubmit(true);\n            }\n            this.triggerPropertyChange = true;\n        },\n\n        /**\n         * Dispatch an ajax request of Update Order submission\n         * @param {*} url - url where to submit shipping method\n         * @param {*} resultId - id of element to be updated\n         */\n        _submitUpdateOrder: function (url, resultId) {\n            var isChecked, formData, callBackResponseHandler, shippingMethod;\n\n            if (this.element.find(this.options.waitLoadingContainer).is(':visible')) {\n                return false;\n            }\n            isChecked = $(this.options.billingAsShippingSelector).is(':checked');\n            formData = null;\n            callBackResponseHandler = null;\n            shippingMethod = $.trim($(this.options.shippingSelector).val());\n            this._shippingTobilling();\n\n            if (url && resultId && shippingMethod) {\n                this._updateOrderSubmit(true);\n                this._toggleButton(this.options.updateOrderSelector, true);\n\n                // form data and callBack updated based on the shipping Form element\n                if (this.isShippingSubmitForm) {\n                    formData = $(this.options.shippingSubmitFormSelector).serialize() + '&isAjax=true';\n\n                    /**\n                     * @param {Object} response\n                     */\n                    callBackResponseHandler = function (response) {\n                        $(resultId).html(response);\n                        this._updateOrderSubmit(false);\n                        this._ajaxComplete();\n                    };\n                } else {\n                    formData = this.element.serialize() + '&isAjax=true';\n\n                    /**\n                     * @param {Object} response\n                     */\n                    callBackResponseHandler = function (response) {\n                        $(resultId).html(response);\n                        this._ajaxShippingUpdate(shippingMethod);\n                    };\n                }\n\n                if (isChecked) {\n                    $(this.options.shippingSelect).prop('disabled', true);\n                }\n                $.ajax({\n                    url: url,\n                    type: 'post',\n                    context: this,\n                    beforeSend: this._ajaxBeforeSend,\n                    data: formData,\n                    success: callBackResponseHandler\n                });\n            }\n        },\n\n        /**\n         * Update Shipping Methods Element from server\n         * @param {*} shippingMethod\n         */\n        _ajaxShippingUpdate: function (shippingMethod) {\n            $.ajax({\n                url: this.options.shippingMethodUpdateUrl,\n                data: {\n                    isAjax: true,\n                    'shipping_method': shippingMethod\n                },\n                type: 'post',\n                context: this,\n\n                /** @inheritdoc */\n                success: function (response) {\n                    $(this.options.shippingMethodContainer).parent().html(response);\n                    this._toggleButton(this.options.updateOrderSelector, false);\n                    this._updateOrderSubmit(false);\n                },\n                complete: this._ajaxComplete\n            });\n        },\n\n        /**\n         * Actions on change Shipping Address data\n         */\n        _onShippingChange: function () {\n            if (this.triggerPropertyChange && $.trim($(this.options.shippingSelector).val())) {\n                this.element.find(this.options.shippingSelector).hide().end()\n                    .find(this.options.shippingSelector + '_update').show();\n            }\n        }\n    });\n\n    return $.mage.orderReview;\n});\n","Magento_Paypal/js/paypal-checkout.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Ui/js/modal/confirm',\n    'Magento_Customer/js/customer-data',\n    'jquery-ui-modules/widget',\n    'mage/mage'\n], function ($, confirm, customerData) {\n    'use strict';\n\n    $.widget('mage.paypalCheckout', {\n        options: {\n            originalForm:\n                'form:not(#product_addtocart_form_from_popup):has(input[name=\"product\"][value=%1])',\n            productId: 'input[type=\"hidden\"][name=\"product\"]',\n            ppCheckoutSelector: '[data-role=pp-checkout-url]',\n            ppCheckoutInput: '<input type=\"hidden\" data-role=\"pp-checkout-url\" name=\"return_url\" value=\"\"/>'\n        },\n\n        /**\n         * Initialize store credit events\n         * @private\n         */\n        _create: function () {\n            this.element.on('click', '[data-action=\"checkout-form-submit\"]', $.proxy(function (e) {\n                var $target = $(e.target),\n                    returnUrl = $target.data('checkout-url'),\n                    productId = $target.closest('form').find(this.options.productId).val(),\n                    originalForm = this.options.originalForm.replace('%1', productId),\n                    self = this,\n                    billingAgreement = customerData.get('paypal-billing-agreement');\n\n                e.preventDefault();\n\n                if (billingAgreement().askToCreate) {\n                    confirm({\n                        content: billingAgreement().confirmMessage,\n                        actions: {\n\n                            /**\n                             * Confirmation handler\n                             *\n                             */\n                            confirm: function () {\n                                returnUrl = billingAgreement().confirmUrl;\n                                self._redirect(returnUrl, originalForm);\n                            },\n\n                            /**\n                             * Cancel confirmation handler\n                             *\n                             */\n                            cancel: function (event) {\n                                if (event && !$(event.target).hasClass('action-close')) {\n                                    self._redirect(returnUrl);\n                                }\n                            }\n                        }\n                    });\n                } else {\n                    this._redirect(returnUrl, originalForm);\n                }\n            }, this));\n        },\n\n        /**\n         * Redirect to certain url, with optional form\n         * @param {String} returnUrl\n         * @param {HTMLElement} originalForm\n         *\n         */\n        _redirect: function (returnUrl, originalForm) {\n            var $form,\n                ppCheckoutInput;\n\n            if (this.options.isCatalogProduct) {\n                // find the form from which the button was clicked\n                $form = originalForm ? $(originalForm) : $($(this.options.shortcutContainerClass).closest('form'));\n\n                ppCheckoutInput = $form.find(this.options.ppCheckoutSelector)[0];\n\n                if (!ppCheckoutInput) {\n                    ppCheckoutInput = $(this.options.ppCheckoutInput);\n                    ppCheckoutInput.appendTo($form);\n                }\n                $(ppCheckoutInput).val(returnUrl);\n\n                $form.submit();\n            } else {\n                $.mage.redirect(returnUrl);\n            }\n        }\n    });\n\n    return $.mage.paypalCheckout;\n});\n","Magento_Paypal/js/view/review/actions/iframe.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @deprecated since version 2.2.0\n */\ndefine([\n    'uiComponent',\n    'Magento_Paypal/js/model/iframe'\n], function (Component, iframe) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Magento_Paypal/review/actions/iframe'\n        },\n\n        /**\n         * @return {*}\n         */\n        getCode: function () {\n            return this.index;\n        },\n\n        /**\n         * @return {String}\n         */\n        getActionUrl: function () {\n            return this.isInAction() ? window.checkoutConfig.payment.paypalIframe.actionUrl[this.getCode()] : '';\n        },\n\n        /**\n         * @return {Boolean}\n         */\n        afterSave: function () {\n            iframe.setIsInAction(true);\n\n            return false;\n        },\n\n        /**\n         * @return {*}\n         */\n        isInAction: function () {\n            return iframe.getIsInAction()();\n        },\n\n        /**\n         * @param {Object} context\n         * @return {Function}\n         */\n        placeOrder: function (context) {\n            return context.placeOrder.bind(context, this.afterSave);\n        }\n    });\n});\n","Magento_Paypal/js/view/payment/paypal-payments.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'uiComponent',\n    'Magento_Checkout/js/model/payment/renderer-list'\n], function (Component, rendererList) {\n    'use strict';\n\n    var isContextCheckout = window.checkoutConfig.payment.paypalExpress.isContextCheckout,\n        paypalExpress = 'Magento_Paypal/js/view/payment/method-renderer' +\n            (isContextCheckout ? '/in-context/checkout-express' : '/paypal-express');\n\n    rendererList.push(\n        {\n            type: 'paypal_express',\n            component: paypalExpress,\n            config: window.checkoutConfig.payment.paypalExpress.inContextConfig\n        },\n        {\n            type: 'payflow_express',\n            component: 'Magento_Paypal/js/view/payment/method-renderer/payflow-express'\n        },\n        {\n            type: 'payflow_express_bml',\n            component: 'Magento_Paypal/js/view/payment/method-renderer/payflow-express-bml'\n        },\n        {\n            type: 'payflowpro',\n            component: 'Magento_Paypal/js/view/payment/method-renderer/payflowpro-method'\n        },\n        {\n            type: 'payflow_link',\n            component: 'Magento_Paypal/js/view/payment/method-renderer/iframe-methods'\n        },\n        {\n            type: 'payflow_advanced',\n            component: 'Magento_Paypal/js/view/payment/method-renderer/iframe-methods'\n        },\n        {\n            type: 'hosted_pro',\n            component: 'Magento_Paypal/js/view/payment/method-renderer/iframe-methods'\n        },\n        {\n            type: 'paypal_billing_agreement',\n            component: 'Magento_Paypal/js/view/payment/method-renderer/paypal-billing-agreement'\n        }\n    );\n\n    /**\n     * Add view logic here if needed\n     **/\n    return Component.extend({});\n});\n","Magento_Paypal/js/view/payment/method-renderer/payflow-express-bml.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Paypal/js/view/payment/method-renderer/paypal-express-abstract'\n], function (Component) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Magento_Paypal/payment/payflow-express-bml'\n        }\n    });\n});\n","Magento_Paypal/js/view/payment/method-renderer/paypal-express.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Paypal/js/view/payment/method-renderer/paypal-express-abstract'\n], function (Component) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Magento_Paypal/payment/paypal-express'\n        }\n    });\n});\n","Magento_Paypal/js/view/payment/method-renderer/paypal-billing-agreement.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Checkout/js/view/payment/default',\n    'mage/validation'\n], function ($, Component) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Magento_Paypal/payment/paypal_billing_agreement-form',\n            selectedBillingAgreement: ''\n        },\n\n        /** @inheritdoc */\n        initObservable: function () {\n            this._super()\n                .observe('selectedBillingAgreement');\n\n            return this;\n        },\n\n        /**\n         * @return {*}\n         */\n        getTransportName: function () {\n            return window.checkoutConfig.payment.paypalBillingAgreement.transportName;\n        },\n\n        /**\n         * @return {*}\n         */\n        getBillingAgreements: function () {\n            return window.checkoutConfig.payment.paypalBillingAgreement.agreements;\n        },\n\n        /**\n         * @return {Object}\n         */\n        getData: function () {\n            var additionalData = null;\n\n            if (this.getTransportName()) {\n                additionalData = {};\n                additionalData[this.getTransportName()] = this.selectedBillingAgreement();\n            }\n\n            return {\n                'method': this.item.method,\n                'additional_data': additionalData\n            };\n        },\n\n        /**\n         * @return {jQuery}\n         */\n        validate: function () {\n            var form = '#billing-agreement-form';\n\n            return $(form).validation() && $(form).validation('isValid');\n        }\n    });\n});\n","Magento_Paypal/js/view/payment/method-renderer/paypal-express-abstract.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Checkout/js/view/payment/default',\n    'Magento_Paypal/js/action/set-payment-method',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Customer/js/customer-data'\n], function ($, Component, setPaymentMethodAction, additionalValidators, quote, customerData) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Magento_Paypal/payment/payflow-express-bml',\n            billingAgreement: ''\n        },\n\n        /** Init observable variables */\n        initObservable: function () {\n            this._super()\n                .observe('billingAgreement');\n\n            return this;\n        },\n\n        /** Open window with  */\n        showAcceptanceWindow: function (data, event) {\n            window.open(\n                $(event.currentTarget).attr('href'),\n                'olcwhatispaypal',\n                'toolbar=no, location=no,' +\n                ' directories=no, status=no,' +\n                ' menubar=no, scrollbars=yes,' +\n                ' resizable=yes, ,left=0,' +\n                ' top=0, width=400, height=350'\n            );\n\n            return false;\n        },\n\n        /** Returns payment acceptance mark link path */\n        getPaymentAcceptanceMarkHref: function () {\n            return window.checkoutConfig.payment.paypalExpress.paymentAcceptanceMarkHref;\n        },\n\n        /** Returns payment acceptance mark image path */\n        getPaymentAcceptanceMarkSrc: function () {\n            return window.checkoutConfig.payment.paypalExpress.paymentAcceptanceMarkSrc;\n        },\n\n        /** Returns billing agreement data */\n        getBillingAgreementCode: function () {\n            return window.checkoutConfig.payment.paypalExpress.billingAgreementCode[this.item.method];\n        },\n\n        /** Returns payment information data */\n        getData: function () {\n            var parent = this._super(),\n                additionalData = null;\n\n            if (this.getBillingAgreementCode()) {\n                additionalData = {};\n                additionalData[this.getBillingAgreementCode()] = this.billingAgreement();\n            }\n\n            return $.extend(true, parent, {\n                'additional_data': additionalData\n            });\n        },\n\n        /** Redirect to paypal */\n        continueToPayPal: function () {\n            if (additionalValidators.validate()) {\n                //update payment method information if additional data was changed\n                this.selectPaymentMethod();\n                setPaymentMethodAction(this.messageContainer).done(\n                    function () {\n                        customerData.invalidate(['cart']);\n                        $.mage.redirect(\n                            window.checkoutConfig.payment.paypalExpress.redirectUrl[quote.paymentMethod().method]\n                        );\n                    }\n                );\n\n                return false;\n            }\n        }\n    });\n});\n","Magento_Paypal/js/view/payment/method-renderer/payflowpro-method.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Payment/js/view/payment/iframe',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'Magento_Checkout/js/action/set-payment-information',\n    'Magento_Checkout/js/model/full-screen-loader',\n    'Magento_Vault/js/view/payment/vault-enabler'\n], function ($, Component, additionalValidators, setPaymentInformationAction, fullScreenLoader, VaultEnabler) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Magento_Paypal/payment/payflowpro-form'\n        },\n        placeOrderHandler: null,\n        validateHandler: null,\n\n        /**\n         * @returns {exports.initialize}\n         */\n        initialize: function () {\n            this._super();\n            this.vaultEnabler = new VaultEnabler();\n            this.vaultEnabler.setPaymentCode(this.getVaultCode());\n\n            return this;\n        },\n\n        /**\n         * @param {Function} handler\n         */\n        setPlaceOrderHandler: function (handler) {\n            this.placeOrderHandler = handler;\n        },\n\n        /**\n         * @param {Function} handler\n         */\n        setValidateHandler: function (handler) {\n            this.validateHandler = handler;\n        },\n\n        /**\n         * @returns {Object}\n         */\n        context: function () {\n            return this;\n        },\n\n        /**\n         * @returns {Boolean}\n         */\n        isShowLegend: function () {\n            return true;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getCode: function () {\n            return 'payflowpro';\n        },\n\n        /**\n         * @returns {Boolean}\n         */\n        isActive: function () {\n            return true;\n        },\n\n        /**\n         * @override\n         */\n        placeOrder: function () {\n            var self = this;\n\n            if (this.validateHandler() &&\n                additionalValidators.validate() &&\n                this.isPlaceOrderActionAllowed() === true\n            ) {\n                this.isPlaceOrderActionAllowed(false);\n                fullScreenLoader.startLoader();\n                $.when(\n                    setPaymentInformationAction(this.messageContainer, self.getData())\n                ).done(\n                    function () {\n                        self.placeOrderHandler().fail(\n                            function () {\n                                fullScreenLoader.stopLoader();\n                            }\n                        );\n                    }\n                ).always(\n                    function () {\n                        self.isPlaceOrderActionAllowed(true);\n                        fullScreenLoader.stopLoader();\n                    }\n                );\n            }\n        },\n\n        /**\n         * @returns {Object}\n         */\n        getData: function () {\n            var data = {\n                'method': this.getCode(),\n                'additional_data': {\n                    'cc_type': this.creditCardType(),\n                    'cc_exp_year': this.creditCardExpYear(),\n                    'cc_exp_month': this.creditCardExpMonth(),\n                    'cc_last_4': this.creditCardNumber().substr(-4)\n                }\n            };\n\n            this.vaultEnabler.visitAdditionalData(data);\n\n            return data;\n        },\n\n        /**\n         * @returns {Bool}\n         */\n        isVaultEnabled: function () {\n            return this.vaultEnabler.isVaultEnabled();\n        },\n\n        /**\n         * @returns {String}\n         */\n        getVaultCode: function () {\n            return 'payflowpro_cc_vault';\n        }\n    });\n});\n","Magento_Paypal/js/view/payment/method-renderer/payflow-express.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Paypal/js/view/payment/method-renderer/paypal-express-abstract'\n], function (Component) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Magento_Paypal/payment/payflow-express'\n        }\n    });\n});\n","Magento_Paypal/js/view/payment/method-renderer/iframe-methods.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'Magento_Checkout/js/view/payment/default',\n    'Magento_Paypal/js/model/iframe',\n    'Magento_Checkout/js/model/full-screen-loader'\n], function (Component, iframe, fullScreenLoader) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Magento_Paypal/payment/iframe-methods',\n            paymentReady: false\n        },\n        redirectAfterPlaceOrder: false,\n        isInAction: iframe.isInAction,\n\n        /**\n         * @return {exports}\n         */\n        initObservable: function () {\n            this._super()\n                .observe('paymentReady');\n\n            return this;\n        },\n\n        /**\n         * @return {*}\n         */\n        isPaymentReady: function () {\n            return this.paymentReady();\n        },\n\n        /**\n         * Get action url for payment method iframe.\n         * @returns {String}\n         */\n        getActionUrl: function () {\n            return this.isInAction() ? window.checkoutConfig.payment.paypalIframe.actionUrl[this.getCode()] : '';\n        },\n\n        /**\n         * Places order in pending payment status.\n         */\n        placePendingPaymentOrder: function () {\n            if (this.placeOrder()) {\n                fullScreenLoader.startLoader();\n                this.isInAction(true);\n                // capture all click events\n                document.addEventListener('click', iframe.stopEventPropagation, true);\n            }\n        },\n\n        /**\n         * @return {*}\n         */\n        getPlaceOrderDeferredObject: function () {\n            var self = this;\n\n            return this._super().fail(function () {\n                fullScreenLoader.stopLoader();\n                self.isInAction(false);\n                document.removeEventListener('click', iframe.stopEventPropagation, true);\n            });\n        },\n\n        /**\n         * After place order callback\n         */\n        afterPlaceOrder: function () {\n            if (this.iframeIsLoaded) {\n                document.getElementById(this.getCode() + '-iframe')\n                    .contentWindow.location.reload();\n            }\n\n            this.paymentReady(true);\n            this.iframeIsLoaded = true;\n            this.isPlaceOrderActionAllowed(true);\n            fullScreenLoader.stopLoader();\n        },\n\n        /**\n         * Hide loader when iframe is fully loaded.\n         */\n        iframeLoaded: function () {\n            fullScreenLoader.stopLoader();\n        }\n    });\n});\n","Magento_Paypal/js/view/payment/method-renderer/payflowpro/vault.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Vault/js/view/payment/method-renderer/vault'\n], function (VaultComponent) {\n    'use strict';\n\n    return VaultComponent.extend({\n        defaults: {\n            template: 'Magento_Vault/payment/form'\n        },\n\n        /**\n         * @returns {String}\n         */\n        getToken: function () {\n            return this.publicHash;\n        },\n\n        /**\n         * Get last 4 digits of card\n         * @returns {String}\n         */\n        getMaskedCard: function () {\n            return this.details['cc_last_4'];\n        },\n\n        /**\n         * Get expiration date\n         * @returns {String}\n         */\n        getExpirationDate: function () {\n            return this.details['cc_exp_month'] + '/' + this.details['cc_exp_year'];\n        },\n\n        /**\n         * Get card type\n         * @returns {String}\n         */\n        getCardType: function () {\n            return this.details['cc_type'];\n        }\n    });\n});\n","Magento_Paypal/js/view/payment/method-renderer/in-context/checkout-express.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'Magento_Paypal/js/view/payment/method-renderer/paypal-express-abstract',\n    'Magento_Paypal/js/in-context/express-checkout-wrapper',\n    'Magento_Paypal/js/action/set-payment-method',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'Magento_Ui/js/model/messageList',\n    'Magento_Ui/js/lib/view/utils/async'\n], function ($, Component, Wrapper, setPaymentMethod, additionalValidators, messageList) {\n    'use strict';\n\n    return Component.extend(Wrapper).extend({\n        defaults: {\n            template: 'Magento_Paypal/payment/paypal-express-in-context',\n            validationElements: 'input'\n        },\n\n        /**\n         * Listens element on change and validate it.\n         *\n         * @param {HTMLElement} context\n         */\n        initListeners: function (context) {\n            $.async(this.validationElements, context, function (element) {\n                $(element).on('change', function () {\n                    this.validate();\n                }.bind(this));\n            }.bind(this));\n        },\n\n        /**\n         *  Validates Smart Buttons\n         */\n        validate: function () {\n            this._super();\n\n            if (this.actions) {\n                additionalValidators.validate(true) ? this.actions.enable() : this.actions.disable();\n            }\n        },\n\n        /** @inheritdoc */\n        beforePayment: function (resolve, reject) {\n            var promise = $.Deferred();\n\n            setPaymentMethod(this.messageContainer).done(function () {\n                return promise.resolve();\n            }).fail(function (response) {\n                var error;\n\n                try {\n                    error = JSON.parse(response.responseText);\n                } catch (exception) {\n                    error = this.paymentActionError;\n                }\n\n                this.addError(error);\n\n                return reject(new Error(error));\n            }.bind(this));\n\n            return promise;\n        },\n\n        /**\n         * Populate client config with all required data\n         *\n         * @return {Object}\n         */\n        prepareClientConfig: function () {\n            this._super();\n            this.clientConfig.quoteId = window.checkoutConfig.quoteData['entity_id'];\n            this.clientConfig.customerId = window.customerData.id;\n            this.clientConfig.button = 0;\n\n            return this.clientConfig;\n        },\n\n        /**\n         * Adding logic to be triggered onClick action for smart buttons component\n         */\n        onClick: function () {\n            additionalValidators.validate();\n        },\n\n        /**\n         * Adds error message\n         *\n         * @param {String} message\n         */\n        addError: function (message) {\n            messageList.addErrorMessage({\n                message: message\n            });\n        },\n\n        /**\n         * After payment execute\n         *\n         * @param {Object} res\n         * @param {Function} resolve\n         * @param {Function} reject\n         *\n         * @return {*}\n         */\n        afterPayment: function (res, resolve, reject) {\n            if (res.success) {\n                return resolve(res.token);\n            }\n\n            this.addError(res['error_message']);\n\n            return reject(new Error(res['error_message']));\n        },\n\n        /**\n         * After onAuthorize execute\n         *\n         * @param {Object} res\n         * @param {Function} resolve\n         * @param {Function} reject\n         * @param {Object} actions\n         *\n         * @return {*}\n         */\n        afterOnAuthorize: function (res, resolve, reject, actions) {\n            if (res.success) {\n                resolve();\n\n                return actions.redirect(res.redirectUrl);\n            }\n\n            this.addError(res['error_message']);\n\n            return reject(new Error(res['error_message']));\n        }\n    });\n});\n","Magento_Paypal/js/model/iframe-redirect.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'ko',\n    'Magento_Paypal/js/model/iframe',\n    'Magento_Ui/js/model/messageList'\n],\nfunction (ko, iframe, messageList) {\n    'use strict';\n\n    return function (cartUrl, errorMessage, goToSuccessPage, successUrl) {\n        if (this === window.self) {\n            window.location = cartUrl;\n        }\n\n        if (!!errorMessage.message) { //eslint-disable-line no-extra-boolean-cast\n            document.removeEventListener('click', iframe.stopEventPropagation, true);\n            iframe.isInAction(false);\n            messageList.addErrorMessage(errorMessage);\n        } else if (!!goToSuccessPage) { //eslint-disable-line no-extra-boolean-cast\n            window.location = successUrl;\n        } else {\n            window.location = cartUrl;\n        }\n    };\n});\n","Magento_Paypal/js/model/iframe.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine(['ko'], function (ko) {\n    'use strict';\n\n    var isInAction = ko.observable(false);\n\n    return {\n        isInAction: isInAction,\n\n        /**\n         * @param {jQuery.Event} event\n         */\n        stopEventPropagation: function (event) {\n            event.stopImmediatePropagation();\n            event.preventDefault();\n        }\n    };\n});\n","Magento_Paypal/js/action/set-payment-method.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Checkout/js/model/quote',\n    'Magento_Checkout/js/action/set-payment-information'\n], function (quote, setPaymentInformation) {\n    'use strict';\n\n    return function (messageContainer) {\n        return setPaymentInformation(messageContainer, quote.paymentMethod());\n    };\n});\n","Magento_Paypal/js/in-context/product-express-checkout.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'underscore',\n    'jquery',\n    'uiComponent',\n    'Magento_Paypal/js/in-context/express-checkout-wrapper',\n    'Magento_Customer/js/customer-data'\n], function (_, $, Component, Wrapper, customerData) {\n    'use strict';\n\n    return Component.extend(Wrapper).extend({\n        defaults: {\n            productFormSelector: '#product_addtocart_form',\n            declinePayment: false,\n            formInvalid: false,\n            productAddedToCart: false\n        },\n\n        /** @inheritdoc */\n        initialize: function (config, element) {\n            var cart = customerData.get('cart'),\n                customer = customerData.get('customer'),\n                isGuestCheckoutAllowed;\n\n            this._super();\n\n            isGuestCheckoutAllowed = cart().isGuestCheckoutAllowed;\n\n            if (typeof isGuestCheckoutAllowed === 'undefined') {\n                isGuestCheckoutAllowed = config.clientConfig.isGuestCheckoutAllowed;\n            }\n\n            if (config.clientConfig.isVisibleOnProductPage) {\n                this.renderPayPalButtons(element);\n            }\n\n            this.declinePayment = !customer().firstname && !isGuestCheckoutAllowed;\n\n            return this;\n        },\n\n        /** @inheritdoc */\n        onClick: function () {\n            var $form = $(this.productFormSelector);\n\n            if (!this.declinePayment && !this.productAddedToCart) {\n                $form.submit();\n                this.formInvalid = !$form.validation('isValid');\n                this.productAddedToCart = true;\n            }\n        },\n\n        /** @inheritdoc */\n        beforePayment: function (resolve, reject) {\n            var promise = $.Deferred();\n\n            if (this.declinePayment) {\n                this.addError(this.signInMessage, 'warning');\n                reject();\n            } else if (this.formInvalid) {\n                reject();\n            } else {\n                $(document).on('ajax:addToCart', function (e, data) {\n                    if (_.isEmpty(data.response)) {\n                        return promise.resolve();\n                    }\n\n                    return reject();\n                });\n                $(document).on('ajax:addToCart:error', reject);\n            }\n\n            return promise;\n        },\n\n        /**\n         * After payment execute\n         *\n         * @param {Object} res\n         * @param {Function} resolve\n         * @param {Function} reject\n         *\n         * @return {*}\n         */\n        afterPayment: function (res, resolve, reject) {\n            if (res.success) {\n                return resolve(res.token);\n            }\n\n            this.addAlert(res['error_message']);\n\n            return reject(new Error(res['error_message']));\n        },\n\n        /** @inheritdoc */\n        prepareClientConfig: function () {\n            this._super();\n            this.clientConfig.quoteId = '';\n            this.clientConfig.customerId = '';\n\n            return this.clientConfig;\n        },\n\n        /** @inheritdoc */\n        onError: function (err) {\n            this.productAddedToCart = false;\n            this._super(err);\n        },\n\n        /** @inheritdoc */\n        onCancel: function (data, actions) {\n            this.productAddedToCart = false;\n            this._super(data, actions);\n        },\n\n        /** @inheritdoc */\n        afterOnAuthorize: function (res, resolve, reject, actions) {\n            this.productAddedToCart = false;\n\n            return this._super(res, resolve, reject, actions);\n        }\n    });\n});\n","Magento_Paypal/js/in-context/paypal-sdk.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    var dfd = $.Deferred();\n\n    /**\n     * Loads the PayPal SDK object\n     * @param {String} paypalUrl - the url of the PayPal SDK\n     */\n    return function loadPaypalScript(paypalUrl) {\n        //configuration for loaded PayPal script\n        require.config({\n            paths: {\n                paypalSdk: paypalUrl\n            },\n            shim: {\n                paypalSdk: {\n                    exports: 'paypal'\n                }\n            }\n        });\n\n        if (dfd.state() !== 'resolved') {\n            require(['paypalSdk'], function (paypalObject) {\n                dfd.resolve(paypalObject);\n            });\n        }\n\n        return dfd.promise();\n    };\n});\n","Magento_Paypal/js/in-context/express-checkout-smart-buttons.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/* eslint-disable max-nested-callbacks */\ndefine([\n    'underscore',\n    'jquery',\n    'Magento_Paypal/js/in-context/paypal-sdk',\n    'domReady!'\n], function (_, $, paypalSdk) {\n    'use strict';\n\n    /**\n     * Triggers beforePayment action on PayPal buttons\n     *\n     * @param {Object} clientConfig\n     * @returns {Object} jQuery promise\n     */\n    function performCreateOrder(clientConfig) {\n        var params = {\n            'quote_id': clientConfig.quoteId,\n            'customer_id': clientConfig.customerId || '',\n            'form_key': clientConfig.formKey,\n            button: clientConfig.button\n        };\n\n        return $.Deferred(function (deferred) {\n            clientConfig.rendererComponent.beforePayment(deferred.resolve, deferred.reject).then(function () {\n                $.post(clientConfig.getTokenUrl, params).done(function (res) {\n                    clientConfig.rendererComponent.afterPayment(res, deferred.resolve, deferred.reject);\n                }).fail(function (jqXHR, textStatus, err) {\n                    clientConfig.rendererComponent.catchPayment(err, deferred.resolve, deferred.reject);\n                });\n            });\n        }).promise();\n    }\n\n    /**\n     * Triggers beforeOnAuthorize action on PayPal buttons\n     * @param {Object} clientConfig\n     * @param {Object} data\n     * @param {Object} actions\n     * @returns {Object} jQuery promise\n     */\n    function performOnApprove(clientConfig, data, actions) {\n        var params = {\n            paymentToken: data.orderID,\n            payerId: data.payerID,\n            quoteId: clientConfig.quoteId || '',\n            customerId: clientConfig.customerId || '',\n            'form_key': clientConfig.formKey\n        };\n\n        return $.Deferred(function (deferred) {\n            clientConfig.rendererComponent.beforeOnAuthorize(deferred.resolve, deferred.reject, actions)\n                .then(function () {\n                    $.post(clientConfig.onAuthorizeUrl, params).done(function (res) {\n                        clientConfig.rendererComponent\n                            .afterOnAuthorize(res, deferred.resolve, deferred.reject, actions);\n                    }).fail(function (jqXHR, textStatus, err) {\n                        clientConfig.rendererComponent.catchOnAuthorize(err, deferred.resolve, deferred.reject);\n                    });\n                });\n        }).promise();\n    }\n\n    return function (clientConfig, element) {\n        paypalSdk(clientConfig.sdkUrl).done(function (paypal) {\n            paypal.Buttons({\n                style: clientConfig.styles,\n\n                /**\n                 * onInit is called when the button first renders\n                 * @param {Object} data\n                 * @param {Object} actions\n                 */\n                onInit: function (data, actions) {\n                    clientConfig.rendererComponent.validate(actions);\n                },\n\n                /**\n                 * Triggers beforePayment action on PayPal buttons\n                 * @returns {Object} jQuery promise\n                 */\n                createOrder: function () {\n                    return performCreateOrder(clientConfig);\n                },\n\n                /**\n                 * Triggers beforeOnAuthorize action on PayPal buttons\n                 * @param {Object} data\n                 * @param {Object} actions\n                 */\n                onApprove: function (data, actions) {\n                    performOnApprove(clientConfig, data, actions);\n                },\n\n                /**\n                 * Execute logic on Paypal button click\n                 */\n                onClick: function () {\n                    clientConfig.rendererComponent.validate();\n                    clientConfig.rendererComponent.onClick();\n                },\n\n                /**\n                 * Process cancel action\n                 * @param {Object} data\n                 * @param {Object} actions\n                 */\n                onCancel: function (data, actions) {\n                    clientConfig.rendererComponent.onCancel(data, actions);\n                },\n\n                /**\n                 * Process errors\n                 *\n                 * @param {Error} err\n                 */\n                onError: function (err) {\n                    clientConfig.rendererComponent.onError(err);\n                }\n            }).render(element);\n        });\n    };\n});\n","Magento_Paypal/js/in-context/button.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'uiComponent',\n    'jquery',\n    'Magento_Paypal/js/in-context/express-checkout-wrapper',\n    'Magento_Customer/js/customer-data'\n], function (Component, $, Wrapper, customerData) {\n    'use strict';\n\n    return Component.extend(Wrapper).extend({\n        defaults: {\n            declinePayment: false\n        },\n\n        /** @inheritdoc */\n        initialize: function (config, element) {\n            var cart = customerData.get('cart'),\n                customer = customerData.get('customer');\n\n            this._super();\n            this.renderPayPalButtons(element);\n            this.declinePayment = !customer().firstname && !cart().isGuestCheckoutAllowed;\n\n            return this;\n        },\n\n        /** @inheritdoc */\n        beforePayment: function (resolve, reject) {\n            var promise = $.Deferred();\n\n            if (this.declinePayment) {\n                this.addError(this.signInMessage, 'warning');\n\n                reject();\n            } else {\n                promise.resolve();\n            }\n\n            return promise;\n        },\n\n        /** @inheritdoc */\n        prepareClientConfig: function () {\n            this._super();\n\n            return this.clientConfig;\n        }\n    });\n});\n","Magento_Paypal/js/in-context/billing-agreement.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'Magento_Ui/js/modal/confirm',\n    'Magento_Customer/js/customer-data'\n], function ($, confirm, customerData) {\n    'use strict';\n\n    $.widget('mage.billingAgreement', {\n        options: {\n            invalidateOnLoad: false,\n            cancelButtonSelector: '.block-billing-agreements-view button.cancel',\n            cancelMessage: '',\n            cancelUrl: ''\n        },\n\n        /**\n         * Initialize billing agreements events\n         * @private\n         */\n        _create: function () {\n            var self = this;\n\n            if (this.options.invalidateOnLoad) {\n                this.invalidate();\n            }\n            $(this.options.cancelButtonSelector).on('click', function () {\n                confirm({\n                    content: self.options.cancelMessage,\n                    actions: {\n                        /**\n                         * 'Confirm' action handler.\n                         */\n                        confirm: function () {\n                            self.invalidate();\n                            window.location.href = self.options.cancelUrl;\n                        }\n                    }\n                });\n\n                return false;\n            });\n        },\n\n        /**\n         * clear paypal billing agreement customer data\n         * @returns void\n         */\n        invalidate: function () {\n            customerData.invalidate(['paypal-billing-agreement']);\n        }\n    });\n\n    return $.mage.billingAgreement;\n});\n","Magento_Paypal/js/in-context/express-checkout-wrapper.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'mage/translate',\n    'Magento_Customer/js/customer-data',\n    'Magento_Paypal/js/in-context/express-checkout-smart-buttons',\n    'Magento_Ui/js/modal/alert',\n    'mage/cookies'\n], function ($, $t, customerData, checkoutSmartButtons, alert) {\n    'use strict';\n\n    return {\n        defaults: {\n            paymentActionError: $t('Something went wrong with your request. Please try again later.'),\n            signInMessage: $t('To check out, please sign in with your email address.')\n        },\n\n        /**\n         * Render PayPal buttons using checkout.js\n         */\n        renderPayPalButtons: function (element) {\n            checkoutSmartButtons(this.prepareClientConfig(), element);\n        },\n\n        /**\n         * Validate payment method\n         *\n         * @param {Object} actions\n         */\n        validate: function (actions) {\n            this.actions = actions || this.actions;\n        },\n\n        /**\n         * Execute logic on Paypal button click\n         */\n        onClick: function () {},\n\n        /**\n         * Before payment execute\n         *\n         * @param {Function} resolve\n         * @param {Function} reject\n         * @return {*}\n         */\n        beforePayment: function (resolve, reject) { //eslint-disable-line no-unused-vars\n            return $.Deferred().resolve();\n        },\n\n        /**\n         * After payment execute\n         *\n         * @param {Object} res\n         * @param {Function} resolve\n         * @param {Function} reject\n         *\n         * @return {*}\n         */\n        afterPayment: function (res, resolve, reject) {\n\n            if (res.success) {\n                return resolve(res.token);\n            }\n\n            return reject(new Error(res['error_message']));\n        },\n\n        /**\n         * Catch payment\n         *\n         * @param {Error} err\n         * @param {Function} resolve\n         * @param {Function} reject\n         */\n        catchPayment: function (err, resolve, reject) {\n            this.addAlert(this.paymentActionError);\n            reject(err);\n        },\n\n        /**\n         * Before onAuthorize execute\n         *\n         * @param {Function} resolve\n         * @param {Function} reject\n         * @param {Object} actions\n         *\n         * @return {jQuery.Deferred}\n         */\n        beforeOnAuthorize: function (resolve, reject, actions) { //eslint-disable-line no-unused-vars\n            //display loading widget.\n            $('body').trigger('processStart');\n\n            return $.Deferred().resolve();\n        },\n\n        /**\n         * After onAuthorize execute\n         *\n         * @param {Object} res\n         * @param {Function} resolve\n         * @param {Function} reject\n         * @param {Object} actions\n         *\n         * @return {*}\n         */\n        afterOnAuthorize: function (res, resolve, reject, actions) {\n            $('body').trigger('processStop');\n\n            if (res.success) {\n                resolve();\n\n                return actions.redirect(res.redirectUrl);\n            }\n\n            return reject(new Error(res['error_message']));\n        },\n\n        /**\n         * Catch payment\n         *\n         * @param {Error} err\n         * @param {Function} resolve\n         * @param {Function} reject\n         */\n        catchOnAuthorize: function (err, resolve, reject) {\n            $('body').trigger('processStop');\n            this.addAlert(this.paymentActionError);\n            reject(err);\n        },\n\n        /**\n         * Process cancel action\n         *\n         * @param {Object} data\n         * @param {Object} actions\n         */\n        onCancel: function (data, actions) {\n            $('body').trigger('processStop');\n            actions.redirect(this.clientConfig.onCancelUrl);\n        },\n\n        /**\n         * Process errors\n         *\n         * @param {Error} err\n         */\n        onError: function (err) { //eslint-disable-line no-unused-vars\n            // Uncaught error isn't displayed in the console\n        },\n\n        /**\n         * Adds error message\n         *\n         * @param {String} message\n         * @param {String} [type]\n         */\n        addError: function (message, type) {\n            type = type || 'error';\n            customerData.set('messages', {\n                messages: [{\n                    type: type,\n                    text: message\n                }],\n                'data_id': Math.floor(Date.now() / 1000)\n            });\n        },\n\n        /**\n         * Add alert message\n         *\n         * @param {String} message\n         */\n        addAlert: function (message) {\n            alert({\n                content: message\n            });\n        },\n\n        /**\n         * @returns {String}\n         */\n        getButtonId: function () {\n            return this.inContextId;\n        },\n\n        /**\n         * Populate client config with all required data\n         *\n         * @return {Object}\n         */\n        prepareClientConfig: function () {\n            this.clientConfig.rendererComponent = this;\n            this.clientConfig.formKey = $.mage.cookies.get('form_key');\n\n            return this.clientConfig;\n        }\n    };\n});\n","Magento_PageCache/js/form-key-provider.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine(function () {\n    'use strict';\n\n    return function () {\n        var formKey,\n            inputElements,\n            inputSelector = 'input[name=\"form_key\"]';\n\n        /**\n         * Set form_key cookie\n         * @private\n         */\n        function setFormKeyCookie(value) {\n            var expires,\n                secure,\n                date = new Date(),\n                isSecure = !!window.cookiesConfig && window.cookiesConfig.secure;\n\n            date.setTime(date.getTime() + 86400000);\n            expires = '; expires=' + date.toUTCString();\n            secure = isSecure ? '; secure' : '';\n\n            document.cookie = 'form_key=' + (value || '') + expires + secure + '; path=/';\n        }\n\n        /**\n         * Retrieves form key from cookie\n         * @private\n         */\n        function getFormKeyCookie() {\n            var cookie,\n                i,\n                nameEQ = 'form_key=',\n                cookieArr = document.cookie.split(';');\n\n            for (i = 0; i < cookieArr.length; i++) {\n                cookie = cookieArr[i];\n\n                while (cookie.charAt(0) === ' ') {\n                    cookie = cookie.substring(1, cookie.length);\n                }\n\n                if (cookie.indexOf(nameEQ) === 0) {\n                    return cookie.substring(nameEQ.length, cookie.length);\n                }\n            }\n\n            return null;\n        }\n\n        /**\n         * Generate form key string\n         * @private\n         */\n        function generateFormKeyString() {\n            var result = '',\n                length = 16,\n                chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\n            while (length--) {\n                result += chars[Math.round(Math.random() * (chars.length - 1))];\n            }\n\n            return result;\n        }\n\n        /**\n         * Init form_key inputs with value\n         * @private\n         */\n        function initFormKey() {\n            formKey = getFormKeyCookie();\n\n            if (!formKey) {\n                formKey = generateFormKeyString();\n                setFormKeyCookie(formKey);\n            }\n            inputElements = document.querySelectorAll(inputSelector);\n\n            if (inputElements.length) {\n                Array.prototype.forEach.call(inputElements, function (element) {\n                    element.setAttribute('value', formKey);\n                });\n            }\n        }\n\n        initFormKey();\n    };\n});\n","Magento_PageCache/js/page-cache.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'domReady',\n    'consoleLogger',\n    'Magento_PageCache/js/form-key-provider',\n    'jquery-ui-modules/widget',\n    'mage/cookies'\n], function ($, domReady, consoleLogger, formKeyInit) {\n    'use strict';\n\n    /**\n     * Helper. Generate random string\n     * TODO: Merge with mage/utils\n     * @param {String} chars - list of symbols\n     * @param {Number} length - length for need string\n     * @returns {String}\n     */\n    function generateRandomString(chars, length) {\n        var result = '';\n\n        length = length > 0 ? length : 1;\n\n        while (length--) {\n            result += chars[Math.round(Math.random() * (chars.length - 1))];\n        }\n\n        return result;\n    }\n\n    /**\n     * Nodes tree to flat list converter\n     * @returns {Array}\n     */\n    $.fn.comments = function () {\n        var elements = [],\n            contents,\n            elementContents;\n\n        /**\n         * @param {jQuery} element - Comment holder\n         */\n        (function lookup(element) {\n            var iframeHostName;\n\n            // prevent cross origin iframe content reading\n            if ($(element).prop('tagName') === 'IFRAME') {\n                iframeHostName = $('<a>').prop('href', $(element).prop('src'))\n                    .prop('hostname');\n\n                if (window.location.hostname !== iframeHostName) {\n                    return [];\n                }\n            }\n\n            /**\n             * Rewrite jQuery contents().\n             *\n             * @param {jQuery} elem\n             */\n            contents = function (elem) {\n                return $.map(elem, function (el) {\n                    try {\n                        return $.nodeName(el, 'iframe') ?\n                            el.contentDocument || (el.contentWindow ? el.contentWindow.document : []) :\n                            $.merge([], el.childNodes);\n                    } catch (e) {\n                        consoleLogger.error(e);\n\n                        return [];\n                    }\n                });\n            };\n\n            elementContents = contents($(element));\n\n            $.each(elementContents, function (index, el) {\n                switch (el.nodeType) {\n                    case 1: // ELEMENT_NODE\n                        lookup(el);\n                        break;\n\n                    case 8: // COMMENT_NODE\n                        elements.push(el);\n                        break;\n\n                    case 9: // DOCUMENT_NODE\n                        lookup($(el).find('body'));\n                        break;\n                }\n            });\n        })(this);\n\n        return elements;\n    };\n\n    /**\n     * FormKey Widget - this widget is generating from key, saves it to cookie and\n     * @deprecated see Magento/PageCache/view/frontend/web/js/form-key-provider.js\n     */\n    $.widget('mage.formKey', {\n        options: {\n            inputSelector: 'input[name=\"form_key\"]',\n            allowedCharacters: '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ',\n            length: 16\n        },\n\n        /**\n         * Creates widget 'mage.formKey'\n         * @private\n         */\n        _create: function () {\n            var formKey = $.mage.cookies.get('form_key'),\n                options = {\n                    secure: window.cookiesConfig ? window.cookiesConfig.secure : false\n                };\n\n            if (!formKey) {\n                formKey = generateRandomString(this.options.allowedCharacters, this.options.length);\n                $.mage.cookies.set('form_key', formKey, options);\n            }\n            $(this.options.inputSelector).val(formKey);\n        }\n    });\n\n    /**\n     * PageCache Widget\n     * Handles additional ajax request for rendering user private content.\n     */\n    $.widget('mage.pageCache', {\n        options: {\n            url: '/',\n            patternPlaceholderOpen: /^ BLOCK (.+) $/,\n            patternPlaceholderClose: /^ \\/BLOCK (.+) $/,\n            versionCookieName: 'private_content_version',\n            handles: []\n        },\n\n        /**\n         * Creates widget 'mage.pageCache'\n         * @private\n         */\n        _create: function () {\n            var placeholders,\n                version = $.mage.cookies.get(this.options.versionCookieName);\n\n            if (!version) {\n                return;\n            }\n            placeholders = this._searchPlaceholders(this.element.comments());\n\n            if (placeholders && placeholders.length) {\n                this._ajax(placeholders, version);\n            }\n        },\n\n        /**\n         * Parse page for placeholders.\n         * @param {Array} elements\n         * @returns {Array}\n         * @private\n         */\n        _searchPlaceholders: function (elements) {\n            var placeholders = [],\n                tmp = {},\n                ii,\n                len,\n                el, matches, name;\n\n            if (!(elements && elements.length)) {\n                return placeholders;\n            }\n\n            for (ii = 0, len = elements.length; ii < len; ii++) {\n                el = elements[ii];\n                matches = this.options.patternPlaceholderOpen.exec(el.nodeValue);\n                name = null;\n\n                if (matches) {\n                    name = matches[1];\n                    tmp[name] = {\n                        name: name,\n                        openElement: el\n                    };\n                } else {\n                    matches = this.options.patternPlaceholderClose.exec(el.nodeValue);\n\n                    if (matches) { //eslint-disable-line max-depth\n                        name = matches[1];\n\n                        if (tmp[name]) { //eslint-disable-line max-depth\n                            tmp[name].closeElement = el;\n                            placeholders.push(tmp[name]);\n                            delete tmp[name];\n                        }\n                    }\n                }\n            }\n\n            return placeholders;\n        },\n\n        /**\n         * Parse for page and replace placeholders\n         * @param {Object} placeholder\n         * @param {Object} html\n         * @protected\n         */\n        _replacePlaceholder: function (placeholder, html) {\n            var startReplacing = false,\n                prevSibling = null,\n                parent, contents, yy, len, element;\n\n            if (!placeholder || !html) {\n                return;\n            }\n\n            parent = $(placeholder.openElement).parent();\n            contents = parent.contents();\n\n            for (yy = 0, len = contents.length; yy < len; yy++) {\n                element = contents[yy];\n\n                if (element == placeholder.openElement) { //eslint-disable-line eqeqeq\n                    startReplacing = true;\n                }\n\n                if (startReplacing) {\n                    $(element).remove();\n                } else if (element.nodeType != 8) { //eslint-disable-line eqeqeq\n                    //due to comment tag doesn't have siblings we try to find it manually\n                    prevSibling = element;\n                }\n\n                if (element == placeholder.closeElement) { //eslint-disable-line eqeqeq\n                    break;\n                }\n            }\n\n            if (prevSibling) {\n                $(prevSibling).after(html);\n            } else {\n                $(parent).prepend(html);\n            }\n\n            // trigger event to use mage-data-init attribute\n            $(parent).trigger('contentUpdated');\n        },\n\n        /**\n         * AJAX helper\n         * @param {Object} placeholders\n         * @param {String} version\n         * @private\n         */\n        _ajax: function (placeholders, version) {\n            var ii,\n                data = {\n                    blocks: [],\n                    handles: this.options.handles,\n                    originalRequest: this.options.originalRequest,\n                    version: version\n                };\n\n            for (ii = 0; ii < placeholders.length; ii++) {\n                data.blocks.push(placeholders[ii].name);\n            }\n            data.blocks = JSON.stringify(data.blocks.sort());\n            data.handles = JSON.stringify(data.handles);\n            data.originalRequest = JSON.stringify(data.originalRequest);\n            $.ajax({\n                url: this.options.url,\n                data: data,\n                type: 'GET',\n                cache: true,\n                dataType: 'json',\n                context: this,\n\n                /**\n                 * Response handler\n                 * @param {Object} response\n                 */\n                success: function (response) {\n                    var placeholder, i;\n\n                    for (i = 0; i < placeholders.length; i++) {\n                        placeholder = placeholders[i];\n\n                        if (response.hasOwnProperty(placeholder.name)) {\n                            this._replacePlaceholder(placeholder, response[placeholder.name]);\n                        }\n                    }\n                }\n            });\n        }\n    });\n\n    domReady(function () {\n        formKeyInit();\n    });\n\n    return {\n        'pageCache': $.mage.pageCache,\n        'formKey': $.mage.formKey\n    };\n});\n","js/navigation-menu.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/**\n * @deprecated\n * @see lib/web/mage/menu.js\n */\ndefine([\n    'jquery',\n    'matchMedia',\n    'mage/template',\n    'mage/dropdowns',\n    'mage/terms'\n], function ($, mediaCheck, mageTemplate) {\n    'use strict';\n\n    $.widget('mage.navigationMenu', {\n        options: {\n            itemsContainer: '> ul',\n            topLevel: 'li.level0',\n            topLevelSubmenu: '> .submenu',\n            topLevelHoverClass: 'hover',\n            expandedTopLevel: '.more',\n            hoverInTimeout: 300,\n            hoverOutTimeout: 500,\n            submenuAnimationSpeed: 200,\n            collapsable: true,\n            collapsableDropdownTemplate:\n                '<script type=\"text/x-magento-template\">' +\n                    '<li class=\"level0 level-top more parent\">' +\n                        '<div class=\"submenu\">' +\n                            '<ul><%= elems %></ul>' +\n                        '</div>' +\n                    '</li>' +\n                '</script>'\n        },\n\n        /** @inheritdoc */\n        _create: function () {\n            this.itemsContainer = $(this.options.itemsContainer, this.element);\n            this.topLevel = $(this.options.topLevel, this.element);\n            this.topLevelSubmenu = $(this.options.topLevelSubmenu, this.topLevel);\n\n            this._bind();\n        },\n\n        /**\n         * @private\n         */\n        _init: function () {\n            if (this.options.collapsable) {\n                setTimeout($.proxy(function () {\n                    this._checkToCollapseOrExpand();\n                }, this), 100);\n            }\n        },\n\n        /**\n         * @private\n         */\n        _bind: function () {\n            this._on({\n                /**\n                 * @param {jQuery.Event} e\n                 */\n                'mouseenter > ul > li.level0': function (e) {\n                    if (!this.entered) { // fix IE bug with 'mouseenter' event\n                        this.timeoutId && clearTimeout(this.timeoutId);\n                        this.timeoutId = setTimeout($.proxy(function () {\n                            this._openSubmenu(e);\n                        }, this), this.options.hoverInTimeout);\n                        this.entered = true;\n                    }\n                },\n\n                /**\n                 * @param {jQuery.Event} e\n                 */\n                'mouseleave > ul > li.level0': function (e) {\n                    this.entered = null;\n\n                    this.timeoutId && clearTimeout(this.timeoutId);\n                    this.timeoutId = setTimeout($.proxy(function () {\n                        this._closeSubmenu(e.currentTarget);\n                    }, this), this.options.hoverOutTimeout);\n                },\n\n                /**\n                 * @param {jQuert.Event} e\n                 */\n                'click': function (e) {\n                    e.stopPropagation();\n                }\n            });\n\n            $(document)\n                .on('click.hideMenu', $.proxy(function () {\n                    var isOpened = this.topLevel.filter(function () {\n                        return $(this).data('opened');\n                    });\n\n                    if (isOpened) {\n                        this._closeSubmenu(null, false);\n                    }\n                }, this));\n\n            $(window)\n                .on('resize', $.proxy(function () {\n                    this.timeoutOnResize && clearTimeout(this.timeoutOnResize);\n                    this.timeoutOnResize = setTimeout($.proxy(function () {\n                        if (this.options.collapsable) {\n                            if ($(this.options.expandedTopLevel, this.element).length) {\n                                this._expandMenu();\n                            }\n                            this._checkToCollapseOrExpand();\n                        }\n                    }, this), 300);\n                }, this));\n        },\n\n        /**\n         * @param {jQuery.Event} e\n         * @private\n         */\n        _openSubmenu: function (e) {\n            var menuItem = e.currentTarget;\n\n            if (!$(menuItem).data('opened')) {\n                this._closeSubmenu(menuItem, true, true);\n\n                $(this.options.topLevelSubmenu, menuItem)\n                    .slideDown(this.options.submenuAnimationSpeed, $.proxy(function () {\n                        $(menuItem).addClass(this.options.topLevelHoverClass);\n                        $(menuItem).data('opened', true);\n                    }, this));\n            } else if ($(e.target).closest(this.options.topLevel)) {\n                $(e.target)\n                    .addClass(this.options.topLevelHoverClass)\n                    .siblings(this.options.topLevel)\n                        .removeClass(this.options.topLevelHoverClass);\n            }\n        },\n\n        /**\n         * @param {*} menuItem\n         * @param {*} excludeCurrent\n         * @param {*} fast\n         * @private\n         */\n        _closeSubmenu: function (menuItem, excludeCurrent, fast) {\n            var topLevel = $(this.options.topLevel, this.element),\n                activeSubmenu = $(this.options.topLevelSubmenu, menuItem || null);\n\n            $(this.options.topLevelSubmenu, topLevel)\n                .filter(function () {\n                    return excludeCurrent ? $(this).not(activeSubmenu) : true;\n                })\n                .slideUp(fast ? 0 : this.options.submenuAnimationSpeed);\n\n            topLevel\n                .removeClass(this.options.topLevelHoverClass)\n                .data('opened', false);\n        },\n\n        /**\n         * @private\n         */\n        _checkToCollapseOrExpand: function () {\n            var navWidth, totalWidth, startCollapseIndex;\n\n            if ($('html').hasClass('lt-640') || $('html').hasClass('w-640')) {\n                return;\n            }\n\n            navWidth = this.itemsContainer.width();\n            totalWidth = 0;\n            startCollapseIndex = 0;\n\n            $.each($(this.options.topLevel, this.element), function (index, item) {\n                totalWidth += $(item).outerWidth(true);\n\n                if (totalWidth > navWidth && !startCollapseIndex) {\n                    startCollapseIndex = index - 2;\n                }\n            });\n\n            this[startCollapseIndex ? '_collapseMenu' : '_expandMenu'](startCollapseIndex);\n        },\n\n        /**\n         * @param {*} startCollapseIndex\n         * @private\n         */\n        _collapseMenu: function (startCollapseIndex) {\n            this.elemsToCollapse = this.topLevel.filter(function (index) {\n                return index > startCollapseIndex;\n            });\n            this.elemsToCollapseClone = $('<div></div>').append(this.elemsToCollapse.clone()).html();\n\n            this.collapsableDropdown = $(\n                mageTemplate(\n                    this.options.collapsableDropdownTemplate,\n                    {\n                        elems: this.elemsToCollapseClone\n                    }\n                )\n            );\n\n            this.itemsContainer.append(this.collapsableDropdown);\n            this.elemsToCollapse.detach();\n        },\n\n        /**\n         * @private\n         */\n        _expandMenu: function () {\n            this.elemsToCollapse && this.elemsToCollapse.appendTo(this.itemsContainer);\n            this.collapsableDropdown && this.collapsableDropdown.remove();\n        },\n\n        /**\n         * @private\n         */\n        _destroy: function () {\n            this._expandMenu();\n        }\n    });\n\n    /*\n     * Provides \"Continium\" effect for submenu\n     * */\n    $.widget('mage.navigationMenu', $.mage.navigationMenu, {\n        options: {\n            parentLevel: '> ul > li.level0',\n            submenuAnimationSpeed: 150,\n            submenuContiniumEffect: false\n        },\n\n        /**\n         * @private\n         */\n        _init: function () {\n            this._super();\n            this._applySubmenuStyles();\n        },\n\n        /**\n         * @private\n         */\n        _applySubmenuStyles: function () {\n            $(this.options.topLevelSubmenu, $(this.options.topLevel, this.element))\n                .removeAttr('style');\n\n            $(this.options.topLevelSubmenu, $(this.options.parentLevel, this.element))\n                .css({\n                    display: 'block',\n                    height: 0,\n                    overflow: 'hidden'\n                });\n        },\n\n        /**\n         * @param {jQuery.Event} e\n         * @private\n         */\n        _openSubmenu: function (e) {\n            var menuItem = e.currentTarget,\n                submenu = $(this.options.topLevelSubmenu, menuItem),\n                openedItems = $(this.options.topLevel, this.element).filter(function () {\n                    return $(this).data('opened');\n                });\n\n            if (submenu.length) {\n                this.heightToAnimate = $(this.options.itemsContainer, submenu).outerHeight(true);\n\n                if (openedItems.length) {\n                    this._closeSubmenu(menuItem, true, this.heightToAnimate, $.proxy(function () {\n                        submenu.css({\n                            height: 'auto'\n                        });\n                        $(menuItem)\n                            .addClass(this.options.topLevelHoverClass);\n                    }, this), e);\n                } else {\n                    submenu.animate({\n                        height: this.heightToAnimate\n                    }, this.options.submenuAnimationSpeed, $.proxy(function () {\n                        $(menuItem)\n                            .addClass(this.options.topLevelHoverClass);\n                    }, this));\n                }\n\n                $(menuItem)\n                    .data('opened', true);\n            } else {\n                this._closeSubmenu(menuItem);\n            }\n        },\n\n        /**\n         * @param {*} menuItem\n         * @param {*} excludeCurrent\n         * @param {*} heightToAnimate\n         * @param {Function} callback\n         * @private\n         */\n        _closeSubmenu: function (menuItem, excludeCurrent, heightToAnimate, callback) {\n            var topLevel = $(this.options.topLevel, this.itemsContainer),\n                prevOpenedItem, prevOpenedSubmenu;\n\n            if (!excludeCurrent) {\n                $(this.options.topLevelSubmenu, $(this.options.parentLevel, this.element))\n                    .animate({\n                        height: 0\n                    });\n\n                topLevel\n                    .data('opened', false)\n                    .removeClass(this.options.topLevelHoverClass);\n            } else {\n                prevOpenedItem = topLevel.filter(function () {\n                    return $(this).data('opened');\n                });\n                prevOpenedSubmenu = $(this.options.topLevelSubmenu, prevOpenedItem);\n\n                prevOpenedSubmenu.animate({\n                    height: heightToAnimate\n                }, this.options.submenuAnimationSpeed, 'linear', function () {\n                    $(this).css({\n                        height: 0\n                    });\n                    callback && callback();\n                });\n\n                prevOpenedItem\n                    .data('opened', false)\n                    .removeClass(this.options.topLevelHoverClass);\n            }\n        },\n\n        /**\n         * @private\n         */\n        _collapseMenu: function () {\n            this._superApply(arguments);\n            this._applySubmenuStyles();\n        }\n    });\n\n    //  Responsive menu\n    $.widget('mage.navigationMenu', $.mage.navigationMenu, {\n        options: {\n            responsive: false,\n            origNavPlaceholder: '.page-header',\n            mainContainer: 'body',\n            pageWrapper: '.page-wrapper',\n            openedMenuClass: 'opened',\n            toggleActionPlaceholder: '.block-search',\n            itemWithSubmenu: 'li.parent',\n            titleWithSubmenu: 'li.parent > a',\n            submenu: 'li.parent > .submenu',\n            toggleActionTemplate:\n                '<script type=\"text/x-magento-template\">' +\n                    '<span data-action=\"toggle-nav\" class=\"action toggle nav\">Toggle Nav</span>' +\n                '</script>',\n            submenuActionsTemplate:\n                '<script type=\"text/x-magento-template\">' +\n                    '<li class=\"action all\">' +\n                        '<a href=\"<%= categoryURL %>\"><span>All <%= category %></span></a>' +\n                    '</li>' +\n                '</script>',\n            navigationSectionsWrapperTemplate:\n                '<script type=\"text/x-magento-template\">' +\n                    '<dl class=\"navigation-tabs\" data-sections=\"tabs\">' +\n                    '</dl>' +\n                '</script>',\n            navigationItemWrapperTemplate:\n                '<script type=\"text/x-magento-template\">' +\n                    '<dt class=\"item title <% if (active) { %>active<% } %>\" data-section=\"title\">' +\n                        '<a class=\"switch\" data-toggle=\"switch\" href=\"#TODO\"><%= title %></a>' +\n                    '</dt>' +\n                    '<dd class=\"item content <% if (active) { %>active<%}%>\" data-section=\"content\">' +\n                    '</dd>' +\n                '</script>'\n        },\n\n        /**\n         * @private\n         */\n        _init: function () {\n            this._super();\n\n            this.mainContainer = $(this.options.mainContainer);\n            this.pageWrapper = $(this.options.pageWrapper);\n            this.toggleAction = $(mageTemplate(this.options.toggleActionTemplate, {}));\n\n            if (this.options.responsive) {\n                mediaCheck({\n                    media: '(min-width: 768px)',\n                    entry: $.proxy(function () {\n                        this._toggleDesktopMode();\n                    }, this),\n                    exit: $.proxy(function () {\n                        this._toggleMobileMode();\n                    }, this)\n                });\n            }\n        },\n\n        /**\n         * @private\n         */\n        _bind: function () {\n            this._super();\n            this._bindDocumentEvents();\n        },\n\n        /**\n         * @private\n         */\n        _bindDocumentEvents: function () {\n            if (!this.eventsBound) {\n                $(document)\n                    .on('click.toggleMenu', '.action.toggle.nav', $.proxy(function (e) {\n                        if ($(this.element).data('opened')) {\n                            this._hideMenu();\n                        } else {\n                            this._showMenu();\n                        }\n                        e.stopPropagation();\n                        this.mobileNav.scrollTop(0);\n                        this._fixedBackLink();\n                    }, this))\n                    .on('click.hideMenu', this.options.pageWrapper, $.proxy(function () {\n                        if ($(this.element).data('opened')) {\n                            this._hideMenu();\n                            this.mobileNav.scrollTop(0);\n                            this._fixedBackLink();\n                        }\n                    }, this))\n                    .on('click.showSubmenu', this.options.titleWithSubmenu, $.proxy(function (e) {\n                        this._showSubmenu(e);\n\n                        e.preventDefault();\n                        this.mobileNav.scrollTop(0);\n                        this._fixedBackLink();\n                    }, this))\n                    .on('click.hideSubmenu', '.action.back', $.proxy(function (e) {\n                        this._hideSubmenu(e);\n                        this.mobileNav.scrollTop(0);\n                        this._fixedBackLink();\n                    }, this));\n\n                this.eventsBound = true;\n            }\n        },\n\n        /**\n         * @private\n         */\n        _showMenu: function () {\n            $(this.element).data('opened', true);\n            this.mainContainer.add('html').addClass(this.options.openedMenuClass);\n        },\n\n        /**\n         * @private\n         */\n        _hideMenu: function () {\n            $(this.element).data('opened', false);\n            this.mainContainer.add('html').removeClass(this.options.openedMenuClass);\n        },\n\n        /**\n         * @param {jQuery.Event} e\n         * @private\n         */\n        _showSubmenu: function (e) {\n            var submenu;\n\n            $(e.currentTarget).addClass('action back');\n            submenu = $(e.currentTarget).siblings('.submenu');\n\n            submenu.addClass('opened');\n        },\n\n        /**\n         * @param {jQuery.Event} e\n         * @private\n         */\n        _hideSubmenu: function (e) {\n            var submenuSelector = '.submenu',\n                submenu = $(e.currentTarget).next(submenuSelector);\n\n            $(e.currentTarget).removeClass('action back');\n            submenu.removeClass('opened');\n        },\n\n        /**\n         * @private\n         */\n        _renderSubmenuActions: function () {\n            $.each(\n                $(this.options.itemWithSubmenu),\n                $.proxy(function (index, item) {\n                    var actions = $(mageTemplate(\n                            this.options.submenuActionsTemplate,\n                            {\n                                category: $('> a > span', item).text(),\n                                categoryURL: $('> a', item).attr('href')\n                            }\n                        )),\n                        submenu = $('> .submenu', item),\n                        items = $('> ul', submenu);\n\n                    items.prepend(actions);\n                }, this)\n            );\n        },\n\n        /**\n         * @private\n         */\n        _toggleMobileMode: function () {\n            this._expandMenu();\n\n            $(this.options.topLevelSubmenu, $(this.options.topLevel, this.element))\n                .removeAttr('style');\n\n            this.toggleAction.insertBefore(this.options.toggleActionPlaceholder);\n            this.mobileNav = $(this.element).detach().clone();\n            this.mainContainer.prepend(this.mobileNav);\n            this.mobileNav.find('> ul').addClass('nav');\n            this._insertExtraItems();\n            this._wrapItemsInSections();\n            this.mobileNav.scroll($.proxy(function () {\n                this._fixedBackLink();\n            }, this));\n\n            this._renderSubmenuActions();\n            this._bindDocumentEvents();\n        },\n\n        /**\n         * @private\n         */\n        _toggleDesktopMode: function () {\n            this.mobileNav && this.mobileNav.remove();\n            this.toggleAction.detach();\n            $(this.element).insertAfter(this.options.origNavPlaceholder);\n\n            $(document)\n                .off('click.toggleMenu', '.action.toggle.nav')\n                .off('click.hideMenu', this.options.pageWrapper)\n                .off('click.showSubmenu', this.options.titleWithSubmenu)\n                .off('click.hideSubmenu', '.action.back');\n\n            this.eventsBound = false;\n\n            this._applySubmenuStyles();\n        },\n\n        /**\n         * @private\n         */\n        _insertExtraItems: function () {\n            var settings, footerSettings, account;\n\n            if ($('.header.panel .switcher').length) {\n                settings = $('.header.panel .switcher')\n                    .clone()\n                    .addClass('settings');\n\n                this.mobileNav.prepend(settings);\n            }\n\n            if ($('.footer .switcher').length) {\n                footerSettings = $('.footer .switcher')\n                    .clone()\n                    .addClass('settings');\n\n                this.mobileNav.prepend(footerSettings);\n            }\n\n            if ($('.header.panel .header.links li').length) {\n                account = $('.header.panel > .header.links')\n                    .clone()\n                    .addClass('account');\n\n                this.mobileNav.prepend(account);\n            }\n        },\n\n        /**\n         * @private\n         */\n        _wrapItemsInSections: function () {\n            var account = $('> .account', this.mobileNav),\n                settings = $('> .settings', this.mobileNav),\n                nav = $('> .nav', this.mobileNav),\n                navigationSectionsWrapper = $(mageTemplate(this.options.navigationSectionsWrapperTemplate, {})),\n                navigationItemWrapper;\n\n            this.mobileNav.append(navigationSectionsWrapper);\n\n            if (nav.length) {\n                navigationItemWrapper = $(mageTemplate(this.options.navigationItemWrapperTemplate, {\n                    title: 'Menu'\n                }));\n                navigationSectionsWrapper.append(navigationItemWrapper);\n                navigationItemWrapper.eq(1).append(nav);\n            }\n\n            if (account.length) {\n                navigationItemWrapper = $(mageTemplate(this.options.navigationItemWrapperTemplate, {\n                    title: 'Account'\n                }));\n                navigationSectionsWrapper.append(navigationItemWrapper);\n                navigationItemWrapper.eq(1).append(account);\n            }\n\n            if (settings.length) {\n                navigationItemWrapper = $(\n                    mageTemplate(this.options.navigationItemWrapperTemplate, {\n                        title: 'Settings'\n                    })\n                );\n                navigationSectionsWrapper.append(navigationItemWrapper);\n                navigationItemWrapper.eq(1).append(settings);\n            }\n\n            navigationSectionsWrapper.addClass(\n                'navigation-tabs-' + navigationSectionsWrapper.find('[data-section=\"title\"]').length\n            );\n            navigationSectionsWrapper.terms();\n        },\n\n        /**\n         * @private\n         */\n        _fixedBackLink: function () {\n            var linksBack = this.mobileNav.find('.submenu .action.back'),\n                linkBack = this.mobileNav.find('.submenu.opened > ul > .action.back').last(),\n                subMenu, navOffset, linkBackHeight;\n\n            linksBack.removeClass('fixed');\n\n            if (linkBack.length) {\n                subMenu = linkBack.parent();\n                navOffset = this.mobileNav.find('.nav').position().top;\n                linkBackHeight = linkBack.height();\n\n                if (navOffset <= 0) {\n                    linkBack.addClass('fixed');\n                    subMenu.css({\n                        paddingTop: linkBackHeight\n                    });\n                } else {\n                    linkBack.removeClass('fixed');\n                    subMenu.css({\n                        paddingTop: 0\n                    });\n                }\n            }\n        }\n    });\n\n    return $.mage.navigationMenu;\n});\n","Magento_GroupedProduct/js/product-ids-resolver.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'Magento_Catalog/js/product/view/product-ids',\n    'Magento_Catalog/js/product/view/product-info'\n], function ($, productIds, productInfo) {\n    'use strict';\n\n    /**\n     * Returns id's of products in form.\n     *\n     * @param {Object} config\n     * @param {HTMLElement} element\n     * @return {Array}\n     */\n    return function (config, element) {\n        $(element).find('div[data-product-id]').each(function () {\n            productIds.push($(this).data('productId').toString());\n            productInfo.push(\n                {\n                    'id': $(this).data('productId').toString()\n                }\n            );\n        });\n\n        return productIds();\n    };\n});\n","PayPal_Braintree/js/form-builder.js":"/**\n * Copyright \u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine(\n    [\n        'jquery',\n        'underscore',\n        'mage/template'\n    ],\n    function ($, _, mageTemplate) {\n        'use strict';\n\n        return {\n\n            /**\n             * @param {Object} formData\n             * @returns {*|jQuery}\n             */\n            build: function (formData) {\n                var formTmpl = mageTemplate('<form action=\"<%= data.action %>\"' +\n                    ' method=\"POST\" hidden enctype=\"application/x-www-form-urlencoded\">' +\n                        '<% _.each(data.fields, function(val, key){ %>' +\n                            '<input value=\\'<%= val %>\\' name=\"<%= key %>\" type=\"hidden\">' +\n                        '<% }); %>' +\n                    '</form>');\n\n                return $(formTmpl({\n                    data: {\n                        action: formData.action,\n                        fields: formData.fields\n                    }\n                })).appendTo($('[data-container=\"body\"]'));\n            }\n        };\n    }\n);\n","PayPal_Braintree/js/validator.js":"/**\n * Copyright \u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine([\n    'underscore'\n], function (_) {\n    'use strict';\n\n    return {\n        config: {},\n\n        /**\n         * Set configuration\n         * @param {Object} config\n         */\n        setConfig: function (config) {\n            this.config = config;\n        },\n\n        /**\n         * Get List of available card types\n         * @returns {*|exports.defaults.availableCardTypes|{}}\n         */\n        getAvailableCardTypes: function () {\n            return this.config.availableCardTypes;\n        },\n\n        /**\n         * Get list of card types\n         * @returns {Object}\n         */\n        getCcTypesMapper: function () {\n            return this.config.ccTypesMapper;\n        },\n\n        /**\n         * Find mage card type by Braintree type\n         * @param {String} type\n         * @param {Object} availableTypes\n         * @returns {*}\n         */\n        getMageCardType: function (type, availableTypes) {\n            var storedCardType = null,\n                mapper = this.getCcTypesMapper();\n\n            if (type && typeof mapper[type] !== 'undefined') {\n                storedCardType = mapper[type];\n\n                if (_.indexOf(availableTypes, storedCardType) !== -1) {\n                    return storedCardType;\n                }\n            }\n\n            return null;\n        },\n\n        /**\n         * Filter list of available card types\n         * @param {Object} availableTypes\n         * @param {Object} countrySpecificCardTypes\n         * @returns {Object}\n         */\n        collectTypes: function (availableTypes, countrySpecificCardTypes) {\n            var key,\n                filteredTypes = [];\n\n            for (key in availableTypes) {\n                if (_.indexOf(countrySpecificCardTypes, availableTypes[key]) !== -1) {\n                    filteredTypes.push(availableTypes[key]);\n                }\n            }\n\n            return filteredTypes;\n        },\n\n        /**\n         * Get list of card types for country\n         * @param {String} countryId\n         * @returns {*}\n         */\n        getCountrySpecificCardTypes: function (countryId) {\n            if (typeof this.config.countrySpecificCardTypes[countryId] !== 'undefined') {\n                return this.config.countrySpecificCardTypes[countryId];\n            }\n\n            return false;\n        }\n    };\n});\n","PayPal_Braintree/js/view/product-page.js":"define(\n    ['uiComponent'],\n    function (Component) {\n        'use strict';\n\n        return Component.extend({\n\n        });\n    }\n);","PayPal_Braintree/js/view/payment/validator-handler.js":"/**\n * Copyright 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\n\ndefine([\n    'jquery',\n    'Magento_Ui/js/model/messageList',\n    'PayPal_Braintree/js/view/payment/3d-secure',\n    'Magento_Checkout/js/model/full-screen-loader'\n], function ($, globalMessageList, verify3DSecure, fullScreenLoader) {\n    'use strict';\n\n    return {\n        validators: [],\n\n        /**\n         * Get payment config\n         * @returns {Object}\n         */\n        getConfig: function () {\n            return window.checkoutConfig.payment;\n        },\n\n        /**\n         * Init list of validators\n         */\n        initialize: function () {\n            var config = this.getConfig();\n\n            if (config[verify3DSecure.getCode()].enabled) {\n                verify3DSecure.setConfig(config[verify3DSecure.getCode()]);\n                this.add(verify3DSecure);\n            }\n        },\n\n        /**\n         * Add new validator\n         * @param {Object} validator\n         */\n        add: function (validator) {\n            this.validators.push(validator);\n        },\n\n        /**\n         * Run pull of validators\n         * @param {Object} context\n         * @param {Function} callback\n         */\n        validate: function (context, callback, errorCallback) {\n            var self = this,\n                deferred;\n\n            // no available validators\n            if (!self.validators.length) {\n                callback();\n\n                return;\n            }\n\n            // get list of deferred validators\n            deferred = $.map(self.validators, function (current) {\n                return current.validate(context);\n            });\n\n            $.when.apply($, deferred)\n                .done(function () {\n                    callback();\n                }).fail(function (error) {\n                    errorCallback();\n                    self.showError(error);\n                });\n        },\n\n        /**\n         * Show error message\n         * @param {String} errorMessage\n         */\n        showError: function (errorMessage) {\n            globalMessageList.addErrorMessage({\n                message: errorMessage\n            });\n            fullScreenLoader.stopLoader(true);\n        }\n    };\n});\n","PayPal_Braintree/js/view/payment/braintree.js":"/**\n * Copyright \u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/payment/renderer-list'\n    ],\n    function (\n        Component,\n        rendererList\n    ) {\n        'use strict';\n\n        let config = window.checkoutConfig.payment,\n            braintreeType = 'braintree',\n            payPalType = 'braintree_paypal',\n            braintreeAchDirectDebit = 'braintree_ach_direct_debit';\n\n        if (config[braintreeType].isActive) {\n            rendererList.push(\n                {\n                    type: braintreeType,\n                    component: 'PayPal_Braintree/js/view/payment/method-renderer/hosted-fields'\n                }\n            );\n        }\n\n        if (config[payPalType].isActive) {\n            rendererList.push(\n                {\n                    type: payPalType,\n                    component: 'PayPal_Braintree/js/view/payment/method-renderer/paypal'\n                }\n            );\n        }\n\n        rendererList.push(\n            {\n                type: 'braintree_venmo',\n                component: 'PayPal_Braintree/js/view/payment/method-renderer/venmo'\n            }\n        );\n\n        if (config[braintreeAchDirectDebit].isActive) {\n            rendererList.push(\n                {\n                    type: braintreeAchDirectDebit,\n                    component: 'PayPal_Braintree/js/view/payment/method-renderer/ach'\n                }\n            );\n        }\n\n        rendererList.push(\n            {\n                type: 'braintree_local_payment',\n                component: 'PayPal_Braintree/js/view/payment/method-renderer/lpm'\n            }\n        );\n\n        /** Add view logic here if needed */\n        return Component.extend({});\n    }\n);\n","PayPal_Braintree/js/view/payment/ach.js":"define(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/payment/renderer-list'\n    ],\n    function (\n        Component,\n        rendererList\n    ) {\n        'use strict';\n\n        rendererList.push(\n            {\n                type: 'braintree_ach_direct_debit',\n                component: 'PayPal_Braintree/js/view/payment/method-renderer/ach'\n            }\n        );\n\n        return Component.extend({});\n    }\n);\n","PayPal_Braintree/js/view/payment/lpm.js":"define(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/payment/renderer-list'\n    ],\n    function (\n        Component,\n        rendererList\n    ) {\n        'use strict';\n\n        rendererList.push(\n            {\n                type: 'braintree_local_payment',\n                component: 'PayPal_Braintree/js/view/payment/method-renderer/lpm'\n            }\n        );\n\n        return Component.extend({});\n    }\n);\n","PayPal_Braintree/js/view/payment/3d-secure.js":"/**\n * Copyright \u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\n\ndefine([\n    'jquery',\n    'PayPal_Braintree/js/view/payment/adapter',\n    'Magento_Checkout/js/model/quote',\n    'mage/translate',\n    'braintreeThreeDSecure',\n    'Magento_Checkout/js/model/full-screen-loader'\n], function ($, braintree, quote, $t, threeDSecure, fullScreenLoader) {\n    'use strict';\n\n    return {\n        config: null,\n\n        /**\n         * Set 3d secure config\n         * @param {Object} config\n         */\n        setConfig: function (config) {\n            this.config = config;\n            this.config.thresholdAmount = parseFloat(config.thresholdAmount);\n        },\n\n        /**\n         * Get code\n         * @returns {String}\n         */\n        getCode: function () {\n            return 'three_d_secure';\n        },\n\n        /**\n         * convert Non-ASCII characters into unicode\n         * @param str\n         * @returns {string}\n         */\n        escapeNonAsciiCharacters: function (str) {\n            return [...str].map(c => /^[\\x00-\\x7F]$/.test(c) ? c : c.split(\"\").map(a => \"\\\\u\" + a.charCodeAt().toString(16).padStart(4, \"0\")).join(\"\")).join(\"\");\n        },\n\n        /**\n         * Validate Braintree payment nonce\n         * @param {Object} context\n         * @returns {Object}\n         */\n        validate: function (context) {\n            var clientInstance = braintree.getApiClient(),\n                state = $.Deferred(),\n                totalAmount = parseFloat(quote.totals()['base_grand_total']).toFixed(2),\n                billingAddress = quote.billingAddress();\n\n            if(billingAddress.regionCode != undefined && billingAddress.regionCode.length > 2) {\n                billingAddress.regionCode = undefined;\n            }\n            // No 3d secure if using CVV verification on vaulted cards\n            if (quote.paymentMethod().method.indexOf('braintree_cc_vault_') !== -1) {\n                if (this.config.useCvvVault === true) {\n                    state.resolve();\n                    return state.promise();\n                }\n            }\n\n            if (!this.isAmountAvailable(totalAmount) || !this.isCountryAvailable(billingAddress.countryId)) {\n                state.resolve();\n                return state.promise();\n            }\n\n            var firstName = this.escapeNonAsciiCharacters(billingAddress.firstname);\n            var lastName = this.escapeNonAsciiCharacters(billingAddress.lastname);\n\n            fullScreenLoader.startLoader();\n\n            var setup3d = function(clientInstance) {\n                threeDSecure.create({\n                    version: 2,\n                    client: clientInstance\n                }, function (threeDSecureErr, threeDSecureInstance) {\n                    if (threeDSecureErr) {\n                        fullScreenLoader.stopLoader();\n                        return state.reject($t('Please try again with another form of payment.'));\n                    }\n\n                    var threeDSContainer = document.createElement('div'),\n                        tdmask = document.createElement('div'),\n                        tdframe = document.createElement('div'),\n                        tdbody = document.createElement('div');\n\n                    threeDSContainer.id = 'braintree-three-d-modal';\n                    tdmask.className =\"bt-mask\";\n                    tdframe.className =\"bt-modal-frame\";\n                    tdbody.className =\"bt-modal-body\";\n\n                    tdframe.appendChild(tdbody);\n                    threeDSContainer.appendChild(tdmask);\n                    threeDSContainer.appendChild(tdframe);\n\n                    threeDSecureInstance.verifyCard({\n                        amount: totalAmount,\n                        nonce: context.paymentMethodNonce,\n                        billingAddress: {\n                            givenName: firstName,\n                            surname: lastName,\n                            phoneNumber: billingAddress.telephone,\n                            streetAddress: billingAddress.street[0],\n                            extendedAddress: billingAddress.street[1],\n                            locality: billingAddress.city,\n                            region: billingAddress.regionCode,\n                            postalCode: billingAddress.postcode,\n                            countryCodeAlpha2: billingAddress.countryId\n                        },\n                        onLookupComplete: function (data, next) {\n                            next();\n                        },\n                        addFrame: function (err, iframe) {\n                            fullScreenLoader.stopLoader();\n\n                            if (err) {\n                                console.log(\"Unable to verify card over 3D Secure\", err);\n                                return state.reject($t('Please try again with another form of payment.'));\n                            }\n\n                            tdbody.appendChild(iframe);\n                            document.body.appendChild(threeDSContainer);\n                        },\n                        removeFrame: function () {\n                            fullScreenLoader.startLoader();\n                            document.body.removeChild(threeDSContainer);\n                        }\n                    }, function (err, response) {\n                        fullScreenLoader.stopLoader();\n\n                        if (err) {\n                            console.error(\"3dsecure validation failed\", err);\n                            return state.reject($t('Please try again with another form of payment.'));\n                        }\n\n                        var liability = {\n                            shifted: response.liabilityShifted,\n                            shiftPossible: response.liabilityShiftPossible\n                        };\n\n                        if (liability.shifted || !liability.shifted && !liability.shiftPossible) {\n                            context.paymentMethodNonce = response.nonce;\n                            state.resolve();\n                        } else {\n                            state.reject($t('Please try again with another form of payment.'));\n                        }\n                    });\n                });\n            };\n\n            if (!clientInstance) {\n                require(['PayPal_Braintree/js/view/payment/method-renderer/cc-form'], function(c) {\n                    var config = c.extend({\n                        defaults: {\n                            clientConfig: {\n                                onReady: function() {}\n                            }\n                        }\n                    });\n                    braintree.setConfig(config.defaults.clientConfig);\n                    braintree.setup(setup3d);\n                });\n            } else {\n                setup3d(clientInstance);\n            }\n\n            return state.promise();\n        },\n\n        /**\n         * Check minimal amount for 3d secure activation\n         * @param {Number} amount\n         * @returns {Boolean}\n         */\n        isAmountAvailable: function (amount) {\n            amount = parseFloat(amount);\n\n            return amount >= this.config.thresholdAmount;\n        },\n\n        /**\n         * Check if current country is available for 3d secure\n         * @param {String} countryId\n         * @returns {Boolean}\n         */\n        isCountryAvailable: function (countryId) {\n            var key,\n                specificCountries = this.config.specificCountries;\n\n            // all countries are available\n            if (!specificCountries.length) {\n                return true;\n            }\n\n            for (key in specificCountries) {\n                if (countryId === specificCountries[key]) {\n                    return true;\n                }\n            }\n\n            return false;\n        }\n    };\n});\n","PayPal_Braintree/js/view/payment/adapter.js":"/**\n * Copyright 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine([\n    'jquery',\n    'braintree',\n    'braintreeDataCollector',\n    'braintreeHostedFields',\n    'Magento_Checkout/js/model/full-screen-loader',\n    'Magento_Ui/js/model/messageList',\n    'mage/translate'\n], function ($, client, dataCollector, hostedFields, fullScreenLoader, globalMessageList, $t) {\n    'use strict';\n\n    return {\n        apiClient: null,\n        config: {},\n        checkout: null,\n        deviceData: null,\n        clientInstance: null,\n        hostedFieldsInstance: null,\n        paypalInstance: null,\n        code: 'braintree',\n\n        /**\n         * {Object}\n         */\n        events: {\n            onClick: null,\n            onCancel: null,\n            onError: null\n        },\n\n        /**\n         * Get Braintree api client\n         * @returns {Object}\n         */\n        getApiClient: function () {\n            return this.clientInstance;\n        },\n\n        /**\n         * Set configuration\n         * @param {Object} config\n         */\n        setConfig: function (config) {\n            this.config = config;\n        },\n\n        /**\n         * Get payment name\n         * @returns {String}\n         */\n        getCode: function () {\n            return this.code;\n        },\n\n        /**\n         * Get client token\n         * @returns {String|*}\n         */\n        getClientToken: function () {\n            return window.checkoutConfig.payment[this.getCode()].clientToken;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getEnvironment: function () {\n            return window.checkoutConfig.payment[this.getCode()].environment;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getColor: function () {\n            return window.checkoutConfig.payment[this.getCode()].style.color;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getShape: function () {\n            return window.checkoutConfig.payment[this.getCode()].style.shape;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getLayout: function () {\n            return window.checkoutConfig.payment[this.getCode()].style.layout;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getSize: function () {\n            return window.checkoutConfig.payment[this.getCode()].style.size;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getLabel: function () {\n            return null;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getBranding: function () {\n            return null;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getFundingIcons: function () {\n            return null;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getDisabledFunding: function () {\n            return window.checkoutConfig.payment[this.getCode()].disabledFunding;\n        },\n\n        /**\n         * Show error message\n         *\n         * @param {String} errorMessage\n         */\n        showError: function (errorMessage) {\n            globalMessageList.addErrorMessage({\n                message: errorMessage\n            });\n            fullScreenLoader.stopLoader(true);\n        },\n\n        /**\n         * Disable submit button\n         */\n        disableButton: function () {\n            // stop any previous shown loaders\n            fullScreenLoader.stopLoader(true);\n            fullScreenLoader.startLoader();\n            $('[data-button=\"place\"]').attr('disabled', 'disabled');\n        },\n\n        /**\n         * Enable submit button\n         */\n        enableButton: function () {\n            $('[data-button=\"place\"]').removeAttr('disabled');\n            fullScreenLoader.stopLoader();\n        },\n\n        /**\n         * Has PayPal been init'd already\n         */\n        getPayPalInstance: function() {\n            if (typeof this.config.paypalInstance !== 'undefined' && this.config.paypalInstance) {\n                return this.config.paypalInstance;\n            }\n\n            return null;\n        },\n\n        setPayPalInstance: function(val) {\n            this.config.paypalInstance = val;\n        },\n\n        /**\n         * Setup Braintree SDK\n         */\n        setup: function (callback) {\n            if (!this.getClientToken()) {\n                this.showError($t('Sorry, but something went wrong.'));\n                return;\n            }\n\n            if (this.clientInstance) {\n                if (typeof this.config.onReady === 'function') {\n                    this.config.onReady(this);\n                }\n\n                if (typeof callback === \"function\") {\n                    callback(this.clientInstance);\n                }\n                return;\n            }\n\n            client.create({\n                authorization: this.getClientToken()\n            }, function (clientErr, clientInstance) {\n                if (clientErr) {\n                    console.error('Braintree Setup Error', clientErr);\n                    return this.showError(\"Sorry, but something went wrong. Please contact the store owner.\");\n                }\n\n                var options = {\n                    client: clientInstance\n                };\n\n                if (typeof this.config.dataCollector === 'object' && typeof this.config.dataCollector.paypal === 'boolean') {\n                    options.paypal = true;\n                } else {\n                    options.kount = true;\n                }\n\n                dataCollector.create(options, function (err, dataCollectorInstance) {\n                    if (err) {\n                        return console.log(err);\n                    }\n\n                    this.deviceData = dataCollectorInstance.deviceData;\n                    this.config.onDeviceDataRecieved(this.deviceData);\n                }.bind(this));\n\n                this.clientInstance = clientInstance;\n\n                if (typeof this.config.onReady === 'function') {\n                    this.config.onReady(this);\n                }\n\n                if (typeof callback === \"function\") {\n                    callback(this.clientInstance);\n                }\n            }.bind(this));\n        },\n\n        /**\n         * Setup hosted fields instance\n         */\n        setupHostedFields: function () {\n            var self = this;\n\n            if (this.hostedFieldsInstance) {\n                this.hostedFieldsInstance.teardown(function () {\n                    this.hostedFieldsInstance = null;\n                    this.setupHostedFields();\n                }.bind(this));\n                return;\n            }\n\n            hostedFields.create({\n                client: this.clientInstance,\n                fields: this.config.hostedFields,\n                styles: {\n                    \"input\": {\n                        \"font-size\": \"14pt\",\n                        \"color\": \"#3A3A3A\"\n                    },\n                    \":focus\": {\n                        \"color\": \"black\"\n                    },\n                    \".valid\": {\n                        \"color\": \"green\"\n                    },\n                    \".invalid\": {\n                        \"color\": \"red\"\n                    }\n                }\n            }, function (createErr, hostedFieldsInstance) {\n                if (createErr) {\n                    self.showError($t(\"Braintree hosted fields could not be initialized. Please contact the store owner.\"));\n                    console.error('Braintree hosted fields error', createErr);\n                    return;\n                }\n\n                this.config.onInstanceReady(hostedFieldsInstance);\n                this.hostedFieldsInstance = hostedFieldsInstance;\n            }.bind(this));\n        },\n\n        tokenizeHostedFields: function () {\n            this.hostedFieldsInstance.tokenize({}, function (tokenizeErr, payload) {\n                if (tokenizeErr) {\n                    switch (tokenizeErr.code) {\n                        case 'HOSTED_FIELDS_FIELDS_EMPTY':\n                            // occurs when none of the fields are filled in\n                            console.error('All fields are empty! Please fill out the form.');\n                            break;\n                        case 'HOSTED_FIELDS_FIELDS_INVALID':\n                            // occurs when certain fields do not pass client side validation\n                            console.error('Some fields are invalid:', tokenizeErr.details.invalidFieldKeys);\n                            break;\n                        case 'HOSTED_FIELDS_TOKENIZATION_FAIL_ON_DUPLICATE':\n                            // occurs when:\n                            //   * the client token used for client authorization was generated\n                            //     with a customer ID and the fail on duplicate payment method\n                            //     option is set to true\n                            //   * the card being tokenized has previously been vaulted (with any customer)\n                            // See: https://developers.braintreepayments.com/reference/request/client-token/generate/#options.fail_on_duplicate_payment_method\n                            console.error('This payment method already exists in your vault.');\n                            break;\n                        case 'HOSTED_FIELDS_TOKENIZATION_CVV_VERIFICATION_FAILED':\n                            // occurs when:\n                            //   * the client token used for client authorization was generated\n                            //     with a customer ID and the verify card option is set to true\n                            //     and you have credit card verification turned on in the Braintree\n                            //     control panel\n                            //   * the cvv does not pass verfication (https://developers.braintreepayments.com/reference/general/testing/#avs-and-cvv/cid-responses)\n                            // See: https://developers.braintreepayments.com/reference/request/client-token/generate/#options.verify_card\n                            console.error('CVV did not pass verification');\n                            break;\n                        case 'HOSTED_FIELDS_FAILED_TOKENIZATION':\n                            // occurs for any other tokenization error on the server\n                            console.error('Tokenization failed server side. Is the card valid?');\n                            break;\n                        case 'HOSTED_FIELDS_TOKENIZATION_NETWORK_ERROR':\n                            // occurs when the Braintree gateway cannot be contacted\n                            console.error('Network error occurred when tokenizing.');\n                            break;\n                        default:\n                            console.error('Something bad happened!', tokenizeErr);\n                    }\n                } else {\n                    this.config.onPaymentMethodReceived(payload);\n                }\n            }.bind(this));\n        }\n    };\n});\n\n","PayPal_Braintree/js/view/payment/venmo.js":"define(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/payment/renderer-list'\n    ],\n    function (\n        Component,\n        rendererList\n    ) {\n        'use strict';\n\n        rendererList.push(\n            {\n                type: 'braintree_venmo',\n                component: 'PayPal_Braintree/js/view/payment/method-renderer/venmo'\n            }\n        );\n\n        return Component.extend({});\n    }\n);\n","PayPal_Braintree/js/view/payment/method-renderer/vault.js":"/**\n * Copyright \u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine([\n    'ko',\n    'jquery',\n    'Magento_Vault/js/view/payment/method-renderer/vault',\n    'PayPal_Braintree/js/view/payment/adapter',\n    'Magento_Ui/js/model/messageList',\n    'PayPal_Braintree/js/view/payment/validator-handler',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'Magento_Checkout/js/model/full-screen-loader',\n    'braintree',\n    'braintreeHostedFields',\n    'mage/url'\n], function (\n    ko,\n    $,\n    VaultComponent,\n    Braintree,\n    globalMessageList,\n    validatorManager,\n    additionalValidators,\n    fullScreenLoader,\n    client,\n    hostedFields,\n    url\n) {\n    'use strict';\n\n    return VaultComponent.extend({\n        defaults: {\n            active: false,\n            hostedFieldsInstance: null,\n            imports: {\n                onActiveChange: 'active'\n            },\n            modules: {\n                hostedFields: '${ $.parentName }.braintree'\n            },\n            template: 'PayPal_Braintree/payment/cc/vault',\n            updatePaymentUrl: url.build('braintree/payment/updatepaymentmethod'),\n            vaultedCVV: ko.observable(\"\"),\n            validatorManager: validatorManager,\n            isValidCvv: false,\n            onInstanceReady: function (instance) {\n                instance.on('validityChange', this.onValidityChange.bind(this));\n            }\n        },\n\n        /**\n         * Event fired by Braintree SDK whenever input value length matches the validation length.\n         * In the case of a CVV, this is 3, or 4 for AMEX.\n         * @param event\n         */\n        onValidityChange: function (event) {\n            if (event.emittedBy === 'cvv') {\n                this.isValidCvv = event.fields.cvv.isValid;\n            }\n        },\n\n        /**\n         * @returns {exports}\n         */\n        initObservable: function () {\n            this._super().observe(['active']);\n            this.validatorManager.initialize();\n            return this;\n        },\n\n        /**\n         * Is payment option active?\n         * @returns {boolean}\n         */\n        isActive: function () {\n            var active = this.getId() === this.isChecked();\n            this.active(active);\n            return active;\n        },\n\n        /**\n         * Fired whenever a payment option is changed.\n         * @param isActive\n         */\n        onActiveChange: function (isActive) {\n            var self = this;\n\n            if (!isActive) {\n                return;\n            }\n\n            if (self.showCvvVerify()) {\n                if (self.hostedFieldsInstance) {\n                    self.hostedFieldsInstance.teardown(function (teardownError) {\n                        if (teardownError) {\n                            globalMessageList.addErrorMessage({\n                                message: teardownError.message\n                            });\n                        }\n                        self.hostedFieldsInstance = null;\n                        self.initHostedCvvField();\n                    });\n                    return;\n                }\n                self.initHostedCvvField();\n            }\n        },\n\n        /**\n         * Initialize the CVV input field with the Braintree Hosted Fields SDK.\n         */\n        initHostedCvvField: function () {\n            var self = this;\n            client.create({\n                authorization: Braintree.getClientToken()\n            }, function (clientError, clientInstance) {\n                if (clientError) {\n                    globalMessageList.addErrorMessage({\n                        message: clientError.message\n                    });\n                }\n                hostedFields.create({\n                    client: clientInstance,\n                    fields: {\n                        cvv: {\n                            selector: '#' + self.getId() + '_cid',\n                            placeholder: '123'\n                        }\n                    }\n                }, function (hostedError, hostedFieldsInstance) {\n                    if (hostedError) {\n                        globalMessageList.addErrorMessage({\n                            message: hostedError.message\n                        });\n                        return;\n                    }\n\n                    self.hostedFieldsInstance = hostedFieldsInstance;\n                    self.onInstanceReady(self.hostedFieldsInstance);\n                });\n            });\n        },\n\n        /**\n         * Return the payment method code.\n         * @returns {string}\n         */\n        getCode: function () {\n            return 'braintree_cc_vault';\n        },\n\n        /**\n         * Get last 4 digits of card\n         * @returns {String}\n         */\n        getMaskedCard: function () {\n            return this.details.maskedCC;\n        },\n\n        /**\n         * Get expiration date\n         * @returns {String}\n         */\n        getExpirationDate: function () {\n            return this.details.expirationDate;\n        },\n\n        /**\n         * Get card type\n         * @returns {String}\n         */\n        getCardType: function () {\n            return this.details.type;\n        },\n\n        /**\n         * Get show CVV Field\n         * @returns {Boolean}\n         */\n        showCvvVerify: function () {\n            return window.checkoutConfig.payment[this.code].cvvVerify;\n        },\n\n        /**\n         * Show or hide the error message.\n         * @param selector\n         * @param state\n         * @returns {boolean}\n         */\n        validateCvv: function (selector, state) {\n            var $selector = $(selector),\n                invalidClass = 'braintree-hosted-fields-invalid';\n\n            if (state === true) {\n                $selector.removeClass(invalidClass);\n                return true;\n            }\n\n            $selector.addClass(invalidClass);\n            return false;\n        },\n\n        /**\n         * Place order\n         */\n        placeOrder: function () {\n            var self = this;\n\n            if (self.showCvvVerify()) {\n                if (!self.validateCvv('#' + self.getId() + '_cid', self.isValidCvv) || !additionalValidators.validate()) {\n                    return;\n                }\n            } else {\n                if (!additionalValidators.validate()) {\n                    return;\n                }\n            }\n\n            fullScreenLoader.startLoader();\n\n            if (self.showCvvVerify() && typeof self.hostedFieldsInstance !== 'undefined') {\n                self.hostedFieldsInstance.tokenize({}, function (error, payload) {\n                    if (error) {\n                        fullScreenLoader.stopLoader();\n                        globalMessageList.addErrorMessage({\n                            message: error.message\n                        });\n                        return;\n                    }\n                    $.getJSON(\n                        self.updatePaymentUrl,\n                        {\n                            'nonce': payload.nonce,\n                            'public_hash': self.publicHash\n                        }\n                    ).done(function (response) {\n                        if (response.success === false) {\n                            fullScreenLoader.stopLoader();\n                            globalMessageList.addErrorMessage({\n                                message: 'CVV verification failed.'\n                            });\n                            return;\n                        }\n                        self.getPaymentMethodNonce();\n                    })\n                });\n            } else {\n                self.getPaymentMethodNonce();\n            }\n        },\n\n        /**\n         * Send request to get payment method nonce\n         */\n        getPaymentMethodNonce: function () {\n            var self = this;\n\n            fullScreenLoader.startLoader();\n            $.getJSON(self.nonceUrl, {\n                'public_hash': self.publicHash,\n                'cvv': self.vaultedCVV()\n            }).done(function (response) {\n                fullScreenLoader.stopLoader();\n                self.hostedFields(function (formComponent) {\n                    formComponent.setPaymentMethodNonce(response.paymentMethodNonce);\n                    formComponent.additionalData['public_hash'] = self.publicHash;\n                    formComponent.code = self.code;\n                    if (self.vaultedCVV()) {\n                        formComponent.additionalData['cvv'] = self.vaultedCVV();\n                    }\n\n                    self.validatorManager.validate(formComponent, function () {\n                        fullScreenLoader.stopLoader();\n                        return formComponent.placeOrder('parent');\n                    }, function() {\n                        // No teardown actions required.\n                        fullScreenLoader.stopLoader();\n                        formComponent.setPaymentMethodNonce(null);\n                    });\n\n                });\n            }).fail(function (response) {\n                var error = JSON.parse(response.responseText);\n\n                fullScreenLoader.stopLoader();\n                globalMessageList.addErrorMessage({\n                    message: error.message\n                });\n            });\n        }\n    });\n});\n","PayPal_Braintree/js/view/payment/method-renderer/ach.js":"define(\n    [\n        'Magento_Checkout/js/view/payment/default',\n        'ko',\n        'jquery',\n        'braintree',\n        'braintreeDataCollector',\n        'braintreeAch',\n        'PayPal_Braintree/js/form-builder',\n        'Magento_Ui/js/model/messageList',\n        'Magento_Checkout/js/action/select-billing-address',\n        'Magento_Checkout/js/model/full-screen-loader',\n        'Magento_Checkout/js/model/quote',\n        'mage/translate'\n    ],\n    function (\n        Component,\n        ko,\n        $,\n        braintree,\n        dataCollector,\n        ach,\n        formBuilder,\n        messageList,\n        selectBillingAddress,\n        fullScreenLoader,\n        quote,\n        $t\n    ) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                deviceData: null,\n                paymentMethodNonce: null,\n                template: 'PayPal_Braintree/payment/ach',\n                achInstance: null,\n                routingNumber: ko.observable(\"\"),\n                accountNumber: ko.observable(\"\"),\n                accountType: ko.observable(\"checking\"),\n                ownershipType: ko.observable(\"personal\"),\n                firstName: ko.observable(\"\"),\n                lastName: ko.observable(\"\"),\n                businessName: ko.observable(\"\"),\n                hasAuthorization: ko.observable(false),\n                business: ko.observable(false), // for ownership type\n                personal: ko.observable(true) // for ownership type\n            },\n\n            clickAchBtn: function () {\n                if (!this.validateForm('#' + this.getCode() + '-form')) {\n                    return;\n                }\n\n                fullScreenLoader.startLoader();\n\n                var self = this;\n\n                var billingAddress = quote.billingAddress();\n\n                let regionCode;\n\n                let bankDetails = {\n                    routingNumber: self.routingNumber(),\n                    accountNumber: self.accountNumber(),\n                    accountType: self.accountType(),\n                    ownershipType: self.ownershipType(),\n                    billingAddress: {\n                        streetAddress: billingAddress.street[0],\n                        extendedAddress: billingAddress.street[1],\n                        locality: billingAddress.city,\n                        region: billingAddress.regionCode,\n                        postalCode: billingAddress.postcode,\n                    }\n                };\n\n                if (bankDetails.ownershipType === 'personal') {\n                    bankDetails.firstName = self.firstName();\n                    bankDetails.lastName = self.lastName();\n                } else {\n                    bankDetails.businessName = self.businessName();\n                }\n\n                var mandateText = document.getElementById('braintree-ach-mandate').textContent;\n\n                // if no region code is available, lets find one!\n                if (typeof billingAddress.regionCode === 'undefined') {\n                    $.get('/rest/V1/directory/countries/' + billingAddress.countryId).done(function (data) {\n                        if (typeof data.available_regions !== 'undefined') {\n                            for (var i = 0; i < data.available_regions.length; ++i) {\n                                if (data.available_regions[i].id === billingAddress.regionId) {\n                                    regionCode = data.available_regions[i].code;\n                                    bankDetails.billingAddress.region = regionCode;\n                                    self.tokenizeAch(bankDetails, mandateText);\n                                }\n                            }\n                        }\n                    }).fail(function() {\n                        fullScreenLoader.stopLoader();\n                    });\n                } else {\n                    self.tokenizeAch(bankDetails, mandateText);\n                }\n            },\n\n            tokenizeAch: function (bankDetails, mandateText) {\n                var self = this;\n                this.achInstance.tokenize({\n                    bankDetails: bankDetails,\n                    mandateText: mandateText\n                }, function (tokenizeErr, tokenizedPayload) {\n                    if (tokenizeErr) {\n                        self.setErrorMsg($t('There was an error with the provided bank details. Please check and try again.'));\n                        self.hasAuthorization(false);\n                    } else {\n                        fullScreenLoader.stopLoader();\n                        self.handleAchSuccess(tokenizedPayload);\n                    }\n                });\n            },\n\n            getClientToken: function () {\n                return window.checkoutConfig.payment[this.getCode()].clientToken;\n            },\n\n            getCode: function () {\n                return 'braintree_ach_direct_debit';\n            },\n\n            getStoreName: function () {\n                return window.checkoutConfig.payment[this.getCode()].storeName;\n            },\n\n            getData: function () {\n                let data = {\n                    'method': this.getCode(),\n                    'additional_data': {\n                        'payment_method_nonce': this.paymentMethodNonce,\n                    }\n                };\n\n                data['additional_data'] = _.extend(data['additional_data'], this.additionalData);\n\n                return data;\n            },\n\n            getTitle: function() {\n                return 'ACH Direct Debit';\n            },\n\n            handleAchSuccess: function (payload) {\n                this.setPaymentMethodNonce(payload.nonce);\n                this.placeOrder();\n            },\n\n            initialize: function () {\n                this._super();\n\n                var self = this;\n\n                braintree.create({\n                    authorization: self.getClientToken()\n                }, function (clientError, clientInstance) {\n                    if (clientError) {\n                        this.setErrorMsg($t('Unable to initialize Braintree Client.'));\n                        return;\n                    }\n\n                    ach.create({\n                        client: clientInstance\n                    }, function (achErr, achInstance) {\n                        if (achErr) {\n                            self.setErrorMsg($t('Error initializing ACH: %1').replace('%1', achErr));\n                            return;\n                        }\n\n                        self.setAchInstance(achInstance);\n                    });\n                });\n\n                return this;\n            },\n\n            isAllowed: function () {\n                return window.checkoutConfig.payment[this.getCode()].isAllowed;\n            },\n\n            changeOwnershipType: function (data, event) {\n                var self = this;\n                if (event.currentTarget.value === 'business') {\n                    self.business(true);\n                    self.personal(false);\n                } else {\n                    self.business(false);\n                    self.personal(true);\n                }\n            },\n\n            isBusiness: function () {\n                return this.business;\n            },\n\n            isPersonal: function () {\n                return this.personal;\n            },\n\n            setErrorMsg: function (message) {\n                messageList.addErrorMessage({\n                    message: message\n                });\n            },\n\n            setPaymentMethodNonce: function (nonce) {\n                this.paymentMethodNonce = nonce;\n            },\n\n            setAchInstance: function (instance) {\n                this.achInstance = instance;\n            },\n\n            validateForm: function (form) {\n                return $(form).validation() && $(form).validation('isValid');\n            }\n        });\n    }\n);\n","PayPal_Braintree/js/view/payment/method-renderer/lpm.js":"define(\n    [\n        'Magento_Checkout/js/view/payment/default',\n        'ko',\n        'jquery',\n        'braintree',\n        'braintreeLpm',\n        'PayPal_Braintree/js/form-builder',\n        'Magento_Ui/js/model/messageList',\n        'Magento_Checkout/js/action/select-billing-address',\n        'Magento_Checkout/js/model/full-screen-loader',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/model/payment/additional-validators',\n        'mage/url',\n        'mage/translate'\n    ],\n    function (\n        Component,\n        ko,\n        $,\n        braintree,\n        lpm,\n        formBuilder,\n        messageList,\n        selectBillingAddress,\n        fullScreenLoader,\n        quote,\n        additionalValidators,\n        url,\n        $t\n    ) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                code: 'braintree_local_payment',\n                paymentMethodsAvailable: ko.observable(false),\n                paymentMethodNonce: null,\n                template: 'PayPal_Braintree/payment/lpm'\n            },\n\n            clickPaymentBtn: function (method) {\n                var self = this;\n\n                if (additionalValidators.validate()) {\n                    fullScreenLoader.startLoader();\n\n                    braintree.create({\n                        authorization: self.getClientToken()\n                    }, function (clientError, clientInstance) {\n                        if (clientError) {\n                            self.setErrorMsg($t('Unable to initialize Braintree Client.'));\n                            fullScreenLoader.stopLoader();\n                            return;\n                        }\n\n                        lpm.create({\n                            client: clientInstance\n                        }, function (lpmError, lpmInstance) {\n                            if (lpmError) {\n                                self.setErrorMsg(lpmError);\n                                fullScreenLoader.stopLoader();\n                                return;\n                            }\n\n                            lpmInstance.startPayment({\n                                amount: self.getAmount(),\n                                currencyCode: self.getCurrencyCode(),\n                                email: self.getCustomerDetails().email,\n                                phone: self.getCustomerDetails().phone,\n                                givenName: self.getCustomerDetails().firstName,\n                                surname: self.getCustomerDetails().lastName,\n                                shippingAddressRequired: !quote.isVirtual(),\n                                address: self.getAddress(),\n                                paymentType: method,\n                                onPaymentStart: function (data, start) {\n                                    start();\n                                },\n                                // This is a required option, however it will apparently never be used in the current payment flow.\n                                // Therefore, both values are set to allow the payment flow to continute, rather than erroring out.\n                                fallback: {\n                                    url: 'N/A',\n                                    buttonText: 'N/A'\n                                }\n                            }, function (startPaymentError, payload) {\n                                fullScreenLoader.stopLoader();\n                                if (startPaymentError) {\n                                    switch (startPaymentError.code) {\n                                        case 'LOCAL_PAYMENT_POPUP_CLOSED':\n                                            self.setErrorMsg($t('Local Payment popup was closed unexpectedly.'));\n                                            break;\n                                        case 'LOCAL_PAYMENT_WINDOW_OPEN_FAILED':\n                                            self.setErrorMsg($t('Local Payment popup failed to open.'));\n                                            break;\n                                        case 'LOCAL_PAYMENT_WINDOW_CLOSED':\n                                            self.setErrorMsg($t('Local Payment popup was closed. Payment cancelled.'));\n                                            break;\n                                        default:\n                                            self.setErrorMsg('Error! ' + startPaymentError);\n                                            break;\n                                    }\n                                } else {\n                                    // Send the nonce to your server to create a transaction\n                                    self.setPaymentMethodNonce(payload.nonce);\n                                    self.placeOrder();\n                                }\n                            });\n                        });\n                    });\n                }\n            },\n\n            getAddress: function () {\n                var shippingAddress = quote.shippingAddress();\n\n                if (quote.isVirtual()) {\n                    return {\n                        countryCode: shippingAddress.countryId\n                    }\n                }\n\n                return {\n                    streetAddress: shippingAddress.street[0],\n                    extendedAddress: shippingAddress.street[1],\n                    locality: shippingAddress.city,\n                    postalCode: shippingAddress.postcode,\n                    region: shippingAddress.region,\n                    countryCode: shippingAddress.countryId\n                }\n            },\n\n            getAmount: function () {\n                return quote.totals()['base_grand_total'].toString();\n            },\n\n            getBillingAddress: function () {\n                return quote.billingAddress();\n            },\n\n            getClientToken: function () {\n                return window.checkoutConfig.payment[this.getCode()].clientToken;\n            },\n\n            getCode: function () {\n                return this.code;\n            },\n\n            getCurrencyCode: function () {\n                return quote.totals()['base_currency_code'];\n            },\n\n            getCustomerDetails: function() {\n                var billingAddress = quote.billingAddress();\n                return {\n                    firstName: billingAddress.firstname,\n                    lastName: billingAddress.lastname,\n                    phone: billingAddress.telephone,\n                    email: typeof quote.guestEmail === 'string' ? quote.guestEmail : billingAddress.email\n                }\n            },\n\n            getData: function () {\n                let data = {\n                    'method': this.getCode(),\n                    'additional_data': {\n                        'payment_method_nonce': this.paymentMethodNonce,\n                    }\n                };\n\n                data['additional_data'] = _.extend(data['additional_data'], this.additionalData);\n\n                return data;\n            },\n\n            getMerchantId: function () {\n                return window.checkoutConfig.payment[this.getCode()].merchantId;\n            },\n\n            getPaymentMethod: function(method) {\n                var methods = this.getPaymentMethods();\n\n                for (var i = 0; i < methods.length; i++) {\n                    if (methods[i].method === method) {\n                        return methods[i]\n                    }\n                }\n            },\n\n            getPaymentMethods: function() {\n                return window.checkoutConfig.payment[this.getCode()].allowedMethods;\n            },\n\n            getPaymentMarkSrc: function () {\n                return window.checkoutConfig.payment[this.getCode()].paymentIcons;\n            },\n\n            getTitle: function() {\n                return window.checkoutConfig.payment[this.getCode()].title;\n            },\n\n            initialize: function () {\n                this._super();\n                return this;\n            },\n\n            isActive: function() {\n                var address = quote.billingAddress() || quote.shippingAddress();\n                var methods = this.getPaymentMethods();\n\n                for (var i = 0; i < methods.length; i++) {\n                    if (methods[i].countries.includes(address.countryId)) {\n                        return true;\n                    }\n                }\n\n                return false;\n            },\n\n            isValidCountryAndCurrency: function (method) {\n                var address = quote.billingAddress();\n\n                if (!address) {\n                    this.paymentMethodsAvailable(false);\n                    return false;\n                }\n\n                var countryId = address.countryId;\n                var quoteCurrency = quote.totals()['base_currency_code'];\n                var paymentMethodDetails = this.getPaymentMethod(method);\n\n                if (paymentMethodDetails.countries.includes(countryId) && quoteCurrency === 'EUR') {\n                    this.paymentMethodsAvailable(true);\n                    return true;\n                }\n\n                return false;\n            },\n\n            setErrorMsg: function (message) {\n                messageList.addErrorMessage({\n                    message: message\n                });\n            },\n\n            setPaymentMethodNonce: function (nonce) {\n                this.paymentMethodNonce = nonce;\n            },\n\n            validateForm: function (form) {\n                return $(form).validation() && $(form).validation('isValid');\n            }\n        });\n    }\n);\n","PayPal_Braintree/js/view/payment/method-renderer/paypal.js":"/**\n * Copyright \u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine([\n    'jquery',\n    'underscore',\n    'Magento_Checkout/js/view/payment/default',\n    'braintree',\n    'braintreeCheckoutPayPalAdapter',\n    'braintreePayPalCheckout',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Checkout/js/model/full-screen-loader',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'Magento_Checkout/js/model/step-navigator',\n    'Magento_Vault/js/view/payment/vault-enabler',\n    'Magento_Checkout/js/action/create-billing-address',\n    'Magento_Checkout/js/action/select-billing-address',\n    'mage/translate'\n], function (\n    $,\n    _,\n    Component,\n    braintree,\n    Braintree,\n    paypalCheckout,\n    quote,\n    fullScreenLoader,\n    additionalValidators,\n    stepNavigator,\n    VaultEnabler,\n    createBillingAddress,\n    selectBillingAddress,\n    $t\n) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'PayPal_Braintree/payment/paypal',\n            code: 'braintree_paypal',\n            active: false,\n            paypalInstance: null,\n            paymentMethodNonce: null,\n            grandTotalAmount: null,\n            isReviewRequired: false,\n            customerEmail: null,\n\n            /**\n             * Additional payment data\n             *\n             * {Object}\n             */\n            additionalData: {},\n\n            /**\n             * PayPal client configuration\n             * {Object}\n             */\n            clientConfig: {\n                offerCredit: false,\n                offerCreditOnly: false,\n                dataCollector: {\n                    paypal: true\n                },\n\n                buttonPayPalId: 'braintree_paypal_placeholder',\n                buttonCreditId: 'braintree_paypal_credit_placeholder',\n                buttonPaylaterId: 'braintree_paypal_paylater_placeholder',\n\n                onDeviceDataRecieved: function (deviceData) {\n                    this.additionalData['device_data'] = deviceData;\n                },\n\n                /**\n                 * Triggers when widget is loaded\n                 * @param {Object} context\n                 */\n                onReady: function (context) {\n                    this.setupPayPal();\n                },\n\n                /**\n                 * Triggers on payment nonce receive\n                 * @param {Object} response\n                 */\n                onPaymentMethodReceived: function (response) {\n                    this.beforePlaceOrder(response);\n                }\n            },\n            imports: {\n                onActiveChange: 'active'\n            }\n        },\n\n        /**\n         * Set list of observable attributes\n         * @returns {exports.initObservable}\n         */\n        initObservable: function () {\n            var self = this;\n\n            this._super()\n                .observe(['active', 'isReviewRequired', 'customerEmail']);\n\n            window.addEventListener('hashchange', function (e) {\n                var methodCode = quote.paymentMethod();\n\n                if (methodCode === 'braintree_paypal' || methodCode === 'braintree_paypal_vault') {\n                    if (e.newURL.indexOf('payment') > 0 && self.grandTotalAmount !== null) {\n                        self.reInitPayPal();\n                    }\n                }\n            });\n\n            quote.paymentMethod.subscribe(function (value) {\n                var methodCode = value;\n\n                if (methodCode === 'braintree_paypal' || methodCode === 'braintree_paypal_vault') {\n                    self.reInitPayPal();\n                }\n            });\n\n            this.vaultEnabler = new VaultEnabler();\n            this.vaultEnabler.setPaymentCode(this.getVaultCode());\n            this.vaultEnabler.isActivePaymentTokenEnabler.subscribe(function () {\n                self.onVaultPaymentTokenEnablerChange();\n            });\n\n            this.grandTotalAmount = quote.totals()['base_grand_total'];\n\n            quote.totals.subscribe(function () {\n                if (self.grandTotalAmount !== quote.totals()['base_grand_total']) {\n                    self.grandTotalAmount = quote.totals()['base_grand_total'];\n                    var methodCode = quote.paymentMethod();\n\n                    if (methodCode === 'braintree_paypal' || methodCode === 'braintree_paypal_vault') {\n                        self.reInitPayPal();\n                    }\n                }\n            });\n\n            // for each component initialization need update property\n            this.isReviewRequired(false);\n            this.initClientConfig();\n\n            return this;\n        },\n\n        /**\n         * Get payment name\n         *\n         * @returns {String}\n         */\n        getCode: function () {\n            return this.code;\n        },\n\n        /**\n         * Get payment title\n         *\n         * @returns {String}\n         */\n        getTitle: function () {\n            return window.checkoutConfig.payment[this.getCode()].title;\n        },\n\n        /**\n         * Check if payment is active\n         *\n         * @returns {Boolean}\n         */\n        isActive: function () {\n            var active = this.getCode() === this.isChecked();\n\n            this.active(active);\n\n            return active;\n        },\n\n        /**\n         * Triggers when payment method change\n         * @param {Boolean} isActive\n         */\n        onActiveChange: function (isActive) {\n            if (!isActive) {\n                return;\n            }\n\n            // need always re-init Braintree with PayPal configuration\n            this.reInitPayPal();\n        },\n\n        /**\n         * Init config\n         */\n        initClientConfig: function () {\n            this.clientConfig = _.extend(this.clientConfig, this.getPayPalConfig());\n\n            _.each(this.clientConfig, function (fn, name) {\n                if (typeof fn === 'function') {\n                    this.clientConfig[name] = fn.bind(this);\n                }\n            }, this);\n        },\n\n        /**\n         * Set payment nonce\n         * @param {String} paymentMethodNonce\n         */\n        setPaymentMethodNonce: function (paymentMethodNonce) {\n            this.paymentMethodNonce = paymentMethodNonce;\n        },\n\n        /**\n         * Update quote billing address\n         * @param {Object}customer\n         * @param {Object}address\n         */\n        setBillingAddress: function (customer, address) {\n            var billingAddress = {\n                street: [address.line1],\n                city: address.city,\n                postcode: address.postalCode,\n                countryId: address.countryCode,\n                email: customer.email,\n                firstname: customer.firstName,\n                lastname: customer.lastName,\n                telephone: typeof customer.phone !== 'undefined' ? customer.phone : '00000000000'\n            };\n\n            billingAddress['region_code'] = typeof address.state === 'string' ? address.state : '';\n            billingAddress = createBillingAddress(billingAddress);\n            quote.billingAddress(billingAddress);\n        },\n\n        /**\n         * Prepare data to place order\n         * @param {Object} data\n         */\n        beforePlaceOrder: function (data) {\n            this.setPaymentMethodNonce(data.nonce);\n            this.customerEmail(data.details.email);\n            if (quote.isVirtual()) {\n                this.isReviewRequired(true);\n            } else {\n                if (quote.shippingAddress() === quote.billingAddress()) {\n                    selectBillingAddress(quote.shippingAddress());\n                } else {\n                    selectBillingAddress(quote.billingAddress());\n                }\n\n                this.placeOrder();\n            }\n        },\n\n        /**\n         * Re-init PayPal Auth Flow\n         */\n        reInitPayPal: function () {\n            this.disableButton();\n            this.clientConfig.paypal.amount = parseFloat(this.grandTotalAmount).toFixed(2);\n\n            if (!quote.isVirtual()) {\n                this.clientConfig.paypal.enableShippingAddress = true;\n                this.clientConfig.paypal.shippingAddressEditable = false;\n                this.clientConfig.paypal.shippingAddressOverride = this.getShippingAddress();\n            }\n\n            Braintree.setConfig(this.clientConfig);\n\n            if (Braintree.getPayPalInstance()) {\n                Braintree.getPayPalInstance().teardown(function () {\n                    Braintree.setup();\n                }.bind(this));\n                Braintree.setPayPalInstance(null);\n            } else {\n                Braintree.setup();\n                this.enableButton();\n            }\n        },\n\n        /**\n         * Setup PayPal instance\n         */\n        setupPayPal: function () {\n            var self = this;\n\n            if (Braintree.config.paypalInstance) {\n                fullScreenLoader.stopLoader(true);\n                return;\n            }\n\n            paypalCheckout.create({\n                client: Braintree.clientInstance\n            }, function (createErr, paypalCheckoutInstance) {\n                if (createErr) {\n                    Braintree.showError($t(\"PayPal Checkout could not be initialized. Please contact the store owner.\"));\n                    console.error('paypalCheckout error', createErr);\n                    return;\n                }\n                let quoteObj = quote.totals();\n\n                paypalCheckoutInstance.loadPayPalSDK({\n                    components: 'buttons,messages,funding-eligibility',\n                    currency: quoteObj['base_currency_code'],\n                }, function () {\n                    this.loadPayPalButton(paypalCheckoutInstance, 'paypal');\n                    if(this.isCreditEnabled()) {\n                        this.loadPayPalButton(paypalCheckoutInstance, 'credit');\n                    }\n                    if(this.isPaylaterEnabled()) {\n                        this.loadPayPalButton(paypalCheckoutInstance, 'paylater');\n                    }\n\n                }.bind(this));\n            }.bind(this));\n        },\n\n        loadPayPalButton: function (paypalCheckoutInstance, funding) {\n            var paypalPayment = Braintree.config.paypal,\n                onPaymentMethodReceived = Braintree.config.onPaymentMethodReceived,\n                style = {\n                    color: Braintree.getColor(),\n                    shape: Braintree.getShape(),\n                    layout: Braintree.getLayout(),\n                    size: Braintree.getSize()\n                };\n\n            if (Braintree.getBranding()) {\n                style.branding = Braintree.getBranding();\n            }\n            if (Braintree.getFundingIcons()) {\n                style.fundingicons = Braintree.getFundingIcons();\n            }\n\n            if (funding == 'credit') {\n                style.layout = \"horizontal\";\n                style.color = \"darkblue\";\n                Braintree.config.buttonId = this.clientConfig.buttonCreditId;\n            } else if (funding == 'paylater') {\n                style.layout = \"horizontal\";\n                style.color = \"white\";\n                Braintree.config.buttonId = this.clientConfig.buttonPaylaterId;\n            } else {\n                Braintree.config.buttonId = this.clientConfig.buttonPayPalId;\n            }\n            // Render\n            Braintree.config.paypalInstance = paypalCheckoutInstance;\n            var events = Braintree.events;\n            $('#' + Braintree.config.buttonId).html('');\n\n            var button = paypal.Buttons({\n                fundingSource: funding,\n                env: Braintree.getEnvironment(),\n                style: style,\n                commit: true,\n                locale: Braintree.config.paypal.locale,\n\n                createOrder: function () {\n                    return paypalCheckoutInstance.createPayment(paypalPayment);\n                },\n\n                onCancel: function (data) {\n                    console.log('checkout.js payment cancelled', JSON.stringify(data, 0, 2));\n\n                    if (typeof events.onCancel === 'function') {\n                        events.onCancel();\n                    }\n                },\n\n                onError: function (err) {\n                    Braintree.showError($t(\"PayPal Checkout could not be initialized. Please contact the store owner.\"));\n                    Braintree.config.paypalInstance = null;\n                    console.error('Paypal checkout.js error', err);\n\n                    if (typeof events.onError === 'function') {\n                        events.onError(err);\n                    }\n                }.bind(this),\n\n                onClick: function(data) {\n                    if (typeof events.onClick === 'function') {\n                        events.onClick(data);\n                    }\n                },\n\n                onApprove: function (data, actions) {\n                    return paypalCheckoutInstance.tokenizePayment(data)\n                        .then(function (payload) {\n                            onPaymentMethodReceived(payload);\n                        });\n                }\n\n            });\n            if (button.isEligible()) {\n                button.render('#' + Braintree.config.buttonId).then(function () {\n                    Braintree.enableButton();\n                    if (typeof Braintree.config.onPaymentMethodError === 'function') {\n                        Braintree.config.onPaymentMethodError();\n                    }\n                }.bind(this)).then(function (data) {\n                    if (typeof events.onRender === 'function') {\n                        events.onRender(data);\n                    }\n                });\n            }\n        },\n\n        /**\n         * Get locale\n         * @returns {String}\n         */\n        getLocale: function () {\n            return window.checkoutConfig.payment[this.getCode()].locale;\n        },\n\n        /**\n         * Get configuration for PayPal\n         * @returns {Object}\n         */\n        getPayPalConfig: function () {\n            var totals = quote.totals(),\n                config = {},\n                isActiveVaultEnabler = this.isActiveVault();\n\n            config.paypal = {\n                flow: 'checkout',\n                amount: parseFloat(this.grandTotalAmount).toFixed(2),\n                currency: totals['base_currency_code'],\n                locale: this.getLocale(),\n\n                /**\n                 * Triggers on any Braintree error\n                 */\n                onError: function () {\n                    this.paymentMethodNonce = null;\n                },\n\n                /**\n                 * Triggers if browser doesn't support PayPal Checkout\n                 */\n                onUnsupported: function () {\n                    this.paymentMethodNonce = null;\n                }\n            };\n\n            if (isActiveVaultEnabler) {\n                config.paypal.requestBillingAgreement = true;\n            }\n\n            if (!quote.isVirtual()) {\n                config.paypal.enableShippingAddress = true;\n                config.paypal.shippingAddressEditable = false;\n                config.paypal.shippingAddressOverride = this.getShippingAddress();\n            }\n\n            if (this.getMerchantName()) {\n                config.paypal.displayName = this.getMerchantName();\n            }\n\n            return config;\n        },\n\n        /**\n         * Get shipping address\n         * @returns {Object}\n         */\n        getShippingAddress: function () {\n            var address = quote.shippingAddress();\n\n            return {\n                recipientName: address.firstname + ' ' + address.lastname,\n                line1: address.street[0],\n                line2: typeof address.street[2] === 'undefined' ? address.street[1] : address.street[1] + ' ' + address.street[2],\n                city: address.city,\n                countryCode: address.countryId,\n                postalCode: address.postcode,\n                state: address.region\n            };\n        },\n\n        /**\n         * Get merchant name\n         * @returns {String}\n         */\n        getMerchantName: function () {\n            return window.checkoutConfig.payment[this.getCode()].merchantName;\n        },\n\n        /**\n         * Get data\n         * @returns {Object}\n         */\n        getData: function () {\n            var data = {\n                'method': this.getCode(),\n                'additional_data': {\n                    'payment_method_nonce': this.paymentMethodNonce\n                }\n            };\n\n            data['additional_data'] = _.extend(data['additional_data'], this.additionalData);\n\n            this.vaultEnabler.visitAdditionalData(data);\n\n            return data;\n        },\n\n        /**\n         * Returns payment acceptance mark image path\n         * @returns {String}\n         */\n        getPaymentAcceptanceMarkSrc: function () {\n\n            return window.checkoutConfig.payment[this.getCode()].paymentAcceptanceMarkSrc;\n        },\n\n        /**\n         * @returns {String}\n         */\n        getVaultCode: function () {\n            return window.checkoutConfig.payment[this.getCode()].vaultCode;\n        },\n\n        /**\n         * Check if need to skip order review\n         * @returns {Boolean}\n         */\n        isSkipOrderReview: function () {\n            return window.checkoutConfig.payment[this.getCode()].skipOrderReview;\n        },\n\n        /**\n         * Checks if vault is active\n         * @returns {Boolean}\n         */\n        isActiveVault: function () {\n            return this.vaultEnabler.isVaultEnabled() && this.vaultEnabler.isActivePaymentTokenEnabler();\n        },\n\n        /**\n         * Re-init PayPal Auth flow to use Vault\n         */\n        onVaultPaymentTokenEnablerChange: function () {\n            this.clientConfig.paypal.singleUse = !this.isActiveVault();\n            this.reInitPayPal();\n        },\n\n        /**\n         * Disable submit button\n         */\n        disableButton: function () {\n            // stop any previous shown loaders\n            fullScreenLoader.stopLoader(true);\n            fullScreenLoader.startLoader();\n            $('[data-button=\"place\"]').attr('disabled', 'disabled');\n        },\n\n        /**\n         * Enable submit button\n         */\n        enableButton: function () {\n            $('[data-button=\"place\"]').removeAttr('disabled');\n            fullScreenLoader.stopLoader(true);\n        },\n\n        /**\n         * Triggers when customer click \"Continue to PayPal\" button\n         */\n        payWithPayPal: function () {\n            if (additionalValidators.validate()) {\n                Braintree.checkout.paypal.initAuthFlow();\n            }\n        },\n\n        /**\n         * Get button id\n         * @returns {String}\n         */\n        getPayPalButtonId: function () {\n            return this.clientConfig.buttonPayPalId;\n        },\n\n        /**\n         * Get button id\n         * @returns {String}\n         */\n        getCreditButtonId: function () {\n            return this.clientConfig.buttonCreditId;\n        },\n\n        /**\n         * Get button id\n         * @returns {String}\n         */\n        getPaylaterButtonId: function () {\n            return this.clientConfig.buttonPaylaterId;\n        },\n\n        isPaylaterEnabled: function () {\n            return window.checkoutConfig.payment['braintree_paypal_paylater']['isActive'];\n        },\n\n        isPaylaterMessageEnabled: function () {\n            return window.checkoutConfig.payment['braintree_paypal_paylater']['isMessageActive'];\n        },\n\n        getGrandTotalAmount: function() {\n            return parseFloat(this.grandTotalAmount).toFixed(2);\n        },\n\n        isCreditEnabled: function () {\n            return window.checkoutConfig.payment['braintree_paypal_credit']['isActive'];\n        },\n\n    });\n});\n\n","PayPal_Braintree/js/view/payment/method-renderer/paypal-vault.js":"/**\n * Copyright \u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine([\n    'jquery',\n    'underscore',\n    'Magento_Vault/js/view/payment/method-renderer/vault',\n    'Magento_Ui/js/model/messageList',\n    'Magento_Checkout/js/model/full-screen-loader'\n], function ($, _, VaultComponent, globalMessageList, fullScreenLoader) {\n    'use strict';\n\n    return VaultComponent.extend({\n        defaults: {\n            template: 'PayPal_Braintree/payment/paypal/vault',\n            additionalData: {}\n        },\n\n        /**\n         * Get PayPal payer email\n         * @returns {String}\n         */\n        getPayerEmail: function () {\n            return this.details.payerEmail;\n        },\n\n        /**\n         * Get type of payment\n         * @returns {String}\n         */\n        getPaymentIcon: function () {\n            return window.checkoutConfig.payment['braintree_paypal'].paymentIcon;\n        },\n\n        /**\n         * Place order\n         */\n        beforePlaceOrder: function () {\n            this.getPaymentMethodNonce();\n        },\n\n        /**\n         * Send request to get payment method nonce\n         */\n        getPaymentMethodNonce: function () {\n            var self = this;\n\n            fullScreenLoader.startLoader();\n            $.getJSON(self.nonceUrl, {\n                'public_hash': self.publicHash\n            })\n                .done(function (response) {\n                    fullScreenLoader.stopLoader();\n                    self.additionalData['payment_method_nonce'] = response.paymentMethodNonce;\n                    self.placeOrder();\n                })\n                .fail(function (response) {\n                    var error = JSON.parse(response.responseText);\n\n                    fullScreenLoader.stopLoader();\n                    globalMessageList.addErrorMessage({\n                        message: error.message\n                    });\n                });\n        },\n\n        /**\n         * Get payment method data\n         * @returns {Object}\n         */\n        getData: function () {\n            var data = {\n                'method': this.code,\n                'additional_data': {\n                    'public_hash': this.publicHash\n                }\n            };\n\n            data['additional_data'] = _.extend(data['additional_data'], this.additionalData);\n\n            return data;\n        }\n    });\n});\n","PayPal_Braintree/js/view/payment/method-renderer/venmo.js":"define(\n    [\n        'Magento_Checkout/js/view/payment/default',\n        'braintree',\n        'braintreeDataCollector',\n        'braintreeVenmo',\n        'PayPal_Braintree/js/form-builder',\n        'Magento_Ui/js/model/messageList',\n        'Magento_Checkout/js/model/full-screen-loader',\n        'mage/translate'\n    ],\n    function (\n        Component,\n        braintree,\n        dataCollector,\n        venmo,\n        formBuilder,\n        messageList,\n        fullScreenLoader,\n        $t\n    ) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                deviceData: null,\n                paymentMethodNonce: null,\n                template: 'PayPal_Braintree/payment/venmo',\n                venmoInstance: null\n            },\n\n            clickVenmoBtn: function () {\n                var self = this;\n\n                if (!this.venmoInstance) {\n                    this.setErrorMsg($t('Venmo not initialized, please try reloading.'));\n                    return;\n                }\n\n                this.venmoInstance.tokenize(function (tokenizeErr, payload) {\n                    if (tokenizeErr) {\n                        if (tokenizeErr.code === 'VENMO_CANCELED') {\n                            self.setErrorMsg($t('Venmo app is not available or the payment flow was cancelled.'));\n                        } else if (tokenizeErr.code === 'VENMO_APP_CANCELED') {\n                            self.setErrorMsg($t('Venmo payment flow cancelled.'));\n                        } else {\n                            self.setErrorMsg(tokenizeErr.message);\n                        }\n                    } else {\n                        self.handleVenmoSuccess(payload);\n                    }\n                });\n            },\n\n            collectDeviceData: function (clientInstance, callback) {\n                var self = this;\n                dataCollector.create({\n                    client: clientInstance,\n                    paypal: true\n                }, function (dataCollectorErr, dataCollectorInstance) {\n                    if (dataCollectorErr) {\n                        return;\n                    }\n                    self.deviceData = dataCollectorInstance.deviceData;\n                    callback();\n                });\n            },\n\n            getClientToken: function () {\n                return window.checkoutConfig.payment[this.getCode()].clientToken;\n            },\n\n            getCode: function() {\n                return 'braintree_venmo';\n            },\n\n            getData: function () {\n                let data = {\n                    'method': this.getCode(),\n                    'additional_data': {\n                        'payment_method_nonce': this.paymentMethodNonce,\n                        'device_data': this.deviceData\n                    }\n                };\n\n                data['additional_data'] = _.extend(data['additional_data'], this.additionalData);\n\n                return data;\n            },\n\n            getPaymentMarkSrc: function () {\n                return window.checkoutConfig.payment[this.getCode()].paymentMarkSrc;\n            },\n\n            getTitle: function() {\n                return 'Venmo';\n            },\n\n            handleVenmoSuccess: function (payload) {\n                this.setPaymentMethodNonce(payload.nonce);\n                this.placeOrder();\n            },\n\n            initialize: function () {\n                this._super();\n\n                var self = this;\n\n                braintree.create({\n                    authorization: self.getClientToken()\n                }, function (clientError, clientInstance) {\n                    if (clientError) {\n                        this.setErrorMsg($t('Unable to initialize Braintree Client.'));\n                        return;\n                    }\n\n                    // Collect device data\n                    self.collectDeviceData(clientInstance, function () {\n                        // callback from collectDeviceData\n                        venmo.create({\n                            client: clientInstance,\n                            allowNewBrowserTab: false\n                        }, function (venmoErr, venmoInstance) {\n                            if (!venmoInstance.isBrowserSupported()) {\n                                return;\n                            }\n\n                            if (venmoErr) {\n                                self.setErrorMsg($t('Error initializing Venmo: %1').replace('%1', venmoErr));\n                                return;\n                            }\n\n                            self.setVenmoInstance(venmoInstance);\n                        });\n                    });\n                });\n\n                return this;\n            },\n\n            isAllowed: function () {\n                return window.checkoutConfig.payment[this.getCode()].isAllowed;\n            },\n\n            isBrowserSupported: function () {\n                return venmo.isBrowserSupported();\n            },\n\n            setErrorMsg: function (message) {\n                messageList.addErrorMessage({\n                    message: message\n                });\n            },\n\n            setPaymentMethodNonce: function (nonce) {\n                this.paymentMethodNonce = nonce;\n            },\n\n            setVenmoInstance: function (instance) {\n                this.venmoInstance = instance;\n            }\n        });\n    }\n);\n","PayPal_Braintree/js/view/payment/method-renderer/cc-form.js":"/**\n * Copyright 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine(\n    [\n        'underscore',\n        'jquery',\n        'Magento_Payment/js/view/payment/cc-form',\n        'Magento_Checkout/js/model/quote',\n        'PayPal_Braintree/js/view/payment/adapter',\n        'mage/translate',\n        'PayPal_Braintree/js/validator',\n        'PayPal_Braintree/js/view/payment/validator-handler',\n        'Magento_Checkout/js/model/full-screen-loader'\n    ],\n    function (\n        _,\n        $,\n        Component,\n        quote,\n        braintree,\n        $t,\n        validator,\n        validatorManager,\n        fullScreenLoader\n    ) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                active: false,\n                braintreeClient: null,\n                braintreeDeviceData: null,\n                paymentMethodNonce: null,\n                lastBillingAddress: null,\n                validatorManager: validatorManager,\n                code: 'braintree',\n                isProcessing: false,\n\n                /**\n                 * Additional payment data\n                 *\n                 * {Object}\n                 */\n                additionalData: {},\n\n                /**\n                 * Braintree client configuration\n                 *\n                 * {Object}\n                 */\n                clientConfig: {\n                    dataCollector: {\n                        kount: true\n                    },\n\n                    onReady: function (context) {\n                        context.setupHostedFields();\n                    },\n\n                    /**\n                     * Triggers on payment nonce receive\n                     * @param {Object} response\n                     */\n                    onPaymentMethodReceived: function (response) {\n                        this.handleNonce(response);\n                        this.isProcessing = false;\n                    },\n\n                    /**\n                     * Allow a new nonce to be generated\n                     */\n                    onPaymentMethodError: function() {\n                        this.isProcessing = false;\n                    },\n\n                    /**\n                     * Device data initialization\n                     * @param {String} deviceData\n                     */\n                    onDeviceDataRecieved: function (deviceData) {\n                        this.additionalData['device_data'] = deviceData;\n                    },\n\n                    /**\n                     * After Braintree instance initialization\n                     */\n                    onInstanceReady: function () {},\n\n                    /**\n                     * Triggers on any Braintree error\n                     * @param {Object} response\n                     */\n                    onError: function (response) {\n                        this.isProcessing = false;\n                        braintree.showError($t('Payment ' + this.getTitle() + ' can\\'t be initialized'));\n                        throw response.message;\n                    },\n\n                    /**\n                     * Triggers when customer click \"Cancel\"\n                     */\n                    onCancelled: function () {\n                        this.paymentMethodNonce = null;\n                        this.isProcessing = false;\n                    }\n                },\n                imports: {\n                    onActiveChange: 'active'\n                }\n            },\n\n            /**\n             * Set list of observable attributes\n             *\n             * @returns {exports.initObservable}\n             */\n            initObservable: function () {\n                validator.setConfig(window.checkoutConfig.payment[this.getCode()]);\n                this._super()\n                    .observe(['active']);\n                this.validatorManager.initialize();\n                this.initClientConfig();\n\n                return this;\n            },\n\n            /**\n             * Get payment name\n             *\n             * @returns {String}\n             */\n            getCode: function () {\n                return this.code;\n            },\n\n            /**\n             * Check if payment is active\n             *\n             * @returns {Boolean}\n             */\n            isActive: function () {\n                var active = this.getCode() === this.isChecked();\n\n                this.active(active);\n\n                return active;\n            },\n\n            /**\n             * Triggers when payment method change\n             * @param {Boolean} isActive\n             */\n            onActiveChange: function (isActive) {\n                if (!isActive) {\n                    return;\n                }\n\n                this.initBraintree();\n            },\n\n            /**\n             * Init config\n             */\n            initClientConfig: function () {\n                // Advanced fraud tools settings\n                if (this.hasFraudProtection()) {\n                    this.clientConfig = _.extend(this.clientConfig, this.kountConfig());\n                }\n\n                _.each(this.clientConfig, function (fn, name) {\n                    if (typeof fn === 'function') {\n                        this.clientConfig[name] = fn.bind(this);\n                    }\n                }, this);\n            },\n\n            /**\n             * Init Braintree configuration\n             */\n            initBraintree: function () {\n                var intervalId = setInterval(function () {\n                    // stop loader when frame will be loaded\n                    if ($('#braintree-hosted-field-number').length) {\n                        clearInterval(intervalId);\n                        fullScreenLoader.stopLoader(true);\n                    }\n                }, 500);\n\n                if (braintree.checkout) {\n                    braintree.checkout.teardown(function () {\n                        braintree.checkout = null;\n                    });\n                }\n\n                fullScreenLoader.startLoader();\n                braintree.setConfig(this.clientConfig);\n                braintree.setup();\n            },\n\n            /**\n             * @returns {Object}\n             */\n            kountConfig: function () {\n                var config = {\n                    dataCollector: {\n                        kount: {\n                            environment: this.getEnvironment()\n                        }\n                    },\n\n                    /**\n                     * Device data initialization\n                     *\n                     * @param {Object} checkout\n                     */\n                    onReady: function (context) {\n                        this.additionalData['device_data'] = context.deviceData;\n                        context.setupHostedFields();\n                    }\n                };\n\n                if (this.getKountMerchantId()) {\n                    config.dataCollector.kount.merchantId = this.getKountMerchantId();\n                }\n\n                return config;\n            },\n\n            /**\n             * Get full selector name\n             *\n             * @param {String} field\n             * @returns {String}\n             */\n            getSelector: function (field) {\n                return '#' + this.getCode() + '_' + field;\n            },\n\n            /**\n             * Get list of available CC types\n             *\n             * @returns {Object}\n             */\n            getCcAvailableTypes: function () {\n                var availableTypes = validator.getAvailableCardTypes(),\n                    billingAddress = quote.billingAddress(),\n                    billingCountryId;\n\n                this.lastBillingAddress = quote.shippingAddress();\n\n                if (!billingAddress) {\n                    billingAddress = this.lastBillingAddress;\n                }\n\n                billingCountryId = billingAddress.countryId;\n\n                if (billingCountryId && validator.getCountrySpecificCardTypes(billingCountryId)) {\n                    return validator.collectTypes(\n                        availableTypes,\n                        validator.getCountrySpecificCardTypes(billingCountryId)\n                    );\n                }\n\n                return availableTypes;\n            },\n\n            /**\n             * @returns {Boolean}\n             */\n            hasFraudProtection: function () {\n                return window.checkoutConfig.payment[this.getCode()].hasFraudProtection;\n            },\n\n            /**\n             * @returns {String}\n             */\n            getEnvironment: function () {\n                return window.checkoutConfig.payment[this.getCode()].environment;\n            },\n\n            /**\n             * @returns {String}\n             */\n            getKountMerchantId: function () {\n                return window.checkoutConfig.payment[this.getCode()].kountMerchantId;\n            },\n\n            /**\n             * Get data\n             *\n             * @returns {Object}\n             */\n            getData: function () {\n                var data = {\n                    'method': this.getCode(),\n                    'additional_data': {\n                        'payment_method_nonce': this.paymentMethodNonce\n                    }\n                };\n\n                data['additional_data'] = _.extend(data['additional_data'], this.additionalData);\n\n                return data;\n            },\n\n            /**\n             * Set payment nonce\n             * @param {String} paymentMethodNonce\n             */\n            setPaymentMethodNonce: function (paymentMethodNonce) {\n                this.paymentMethodNonce = paymentMethodNonce;\n            },\n\n            /**\n             * Prepare data to place order\n             * @param {Object} data\n             */\n            handleNonce: function (data) {\n                var self = this;\n\n                this.setPaymentMethodNonce(data.nonce);\n\n                // place order on success validation\n                self.validatorManager.validate(self, function () {\n                    return self.placeOrder('parent');\n                }, function() {\n                    self.isProcessing = false;\n                    self.paymentMethodNonce = null;\n                });\n            },\n\n            /**\n             * Action to place order\n             * @param {String} key\n             */\n            placeOrder: function (key) {\n                if (key) {\n                    return this._super();\n                }\n\n                if (this.isProcessing) {\n                    return false;\n                } else {\n                    this.isProcessing = true;\n                }\n\n                braintree.tokenizeHostedFields();\n                return false;\n            },\n\n            /**\n             * Get payment icons\n             * @param {String} type\n             * @returns {Boolean}\n             */\n            getIcons: function (type) {\n                return window.checkoutConfig.payment.braintree.icons.hasOwnProperty(type) ?\n                    window.checkoutConfig.payment.braintree.icons[type]\n                    : false;\n            },\n        });\n    }\n);\n","PayPal_Braintree/js/view/payment/method-renderer/hosted-fields.js":"/**\n * Copyright 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\n\ndefine([\n    'jquery',\n    'PayPal_Braintree/js/view/payment/method-renderer/cc-form',\n    'PayPal_Braintree/js/validator',\n    'Magento_Vault/js/view/payment/vault-enabler',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'mage/translate'\n], function ($, Component, validator, VaultEnabler, additionalValidators, $t) {\n    'use strict';\n\n    return Component.extend({\n\n        defaults: {\n            template: 'PayPal_Braintree/payment/form',\n            clientConfig: {\n\n                /**\n                 * {String}\n                 */\n                id: 'co-transparent-form-braintree'\n            },\n            isValidCardNumber: false,\n            isValidExpirationDate: false,\n            isValidCvvNumber: false,\n\n            onInstanceReady: function (instance) {\n                instance.on('validityChange', this.onValidityChange.bind(this));\n                instance.on('cardTypeChange', this.onCardTypeChange.bind(this));\n            }\n        },\n\n        /**\n         * @returns {exports.initialize}\n         */\n        initialize: function () {\n            this._super();\n            this.vaultEnabler = new VaultEnabler();\n            this.vaultEnabler.setPaymentCode(this.getVaultCode());\n\n            return this;\n        },\n\n        /**\n         * Init config\n         */\n        initClientConfig: function () {\n            this._super();\n\n            this.clientConfig.hostedFields = this.getHostedFields();\n            this.clientConfig.onInstanceReady = this.onInstanceReady.bind(this);\n        },\n\n        /**\n         * @returns {Object}\n         */\n        getData: function () {\n            var data = this._super();\n\n            this.vaultEnabler.visitAdditionalData(data);\n\n            return data;\n        },\n\n        /**\n         * @returns {Bool}\n         */\n        isVaultEnabled: function () {\n            return this.vaultEnabler.isVaultEnabled();\n        },\n\n        /**\n         * Get Braintree Hosted Fields\n         * @returns {Object}\n         */\n        getHostedFields: function () {\n            var self = this,\n                fields = {\n                    number: {\n                        selector: self.getSelector('cc_number'),\n                        placeholder: $t('4111 1111 1111 1111')\n                    },\n                    expirationDate: {\n                        selector: self.getSelector('expirationDate'),\n                        placeholder: $t('MM/YYYY')\n                    }\n                };\n\n            if (self.hasVerification()) {\n                fields.cvv = {\n                    selector: self.getSelector('cc_cid'),\n                    placeholder: $t('123')\n                };\n            }\n\n            return fields;\n        },\n\n        /**\n         * Triggers on Hosted Field changes\n         * @param {Object} event\n         * @returns {Boolean}\n         */\n        onValidityChange: function (event) {\n            // Handle a change in validation or card type\n            if (event.emittedBy === 'number') {\n                this.selectedCardType(null);\n\n                if (event.cards.length === 1) {\n                    this.isValidCardNumber = event.fields.number.isValid;\n                    this.selectedCardType(\n                        validator.getMageCardType(event.cards[0].type, this.getCcAvailableTypes())\n                    );\n                    this.validateCardType();\n                } else {\n                    this.isValidCardNumber = event.fields.number.isValid;\n                    this.validateCardType();\n                }\n            }\n\n            // Other field validations\n            if (event.emittedBy === 'expirationDate') {\n                this.isValidExpirationDate = event.fields.expirationDate.isValid;\n            }\n            if (event.emittedBy === 'cvv') {\n                this.isValidCvvNumber = event.fields.cvv.isValid;\n            }\n        },\n\n        /**\n         * Triggers on Hosted Field card type changes\n         * @param {Object} event\n         * @returns {Boolean}\n         */\n        onCardTypeChange: function (event) {\n            if (event.cards.length === 1) {\n                this.selectedCardType(\n                    validator.getMageCardType(event.cards[0].type, this.getCcAvailableTypes())\n                );\n            } else {\n                this.selectedCardType(null);\n            }\n        },\n\n        /**\n         * Toggle invalid class on selector\n         * @param selector\n         * @param state\n         * @returns {boolean}\n         */\n        validateField: function (selector, state) {\n            var $selector = $(this.getSelector(selector)),\n                invalidClass = 'braintree-hosted-fields-invalid';\n\n            if (state === true) {\n                $selector.removeClass(invalidClass);\n                return true;\n            }\n\n            $selector.addClass(invalidClass);\n            return false;\n        },\n\n        /**\n         * Validate current credit card type\n         * @returns {Boolean}\n         */\n        validateCardType: function () {\n            return this.validateField(\n                'cc_number',\n                (this.isValidCardNumber)\n            );\n        },\n\n        /**\n         * Validate current expiry date\n         * @returns {boolean}\n         */\n        validateExpirationDate: function () {\n            return this.validateField(\n                'expirationDate',\n                (this.isValidExpirationDate === true)\n            );\n        },\n\n        /**\n         * Validate current CVV field\n         * @returns {boolean}\n         */\n        validateCvvNumber: function () {\n            var self = this;\n            \n            if (self.hasVerification() === false) {\n                return true;\n            }\n            \n            return this.validateField(\n                'cc_cid',\n                (this.isValidCvvNumber === true)\n            );\n        },\n\n        /**\n         * Validate all fields\n         * @returns {boolean}\n         */\n        validateFormFields: function () {\n            return (this.validateCardType() && this.validateExpirationDate() && this.validateCvvNumber()) === true;\n        },\n\n        /**\n         * Trigger order placing\n         */\n        placeOrderClick: function () {\n            if (this.validateFormFields() && additionalValidators.validate()) {\n                this.placeOrder();\n            }\n        },\n        /**\n         * @returns {String}\n         */\n        getVaultCode: function () {\n            return window.checkoutConfig.payment[this.getCode()].ccVaultCode;\n        }\n    });\n});\n","PayPal_Braintree/js/view/payment/method-renderer/multishipping/paypal.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine([\n    'jquery',\n    'underscore',\n    'braintreeCheckoutPayPalAdapter',\n    'Magento_Checkout/js/model/quote',\n    'PayPal_Braintree/js/view/payment/method-renderer/paypal',\n    'Magento_Checkout/js/action/set-payment-information',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'Magento_Checkout/js/model/full-screen-loader',\n    'mage/translate'\n], function (\n    $,\n    _,\n    Braintree,\n    quote,\n    Component,\n    setPaymentInformationAction,\n    additionalValidators,\n    fullScreenLoader,\n    $t\n) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'PayPal_Braintree/payment/multishipping/paypal',\n            submitButtonSelector: '[id=\"parent-payment-continue\"]',\n            reviewButtonHtml: ''\n        },\n\n        /**\n         * @override\n         */\n        initObservable: function () {\n            this.reviewButtonHtml = $(this.submitButtonSelector).html();\n            return this._super();\n        },\n\n        initClientConfig: function () {\n            this.clientConfig = _.extend(this.clientConfig, this.getPayPalConfig());\n            this.clientConfig.paypal.enableShippingAddress = false;\n\n            _.each(this.clientConfig, function (fn, name) {\n                if (typeof fn === 'function') {\n                    this.clientConfig[name] = fn.bind(this);\n                }\n            }, this);\n            this.clientConfig.buttonPayPalId = 'parent-payment-continue';\n\n        },\n\n        /**\n         * @override\n         */\n        onActiveChange: function (isActive) {\n            this.updateSubmitButtonHtml(isActive);\n            this._super(isActive);\n        },\n\n        /**\n         * @override\n         */\n        beforePlaceOrder: function (data) {\n            this._super(data);\n        },\n\n        /**\n         * Re-init PayPal Auth Flow\n         */\n        reInitPayPal: function () {\n            this.disableButton();\n            this.clientConfig.paypal.amount = parseFloat(this.grandTotalAmount).toFixed(2);\n\n            if (!quote.isVirtual()) {\n                this.clientConfig.paypal.enableShippingAddress = false;\n                this.clientConfig.paypal.shippingAddressEditable = false;\n            }\n\n            Braintree.setConfig(this.clientConfig);\n\n            if (Braintree.getPayPalInstance()) {\n                Braintree.getPayPalInstance().teardown(function () {\n                    Braintree.setup();\n                }.bind(this));\n                Braintree.setPayPalInstance(null);\n            } else {\n                Braintree.setup();\n                this.enableButton();\n            }\n        },\n\n        /**\n         * Get configuration for PayPal\n         * @returns {Object}\n         */\n        getPayPalConfig: function () {\n            var totals = quote.totals(),\n                config = {},\n                isActiveVaultEnabler = this.isActiveVault();\n\n            config.paypal = {\n                flow: 'checkout',\n                amount: parseFloat(this.grandTotalAmount).toFixed(2),\n                currency: totals['base_currency_code'],\n                locale: this.getLocale(),\n                requestBillingAgreement: true,\n                /**\n                 * Triggers on any Braintree error\n                 */\n                onError: function () {\n                    this.paymentMethodNonce = null;\n                },\n\n                /**\n                 * Triggers if browser doesn't support PayPal Checkout\n                 */\n                onUnsupported: function () {\n                    this.paymentMethodNonce = null;\n                }\n            };\n\n            if (!quote.isVirtual()) {\n                config.paypal.enableShippingAddress = false;\n                config.paypal.shippingAddressEditable = false;\n            }\n\n            if (this.getMerchantName()) {\n                config.paypal.displayName = this.getMerchantName();\n            }\n\n            return config;\n        },\n\n        /**\n         * @override\n         */\n        getData: function () {\n            var data = this._super();\n\n            data['additional_data']['is_active_payment_token_enabler'] = true;\n\n            return data;\n        },\n\n        /**\n         * @override\n         */\n        isActiveVault: function () {\n            return true;\n        },\n\n        /**\n         * Skipping order review step on checkout with multiple addresses is not allowed.\n         *\n         * @returns {Boolean}\n         */\n        isSkipOrderReview: function () {\n            return false;\n        },\n\n        /**\n         * Checks if payment method nonce is already received.\n         *\n         * @returns {Boolean}\n         */\n        isPaymentMethodNonceReceived: function () {\n            return this.paymentMethodNonce !== null;\n        },\n\n        /**\n         * Update submit button on multi-addresses checkout billing form.\n         *\n         * @param {Boolean} isActive\n         */\n        updateSubmitButtonHtml: function (isActive) {\n            $(this.submitButtonSelector).removeClass(\"primary\");\n            if (this.isPaymentMethodNonceReceived() || !isActive) {\n                $(this.submitButtonSelector).addClass(\"primary\");\n                $(this.submitButtonSelector).html(this.reviewButtonHtml);\n            }\n        },\n\n        /**\n         * @override\n         */\n        placeOrder: function () {\n            if (!this.isPaymentMethodNonceReceived()) {\n                this.payWithPayPal();\n            } else {\n                fullScreenLoader.startLoader();\n\n                $.when(\n                    setPaymentInformationAction(\n                        this.messageContainer,\n                        this.getData()\n                    )\n                ).done(this.done.bind(this))\n                    .fail(this.fail.bind(this));\n            }\n        },\n\n        /**\n         * {Function}\n         */\n        fail: function () {\n            fullScreenLoader.stopLoader();\n\n            return this;\n        },\n\n        /**\n         * {Function}\n         */\n        done: function () {\n            fullScreenLoader.stopLoader();\n            $('#multishipping-billing-form').submit();\n\n            return this;\n        }\n    });\n});","PayPal_Braintree/js/view/payment/method-renderer/multishipping/hosted-fields.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\n\ndefine([\n    'jquery',\n    'PayPal_Braintree/js/view/payment/method-renderer/hosted-fields',\n    'PayPal_Braintree/js/validator',\n    'Magento_Ui/js/model/messageList',\n    'mage/translate',\n    'Magento_Checkout/js/model/full-screen-loader',\n    'Magento_Checkout/js/action/set-payment-information',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'PayPal_Braintree/js/view/payment/adapter'\n], function (\n    $,\n    Component,\n    validator,\n    messageList,\n    $t,\n    fullScreenLoader,\n    setPaymentInformationAction,\n    additionalValidators,\n    braintree\n) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'PayPal_Braintree/payment/multishipping/form'\n        },\n\n        /**\n         * Get list of available CC types\n         *\n         * @returns {Object}\n         */\n        getCcAvailableTypes: function () {\n            var availableTypes = validator.getAvailableCardTypes(),\n                billingCountryId;\n\n            billingCountryId = $('#multishipping_billing_country_id').val();\n\n            if (billingCountryId && validator.getCountrySpecificCardTypes(billingCountryId)) {\n                return validator.collectTypes(\n                    availableTypes, validator.getCountrySpecificCardTypes(billingCountryId)\n                );\n            }\n\n            return availableTypes;\n        },\n\n        /**\n         * @override\n         */\n        handleNonce: function (data) {\n            var self = this;\n            this.setPaymentMethodNonce(data.nonce);\n\n            // place order on success validation\n            self.validatorManager.validate(self, function () {\n                return self.setPaymentInformation();\n            }, function() {\n                self.isProcessing = false;\n                self.paymentMethodNonce = null;\n            });\n        },\n\n        /**\n         * @override\n         */\n        placeOrder: function () {\n            var self = this;\n\n            if (this.isProcessing) {\n                return false;\n            } else {\n                this.isProcessing = true;\n            }\n\n            braintree.tokenizeHostedFields();\n            return false;\n        },\n\n        /**\n         * @override\n         */\n        setPaymentInformation: function () {\n            if (additionalValidators.validate()) {\n                fullScreenLoader.startLoader();\n                $.when(\n                    setPaymentInformationAction(\n                        this.messageContainer,\n                        this.getData()\n                    )\n                ).done(this.done.bind(this))\n                    .fail(this.fail.bind(this));\n            }\n        },\n\n        /**\n         * {Function}\n         */\n        fail: function () {\n            fullScreenLoader.stopLoader();\n\n            return this;\n        },\n\n        /**\n         * {Function}\n         */\n        done: function () {\n            fullScreenLoader.stopLoader();\n            $('#multishipping-billing-form').submit();\n\n            return this;\n        }\n    });\n});\n","PayPal_Braintree/js/model/step-navigator-mixin.js":"define([\n    'mage/utils/wrapper',\n    'jquery'\n], function (wrapper, $) {\n    'use strict';\n\n    let mixin = {\n        handleHash: function (originalFn) {\n            var hashString = window.location.hash.replace('#', '');\n            return (hashString.includes('venmo')) ? false : originalFn();\n        }\n    };\n\n    return function (target) {\n        return wrapper.extend(target, mixin);\n    };\n});\n","PayPal_Braintree/js/applepay/api.js":"/**\n * Braintree Apple Pay button API\n *\n **/\ndefine(\n    [\n        'jquery',\n        'underscore',\n        'uiComponent',\n        'mage/translate',\n        'mage/storage',\n        'Magento_Customer/js/customer-data'\n    ],\n    function (\n        $,\n        _,\n        Component,\n        $t,\n        storage,\n        customerData\n    ) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                clientToken: null,\n                quoteId: 0,\n                displayName: null,\n                actionSuccess: null,\n                grandTotalAmount: 0,\n                isLoggedIn: false,\n                storeCode: \"default\",\n                shippingAddress: {},\n                countryDirectory: null,\n                shippingMethods: {}\n            },\n\n            initialize: function () {\n                this._super();\n                if (!this.countryDirectory) {\n                    storage.get(\"rest/V1/directory/countries\").done(function (result) {\n                        this.countryDirectory = {};\n                        let i, data, x, region;\n                        for (i = 0; i < result.length; ++i) {\n                            data = result[i];\n                            this.countryDirectory[data.two_letter_abbreviation] = {};\n                            if (typeof data.available_regions !== 'undefined') {\n                                for (x = 0; x < data.available_regions.length; ++x) {\n                                    region = data.available_regions[x];\n                                    this.countryDirectory[data.two_letter_abbreviation][region.name.toLowerCase().replace(/[^A-Z0-9]/ig, '')] = region.id;\n                                }\n                            }\n                        }\n                    }.bind(this));\n                }\n            },\n\n            /**\n             * Get region ID\n             */\n            getRegionId: function (countryCode, regionName) {\n                if (typeof regionName !== 'string') {\n                    return null;\n                }\n\n                regionName = regionName.toLowerCase().replace(/[^A-Z0-9]/ig, '');\n\n                if (typeof this.countryDirectory[countryCode] !== 'undefined' && typeof this.countryDirectory[countryCode][regionName] !== 'undefined') {\n                    return this.countryDirectory[countryCode][regionName];\n                }\n\n                return 0;\n            },\n\n            /**\n             * Set & get api token\n             */\n            setClientToken: function (value) {\n                this.clientToken = value;\n            },\n            getClientToken: function () {\n                return this.clientToken;\n            },\n\n            /**\n             * Set and get quote id\n             */\n            setQuoteId: function (value) {\n                this.quoteId = value;\n            },\n            getQuoteId: function () {\n                return this.quoteId;\n            },\n\n            /**\n             * Set and get display name\n             */\n            setDisplayName: function (value) {\n                this.displayName = value;\n            },\n            getDisplayName: function () {\n                return this.displayName;\n            },\n\n            /**\n             * Set and get success redirection url\n             */\n            setActionSuccess: function (value) {\n                this.actionSuccess = value;\n            },\n            getActionSuccess: function () {\n                return this.actionSuccess;\n            },\n\n            /**\n             * Set and get grand total\n             */\n            setGrandTotalAmount: function (value) {\n                this.grandTotalAmount = parseFloat(value).toFixed(2);\n            },\n            getGrandTotalAmount: function () {\n                return parseFloat(this.grandTotalAmount);\n            },\n\n            /**\n             * Set and get is logged in\n             */\n            setIsLoggedIn: function (value) {\n                this.isLoggedIn = value;\n            },\n            getIsLoggedIn: function () {\n                return this.isLoggedIn;\n            },\n\n            /**\n             * Set and get store code\n             */\n            setStoreCode: function (value) {\n                this.storeCode = value;\n            },\n            getStoreCode: function () {\n                return this.storeCode;\n            },\n\n            /**\n             * API Urls for logged in / guest\n             */\n            getApiUrl: function (uri) {\n                if (this.getIsLoggedIn() === true) {\n                    return \"rest/\" + this.getStoreCode() + \"/V1/carts/mine/\" + uri;\n                } else {\n                    return \"rest/\" + this.getStoreCode() + \"/V1/guest-carts/\" + this.getQuoteId() + \"/\" + uri;\n                }\n            },\n\n            /**\n             * Payment request info\n             */\n            getPaymentRequest: function () {\n                return {\n                    total: {\n                        label: this.getDisplayName(),\n                        amount: this.getGrandTotalAmount()\n                    },\n                    requiredShippingContactFields: ['postalAddress', 'name', 'email', 'phone'],\n                    requiredBillingContactFields: ['postalAddress', 'name']\n                };\n            },\n\n            /**\n             * Retrieve shipping methods based on address\n             */\n            onShippingContactSelect: function (event, session) {\n                // Get the address.\n                let address = event.shippingContact;\n\n                // Create a payload.\n                let payload = {\n                    address: {\n                        city: address.locality,\n                        region: address.administrativeArea,\n                        country_id: address.countryCode.toUpperCase(),\n                        postcode: address.postalCode,\n                        save_in_address_book: 0\n                    }\n                };\n\n                this.shippingAddress = payload.address;\n\n                // POST to endpoint for shipping methods.\n                storage.post(\n                    this.getApiUrl(\"estimate-shipping-methods\"),\n                    JSON.stringify(payload)\n                ).done(function (result) {\n                    // Stop if no shipping methods.\n                    if (result.length === 0) {\n                        let virtualFlag = false,\n                            productItems = customerData.get('cart')().items;\n                        _.each(productItems,\n                            function (item) {\n                                if(item.product_type == 'virtual') {\n                                    virtualFlag = true;\n                                } else {\n                                    virtualFlag = false;\n                                }\n                            }\n                        )\n                        if(virtualFlag) {\n                            session.completeShippingContactSelection(\n                                ApplePaySession.STATUS_SUCCESS,\n                                [],\n                                {\n                                    label: this.getDisplayName(),\n                                    amount: this.getGrandTotalAmount()\n                                },\n                                [{\n                                    type: 'final',\n                                    label: $t('Shipping'),\n                                    amount: 0\n                                }]\n                            );\n                        } else {\n                            session.abort();\n                            alert($t(\"There are no shipping methods available for you right now. Please try again or use an alternative payment method.\"));\n                            return false;\n                        }\n\n                    }\n\n                    let shippingMethods = [];\n                    this.shippingMethods = {};\n\n                    // Format shipping methods array.\n                    for (let i = 0; i < result.length; i++) {\n                        if (typeof result[i].method_code !== 'string') {\n                            continue;\n                        }\n\n                        let method = {\n                            identifier: result[i].method_code,\n                            label: result[i].method_title,\n                            detail: result[i].carrier_title ? result[i].carrier_title : \"\",\n                            amount: parseFloat(result[i].amount).toFixed(2)\n                        };\n\n                        // Add method object to array.\n                        shippingMethods.push(method);\n\n                        this.shippingMethods[result[i].method_code] = result[i];\n\n                        if (!this.shippingMethod) {\n                            this.shippingMethod = result[i].method_code;\n                        }\n                    }\n\n                    // Create payload to get totals\n                    let totalsPayload = {\n                        \"addressInformation\": {\n                            \"address\": {\n                                \"countryId\": this.shippingAddress.country_id,\n                                \"region\": this.shippingAddress.region,\n                                \"regionId\": this.getRegionId(this.shippingAddress.country_id, this.shippingAddress.region),\n                                \"postcode\": this.shippingAddress.postcode\n                            },\n                            \"shipping_method_code\": this.shippingMethods[shippingMethods[0].identifier].method_code,\n                            \"shipping_carrier_code\": this.shippingMethods[shippingMethods[0].identifier].carrier_code\n                        }\n                    };\n\n                    // POST to endpoint to get totals, using 1st shipping method\n                    storage.post(\n                        this.getApiUrl(\"totals-information\"),\n                        JSON.stringify(totalsPayload)\n                    ).done(function (result) {\n                        // Set total\n                        this.setGrandTotalAmount(result.base_grand_total);\n\n                        // Pass shipping methods back\n                        session.completeShippingContactSelection(\n                            ApplePaySession.STATUS_SUCCESS,\n                            shippingMethods,\n                            {\n                                label: this.getDisplayName(),\n                                amount: this.getGrandTotalAmount()\n                            },\n                            [{\n                                type: 'final',\n                                label: $t('Shipping'),\n                                amount: shippingMethods[0].amount\n                            }]\n                        );\n                    }.bind(this)).fail(function (result) {\n                        session.abort();\n                        alert($t(\"We're unable to fetch the cart totals for you. Please try an alternative payment method.\"));\n                        console.error(\"Braintree ApplePay: Unable to get totals\", result);\n                        return false;\n                    });\n\n                }.bind(this)).fail(function (result) {\n                    session.abort();\n                    alert($t(\"We're unable to find any shipping methods for you. Please try an alternative payment method.\"));\n                    console.error(\"Braintree ApplePay: Unable to find shipping methods for estimate-shipping-methods\", result);\n                    return false;\n                });\n            },\n\n            /**\n             * Record which shipping method has been selected & Updated totals\n             */\n            onShippingMethodSelect: function (event, session) {\n                let shippingMethod = event.shippingMethod;\n                this.shippingMethod = shippingMethod.identifier;\n\n                let payload = {\n                    \"addressInformation\": {\n                        \"address\": {\n                            \"countryId\": this.shippingAddress.country_id,\n                            \"region\": this.shippingAddress.region,\n                            \"regionId\": this.getRegionId(this.shippingAddress.country_id, this.shippingAddress.region),\n                            \"postcode\": this.shippingAddress.postcode\n                        },\n                        \"shipping_method_code\": this.shippingMethods[this.shippingMethod].method_code,\n                        \"shipping_carrier_code\": this.shippingMethods[this.shippingMethod].carrier_code\n                    }\n                };\n\n                storage.post(\n                    this.getApiUrl(\"totals-information\"),\n                    JSON.stringify(payload)\n                ).done(function (r) {\n                    this.setGrandTotalAmount(r.base_grand_total);\n\n                    session.completeShippingMethodSelection(\n                        ApplePaySession.STATUS_SUCCESS,\n                        {\n                            label: this.getDisplayName(),\n                            amount: this.getGrandTotalAmount()\n                        },\n                        [{\n                            type: 'final',\n                            label: $t('Shipping'),\n                            amount: shippingMethod.amount\n                        }]\n                    );\n                }.bind(this));\n            },\n\n            /**\n             * Place the order\n             */\n            startPlaceOrder: function (nonce, event, session) {\n                let shippingContact = event.payment.shippingContact,\n                    billingContact = event.payment.billingContact,\n                    payload = {\n                        \"addressInformation\": {\n                            \"shipping_address\": {\n                                \"email\": shippingContact.emailAddress,\n                                \"telephone\": shippingContact.phoneNumber,\n                                \"firstname\": shippingContact.givenName,\n                                \"lastname\": shippingContact.familyName,\n                                \"street\": shippingContact.addressLines,\n                                \"city\": shippingContact.locality,\n                                \"region\": shippingContact.administrativeArea,\n                                \"region_id\": this.getRegionId(shippingContact.countryCode.toUpperCase(), shippingContact.administrativeArea),\n                                \"region_code\": null,\n                                \"country_id\": shippingContact.countryCode.toUpperCase(),\n                                \"postcode\": shippingContact.postalCode,\n                                \"same_as_billing\": 0,\n                                \"customer_address_id\": 0,\n                                \"save_in_address_book\": 0\n                            },\n                            \"billing_address\": {\n                                \"email\": shippingContact.emailAddress,\n                                \"telephone\": '0000000000',\n                                \"firstname\": billingContact.givenName,\n                                \"lastname\": billingContact.familyName,\n                                \"street\": billingContact.addressLines,\n                                \"city\": billingContact.locality,\n                                \"region\": billingContact.administrativeArea,\n                                \"region_id\": this.getRegionId(billingContact.countryCode.toUpperCase(), billingContact.administrativeArea),\n                                \"region_code\": null,\n                                \"country_id\": billingContact.countryCode.toUpperCase(),\n                                \"postcode\": billingContact.postalCode,\n                                \"same_as_billing\": 0,\n                                \"customer_address_id\": 0,\n                                \"save_in_address_book\": 0\n                            },\n                            \"shipping_method_code\": this.shippingMethod ? this.shippingMethods[this.shippingMethod].method_code : '' ,\n                            \"shipping_carrier_code\": this.shippingMethod ? this.shippingMethods[this.shippingMethod].carrier_code : ''\n                        }\n                    };\n\n                // Set addresses\n                storage.post(\n                    this.getApiUrl(\"shipping-information\"),\n                    JSON.stringify(payload)\n                ).done(function () {\n                    // Submit payment information\n                    storage.post(\n                        this.getApiUrl(\"payment-information\"),\n                        JSON.stringify(\n                            {\n                                \"email\": shippingContact.emailAddress,\n                                \"paymentMethod\": {\n                                    \"method\": \"braintree_applepay\",\n                                    \"additional_data\": {\n                                        \"payment_method_nonce\": nonce\n                                    },\n                                    \"extension_attributes\": {\n                                        \"agreement_ids\": [1]\n                                    }\n                                }\n                            }\n                        )\n                    ).done(function (r) {\n                        document.location = this.getActionSuccess();\n                        session.completePayment(ApplePaySession.STATUS_SUCCESS);\n                    }.bind(this)).fail(function (r) {\n                        session.completePayment(ApplePaySession.STATUS_FAILURE);\n                        session.abort();\n                        alert($t(\"We're unable to take your payment through Apple Pay. Please try an again or use an alternative payment method.\"));\n                        console.error(\"Braintree ApplePay Unable to take payment\", r);\n                        return false;\n                    });\n\n                }.bind(this)).fail(function (r) {\n                    console.error(\"Braintree ApplePay Unable to set shipping information\", r);\n                    session.completePayment(ApplePaySession.STATUS_INVALID_BILLING_POSTAL_ADDRESS);\n                });\n            }\n        });\n    });\n","PayPal_Braintree/js/applepay/button.js":"/**\n * Braintree Apple Pay button\n **/\ndefine(\n    [\n        'uiComponent',\n        \"knockout\",\n        \"jquery\",\n        'braintree',\n        'braintreeApplePay',\n        'mage/translate'\n        ],\n    function (\n        Component,\n        ko,\n        jQuery,\n        braintree,\n        applePay,\n        $t\n    ) {\n        'use strict';\n\n        var that;\n\n        return {\n            init: function (element, context) {\n                // No element or context\n                if (!element || !context) {\n                    return;\n                }\n\n                // Context must implement these methods\n                if (typeof context.getClientToken !== 'function') {\n                    console.error(\"Braintree ApplePay Context passed does not provide a getClientToken method\", context);\n                    return;\n                }\n                if (typeof context.getPaymentRequest !== 'function') {\n                    console.error(\"Braintree ApplePay Context passed does not provide a getPaymentRequest method\", context);\n                    return;\n                }\n                if (typeof context.startPlaceOrder !== 'function') {\n                    console.error(\"Braintree ApplePay Context passed does not provide a startPlaceOrder method\", context);\n                    return;\n                }\n\n                if (this.deviceSupported() === false) {\n                    return;\n                }\n\n                // init braintree api\n                braintree.create({\n                    authorization: context.getClientToken()\n                }, function (clientErr, clientInstance) {\n                    if (clientErr) {\n                        console.error('Error creating client:', clientErr);\n                        return;\n                    }\n\n                    applePay.create({\n                        client: clientInstance\n                    }, function (applePayErr, applePayInstance) {\n                        // No instance\n                        if (applePayErr) {\n                            console.error('Braintree ApplePay Error creating applePayInstance:', applePayErr);\n                            return;\n                        }\n\n                        // Create a button within the KO element, as apple pay can only be instantiated through\n                        // a valid on click event (ko onclick bind interferes with this).\n                        var el = document.createElement('div');\n                        el.className = \"braintree-apple-pay-button\";\n                        el.title = $t(\"Pay with Apple Pay\");\n                        el.alt = $t(\"Pay with Apple Pay\");\n                        el.addEventListener('click', function (e) {\n                            e.preventDefault();\n\n                            // Payment request object\n                            var paymentRequest = applePayInstance.createPaymentRequest(context.getPaymentRequest());\n                            if (!paymentRequest) {\n                                alert($t(\"We're unable to take payments through Apple Pay at the moment. Please try an alternative payment method.\"));\n                                console.error('Braintree ApplePay Unable to create paymentRequest', paymentRequest);\n                                return;\n                            }\n\n                            // Show the loader\n                            jQuery(\"body\").loader('show');\n\n                            // Init apple pay session\n                            try {\n                                var session = new ApplePaySession(1, paymentRequest);\n                            } catch (err) {\n                                jQuery(\"body\").loader('hide');\n                                console.error('Braintree ApplePay Unable to create ApplePaySession', err);\n                                alert($t(\"We're unable to take payments through Apple Pay at the moment. Please try an alternative payment method.\"));\n                                return false;\n                            }\n\n                            // Handle invalid merchant\n                            session.onvalidatemerchant = function (event) {\n                                applePayInstance.performValidation({\n                                    validationURL: event.validationURL,\n                                    displayName: context.getDisplayName()\n                                }, function (validationErr, merchantSession) {\n                                    if (validationErr) {\n                                        session.abort();\n                                        console.error('Braintree ApplePay Error validating merchant:', validationErr);\n                                        alert($t(\"We're unable to take payments through Apple Pay at the moment. Please try an alternative payment method.\"));\n                                        return;\n                                    }\n\n                                    session.completeMerchantValidation(merchantSession);\n                                });\n                            };\n\n                            // Attach payment auth event\n                            session.onpaymentauthorized = function (event) {\n                                applePayInstance.tokenize({\n                                    token: event.payment.token\n                                }, function (tokenizeErr, payload) {\n                                    if (tokenizeErr) {\n                                        console.error('Error tokenizing Apple Pay:', tokenizeErr);\n                                        session.completePayment(ApplePaySession.STATUS_FAILURE);\n                                        return;\n                                    }\n\n                                    // Pass the nonce back to the payment method\n                                    context.startPlaceOrder(payload.nonce, event, session);\n                                });\n                            };\n\n                            // Attach onShippingContactSelect method\n                            if (typeof context.onShippingContactSelect === 'function') {\n                                session.onshippingcontactselected = function (event) {\n                                    return context.onShippingContactSelect(event, session);\n                                };\n                            }\n\n                            // Attach onShippingMethodSelect method\n                            if (typeof context.onShippingMethodSelect === 'function') {\n                                session.onshippingmethodselected = function (event) {\n                                    return context.onShippingMethodSelect(event, session);\n                                };\n                            }\n\n                            // Hook\n                            if (typeof context.onButtonClick === 'function') {\n                                context.onButtonClick(session, this, e);\n                            } else {\n                                jQuery(\"body\").loader('hide');\n                                session.begin();\n                            }\n                        });\n                        element.appendChild(el);\n                    });\n                });\n            },\n\n            /**\n             * Check the site is using HTTPS & apple pay is supported on this device.\n             * @return boolean\n             */\n            deviceSupported: function () {\n                if (location.protocol != 'https:') {\n                    console.warn(\"Braintree Apple Pay requires your checkout be served over HTTPS\");\n                    return false;\n                }\n\n                if ((window.ApplePaySession && ApplePaySession.canMakePayments()) !== true) {\n                    console.warn(\"Braintree Apple Pay is not supported on this device/browser\");\n                    return false;\n                }\n\n                return true;\n            }\n        };\n    }\n);","PayPal_Braintree/js/applepay/implementations/shortcut.js":"/**\n * Braintree Apple Pay mini cart payment method integration.\n **/\ndefine(\n    [\n        'uiComponent',\n        'PayPal_Braintree/js/applepay/button',\n        'PayPal_Braintree/js/applepay/api',\n        'mage/translate',\n        'domReady!'\n    ],\n    function (\n        Component,\n        button,\n        buttonApi,\n        $t\n    ) {\n        'use strict';\n\n        return Component.extend({\n\n            defaults: {\n                id: null,\n                clientToken: null,\n                quoteId: 0,\n                displayName: null,\n                actionSuccess: null,\n                grandTotalAmount: 0,\n                isLoggedIn: false,\n                storeCode: \"default\"\n            },\n\n            /**\n             * @returns {Object}\n             */\n            initialize: function () {\n                this._super();\n                if (!this.displayName) {\n                    this.displayName = $t('Store');\n                }\n\n                var api = new buttonApi();\n                api.setGrandTotalAmount(parseFloat(this.grandTotalAmount).toFixed(2));\n                api.setClientToken(this.clientToken);\n                api.setDisplayName(this.displayName);\n                api.setQuoteId(this.quoteId);\n                api.setActionSuccess(this.actionSuccess);\n                api.setIsLoggedIn(this.isLoggedIn);\n                api.setStoreCode(this.storeCode);\n\n                // Attach the button\n                button.init(\n                    document.getElementById(this.id),\n                    api\n                );\n\n                return this;\n            }\n        });\n    }\n);\n","PayPal_Braintree/js/applepay/implementations/core-checkout/method-applepay.js":"define(\n    ['uiComponent', 'Magento_Checkout/js/model/payment/renderer-list'],\n    function (Component, rendererList) {\n        'use strict';\n\n        rendererList.push(\n            {\n                type: 'braintree_applepay',\n                component: 'PayPal_Braintree/js/applepay/implementations/core-checkout/method-renderer/applepay'\n            }\n        );\n\n        return Component.extend({});\n    }\n);","PayPal_Braintree/js/applepay/implementations/core-checkout/method-renderer/applepay.js":"/**\n * Braintree Apple Pay payment method integration.\n **/\ndefine([\n    'Magento_Checkout/js/view/payment/default',\n    'Magento_Checkout/js/model/quote',\n    'PayPal_Braintree/js/applepay/button'\n], function (\n    Component,\n    quote,\n    button\n) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'PayPal_Braintree/applepay/core-checkout',\n            paymentMethodNonce: null,\n            grandTotalAmount: 0,\n            deviceSupported: button.deviceSupported()\n        },\n\n        /**\n         * Inject the apple pay button into the target element\n         */\n        getApplePayBtn: function (id) {\n            button.init(\n                document.getElementById(id),\n                this\n            );\n        },\n\n        /**\n         * Subscribe to grand totals\n         */\n        initObservable: function () {\n            this._super();\n            this.grandTotalAmount = parseFloat(quote.totals()['base_grand_total']).toFixed(2);\n\n            quote.totals.subscribe(function () {\n                if (this.grandTotalAmount !== quote.totals()['base_grand_total']) {\n                    this.grandTotalAmount = parseFloat(quote.totals()['base_grand_total']).toFixed(2);\n                }\n            }.bind(this));\n\n            return this;\n        },\n\n        /**\n         * Apple pay place order method\n         */\n        startPlaceOrder: function (nonce, event, session) {\n            this.setPaymentMethodNonce(nonce);\n            this.placeOrder();\n\n            session.completePayment(ApplePaySession.STATUS_SUCCESS);\n        },\n\n        /**\n         * Save nonce\n         */\n        setPaymentMethodNonce: function (nonce) {\n            this.paymentMethodNonce = nonce;\n        },\n\n        /**\n         * Retrieve the client token\n         * @returns null|string\n         */\n        getClientToken: function () {\n            return window.checkoutConfig.payment[this.getCode()].clientToken;\n        },\n\n        /**\n         * Payment request data\n         */\n        getPaymentRequest: function () {\n            return {\n                total: {\n                    label: this.getDisplayName(),\n                    amount: this.grandTotalAmount\n                }\n            };\n        },\n\n        /**\n         * Merchant display name\n         */\n        getDisplayName: function () {\n            return window.checkoutConfig.payment[this.getCode()].merchantName;\n        },\n\n        /**\n         * Get data\n         * @returns {Object}\n         */\n        getData: function () {\n            var data = {\n                'method': this.getCode(),\n                'additional_data': {\n                    'payment_method_nonce': this.paymentMethodNonce\n                }\n            };\n            return data;\n        },\n\n        /**\n         * Return image url for the apple pay mark\n         */\n        getPaymentMarkSrc: function () {\n            return window.checkoutConfig.payment[this.getCode()].paymentMarkSrc;\n        }\n    });\n});","PayPal_Braintree/js/reCaptcha/reCaptcha.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine(\n    [\n        'Magento_ReCaptchaFrontendUi/js/reCaptcha',\n        'jquery'\n    ],\n    function (Component, $) {\n        'use strict';\n\n        return Component.extend({\n\n            /**\n             * Recaptcha callback\n             * @param {String} token\n             */\n            reCaptchaCallback: function (token) {\n                this.tokenField.value = token;\n                this.$parentForm.trigger('captcha:endExecute');\n            },\n\n            /**\n             * Initialize parent form.\n             *\n             * @param {Object} parentForm\n             * @param {String} widgetId\n             */\n            initParentForm: function (parentForm, widgetId) {\n                var me = this;\n\n                parentForm.on('captcha:startExecute', function (event) {\n                    if (!me.tokenField.value && me.getIsInvisibleRecaptcha()) {\n                        // eslint-disable-next-line no-undef\n                        grecaptcha.execute(widgetId);\n                        event.preventDefault(event);\n                        event.stopImmediatePropagation();\n                    } else {\n                        me.$parentForm.trigger('captcha:endExecute');\n                    }\n                });\n\n                // Create a virtual token field\n                this.tokenField = $('<input type=\"text\" name=\"token\" style=\"display: none\" />')[0];\n                this.$parentForm = parentForm;\n                parentForm.append(this.tokenField);\n            }\n        });\n    }\n);\n","PayPal_Braintree/js/reCaptcha/braintree-cc-method-mixin.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'Magento_Checkout/js/model/payment/additional-validators'\n], function ($, additionalValidators) {\n    'use strict';\n\n    return function (originalComponent) {\n        return originalComponent.extend({\n            /**\n             * Initializes reCaptcha\n             */\n            placeOrder: function () {\n                var original = this._super.bind(this),\n                    // jscs:disable requireCamelCaseOrUpperCaseIdentifiers\n                    isEnabled = window.checkoutConfig.recaptcha_braintree,\n                    // jscs:enable requireCamelCaseOrUpperCaseIdentifiers\n                    paymentFormSelector = $('#co-payment-form'),\n                    startEvent = 'captcha:startExecute',\n                    endEvent = 'captcha:endExecute';\n\n                if (!additionalValidators.validate() || !isEnabled) {\n                    return original();\n                }\n\n                paymentFormSelector.off(endEvent).on(endEvent, function () {\n                        original();\n                        paymentFormSelector.off(endEvent);\n                    }\n                );\n\n                paymentFormSelector.trigger(startEvent);\n            }\n        });\n    };\n});\n","PayPal_Braintree/js/paypal/form-builder.js":"/**\n * Copyright \u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine(\n    [\n        'jquery',\n        'underscore',\n        'mage/template'\n    ],\n    function ($, _, mageTemplate) {\n        'use strict';\n\n        return {\n\n            /**\n             * @param {Object} formData\n             * @returns {*|jQuery}\n             */\n            build: function (formData) {\n                var formTmpl = mageTemplate('<form action=\"<%= data.action %>\"' +\n                    ' method=\"POST\" hidden enctype=\"application/x-www-form-urlencoded\">' +\n                        '<% _.each(data.fields, function(val, key){ %>' +\n                            '<input value=\\'<%= val %>\\' name=\"<%= key %>\" type=\"hidden\">' +\n                        '<% }); %>' +\n                    '</form>');\n\n                return $(formTmpl({\n                    data: {\n                        action: formData.action,\n                        fields: formData.fields\n                    }\n                })).appendTo($('[data-container=\"body\"]'));\n            }\n        };\n    }\n);\n","PayPal_Braintree/js/paypal/button.js":"/**\n * Copyright \u00a9 2013-2017 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine(\n    [\n        'rjsResolver',\n        'uiRegistry',\n        'uiComponent',\n        'underscore',\n        'jquery',\n        'Magento_Customer/js/customer-data',\n        'mage/translate',\n        'braintree',\n        'braintreeDataCollector',\n        'braintreePayPalCheckout',\n        'PayPal_Braintree/js/form-builder',\n        'domReady!'\n    ],\n    function (\n        resolver,\n        registry,\n        Component,\n        _,\n        $,\n        customerData,\n        $t,\n        braintree,\n        dataCollector,\n        paypalCheckout,\n        formBuilder\n    ) {\n        'use strict';\n        let buttonIds = [];\n\n\n        return {\n            events: {\n                onClick: null,\n                onCancel: null,\n                onError: null\n            },\n\n            init: function (token, currency) {\n                buttonIds = [];\n                $('.action-braintree-paypal-logo').each(function () {\n                    if(!$(this).hasClass( \"button-loaded\" )) {\n                        $(this).addClass('button-loaded');\n                        buttonIds.push($(this).attr('id'));\n                    }\n                });\n\n                if(buttonIds.length > 0){\n                    this.loadSDK(token, currency);\n                }\n            },\n\n            loadSDK: function (token, currency) {\n                braintree.create({\n                    authorization: token\n                }, function (clientErr, clientInstance) {\n                    if (clientErr) {\n                        console.error('paypalCheckout error', clientErr);\n                        return this.showError(\"PayPal Checkout could not be initialized. Please contact the store owner.\");\n                    }\n                    dataCollector.create({\n                        client: clientInstance,\n                        paypal: true\n                    }, function (err, dataCollectorInstance) {\n                        if (err) {\n                            return console.log(err);\n                        }\n                    });\n                    paypalCheckout.create({\n                        client: clientInstance\n                    }, function (err, paypalCheckoutInstance) {\n                        if (typeof paypal !== 'undefined' ) {\n                            this.renderpayPalButtons(buttonIds, paypalCheckoutInstance);\n                            this.renderpayPalMessages();\n                        } else {\n                            paypalCheckoutInstance.loadPayPalSDK({\n                                components: 'buttons,messages,funding-eligibility',\n                                currency: currency,\n                            }, function () {\n                                this.renderpayPalButtons(buttonIds, paypalCheckoutInstance);\n                                this.renderpayPalMessages();\n                            }.bind(this));\n                        }\n\n\n                    }.bind(this));\n                }.bind(this));\n            },\n            renderpayPalButtons: function(ids, paypalCheckoutInstance) {\n                _.each(ids,function(id) {\n                    this.payPalButton(id, paypalCheckoutInstance);\n\n                }.bind(this));\n            },\n\n            renderpayPalMessages: function() {\n                $('.action-braintree-paypal-message').each(function () {\n                    paypal.Messages({\n                        amount: $(this).data('pp-amount'),\n                        pageType: $(this).data('pp-type'),\n                        style: {\n                            layout: 'text',\n                        }\n                    }).render('#' + $(this).attr('id'));\n\n\n                });\n            },\n\n            payPalButton: function(id, paypalCheckoutInstance) {\n\n                let data = $('#' + id);\n                let style = {\n                    color: data.data('color'),\n                    shape: data.data('shape'),\n                    size: data.data('size'),\n                };\n\n                if (data.data('fundingicons')) {\n                    style.fundingicons = data.data('fundingicons');\n                }\n\n                // Render\n                var paypalActions;\n                var button = paypal.Buttons({\n                    fundingSource: data.data('funding'),\n                    style: style,\n                    createOrder: function () {\n                        return paypalCheckoutInstance.createPayment(\n                            {\n                                amount: data.data('amount'),\n                                locale: data.data('locale'),\n                                currency: data.data('currency'),\n                                flow: 'checkout',\n                                enableShippingAddress: true,\n                                displayName: data.data('displayname')\n                            });\n                    },\n                    validate: function(actions) {\n                        var cart = customerData.get('cart'),\n                            customer = customerData.get('customer'),\n                            declinePayment = false,\n                            isGuestCheckoutAllowed;\n                        isGuestCheckoutAllowed = cart().isGuestCheckoutAllowed;\n                        declinePayment = !customer().firstname && !isGuestCheckoutAllowed;\n                        if (declinePayment) {\n                            actions.disable();\n                        }\n                        paypalActions = actions;\n                    },\n\n                    onCancel: function (data) {\n                        jQuery(\"#maincontent\").trigger('processStop');\n\n                        /*if (typeof events.onCancel === 'function') {\n                            events.onCancel();\n                        }*/\n                    },\n\n                    onError: function (err) {\n                        console.error('paypalCheckout button render error', err);\n                        jQuery(\"#maincontent\").trigger('processStop');\n\n\n                        /*if (typeof events.onError === 'function') {\n                            events.onError(err);\n                        }*/\n                    },\n\n                    onClick: function(data) {\n\n                        var cart = customerData.get('cart'),\n                            customer = customerData.get('customer'),\n                            declinePayment = false,\n                            isGuestCheckoutAllowed;\n                        isGuestCheckoutAllowed = cart().isGuestCheckoutAllowed;\n                        declinePayment = !customer().firstname && !isGuestCheckoutAllowed && (typeof isGuestCheckoutAllowed !== 'undefined');\n                        if (declinePayment) {\n                            alert($t('To check out, please sign in with your email address.'));\n                        }\n\n                        /*if (typeof events.onClick === 'function') {\n                            events.onClick(data);\n                        }*/\n                    },\n\n                    onApprove: function (data1)  {\n                        return paypalCheckoutInstance.tokenizePayment(data1, function (err, payload) {\n                            jQuery(\"#maincontent\").trigger('processStart');\n\n                            // Map the shipping address correctly\n                            var address = payload.details.shippingAddress;\n                            var recipientName = address.recipientName.split(\" \");\n                            payload.details.shippingAddress = {\n                                streetAddress: typeof address.line2 !== 'undefined' ? address.line1.replace(/'/g, \"&apos;\") + \" \" + address.line2.replace(/'/g, \"&apos;\") : address.line1.replace(/'/g, \"&apos;\"),\n                                locality: address.city.replace(/'/g, \"&apos;\"),\n                                postalCode: address.postalCode,\n                                countryCodeAlpha2: address.countryCode,\n                                email: payload.details.email.replace(/'/g, \"&apos;\"),\n                                firstname: recipientName[0].replace(/'/g, \"&apos;\"),\n                                lastname: recipientName[1].replace(/'/g, \"&apos;\"),\n                                telephone: typeof payload.details.phone !== 'undefined' ? payload.details.phone : '',\n                                region: typeof address.state !== 'undefined' ? address.state.replace(/'/g, \"&apos;\") : ''\n                            };\n                            if(data.data('location') == 'productpage') {\n                                var form = $(\"#product_addtocart_form\");\n                                if (!(form.validation() && form.validation('isValid'))) {\n                                    return false;\n                                }\n                                payload.additionalData = form.serialize();\n                            }\n\n                            var actionSuccess = data.data('actionsuccess');\n                            formBuilder.build(\n                                {\n                                    action: actionSuccess,\n                                    fields: {\n                                        result: JSON.stringify(payload)\n                                    }\n                                }\n                            ).submit();\n                        });\n                    }\n                });\n                if (!button.isEligible()) {\n                    data.parent().remove();\n                    return;\n                }\n                button.render('#' + data.attr('id'));\n            },\n        }\n    }\n);","PayPal_Braintree/js/paypal/product-page.js":"define(\n    ['PayPal_Braintree/js/paypal/button', 'jquery'],\n    function (button, $) {\n        'use strict';\n\n        return button.extend({\n\n            defaults: {\n                label: 'buynow',\n                branding: true,\n            },\n\n            /**\n             * The validation on the add-to-cart form is done after the PayPal window has opened.\n             * This is because the validate method exposed by the PP Button requires an event to disable/enable the button.\n             * We can't fire an event due to the way the mage.validation widget works and we can't do something gross like\n             * an interval because the validation() method shows the error messages and focuses the user's input on the\n             * first erroring input field.\n             * @param payload\n             * @returns {*}\n             */\n            beforeSubmit: function (payload) {\n                var form = $(\"#product_addtocart_form\");\n\n                if (!(form.validation() && form.validation('isValid'))) {\n                    return false;\n                }\n\n                payload.additionalData = form.serialize();\n\n                return payload;\n            }\n        });\n    }\n);","PayPal_Braintree/js/paypal/credit/calculator.js":"define([\n    'underscore',\n    'uiComponent',\n    'jquery'\n], function (_, Component, $) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: \"PayPal_Braintree/credit/calculator\",\n            displaySummary: true, // \"From X per month\"\n            displayInterestDetails: false, // Display the more in-depth summary of interest rates\n            instalmentsFrom: 0,\n            currentInstalment: {\n                term: 0,\n                monthlyPayment: 0,\n                apr: 0,\n                cost: 0,\n                costIncInterest: 0\n            },\n            endpoint: null,\n            instalments: [],\n            visible: false,\n            merchantName: ''\n        },\n\n        initObservable: function () {\n            this._super();\n            if (this.instalments.length > 0) {\n                this.currentInstalment = this.instalments[0];\n                this.instalmentsFrom = this.instalments[this.instalments.length-1].monthlyPayment;\n                this.visible = true;\n            } else {\n                this.loadInstalments();\n            }\n\n            this.observe(['instalments', 'currentInstalment', 'instalmentsFrom', 'visible']);\n            return this;\n        },\n\n        isCurrentInstalment: function (term) {\n            return (this.currentInstalment().term === term);\n        },\n\n        setCurrentInstalment: function (instalment) {\n            this.currentInstalment(instalment);\n        },\n\n        loadInstalments: function () {\n            if (!this.endpoint) {\n                return false;\n            }\n\n            var self = this;\n            require(['Magento_Checkout/js/model/quote', 'jquery'], function (quote, $) {\n                if (typeof quote.totals().base_grand_total === 'undefined') {\n                    return false;\n                }\n\n                $.getJSON(self.endpoint, {amount: quote.totals().base_grand_total}, function (response) {\n                    self.instalments(response);\n                    self.setCurrentInstalment(response[0]);\n                    self.visible(true);\n                });\n            });\n        }\n    });\n});\n","PayPal_Braintree/js/googlepay/api.js":"/**\n * Braintree Google Pay button api\n **/\ndefine([\n    'uiComponent',\n    'mage/translate',\n    'mage/storage',\n    'jquery',\n    'PayPal_Braintree/js/form-builder'\n], function (Component, $t, storage, jQuery, formBuilder) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            clientToken: null,\n            merchantId: null,\n            currencyCode: null,\n            actionSuccess: null,\n            amount: null,\n            cardTypes: [],\n            btnColor: 0\n        },\n\n        /**\n         * Set & get environment\n         * \"PRODUCTION\" or \"TEST\"\n         */\n        setEnvironment: function (value) {\n            this.environment = value;\n        },\n        getEnvironment: function () {\n            return this.environment;\n        },\n\n        /**\n         * Set & get api token\n         */\n        setClientToken: function (value) {\n            this.clientToken = value;\n        },\n        getClientToken: function () {\n            return this.clientToken;\n        },\n\n        /**\n         * Set and get display name\n         */\n        setMerchantId: function (value) {\n            this.merchantId = value;\n        },\n        getMerchantId: function () {\n            return this.merchantId;\n        },\n\n        /**\n         * Set and get currency code\n         */\n        setAmount: function (value) {\n            this.amount = parseFloat(value).toFixed(2);\n        },\n        getAmount: function () {\n            return this.amount;\n        },\n\n        /**\n         * Set and get currency code\n         */\n        setCurrencyCode: function (value) {\n            this.currencyCode = value;\n        },\n        getCurrencyCode: function () {\n            return this.currencyCode;\n        },\n\n        /**\n         * Set and get success redirection url\n         */\n        setActionSuccess: function (value) {\n            this.actionSuccess = value;\n        },\n        getActionSuccess: function () {\n            return this.actionSuccess;\n        },\n\n        /**\n         * Set and get success redirection url\n         */\n        setCardTypes: function (value) {\n            this.cardTypes = value;\n        },\n        getCardTypes: function () {\n            return this.cardTypes;\n        },\n\n        /**\n         * BTN Color\n         */\n        setBtnColor: function (value) {\n            this.btnColor = value;\n        },\n        getBtnColor: function () {\n            return this.btnColor;\n        },\n\n        /**\n         * Payment request info\n         */\n        getPaymentRequest: function () {\n            var result = {\n                transactionInfo: {\n                    totalPriceStatus: 'ESTIMATED',\n                    totalPrice: this.getAmount(),\n                    currencyCode: this.getCurrencyCode()\n                },\n                allowedPaymentMethods: ['CARD'],\n                phoneNumberRequired: true,\n                emailRequired: true,\n                shippingAddressRequired: true,\n                cardRequirements: {\n                    billingAddressRequired: true,\n                    billingAddressFormat: 'FULL',\n                    allowedCardNetworks: this.getCardTypes()\n                }\n            };\n\n            if (this.getEnvironment() !== \"TEST\") {\n                result['merchantId'] = this.getMerchantId();\n            }\n\n            return result;\n        },\n\n        /**\n         * Place the order\n         */\n        startPlaceOrder: function (nonce, paymentData) {\n            var payload = {\n                details: {\n                    shippingAddress: {\n                        streetAddress: paymentData.shippingAddress.address1 + \"\\n\"\n                        + paymentData.shippingAddress.address2,\n                        locality: paymentData.shippingAddress.locality,\n                        postalCode: paymentData.shippingAddress.postalCode,\n                        countryCodeAlpha2: paymentData.shippingAddress.countryCode,\n                        email: paymentData.email,\n                        name: paymentData.shippingAddress.name,\n                        telephone: typeof paymentData.shippingAddress.phoneNumber !== 'undefined' ? paymentData.shippingAddress.phoneNumber : '',\n                        region: typeof paymentData.shippingAddress.administrativeArea !== 'undefined' ? paymentData.shippingAddress.administrativeArea : ''\n                    },\n                    billingAddress: {\n                        streetAddress: paymentData.cardInfo.billingAddress.address1 + \"\\n\"\n                        + paymentData.cardInfo.billingAddress.address2,\n                        locality: paymentData.cardInfo.billingAddress.locality,\n                        postalCode: paymentData.cardInfo.billingAddress.postalCode,\n                        countryCodeAlpha2: paymentData.cardInfo.billingAddress.countryCode,\n                        email: paymentData.email,\n                        name: paymentData.cardInfo.billingAddress.name,\n                        telephone: typeof paymentData.cardInfo.billingAddress.phoneNumber !== 'undefined' ? paymentData.cardInfo.billingAddress.phoneNumber : '',\n                        region: typeof paymentData.cardInfo.billingAddress.administrativeArea !== 'undefined' ? paymentData.cardInfo.billingAddress.administrativeArea : ''\n                    }\n                },\n                nonce: nonce\n            };\n\n            formBuilder.build({\n                action: this.getActionSuccess(),\n                fields: {\n                    result: JSON.stringify(payload)\n                }\n            }).submit();\n        }\n    });\n});","PayPal_Braintree/js/googlepay/button.js":"/**\n * Braintree Google Pay button\n **/\ndefine(\n    [\n        'uiComponent',\n        \"knockout\",\n        \"jquery\",\n        'braintree',\n        'braintreeGooglePay',\n        'mage/translate',\n        'googlePayLibrary'\n        ],\n    function (\n        Component,\n        ko,\n        jQuery,\n        braintree,\n        googlePay,\n        $t\n    ) {\n        'use strict';\n\n        return {\n            init: function (element, context) {\n                // No element or context\n                if (!element || !context || !this.deviceSupported()) {\n                    return;\n                }\n\n                // Context must implement these methods\n                if (typeof context.getClientToken !== 'function') {\n                    console.error(\"Braintree GooglePay Context passed does not provide a getClientToken method\", context);\n                    return;\n                }\n                if (typeof context.getPaymentRequest !== 'function') {\n                    console.error(\"Braintree GooglePay Context passed does not provide a getPaymentRequest method\", context);\n                    return;\n                }\n                if (typeof context.startPlaceOrder !== 'function') {\n                    console.error(\"Braintree GooglePay Context passed does not provide a startPlaceOrder method\", context);\n                    return;\n                }\n\n                // init google pay object\n                var paymentsClient = new google.payments.api.PaymentsClient({\n                    environment: context.getEnvironment()\n                });\n\n                // Create a button within the KO element, as google pay can only be instantiated through\n                // a valid on click event (ko onclick bind interferes with this).\n                var button = document.createElement('button');\n                button.className = \"braintree-googlepay-button long \" + (context.getBtnColor() == 1 ? 'black' : 'white');\n                button.title = $t(\"Buy with Google Pay\");\n\n                // init braintree api\n                braintree.create({\n                    authorization: context.getClientToken()\n                }, function (clientErr, clientInstance) {\n                    if (clientErr) {\n                        console.error('Error creating client:', clientErr);\n                        return;\n                    }\n\n                    googlePay.create({\n                        client: clientInstance\n                    }, function (googlePayErr, googlePaymentInstance) {\n                        // No instance\n                        if (googlePayErr) {\n                            console.error('Braintree GooglePay Error creating googlePayInstance:', googlePayErr);\n                            return;\n                        }\n\n                        paymentsClient.isReadyToPay({\n                            allowedPaymentMethods: googlePaymentInstance.createPaymentDataRequest().allowedPaymentMethods\n                        }).then(function(response) {\n                            if (response.result) {\n                                button.addEventListener('click', function (event) {\n                                    event.preventDefault();\n                                    jQuery(\"body\").loader('show');\n                                    var responseData;\n\n                                    var paymentDataRequest = googlePaymentInstance.createPaymentDataRequest(context.getPaymentRequest());\n                                    paymentsClient.loadPaymentData(paymentDataRequest).then(function (paymentData) {\n                                        // Persist the paymentData (shipping address etc)\n                                        responseData = paymentData;\n                                        // Return the braintree nonce promise\n                                        return googlePaymentInstance.parseResponse(paymentData);\n                                    }).then(function (result) {\n                                        context.startPlaceOrder(result.nonce, responseData);\n                                    }).catch(function (err) {\n                                        // Handle errors\n                                        // err = {statusCode: \"CANCELED\"}\n                                        console.error(err);\n                                        jQuery(\"body\").loader('hide');\n                                    });\n                                });\n\n                                element.appendChild(button);\n                            }\n                        }).catch(function (err) {\n                            console.error(err);\n                            jQuery(\"body\").loader('hide');\n                        });\n                    });\n                });\n            },\n\n            deviceSupported: function() {\n                return !!(window.PaymentRequest);\n            }\n        };\n    }\n);","PayPal_Braintree/js/googlepay/implementations/shortcut.js":"/**\n * Braintree Google Pay mini cart payment method integration.\n **/\ndefine(\n    [\n        'uiComponent',\n        'PayPal_Braintree/js/googlepay/button',\n        'PayPal_Braintree/js/googlepay/api',\n        'mage/translate',\n        'domReady!'\n    ],\n    function (\n        Component,\n        button,\n        buttonApi,\n        $t\n    ) {\n        'use strict';\n\n        return Component.extend({\n\n            defaults: {\n                id: null,\n                clientToken: null,\n                merchantId: null,\n                currencyCode: null,\n                actionSuccess: null,\n                amount: null,\n                environment: \"TEST\",\n                cardType: [],\n                btnColor: 0\n            },\n\n            /**\n             * @returns {Object}\n             */\n            initialize: function () {\n                this._super();\n\n                var api = new buttonApi();\n                api.setEnvironment(this.environment);\n                api.setCurrencyCode(this.currencyCode);\n                api.setClientToken(this.clientToken);\n                api.setMerchantId(this.merchantId);\n                api.setActionSuccess(this.actionSuccess);\n                api.setAmount(this.amount);\n                api.setCardTypes(this.cardTypes)\n                api.setBtnColor(this.btnColor);\n\n                // Attach the button\n                button.init(\n                    document.getElementById(this.id),\n                    api\n                );\n\n                return this;\n            }\n        });\n    }\n);\n","PayPal_Braintree/js/googlepay/implementations/core-checkout/method-googlepay.js":"define(\n    ['uiComponent', 'Magento_Checkout/js/model/payment/renderer-list'],\n    function (Component, rendererList) {\n        'use strict';\n\n        rendererList.push(\n            {\n                type: 'braintree_googlepay',\n                component: 'PayPal_Braintree/js/googlepay/implementations/core-checkout/method-renderer/googlepay'\n            }\n        );\n\n        return Component.extend({});\n    }\n);","PayPal_Braintree/js/googlepay/implementations/core-checkout/method-renderer/googlepay.js":"/**\n * Braintree Google Pay payment method integration.\n **/\ndefine([\n    'Magento_Checkout/js/view/payment/default',\n    'Magento_Checkout/js/model/quote',\n    'PayPal_Braintree/js/googlepay/button'\n], function (\n    Component,\n    quote,\n    button\n) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'PayPal_Braintree/googlepay/core-checkout',\n            paymentMethodNonce: null,\n            deviceSupported: button.deviceSupported(),\n            grandTotalAmount: 0\n        },\n\n        /**\n         * Inject the google pay button into the target element\n         */\n        getGooglePayBtn: function (id) {\n            button.init(\n                document.getElementById(id),\n                this\n            );\n        },\n\n        /**\n         * Subscribe to grand totals\n         */\n        initObservable: function () {\n            this._super();\n            this.grandTotalAmount = parseFloat(quote.totals()['base_grand_total']).toFixed(2);\n            this.currencyCode = quote.totals()['base_currency_code'];\n\n            quote.totals.subscribe(function () {\n                if (this.grandTotalAmount !== quote.totals()['base_grand_total']) {\n                    this.grandTotalAmount = parseFloat(quote.totals()['base_grand_total']).toFixed(2);\n                }\n            }.bind(this));\n\n            return this;\n        },\n\n        /**\n         * Google pay place order method\n         */\n        startPlaceOrder: function (nonce, paymentData) {\n            this.setPaymentMethodNonce(nonce);\n            this.placeOrder();\n        },\n\n        /**\n         * Save nonce\n         */\n        setPaymentMethodNonce: function (nonce) {\n            this.paymentMethodNonce = nonce;\n        },\n\n        /**\n         * Retrieve the client token\n         * @returns null|string\n         */\n        getClientToken: function () {\n            return window.checkoutConfig.payment[this.getCode()].clientToken;\n        },\n\n        /**\n         * Payment request info\n         */\n        getPaymentRequest: function () {\n           var result = {\n                transactionInfo: {\n                    totalPriceStatus: 'FINAL',\n                    totalPrice: this.grandTotalAmount,\n                    currencyCode: this.currencyCode\n                },\n                allowedPaymentMethods: ['CARD'],\n                phoneNumberRequired: false,\n                emailRequired: false,\n                shippingAddressRequired: false,\n                cardRequirements: {\n                    billingAddressRequired: false,\n                    allowedCardNetworks: this.getCardTypes()\n                }\n            };\n\n           if (this.getEnvironment() !== \"TEST\") {\n               result['merchantId'] = this.getMerchantId();\n           }\n\n           return result;\n        },\n\n        /**\n         * Merchant display name\n         */\n        getMerchantId: function () {\n            return window.checkoutConfig.payment[this.getCode()].merchantId;\n        },\n\n        /**\n         * Environment\n         */\n        getEnvironment: function () {\n            return window.checkoutConfig.payment[this.getCode()].environment;\n        },\n\n        /**\n         * Card Types\n         */\n        getCardTypes: function () {\n            return window.checkoutConfig.payment[this.getCode()].cardTypes;\n        },\n\n        /**\n         * BTN Color\n         */\n        getBtnColor: function () {\n            return window.checkoutConfig.payment[this.getCode()].btnColor;\n        },\n\n        /**\n         * Get data\n         * @returns {Object}\n         */\n        getData: function () {\n            return {\n                'method': this.getCode(),\n                'additional_data': {\n                    'payment_method_nonce': this.paymentMethodNonce\n                }\n            };\n        },\n\n        /**\n         * Return image url for the google pay mark\n         */\n        getPaymentMarkSrc: function () {\n            return window.checkoutConfig.payment[this.getCode()].paymentMarkSrc;\n        }\n    });\n});","Magezon_PageBuilderPageableContainer/js/builder/element/pageable_container.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl, $timeout) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getViewFileUrl('Magezon_PageBuilderPageableContainer/js/templates/builder/element/pageable_container.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\n\t\t\t\tvar parent = $controller('listController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t\tvar self = this;\n\n\t\t\t\t$scope.element.builder.dndDisabled = true;\n\n\t\t\t\tangular.forEach($scope.element.elements, function(element, index) {\n\t\t\t\t\tif (index == 0) {\n\t\t\t\t\t\telement.builder.visible = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.builder.visible = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$scope.$on('afterAddElement', function(e, elem) {\n\t\t\t\t\t$scope.activeEventElement(elem);\n\t\t\t\t});\n\n\t\t\t\t$scope.$on('afterCloneElement', function(e, elem) {\n\t\t\t\t\tif ($scope.isChildren(elem)) {\n\t\t\t\t\t\t$scope.activeEventElement(elem);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$scope.$on('afterDropElement', function(e, elem) {\n\t\t\t\t\tif ($scope.isChildren(elem)) {\n\t\t\t\t\t\t$scope.activeEventElement(elem);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$scope.activeEventElement = function(elem) {\n\t\t\t\t\tif ($scope.isChildren(elem)) {\n\t\t\t\t\t\t$scope.activeElement(elem);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$scope.$on('beforeRemoveElement', function(e, elem) {\n\t\t\t\t\tif ($scope.isChildren(elem)) {\n\t\t\t\t\t\tvar index = $scope.getElemIndex(elem);\n\t\t\t\t\t\tvar elem2 = $scope.element.elements[index+1] ? $scope.element.elements[index+1] : 0;\n\t\t\t\t\t\tif(elem2) $scope.activeElement(elem2);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$scope.activeElement = function(element) {\n\t\t\t\t\tif (!element) return;\n\t\t\t\t\telement.builder.additionalClasses.push('mgz-tabs-tab-content');\n\t\t\t\t\tangular.forEach($scope.element.elements, function(el, index) {\n\t\t\t\t\t\tif (el !== element) {\n\t\t\t\t\t\t\tel.builder.visible = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\telement.builder.visible = true;\n\t\t\t\t\telement.builder.additionalClasses.push('mgz-active');\n\t\t\t\t}\n\n\t\t\t\t$scope.activeFirstElement = function() {\n\t\t\t\t\tvar active = true;\n\t\t\t\t\tangular.forEach($scope.element.elements, function(element) {\n\t\t\t\t\t\tif (!element.builder.visible) {\n\t\t\t\t\t\t\tactive = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (!active) {\n\t\t\t\t\t\t$scope.activeElement($scope.element.elements[0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t$scope.activeFirstElement();\n\n\t\t\t\t$scope.getClassess = function() {\n\t\t\t\t\tvar _elem = $scope.element;\n\t\t\t\t\tvar clasess = [];\n\t\t\t\t\tclasess.push('mgz-tabs mgz-pageable-container');\n\t\t\t\t\tclasess.push('mgz-tabs-' + _elem.id);\n\t\t\t\t\t\n\t\t\t\t\tif (_elem.owl_dots_insie) {\n\t\t            \tclasess.push('mgz-carousel-dot-inside');\n\t\t            }\n\t\t\t\t\treturn clasess;\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn directive;\n});","Magento_Shipping/js/view/checkout/shipping/shipping-policy.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'uiComponent',\n    'Magento_Shipping/js/model/config'\n\n], function (Component, config) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Magento_Shipping/checkout/shipping/shipping-policy'\n        },\n        config: config()\n    });\n});\n","Magento_Shipping/js/model/config.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([], function () {\n    'use strict';\n\n    return function () {\n        return window.checkoutConfig.shippingPolicy;\n    };\n});\n","mage/touch-slider.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'underscore',\n    'jquery-ui-modules/slider'\n], function ($, _) {\n    'use strict';\n\n    /**\n     * Adds support for touch events for regular jQuery UI slider.\n     */\n    $.widget('mage.touchSlider', $.ui.slider, {\n\n        /**\n         * Creates instance of widget.\n         *\n         * @override\n         */\n        _create: function () {\n            _.bindAll(\n                this,\n                '_mouseDown',\n                '_mouseMove',\n                '_onTouchEnd'\n            );\n\n            return this._superApply(arguments);\n        },\n\n        /**\n         * Initializes mouse events on element.\n         * @override\n         */\n        _mouseInit: function () {\n            var result = this._superApply(arguments);\n\n            this.element\n                .off('mousedown.' + this.widgetName)\n                .on('touchstart.' + this.widgetName, this._mouseDown);\n\n            return result;\n        },\n\n        /**\n         * Elements' 'mousedown' event handler polyfill.\n         * @override\n         */\n        _mouseDown: function (event) {\n            var prevDelegate = this._mouseMoveDelegate,\n                result;\n\n            event = this._touchToMouse(event);\n            result = this._super(event);\n\n            if (prevDelegate === this._mouseMoveDelegate) {\n                return result;\n            }\n\n            $(document)\n                .off('mousemove.' + this.widgetName)\n                .off('mouseup.' + this.widgetName);\n\n            $(document)\n                .on('touchmove.' + this.widgetName, this._mouseMove)\n                .on('touchend.' + this.widgetName, this._onTouchEnd)\n                .on('tochleave.' + this.widgetName, this._onTouchEnd);\n\n            return result;\n        },\n\n        /**\n         * Documents' 'mousemove' event handler polyfill.\n         *\n         * @override\n         * @param {Event} event - Touch event object.\n         */\n        _mouseMove: function (event) {\n            event = this._touchToMouse(event);\n\n            return this._super(event);\n        },\n\n        /**\n         * Documents' 'touchend' event handler.\n         */\n        _onTouchEnd: function (event) {\n            $(document).trigger('mouseup');\n\n            return this._mouseUp(event);\n        },\n\n        /**\n         * Removes previously assigned touch handlers.\n         *\n         * @override\n         */\n        _mouseUp: function () {\n            this._removeTouchHandlers();\n\n            return this._superApply(arguments);\n        },\n\n        /**\n         * Removes previously assigned touch handlers.\n         *\n         * @override\n         */\n        _mouseDestroy: function () {\n            this._removeTouchHandlers();\n\n            return this._superApply(arguments);\n        },\n\n        /**\n         * Removes touch events from document object.\n         */\n        _removeTouchHandlers: function () {\n            $(document)\n                .off('touchmove.' + this.widgetName)\n                .off('touchend.' + this.widgetName)\n                .off('touchleave.' + this.widgetName);\n        },\n\n        /**\n         * Adds properties to the touch event to mimic mouse event.\n         *\n         * @param {Event} event - Touch event object.\n         * @returns {Event}\n         */\n        _touchToMouse: function (event) {\n            var orig = event.originalEvent,\n                touch = orig.touches[0];\n\n            return _.extend(event, {\n                which:      1,\n                pageX:      touch.pageX,\n                pageY:      touch.pageY,\n                clientX:    touch.clientX,\n                clientY:    touch.clientY,\n                screenX:    touch.screenX,\n                screenY:    touch.screenY\n            });\n        }\n    });\n\n    return $.mage.touchSlider;\n});\n","mage/ie-class-fixer.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([], function () {\n    'use strict';\n\n    if (navigator.userAgent.match(/Trident.*rv[ :]*11\\./)) {\n        document.documentElement.classList.add('ie11');\n    }\n});\n","mage/accordion.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/tabs'\n], function ($, tabs) {\n    'use strict';\n\n    $.widget('mage.accordion', tabs, {\n        options: {\n            active: [0],\n            multipleCollapsible: false,\n            openOnFocus: false\n        },\n\n        /**\n         * @private\n         */\n        _callCollapsible: function () {\n            var self = this,\n                disabled = false,\n                active = false;\n\n            if (typeof this.options.active === 'string') {\n                this.options.active = this.options.active.split(' ').map(function (item) {\n                    return parseInt(item, 10);\n                });\n            }\n\n            $.each(this.collapsibles, function (i) {\n                disabled = active = false;\n\n                if ($.inArray(i, self.options.disabled) !== -1) {\n                    disabled = true;\n                }\n\n                if ($.inArray(i, self.options.active) !== -1) {\n                    active = true;\n                }\n                self._instantiateCollapsible(this, i, active, disabled);\n            });\n        },\n\n        /**\n         * Overwrites default functionality to provide the option to activate/deactivate multiple sections simultaneous\n         * @param {*} action\n         * @param {*} index\n         * @private\n         */\n        _toggleActivate: function (action, index) {\n            var self = this;\n\n            if ($.isArray(index && this.options.multipleCollapsible)) {\n                $.each(index, function () {\n                    self.collapsibles.eq(this).collapsible(action);\n                });\n            } else if (index === undefined && this.options.multipleCollapsible) {\n                this.collapsibles.collapsible(action);\n            } else {\n                this._super(action, index);\n            }\n        },\n\n        /**\n         * If the Accordion allows multiple section to be active at the same time, if deep linking is used\n         * sections that don't contain the id from anchor shouldn't be closed, otherwise the accordion uses the\n         * tabs behavior\n         * @private\n         */\n        _handleDeepLinking: function () {\n            if (!this.options.multipleCollapsible) {\n                this._super();\n            }\n        },\n\n        /**\n         * Prevent default behavior that closes the other sections when one gets activated if the Accordion allows\n         * multiple sections simultaneous\n         * @private\n         */\n        _closeOthers: function () {\n            var self = this;\n\n            if (!this.options.multipleCollapsible) {\n                $.each(this.collapsibles, function () {\n                    $(this).on('beforeOpen', function () {\n                        self.collapsibles.not(this).collapsible('deactivate');\n                    });\n                });\n            }\n            $.each(this.collapsibles, function () {\n                $(this).on('beforeOpen', function () {\n                    var section = $(this);\n\n                    section.addClass('allow').prevAll().addClass('allow');\n                    section.nextAll().removeClass('allow');\n                });\n            });\n        }\n    });\n\n    return $.mage.accordion;\n});\n","mage/translate-inline.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/template',\n    'mage/utils/misc',\n    'mage/translate',\n    'jquery-ui-modules/dialog'\n], function ($, mageTemplate, miscUtils) {\n    'use strict';\n\n    $.widget('mage.translateInline', $.ui.dialog, {\n        options: {\n            translateForm: {\n                template: '#translate-form-template',\n                data: {\n                    id: 'translate-inline-form',\n                    message: 'Please refresh the page to see your changes after submitting this form.'\n                }\n            },\n            autoOpen: false,\n            translateArea: null,\n            modal: true,\n            dialogClass: 'popup-window',\n            width: '75%',\n            title: $.mage.__('Translate'),\n            height: 470,\n            position: {\n                my: 'left top',\n                at: 'center top',\n                of: 'body'\n            },\n            buttons: [{\n                text: $.mage.__('Submit'),\n                'class': 'action-primary',\n\n                /**\n                 * Click\n                 */\n                click: function () {\n                    $(this).translateInline('submit');\n                }\n            },\n            {\n                text: $.mage.__('Close'),\n                'class': 'action-close',\n\n                /**\n                 * Click.\n                 */\n                click: function () {\n                    $(this).translateInline('close');\n                }\n            }],\n\n            /**\n             * Open.\n             */\n            open: function () {\n                var $uiDialog = $(this).closest('.ui-dialog'),\n                    topMargin = $uiDialog.children('.ui-dialog-titlebar').outerHeight() + 45;\n\n                $uiDialog\n                    .addClass('ui-dialog-active')\n                    .css('margin-top', topMargin);\n            },\n\n            /**\n             * Close.\n             */\n            close: function () {\n                $(this).closest('.ui-dialog').removeClass('ui-dialog-active');\n            }\n        },\n\n        /**\n         * Translate Inline creation\n         * @protected\n         */\n        _create: function () {\n            var $translateArea = $(this.options.translateArea);\n\n            if (!$translateArea.length) {\n                $translateArea = $('body');\n            }\n            $translateArea.on('edit.editTrigger', $.proxy(this._onEdit, this));\n\n            this.tmpl = mageTemplate(this.options.translateForm.template);\n\n            this._super();\n        },\n\n        /**\n         * @param {*} templateData\n         * @return {*|jQuery|HTMLElement}\n         * @private\n         */\n        _prepareContent: function (templateData) {\n            var data = $.extend({\n                items: templateData,\n                escape: miscUtils.escape\n            }, this.options.translateForm.data);\n\n            this.data = data;\n\n            return $(this.tmpl({\n                data: data\n            }));\n        },\n\n        /**\n         * Render translation form and open dialog\n         * @param {Object} e - object\n         * @protected\n         */\n        _onEdit: function (e) {\n            this.target = e.target;\n            this.element.html(this._prepareContent($(e.target).data('translate')));\n            this.open(e);\n        },\n\n        /**\n         * Submit.\n         */\n        submit: function () {\n            if (this.formIsSubmitted) {\n                return;\n            }\n            this._formSubmit();\n        },\n\n        /**\n         * Send ajax request on form submit\n         * @protected\n         */\n        _formSubmit: function () {\n            var parameters = $.param({\n                    area: this.options.area\n                }) + '&' + $('#' + this.options.translateForm.data.id).serialize();\n\n            this.formIsSubmitted = true;\n\n            $.ajax({\n                url: this.options.ajaxUrl,\n                type: 'POST',\n                data: parameters,\n                loaderContext: this.element,\n                showLoader: true\n            }).complete($.proxy(this._formSubmitComplete, this));\n        },\n\n        /**\n         * @param {Object} response\n         * @private\n         */\n        _formSubmitComplete: function (response) {\n            this.close();\n            this.formIsSubmitted = false;\n            this._updatePlaceholder(response.responseJSON[this.data.items[0].original]);\n        },\n\n        /**\n         * @param {*} newValue\n         * @private\n         */\n        _updatePlaceholder: function (newValue) {\n            var $target = $(this.target),\n                translateObject = $target.data('translate')[0];\n\n            translateObject.shown = newValue;\n            translateObject.translated = newValue;\n\n            $target.html(newValue);\n        },\n\n        /**\n         * Destroy translateInline\n         */\n        destroy: function () {\n            this.element.off('.editTrigger');\n            this._super();\n        }\n    });\n\n    return $.mage.translateInline;\n});\n","mage/polyfill.js":"(function (root, doc) {\n    'use strict';\n\n    var Storage;\n\n    try {\n        if (!root.localStorage || !root.sessionStorage) {\n            throw new Error();\n        }\n\n        localStorage.setItem('storage_test', 1);\n        localStorage.removeItem('storage_test');\n    } catch (e) {\n        /**\n         * Returns a storage object to shim local or sessionStorage\n         * @param {String} type - either 'local' or 'session'\n         */\n        Storage = function (type) {\n            var data;\n\n            /**\n             * Creates a cookie\n             * @param {String} name\n             * @param {String} value\n             * @param {Integer} days\n             */\n            function createCookie(name, value, days) {\n                var date, expires;\n\n                if (days) {\n                    date = new Date();\n                    date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n                    expires = '; expires=' + date.toGMTString();\n                } else {\n                    expires = '';\n                }\n                doc.cookie = name + '=' + value + expires + '; path=/';\n            }\n\n            /**\n             * Reads value of a cookie\n             * @param {String} name\n             */\n            function readCookie(name) {\n                var nameEQ = name + '=',\n                    ca = doc.cookie.split(';'),\n                    i = 0,\n                    c;\n\n                for (i = 0; i < ca.length; i++) {\n                    c = ca[i];\n\n                    while (c.charAt(0) === ' ') {\n                        c = c.substring(1, c.length);\n                    }\n\n                    if (c.indexOf(nameEQ) === 0) {\n                        return c.substring(nameEQ.length, c.length);\n                    }\n                }\n\n                return null;\n            }\n\n            /**\n             * Returns cookie name based upon the storage type.\n             * If this is session storage, the function returns a unique cookie per tab\n             */\n            function getCookieName() {\n\n                if (type !== 'session') {\n                    return 'localstorage';\n                }\n\n                if (!root.name) {\n                    root.name = new Date().getTime();\n                }\n\n                return 'sessionStorage' + root.name;\n            }\n\n            /**\n             * Sets storage cookie to a data object\n             * @param {Object} dataObject\n             */\n            function setData(dataObject) {\n                data = encodeURIComponent(JSON.stringify(dataObject));\n                createCookie(getCookieName(), data, 365);\n            }\n\n            /**\n             * Clears value of cookie data\n             */\n            function clearData() {\n                createCookie(getCookieName(), '', 365);\n            }\n\n            /**\n             * @returns value of cookie data\n             */\n            function getData() {\n                var dataResponse = readCookie(getCookieName());\n\n                return dataResponse ? JSON.parse(decodeURIComponent(dataResponse)) : {};\n            }\n\n            data = getData();\n\n            return {\n                length: 0,\n\n                /**\n                 * Clears data from storage\n                 */\n                clear: function () {\n                    data = {};\n                    this.length = 0;\n                    clearData();\n                },\n\n                /**\n                 * Gets an item from storage\n                 * @param {String} key\n                 */\n                getItem: function (key) {\n                    return data[key] === undefined ? null : data[key];\n                },\n\n                /**\n                 * Gets an item by index from storage\n                 * @param {Integer} i\n                 */\n                key: function (i) {\n                    var ctr = 0,\n                        k;\n\n                    for (k in data) {\n\n                        if (data.hasOwnProperty(k)) {\n\n                            // eslint-disable-next-line max-depth\n                            if (ctr.toString() === i.toString()) {\n                                return k;\n                            }\n                            ctr++;\n                        }\n                    }\n\n                    return null;\n                },\n\n                /**\n                 * Removes an item from storage\n                 * @param {String} key\n                 */\n                removeItem: function (key) {\n                    delete data[key];\n                    this.length--;\n                    setData(data);\n                },\n\n                /**\n                 * Sets an item from storage\n                 * @param {String} key\n                 * @param {String} value\n                 */\n                setItem: function (key, value) {\n                    data[key] = value.toString();\n                    this.length++;\n                    setData(data);\n                }\n            };\n        };\n\n        root.localStorage.prototype = root.localStorage = new Storage('local');\n        root.sessionStorage.prototype = root.sessionStorage = new Storage('session');\n    }\n})(window, document);\n","mage/dialog.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @deprecated since version 2.2.0\n */\ndefine([\n    'jquery',\n    'jquery-ui-modules/dialog'\n], function ($) {\n    'use strict';\n\n    /**\n     * Dialog Widget - this widget is a wrapper for the jQuery UI Dialog\n     */\n    $.widget('mage.dialog', $.ui.dialog, {});\n\n    return $.mage.dialog;\n});\n","mage/dropdown.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery-ui-modules/dialog',\n    'mage/translate'\n], function ($) {\n    'use strict';\n\n    var timer = null;\n\n    /**\n     * Dropdown Widget - this widget is a wrapper for the jQuery UI Dialog\n     */\n    $.widget('mage.dropdownDialog', $.ui.dialog, {\n        options: {\n            triggerEvent: 'click',\n            triggerClass: null,\n            parentClass: null,\n            triggerTarget: null,\n            defaultDialogClass: 'mage-dropdown-dialog',\n            dialogContentClass: null,\n            shadowHinter: null,\n            closeOnMouseLeave: true,\n            closeOnClickOutside: true,\n            minHeight: null,\n            minWidth: null,\n            width: null,\n            modal: false,\n            timeout: null,\n            autoOpen: false,\n            createTitleBar: false,\n            autoPosition: false,\n            autoSize: false,\n            draggable: false,\n            resizable: false,\n            bodyClass: '',\n            buttons: [\n                {\n                    'class': 'action close',\n                    'text': $.mage.__('Close'),\n\n                    /**\n                     * Click action.\n                     */\n                    'click': function () {\n                        $(this).dropdownDialog('close');\n                    }\n                }\n            ]\n        },\n\n        /**\n         * extend default functionality to bind the opener for dropdown\n         * @private\n         */\n        _create: function () {\n            var _self = this;\n\n            this._super();\n            this.uiDialog.addClass(this.options.defaultDialogClass);\n\n            if (_self.options.triggerTarget) {\n                $(_self.options.triggerTarget).on(_self.options.triggerEvent, function (event) {\n                    event.preventDefault();\n                    event.stopPropagation();\n\n                    if (!_self._isOpen) {\n                        $('.' + _self.options.defaultDialogClass + ' > .ui-dialog-content').dropdownDialog('close');\n                        _self.open();\n                    } else {\n                        _self.close(event);\n                    }\n                });\n            }\n\n            if (_self.options.shadowHinter) {\n                _self.hinter = $('<div class=\"' + _self.options.shadowHinter + '\"/>');\n                _self.element.append(_self.hinter);\n            }\n        },\n\n        /**\n         * Extend default functionality to close the dropdown\n         * with custom delay on mouse out and also to close when clicking outside\n         */\n        open: function () {\n            var _self = this;\n\n            this._super();\n\n            if (_self.options.dialogContentClass) {\n                _self.element.addClass(_self.options.dialogContentClass);\n            }\n\n            if (_self.options.closeOnMouseLeave) {\n\n                this._mouseEnter(_self.uiDialog);\n                this._mouseLeave(_self.uiDialog);\n\n                if (_self.options.triggerTarget) {\n                    this._mouseLeave($(_self.options.triggerTarget));\n                }\n            }\n\n            if (_self.options.closeOnClickOutside) {\n                $('body').on('click.outsideDropdown', function (event) {\n                    if (_self._isOpen && !$(event.target).closest('.ui-dialog').length) {\n                        if (timer) {\n                            clearTimeout(timer);\n                        }\n                        _self.close(event);\n                    }\n                });\n            }\n            // adding the class on the opener and parent element for dropdown\n            if (_self.options.triggerClass) {\n                $(_self.options.triggerTarget).addClass(_self.options.triggerClass);\n            }\n\n            if (_self.options.parentClass) {\n                $(_self.options.appendTo).addClass(_self.options.parentClass);\n            }\n\n            if (_self.options.bodyClass) {\n                $('body').addClass(_self.options.bodyClass);\n            }\n\n            if (_self.options.shadowHinter) {\n                _self._setShadowHinterPosition();\n            }\n        },\n\n        /**\n         * extend default functionality to reset the timer and remove the active class for opener\n         */\n        close: function () {\n            this._super();\n\n            if (this.options.dialogContentClass) {\n                this.element.removeClass(this.options.dialogContentClass);\n            }\n\n            if (this.options.triggerClass) {\n                $(this.options.triggerTarget).removeClass(this.options.triggerClass);\n            }\n\n            if (this.options.parentClass) {\n                $(this.options.appendTo).removeClass(this.options.parentClass);\n            }\n\n            if (this.options.bodyClass) {\n                $('body').removeClass(this.options.bodyClass);\n            }\n\n            if (timer) {\n                clearTimeout(timer);\n            }\n\n            if (this.options.triggerTarget) {\n                $(this.options.triggerTarget).off('mouseleave');\n            }\n            this.uiDialog.off('mouseenter');\n            this.uiDialog.off('mouseleave');\n            $('body').off('click.outsideDropdown');\n        },\n\n        /**\n         * _setShadowHinterPosition\n         * @private\n         */\n        _setShadowHinterPosition: function () {\n            var _self = this,\n                offset;\n\n            offset = _self.options.position.of.offset().left -\n                _self.element.offset().left +\n                _self.options.position.of.outerWidth() / 2;\n            offset = isNaN(offset) ? 0 : Math.floor(offset);\n            _self.hinter.css('left', offset);\n        },\n\n        /**\n         * @private\n         */\n        _position: function () {\n            if (this.options.autoPosition) {\n                this._super();\n            }\n        },\n\n        /**\n         * @private\n         */\n        _createTitlebar: function () {\n            if (this.options.createTitleBar) {\n                this._super();\n            } else {\n                // the title bar close button is referenced\n                // in _focusTabbable function, so to prevent errors it must be declared\n                this.uiDialogTitlebarClose = $('<div>');\n            }\n        },\n\n        /**\n         * @private\n         */\n        _size: function () {\n            if (this.options.autoSize) {\n                this._super();\n            }\n        },\n\n        /**\n         * @param {Object} handler\n         * @private\n         */\n        _mouseLeave: function (handler) {\n            var _self = this;\n\n            handler.on('mouseleave', function (event) {\n                event.stopPropagation();\n\n                if (_self._isOpen) {\n                    if (timer) {\n                        clearTimeout(timer);\n                    }\n                    timer = setTimeout(function (e) {\n                        _self.close(e);\n                    }, _self.options.timeout);\n                }\n            });\n        },\n\n        /**\n         * @param {Object} handler\n         * @private\n         */\n        _mouseEnter: function (handler) {\n            handler.on('mouseenter', function (event) {\n                event.stopPropagation();\n\n                if (timer) {\n                    clearTimeout(timer);\n                }\n            });\n        },\n\n        /**\n         * @param {String} key\n         * @param {*} value\n         * @private\n         */\n        _setOption: function (key, value) {\n            this._super(key, value);\n\n            if (key === 'triggerTarget') {\n                this.options.triggerTarget = value;\n            }\n        }\n    });\n\n    return $.mage.dropdownDialog;\n});\n","mage/template.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'underscore'\n], function (_) {\n    'use strict';\n\n    /**\n     * Checks if provided string is a valid DOM selector.\n     *\n     * @param {String} selector - Selector to be checked.\n     * @returns {Boolean}\n     */\n    function isSelector(selector) {\n        try {\n            document.querySelector(selector);\n\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n\n    /**\n     * Unescapes characters used in underscore templates.\n     *\n     * @param {String} str - String to be processed.\n     * @returns {String}\n     */\n    function unescape(str) {\n        return str.replace(/&lt;%|%3C%/g, '<%').replace(/%&gt;|%%3E/g, '%>');\n    }\n\n    /**\n     * If 'tmpl' is a valid selector, returns target node's innerHTML if found.\n     * Else, returns empty string and emits console warning.\n     * If 'tmpl' is not a selector, returns 'tmpl' as is.\n     *\n     * @param {String} tmpl\n     * @returns {String}\n     */\n    function getTmplString(tmpl) {\n        if (isSelector(tmpl)) {\n            tmpl = document.querySelector(tmpl);\n\n            if (tmpl) {\n                tmpl = tmpl.innerHTML.trim();\n            } else {\n                console.warn('No template was found by selector: ' + tmpl);\n\n                tmpl = '';\n            }\n        }\n\n        return unescape(tmpl);\n    }\n\n    /**\n     * Compiles or renders template provided either\n     * by selector or by the template string.\n     *\n     * @param {String} tmpl - Template string or selector.\n     * @param {(Object|Array|Function)} [data] - Data object with which to render template.\n     * @returns {String|Function}\n     */\n    return function (tmpl, data) {\n        var render;\n\n        tmpl   = getTmplString(tmpl);\n        render = _.template(tmpl);\n\n        return !_.isUndefined(data) ?\n            render(data) :\n            render;\n    };\n});\n","mage/validation.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'moment',\n    'mageUtils',\n    'jquery-ui-modules/widget',\n    'jquery/validate',\n    'mage/translate'\n], function ($, moment, utils) {\n    'use strict';\n\n    var creditCartTypes, rules, showLabel, originValidateDelegate;\n\n    $.extend(true, $, {\n        // @TODO: Move methods 'isEmpty', 'isEmptyNoTrim', 'parseNumber', 'stripHtml' in file with utility functions\n        mage: {\n            /**\n             * Check if string is empty with trim\n             * @param {String} value\n             */\n            isEmpty: function (value) {\n                return value === '' || value === undefined ||\n                    value == null || value.length === 0 || /^\\s+$/.test(value);\n            },\n\n            /**\n             * Check if string is empty no trim\n             * @param {String} value\n             */\n            isEmptyNoTrim: function (value) {\n                return value === '' || value == null || value.length === 0;\n            },\n\n            /**\n             * Checks if {value} is between numbers {from} and {to}\n             * @param {String} value\n             * @param {String} from\n             * @param {String} to\n             * @returns {Boolean}\n             */\n            isBetween: function (value, from, to) {\n                return ($.mage.isEmpty(from) || value >= $.mage.parseNumber(from)) &&\n                    ($.mage.isEmpty(to) || value <= $.mage.parseNumber(to));\n            },\n\n            /**\n             * Parse price string\n             * @param {String} value\n             */\n            parseNumber: function (value) {\n                var isDot, isComa;\n\n                if (typeof value !== 'string') {\n                    return parseFloat(value);\n                }\n                isDot = value.indexOf('.');\n                isComa = value.indexOf(',');\n\n                if (isDot !== -1 && isComa !== -1) {\n                    if (isComa > isDot) {\n                        value = value.replace('.', '').replace(',', '.');\n                    } else {\n                        value = value.replace(',', '');\n                    }\n                } else if (isComa !== -1) {\n                    value = value.replace(',', '.');\n                }\n\n                return parseFloat(value);\n            },\n\n            /**\n             * Removes HTML tags and space characters, numbers and punctuation.\n             *\n             * @param {String} value - Value being stripped.\n             * @return {String}\n             */\n            stripHtml: function (value) {\n                return value.replace(/<.[^<>]*?>/g, ' ').replace(/&nbsp;|&#160;/gi, ' ')\n                    .replace(/[0-9.(),;:!?%#$'\"_+=\\/-]*/g, '');\n            }\n        }\n    });\n\n    /**\n     * @param {String} name\n     * @param {*} method\n     * @param {*} message\n     * @param {*} dontSkip\n     */\n    $.validator.addMethod = function (name, method, message, dontSkip) {\n        $.validator.methods[name] = method;\n        $.validator.messages[name] = message !== undefined ? message : $.validator.messages[name];\n\n        if (method.length < 3 || dontSkip) {\n            $.validator.addClassRules(name, $.validator.normalizeRule(name));\n        }\n    };\n\n    /**\n     * Javascript object with credit card types\n     * 0 - regexp for card number\n     * 1 - regexp for cvn\n     * 2 - check or not credit card number trough Luhn algorithm by\n     */\n    creditCartTypes = {\n        'SO': [\n            new RegExp('^(6334[5-9]([0-9]{11}|[0-9]{13,14}))|(6767([0-9]{12}|[0-9]{14,15}))$'),\n            new RegExp('^([0-9]{3}|[0-9]{4})?$'),\n            true\n        ],\n        'SM': [\n            new RegExp('(^(5[0678])[0-9]{11,18}$)|(^(6[^05])[0-9]{11,18}$)|' +\n                '(^(601)[^1][0-9]{9,16}$)|(^(6011)[0-9]{9,11}$)|(^(6011)[0-9]{13,16}$)|' +\n                '(^(65)[0-9]{11,13}$)|(^(65)[0-9]{15,18}$)|(^(49030)[2-9]([0-9]{10}$|[0-9]{12,13}$))|' +\n                '(^(49033)[5-9]([0-9]{10}$|[0-9]{12,13}$))|(^(49110)[1-2]([0-9]{10}$|[0-9]{12,13}$))|' +\n                '(^(49117)[4-9]([0-9]{10}$|[0-9]{12,13}$))|(^(49118)[0-2]([0-9]{10}$|[0-9]{12,13}$))|' +\n                '(^(4936)([0-9]{12}$|[0-9]{14,15}$))'), new RegExp('^([0-9]{3}|[0-9]{4})?$'),\n            true\n        ],\n        'VI': [new RegExp('^4[0-9]{12}([0-9]{3})?$'), new RegExp('^[0-9]{3}$'), true],\n        'MC': [\n            new RegExp('^(?:5[1-5][0-9]{2}|222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$'),\n            new RegExp('^[0-9]{3}$'),\n            true\n        ],\n        'AE': [new RegExp('^3[47][0-9]{13}$'), new RegExp('^[0-9]{4}$'), true],\n        'DI': [new RegExp('^(6011(0|[2-4]|74|7[7-9]|8[6-9]|9)|6(4[4-9]|5))\\\\d*$'), new RegExp('^[0-9]{3}$'), true],\n        'JCB': [new RegExp('^35(2[8-9]|[3-8])\\\\d*$'), new RegExp('^[0-9]{3}$'), true],\n        'DN': [new RegExp('^(3(0[0-5]|095|6|[8-9]))\\\\d*$'), new RegExp('^[0-9]{3}$'), true],\n        'UN': [\n            new RegExp('^(622(1(2[6-9]|[3-9])|[3-8]|9([[0-1]|2[0-5]))|62[4-6]|628([2-8]))\\\\d*?$'),\n            new RegExp('^[0-9]{3}$'),\n            true\n        ],\n        'MI': [new RegExp('^(5(0|[6-9])|63|67(?!59|6770|6774))\\\\d*$'), new RegExp('^[0-9]{3}$'), true],\n        'MD': [new RegExp('^6759(?!24|38|40|6[3-9]|70|76)|676770|676774\\\\d*$'), new RegExp('^[0-9]{3}$'), true]\n    };\n\n    /**\n     * validate credit card number using mod10\n     * @param {String} s\n     * @return {Boolean}\n     */\n    function validateCreditCard(s) {\n        // remove non-numerics\n        var v = '0123456789',\n            w = '',\n            i, j, k, m, c, a, x;\n\n        for (i = 0; i < s.length; i++) {\n            x = s.charAt(i);\n\n            if (v.indexOf(x, 0) !== -1) {\n                w += x;\n            }\n        }\n        // validate number\n        j = w.length / 2;\n        k = Math.floor(j);\n        m = Math.ceil(j) - k;\n        c = 0;\n\n        for (i = 0; i < k; i++) {\n            a = w.charAt(i * 2 + m) * 2;\n            c += a > 9 ? Math.floor(a / 10 + a % 10) : a;\n        }\n\n        for (i = 0; i < k + m; i++) {\n            c += w.charAt(i * 2 + 1 - m) * 1;\n        }\n\n        return c % 10 === 0;\n    }\n\n    /**\n     * validate all table required inputs at once, using single hidden input\n     * @param {String} value\n     * @param {HTMLElement} element\n     *\n     * @return {Boolean}\n     */\n    function tableSingleValidation(value, element) {\n        var empty = $(element).closest('table')\n            .find('input.required-option:visible')\n            .filter(function (i, el) {\n                if ($(el).is('disabled')) {\n                    return $.mage.isEmpty(el.value);\n                }\n            })\n            .length;\n\n        return empty === 0;\n    }\n\n    /**\n     *\n     * @param {float} qty\n     * @param {float} qtyIncrements\n     * @returns {float}\n     */\n    function resolveModulo(qty, qtyIncrements) {\n        var divideEpsilon = 10000,\n            epsilon,\n            remainder;\n\n        while (qtyIncrements < 1) {\n            qty *= 10;\n            qtyIncrements *= 10;\n        }\n\n        epsilon = qtyIncrements / divideEpsilon;\n        remainder = qty % qtyIncrements;\n\n        if (Math.abs(remainder - qtyIncrements) < epsilon ||\n            Math.abs(remainder) < epsilon) {\n            remainder = 0;\n        }\n\n        return remainder;\n    }\n\n    /**\n     * Collection of validation rules including rules from additional-methods.js\n     * @type {Object}\n     */\n    rules = {\n        'max-words': [\n            function (value, element, params) {\n                return this.optional(element) || $.mage.stripHtml(value).match(/\\b\\w+\\b/g).length <= params;\n            },\n            $.mage.__('Please enter {0} words or less.')\n        ],\n        'min-words': [\n            function (value, element, params) {\n                return this.optional(element) || $.mage.stripHtml(value).match(/\\b\\w+\\b/g).length >= params;\n            },\n            $.mage.__('Please enter at least {0} words.')\n        ],\n        'range-words': [\n            function (value, element, params) {\n                return this.optional(element) ||\n                    $.mage.stripHtml(value).match(/\\b\\w+\\b/g).length >= params[0] &&\n                    value.match(/bw+b/g).length < params[1];\n            },\n            $.mage.__('Please enter between {0} and {1} words.')\n        ],\n        'letters-with-basic-punc': [\n            function (value, element) {\n                return this.optional(element) || /^[a-z\\-.,()'\\\"\\s]+$/i.test(value);\n            },\n            $.mage.__('Letters or punctuation only please')\n        ],\n        'alphanumeric': [\n            function (value, element) {\n                return this.optional(element) || /^\\w+$/i.test(value);\n            },\n            $.mage.__('Letters, numbers, spaces or underscores only please')\n        ],\n        'letters-only': [\n            function (value, element) {\n                return this.optional(element) || /^[a-z]+$/i.test(value);\n            },\n            $.mage.__('Letters only please')\n        ],\n        'no-whitespace': [\n            function (value, element) {\n                return this.optional(element) || /^\\S+$/i.test(value);\n            },\n            $.mage.__('No white space please')\n        ],\n        'no-marginal-whitespace': [\n            function (value, element) {\n                return this.optional(element) || !/^\\s+|\\s+$/i.test(value);\n            },\n            $.mage.__('No marginal white space please')\n        ],\n        'zip-range': [\n            function (value, element) {\n                return this.optional(element) || /^90[2-5]-\\d{2}-\\d{4}$/.test(value);\n            },\n            $.mage.__('Your ZIP-code must be in the range 902xx-xxxx to 905-xx-xxxx')\n        ],\n        'integer': [\n            function (value, element) {\n                return this.optional(element) || /^-?\\d+$/.test(value);\n            },\n            $.mage.__('A positive or negative non-decimal number please')\n        ],\n        'vinUS': [\n            function (v) {\n                var i, n, d, f, cd, cdv, LL, VL, FL, rs;\n\n                /* eslint-disable max-depth */\n                if (v.length !== 17) {\n                    return false;\n                }\n\n                LL = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'J', 'K', 'L',\n                    'M', 'N', 'P', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\n                VL = [1, 2, 3, 4, 5, 6, 7, 8, 1, 2, 3, 4, 5, 7, 9, 2, 3, 4, 5, 6, 7, 8, 9];\n                FL = [8, 7, 6, 5, 4, 3, 2, 10, 0, 9, 8, 7, 6, 5, 4, 3, 2];\n                rs = 0;\n\n                for (i = 0; i < 17; i++) {\n                    f = FL[i];\n                    d = v.slice(i, i + 1);\n\n                    if (i === 8) {\n                        cdv = d;\n                    }\n\n                    if (!isNaN(d)) {\n                        d *= f;\n                    } else {\n                        for (n = 0; n < LL.length; n++) {\n                            if (d.toUpperCase() === LL[n]) {\n                                d = VL[n];\n                                d *= f;\n\n                                if (isNaN(cdv) && n === 8) {\n                                    cdv = LL[n];\n                                }\n                                break;\n                            }\n                        }\n                    }\n                    rs += d;\n                }\n\n                /* eslint-enable max-depth */\n                cd = rs % 11;\n\n                if (cd === 10) {\n                    cd = 'X';\n                }\n\n                if (cd === cdv) {\n                    return true;\n                }\n\n                return false;\n            },\n            $.mage.__('The specified vehicle identification number (VIN) is invalid.')\n        ],\n        'dateITA': [\n            function (value, element) {\n                var check = false,\n                    re = /^\\d{1,2}\\/\\d{1,2}\\/\\d{4}$/,\n                    adata, gg, mm, aaaa, xdata;\n\n                if (re.test(value)) {\n                    adata = value.split('/');\n                    gg = parseInt(adata[0], 10);\n                    mm = parseInt(adata[1], 10);\n                    aaaa = parseInt(adata[2], 10);\n                    xdata = new Date(aaaa, mm - 1, gg);\n\n                    if (xdata.getFullYear() === aaaa &&\n                        xdata.getMonth() === mm - 1 &&\n                        xdata.getDate() === gg\n                    ) {\n                        check = true;\n                    } else {\n                        check = false;\n                    }\n                } else {\n                    check = false;\n                }\n\n                return this.optional(element) || check;\n            },\n            $.mage.__('Please enter a correct date')\n        ],\n        'dateNL': [\n            function (value, element) {\n                return this.optional(element) || /^\\d\\d?[\\.\\/-]\\d\\d?[\\.\\/-]\\d\\d\\d?\\d?$/.test(value);\n            },\n            'Vul hier een geldige datum in.'\n        ],\n        'time': [\n            function (value, element) {\n                return this.optional(element) || /^([01]\\d|2[0-3])(:[0-5]\\d){0,2}$/.test(value);\n            },\n            $.mage.__('Please enter a valid time, between 00:00 and 23:59')\n        ],\n        'time12h': [\n            function (value, element) {\n                return this.optional(element) || /^((0?[1-9]|1[012])(:[0-5]\\d){0,2}(\\s[AP]M))$/i.test(value);\n            },\n            $.mage.__('Please enter a valid time, between 00:00 am and 12:00 pm')\n        ],\n        'phoneUS': [\n            function (phoneNumber, element) {\n                phoneNumber = phoneNumber.replace(/\\s+/g, '');\n\n                return this.optional(element) || phoneNumber.length > 9 &&\n                    phoneNumber.match(/^(1-?)?(\\([2-9]\\d{2}\\)|[2-9]\\d{2})-?[2-9]\\d{2}-?\\d{4}$/);\n            },\n            $.mage.__('Please specify a valid phone number')\n        ],\n        'phoneUK': [\n            function (phoneNumber, element) {\n                return this.optional(element) || phoneNumber.length > 9 &&\n                    phoneNumber.match(/^(\\(?(0|\\+44)[1-9]{1}\\d{1,4}?\\)?\\s?\\d{3,4}\\s?\\d{3,4})$/);\n            },\n            $.mage.__('Please specify a valid phone number')\n        ],\n        'mobileUK': [\n            function (phoneNumber, element) {\n                return this.optional(element) || phoneNumber.length > 9 &&\n                    phoneNumber.match(/^((0|\\+44)7\\d{3}\\s?\\d{6})$/);\n            },\n            $.mage.__('Please specify a valid mobile number')\n        ],\n        'stripped-min-length': [\n            function (value, element, param) {\n                return value.length >= param;\n            },\n            $.mage.__('Please enter at least {0} characters')\n        ],\n\n        /* detect chars that would require more than 3 bytes */\n        'validate-no-utf8mb4-characters': [\n            function (value) {\n                var validator = this,\n                    message = $.mage.__('Please remove invalid characters: {0}.'),\n                    matches = value.match(/(?:[\\uD800-\\uDBFF][\\uDC00-\\uDFFF])/g),\n                    result = matches === null;\n\n                if (!result) {\n                    validator.charErrorMessage = message.replace('{0}', matches.join());\n                }\n\n                return result;\n            }, function () {\n                return this.charErrorMessage;\n            }\n        ],\n\n        /* eslint-disable max-len */\n        'email2': [\n            function (value, element) {\n                return this.optional(element) ||\n                    /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)*(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?$/i.test(value);\n            },\n            $.validator.messages.email\n        ],\n        'url2': [\n            function (value, element) {\n                return this.optional(element) || /^(https?|ftp):\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)*(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(\\#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i.test(value);\n            },\n            $.validator.messages.url\n        ],\n\n        /* eslint-enable max-len */\n        'credit-card-types': [\n            function (value, element, param) {\n                var validTypes;\n\n                if (/[^0-9-]+/.test(value)) {\n                    return false;\n                }\n                value = value.replace(/\\D/g, '');\n\n                validTypes = 0x0000;\n\n                if (param.mastercard) {\n                    validTypes |= 0x0001;\n                }\n\n                if (param.visa) {\n                    validTypes |= 0x0002;\n                }\n\n                if (param.amex) {\n                    validTypes |= 0x0004;\n                }\n\n                if (param.dinersclub) {\n                    validTypes |= 0x0008;\n                }\n\n                if (param.enroute) {\n                    validTypes |= 0x0010;\n                }\n\n                if (param.discover) {\n                    validTypes |= 0x0020;\n                }\n\n                if (param.jcb) {\n                    validTypes |= 0x0040;\n                }\n\n                if (param.unknown) {\n                    validTypes |= 0x0080;\n                }\n\n                if (param.all) {\n                    validTypes = 0x0001 | 0x0002 | 0x0004 | 0x0008 | 0x0010 | 0x0020 | 0x0040 | 0x0080;\n                }\n\n                if (validTypes & 0x0001 && /^(51|52|53|54|55)/.test(value)) { //mastercard\n                    return value.length === 16;\n                }\n\n                if (validTypes & 0x0002 && /^(4)/.test(value)) { //visa\n                    return value.length === 16;\n                }\n\n                if (validTypes & 0x0004 && /^(34|37)/.test(value)) { //amex\n                    return value.length === 15;\n                }\n\n                if (validTypes & 0x0008 && /^(300|301|302|303|304|305|36|38)/.test(value)) { //dinersclub\n                    return value.length === 14;\n                }\n\n                if (validTypes & 0x0010 && /^(2014|2149)/.test(value)) { //enroute\n                    return value.length === 15;\n                }\n\n                if (validTypes & 0x0020 && /^(6011)/.test(value)) { //discover\n                    return value.length === 16;\n                }\n\n                if (validTypes & 0x0040 && /^(3)/.test(value)) { //jcb\n                    return value.length === 16;\n                }\n\n                if (validTypes & 0x0040 && /^(2131|1800)/.test(value)) { //jcb\n                    return value.length === 15;\n                }\n\n                if (validTypes & 0x0080) { //unknown\n                    return true;\n                }\n\n                return false;\n            },\n            $.mage.__('Please enter a valid credit card number.')\n        ],\n\n        /* eslint-disable max-len */\n        'ipv4': [\n            function (value, element) {\n                return this.optional(element) ||\n                    /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i.test(value);\n            },\n            $.mage.__('Please enter a valid IP v4 address.')\n        ],\n        'ipv6': [\n            function (value, element) {\n                return this.optional(element) || /^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\\b((25[0-5])|(1\\d{2})|(2[0-4]\\d)|(\\d{1,2}))\\b)\\.){3}(\\b((25[0-5])|(1\\d{2})|(2[0-4]\\d)|(\\d{1,2}))\\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\\b((25[0-5])|(1\\d{2})|(2[0-4]\\d)|(\\d{1,2}))\\b)\\.){3}(\\b((25[0-5])|(1\\d{2})|(2[0-4]\\d)|(\\d{1,2}))\\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\\b((25[0-5])|(1\\d{2})|(2[0-4]\\d)|(\\d{1,2}))\\b)\\.){3}(\\b((25[0-5])|(1\\d{2})|(2[0-4]\\d)|(\\d{1,2}))\\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(value);\n            },\n            $.mage.__('Please enter a valid IP v6 address.')\n        ],\n\n        /* eslint-enable max-len */\n        'pattern': [\n            function (value, element, param) {\n                return this.optional(element) || new RegExp(param).test(value);\n            },\n            $.mage.__('Invalid format.')\n        ],\n        'allow-container-className': [\n            function (element) {\n                if (element.type === 'radio' || element.type === 'checkbox') {\n                    return $(element).hasClass('change-container-classname');\n                }\n            },\n            ''\n        ],\n        'validate-no-html-tags': [\n            function (value) {\n                return !/<(\\/)?\\w+/.test(value);\n            },\n            $.mage.__('HTML tags are not allowed.')\n        ],\n        'validate-select': [\n            function (value) {\n                return value !== 'none' && value != null && value.length !== 0;\n            },\n            $.mage.__('Please select an option.')\n        ],\n        'validate-no-empty': [\n            function (value) {\n                return !$.mage.isEmpty(value);\n            },\n            $.mage.__('Empty Value.')\n        ],\n        'validate-alphanum-with-spaces': [\n            function (v) {\n                return $.mage.isEmptyNoTrim(v) || /^[a-zA-Z0-9 ]+$/.test(v);\n            },\n            $.mage.__('Please use only letters (a-z or A-Z), numbers (0-9) or spaces only in this field.')\n        ],\n        'validate-data': [\n            function (v) {\n                return $.mage.isEmptyNoTrim(v) || /^[A-Za-z]+[A-Za-z0-9_]+$/.test(v);\n            },\n            $.mage.__('Please use only letters (a-z or A-Z), numbers (0-9) or underscore (_) in this field, and the first character should be a letter.') //eslint-disable-line max-len\n        ],\n        'validate-street': [\n            function (v) {\n                return $.mage.isEmptyNoTrim(v) || /^[ \\w]{3,}([A-Za-z]\\.)?([ \\w]*\\#\\d+)?(\\r\\n| )[ \\w]{3,}/.test(v);\n            },\n            $.mage.__('Please use only letters (a-z or A-Z), numbers (0-9), spaces and \"#\" in this field.')\n        ],\n        'validate-phoneStrict': [\n            function (v) {\n                return $.mage.isEmptyNoTrim(v) || /^(\\()?\\d{3}(\\))?(-|\\s)?\\d{3}(-|\\s)\\d{4}$/.test(v);\n            },\n            $.mage.__('Please enter a valid phone number. For example (123) 456-7890 or 123-456-7890.')\n        ],\n        'validate-phoneLax': [\n            function (v) {\n                return $.mage.isEmptyNoTrim(v) ||\n                    /^((\\d[\\-. ]?)?((\\(\\d{3}\\))|\\d{3}))?[\\-. ]?\\d{3}[\\-. ]?\\d{4}$/.test(v);\n            },\n            $.mage.__('Please enter a valid phone number. For example (123) 456-7890 or 123-456-7890.')\n        ],\n        'validate-fax': [\n            function (v) {\n                return $.mage.isEmptyNoTrim(v) || /^(\\()?\\d{3}(\\))?(-|\\s)?\\d{3}(-|\\s)\\d{4}$/.test(v);\n            },\n            $.mage.__('Please enter a valid fax number (Ex: 123-456-7890).')\n        ],\n        'validate-email': [\n            function (v) {\n                return $.mage.isEmptyNoTrim(v) || /^([a-z0-9,!\\#\\$%&'\\*\\+\\/=\\?\\^_`\\{\\|\\}~-]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z0-9,!\\#\\$%&'\\*\\+\\/=\\?\\^_`\\{\\|\\}~-]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*@([a-z0-9-]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z0-9-]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*\\.(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]){2,})$/i.test(v); //eslint-disable-line max-len\n            },\n            $.mage.__('Please enter a valid email address (Ex: johndoe@domain.com).')\n        ],\n        'validate-emailSender': [\n            function (v) {\n                return $.mage.isEmptyNoTrim(v) || /^[\\S ]+$/.test(v);\n            },\n            $.mage.__('Please enter a valid email address (Ex: johndoe@domain.com).')\n        ],\n        'validate-password': [\n            function (v) {\n                var pass;\n\n                if (v == null) {\n                    return false;\n                }\n                //strip leading and trailing spaces\n                pass = $.trim(v);\n\n                if (!pass.length) {\n                    return true;\n                }\n\n                return !(pass.length > 0 && pass.length < 6);\n            },\n            $.mage.__('Please enter 6 or more characters. Leading and trailing spaces will be ignored.')\n        ],\n        'validate-admin-password': [\n            function (v) {\n                var pass;\n\n                if (v == null) {\n                    return false;\n                }\n                pass = $.trim(v);\n                // strip leading and trailing spaces\n                if (pass.length === 0) {\n                    return true;\n                }\n\n                if (!/[a-z]/i.test(v) || !/[0-9]/.test(v)) {\n                    return false;\n                }\n\n                if (pass.length < 7) {\n                    return false;\n                }\n\n                return true;\n            },\n            $.mage.__('Please enter 7 or more characters, using both numeric and alphabetic.')\n        ],\n        'validate-customer-password': [\n            function (v, elm) {\n                var validator = this,\n                    counter = 0,\n                    passwordMinLength = $(elm).data('password-min-length'),\n                    passwordMinCharacterSets = $(elm).data('password-min-character-sets'),\n                    pass = $.trim(v),\n                    result = pass.length >= passwordMinLength;\n\n                if (result === false) {\n                    validator.passwordErrorMessage = $.mage.__('Minimum length of this field must be equal or greater than %1 symbols. Leading and trailing spaces will be ignored.').replace('%1', passwordMinLength); //eslint-disable-line max-len\n\n                    return result;\n                }\n\n                if (pass.match(/\\d+/)) {\n                    counter++;\n                }\n\n                if (pass.match(/[a-z]+/)) {\n                    counter++;\n                }\n\n                if (pass.match(/[A-Z]+/)) {\n                    counter++;\n                }\n\n                if (pass.match(/[^a-zA-Z0-9]+/)) {\n                    counter++;\n                }\n\n                if (counter < passwordMinCharacterSets) {\n                    result = false;\n                    validator.passwordErrorMessage = $.mage.__('Minimum of different classes of characters in password is %1. Classes of characters: Lower Case, Upper Case, Digits, Special Characters.').replace('%1', passwordMinCharacterSets); //eslint-disable-line max-len\n                }\n\n                return result;\n            }, function () {\n                return this.passwordErrorMessage;\n            }\n        ],\n        'validate-url': [\n            function (v) {\n                if ($.mage.isEmptyNoTrim(v)) {\n                    return true;\n                }\n                v = (v || '').replace(/^\\s+/, '').replace(/\\s+$/, '');\n\n                return (/^(http|https|ftp):\\/\\/(([A-Z0-9]([A-Z0-9_-]*[A-Z0-9]|))(\\.[A-Z0-9]([A-Z0-9_-]*[A-Z0-9]|))*)(:(\\d+))?(\\/[A-Z0-9~](([A-Z0-9_~-]|\\.)*[A-Z0-9~]|))*\\/?(.*)?$/i).test(v); //eslint-disable-line max-len\n\n            },\n            $.mage.__('Please enter a valid URL. Protocol is required (http://, https:// or ftp://).')\n        ],\n        'validate-clean-url': [\n            function (v) {\n                return $.mage.isEmptyNoTrim(v) || /^(http|https|ftp):\\/\\/(([A-Z0-9][A-Z0-9_-]*)(\\.[A-Z0-9][A-Z0-9_-]*)+.(com|org|net|dk|at|us|tv|info|uk|co.uk|biz|se)$)(:(\\d+))?\\/?/i.test(v) || /^(www)((\\.[A-Z0-9][A-Z0-9_-]*)+.(com|org|net|dk|at|us|tv|info|uk|co.uk|biz|se)$)(:(\\d+))?\\/?/i.test(v); //eslint-disable-line max-len\n\n            },\n            $.mage.__('Please enter a valid URL. For example http://www.example.com or www.example.com.')\n        ],\n        'validate-xml-identifier': [\n            function (v) {\n                return $.mage.isEmptyNoTrim(v) || /^[A-Z][A-Z0-9_\\/-]*$/i.test(v);\n\n            },\n            $.mage.__('Please enter a valid XML-identifier (Ex: something_1, block5, id-4).')\n        ],\n        'validate-ssn': [\n            function (v) {\n                return $.mage.isEmptyNoTrim(v) || /^\\d{3}-?\\d{2}-?\\d{4}$/.test(v);\n\n            },\n            $.mage.__('Please enter a valid social security number (Ex: 123-45-6789).')\n        ],\n        'validate-zip-us': [\n            function (v) {\n                return $.mage.isEmptyNoTrim(v) || /(^\\d{5}$)|(^\\d{5}-\\d{4}$)/.test(v);\n\n            },\n            $.mage.__('Please enter a valid zip code (Ex: 90602 or 90602-1234).')\n        ],\n        'validate-date-au': [\n            function (v) {\n                var regex, d;\n\n                if ($.mage.isEmptyNoTrim(v)) {\n                    return true;\n                }\n                regex = /^(\\d{2})\\/(\\d{2})\\/(\\d{4})$/;\n\n                if ($.mage.isEmpty(v) || !regex.test(v)) {\n                    return false;\n                }\n                d = new Date(v.replace(regex, '$2/$1/$3'));\n\n                return parseInt(RegExp.$2, 10) === 1 + d.getMonth() &&\n                    parseInt(RegExp.$1, 10) === d.getDate() &&\n                    parseInt(RegExp.$3, 10) === d.getFullYear();\n\n            },\n            $.mage.__('Please use this date format: dd/mm/yyyy. For example 17/03/2006 for the 17th of March, 2006.')\n        ],\n        'validate-currency-dollar': [\n            function (v) {\n                return $.mage.isEmptyNoTrim(v) || /^\\$?\\-?([1-9]{1}[0-9]{0,2}(\\,[0-9]{3})*(\\.[0-9]{0,2})?|[1-9]{1}\\d*(\\.[0-9]{0,2})?|0(\\.[0-9]{0,2})?|(\\.[0-9]{1,2})?)$/.test(v); //eslint-disable-line max-len\n\n            },\n            $.mage.__('Please enter a valid $ amount. For example $100.00.')\n        ],\n        'validate-not-negative-number': [\n            function (v) {\n                if ($.mage.isEmptyNoTrim(v)) {\n                    return true;\n                }\n                v = $.mage.parseNumber(v);\n\n                return !isNaN(v) && v >= 0;\n\n            },\n            $.mage.__('Please enter a number 0 or greater in this field.')\n        ],\n        // validate-not-negative-number should be replaced in all places with this one and then removed\n        'validate-zero-or-greater': [\n            function (v) {\n                if ($.mage.isEmptyNoTrim(v)) {\n                    return true;\n                }\n                v = $.mage.parseNumber(v);\n\n                return !isNaN(v) && v >= 0;\n\n            },\n            $.mage.__('Please enter a number 0 or greater in this field.')\n        ],\n        'validate-greater-than-zero': [\n            function (v) {\n                if ($.mage.isEmptyNoTrim(v)) {\n                    return true;\n                }\n                v = $.mage.parseNumber(v);\n\n                return !isNaN(v) && v > 0;\n            },\n            $.mage.__('Please enter a number greater than 0 in this field.')\n        ],\n        'validate-css-length': [\n            function (v) {\n                if (v !== '') {\n                    return (/^[0-9]*\\.*[0-9]+(px|pc|pt|ex|em|mm|cm|in|%)?$/).test(v);\n                }\n\n                return true;\n            },\n            $.mage.__('Please input a valid CSS-length (Ex: 100px, 77pt, 20em, .5ex or 50%).')\n        ],\n        // Additional methods\n        'validate-number': [\n            function (v) {\n                return $.mage.isEmptyNoTrim(v) || !isNaN($.mage.parseNumber(v)) && /^\\s*-?\\d*(\\.\\d*)?\\s*$/.test(v);\n            },\n            $.mage.__('Please enter a valid number in this field.')\n        ],\n        'required-number': [\n            function (v) {\n                return !!v.length;\n            },\n            $.mage.__('Please enter a valid number in this field.')\n        ],\n        'validate-number-range': [\n            function (v, elm, param) {\n                var numValue, dataAttrRange, classNameRange, result, range, m, classes, ii;\n\n                if ($.mage.isEmptyNoTrim(v)) {\n                    return true;\n                }\n\n                numValue = $.mage.parseNumber(v);\n\n                if (isNaN(numValue)) {\n                    return false;\n                }\n\n                dataAttrRange = /^(-?[\\d.,]+)?-(-?[\\d.,]+)?$/;\n                classNameRange = /^number-range-(-?[\\d.,]+)?-(-?[\\d.,]+)?$/;\n                result = true;\n                range = param;\n\n                if (typeof range === 'string') {\n                    m = dataAttrRange.exec(range);\n\n                    if (m) {\n                        result = result && $.mage.isBetween(numValue, m[1], m[2]);\n                    } else {\n                        result = false;\n                    }\n                } else if (elm && elm.className) {\n                    classes = elm.className.split(' ');\n                    ii = classes.length;\n\n                    while (ii--) {\n                        range = classes[ii];\n                        m = classNameRange.exec(range);\n\n                        if (m) { //eslint-disable-line max-depth\n                            result = result && $.mage.isBetween(numValue, m[1], m[2]);\n                            break;\n                        }\n                    }\n                }\n\n                return result;\n            },\n            $.mage.__('The value is not within the specified range.'),\n            true\n        ],\n        'validate-digits': [\n            function (v) {\n                return $.mage.isEmptyNoTrim(v) || !/[^\\d]/.test(v);\n            },\n            $.mage.__('Please enter a valid number in this field.')\n        ],\n        'validate-forbidden-extensions': [\n            function (v, elem) {\n                var forbiddenExtensions = $(elem).attr('data-validation-params'),\n                    forbiddenExtensionsArray = forbiddenExtensions.split(','),\n                    extensionsArray = v.split(','),\n                    result = true;\n\n                this.validateExtensionsMessage = $.mage.__('Forbidden extensions has been used. Avoid usage of ') +\n                    forbiddenExtensions;\n\n                $.each(extensionsArray, function (key, extension) {\n                    if (forbiddenExtensionsArray.indexOf(extension) !== -1) {\n                        result = false;\n                    }\n                });\n\n                return result;\n            }, function () {\n                return this.validateExtensionsMessage;\n            }\n        ],\n        'validate-digits-range': [\n            function (v, elm, param) {\n                var numValue, dataAttrRange, classNameRange, result, range, m, classes, ii;\n\n                if ($.mage.isEmptyNoTrim(v)) {\n                    return true;\n                }\n\n                numValue = $.mage.parseNumber(v);\n\n                if (isNaN(numValue)) {\n                    return false;\n                }\n\n                dataAttrRange = /^(-?\\d+)?-(-?\\d+)?$/;\n                classNameRange = /^digits-range-(-?\\d+)?-(-?\\d+)?$/;\n                result = true;\n                range = param;\n\n                if (typeof range === 'string') {\n                    m = dataAttrRange.exec(range);\n\n                    if (m) {\n                        result = result && $.mage.isBetween(numValue, m[1], m[2]);\n                    } else {\n                        result = false;\n                    }\n                } else if (elm && elm.className) {\n                    classes = elm.className.split(' ');\n                    ii = classes.length;\n\n                    while (ii--) {\n                        range = classes[ii];\n                        m = classNameRange.exec(range);\n\n                        if (m) { //eslint-disable-line max-depth\n                            result = result && $.mage.isBetween(numValue, m[1], m[2]);\n                            break;\n                        }\n                    }\n                }\n\n                return result;\n            },\n            $.mage.__('The value is not within the specified range.'),\n            true\n        ],\n        'validate-range': [\n            function (v, elm) {\n                var minValue, maxValue, ranges, reRange, result, values,\n                    i, name, validRange, minValidRange, maxValidRange;\n\n                if ($.mage.isEmptyNoTrim(v)) {\n                    return true;\n                } else if ($.validator.methods['validate-digits'] && $.validator.methods['validate-digits'](v)) {\n                    minValue = maxValue = $.mage.parseNumber(v);\n                } else {\n                    ranges = /^(-?\\d+)?-(-?\\d+)?$/.exec(v);\n\n                    if (ranges) {\n                        minValue = $.mage.parseNumber(ranges[1]);\n                        maxValue = $.mage.parseNumber(ranges[2]);\n\n                        if (minValue > maxValue) { //eslint-disable-line max-depth\n                            return false;\n                        }\n                    } else {\n                        return false;\n                    }\n                }\n                reRange = /^range-(-?\\d+)?-(-?\\d+)?$/;\n                result = true;\n                values = $(elm).prop('class').split(' ');\n\n                for (i = values.length - 1; i >= 0; i--) {\n                    name = values[i];\n                    validRange = reRange.exec(name);\n\n                    if (validRange) {\n                        minValidRange = $.mage.parseNumber(validRange[1]);\n                        maxValidRange = $.mage.parseNumber(validRange[2]);\n                        result = result &&\n                            (isNaN(minValidRange) || minValue >= minValidRange) &&\n                            (isNaN(maxValidRange) || maxValue <= maxValidRange);\n                    }\n                }\n\n                return result;\n            },\n            $.mage.__('The value is not within the specified range.')\n        ],\n        'validate-alpha': [\n            function (v) {\n                return $.mage.isEmptyNoTrim(v) || /^[a-zA-Z]+$/.test(v);\n            },\n            $.mage.__('Please use letters only (a-z or A-Z) in this field.')\n        ],\n        'validate-code': [\n            function (v) {\n                return $.mage.isEmptyNoTrim(v) || /^[a-zA-Z]+[a-zA-Z0-9_]+$/.test(v);\n            },\n            $.mage.__('Please use only letters (a-z or A-Z), numbers (0-9) or underscore (_) in this field, and the first character should be a letter.') //eslint-disable-line max-len\n        ],\n        'validate-alphanum': [\n            function (v) {\n                return $.mage.isEmptyNoTrim(v) || /^[a-zA-Z0-9]+$/.test(v);\n            },\n            $.mage.__('Please use only letters (a-z or A-Z) or numbers (0-9) in this field. No spaces or other characters are allowed.') //eslint-disable-line max-len\n        ],\n        'validate-not-number-first': [\n            function (value) {\n                return $.mage.isEmptyNoTrim(value) || /^[^0-9-\\.].*$/.test(value.trim());\n            },\n            $.mage.__('First character must be letter.')\n        ],\n        'validate-date': [\n            function (value, params, additionalParams) {\n                var test = moment(value, utils.convertToMomentFormat(additionalParams.dateFormat));\n\n                return $.mage.isEmptyNoTrim(value) || test.isValid();\n            },\n            $.mage.__('Please enter a valid date.')\n\n        ],\n        'validate-date-range': [\n            function (v, elm) {\n                var m = /\\bdate-range-(\\w+)-(\\w+)\\b/.exec(elm.className),\n                    currentYear, normalizedTime, dependentElements;\n\n                if (!m || m[2] === 'to' || $.mage.isEmptyNoTrim(v)) {\n                    return true;\n                }\n\n                currentYear = new Date().getFullYear() + '';\n\n                /**\n                 * @param {String} vd\n                 * @return {Number}\n                 */\n                normalizedTime = function (vd) {\n                    vd = vd.split(/[.\\/]/);\n\n                    if (vd[2] && vd[2].length < 4) {\n                        vd[2] = currentYear.substr(0, vd[2].length) + vd[2];\n                    }\n\n                    return new Date(vd.join('/')).getTime();\n                };\n\n                dependentElements = $(elm.form).find('.validate-date-range.date-range-' + m[1] + '-to');\n\n                return !dependentElements.length || $.mage.isEmptyNoTrim(dependentElements[0].value) ||\n                    normalizedTime(v) <= normalizedTime(dependentElements[0].value);\n            },\n            $.mage.__('Make sure the To Date is later than or the same as the From Date.')\n        ],\n        'validate-cpassword': [\n            function () {\n                var conf = $('#confirmation').length > 0 ? $('#confirmation') : $($('.validate-cpassword')[0]),\n                    pass = false,\n                    passwordElements, i, passwordElement;\n\n                if ($('#password')) {\n                    pass = $('#password');\n                }\n                passwordElements = $('.validate-password');\n\n                for (i = 0; i < passwordElements.length; i++) {\n                    passwordElement = $(passwordElements[i]);\n\n                    if (passwordElement.closest('form').attr('id') === conf.closest('form').attr('id')) {\n                        pass = passwordElement;\n                    }\n                }\n\n                if ($('.validate-admin-password').length) {\n                    pass = $($('.validate-admin-password')[0]);\n                }\n\n                return pass.val() === conf.val();\n            },\n            $.mage.__('Please make sure your passwords match.')\n        ],\n        'validate-identifier': [\n            function (v) {\n                return $.mage.isEmptyNoTrim(v) || /^[a-z0-9][a-z0-9_\\/-]+(\\.[a-z0-9_-]+)?$/.test(v);\n            },\n            $.mage.__('Please enter a valid URL Key (Ex: \"example-page\", \"example-page.html\" or \"anotherlevel/example-page\").') //eslint-disable-line max-len\n        ],\n        'validate-zip-international': [\n\n            /*function(v) {\n             // @TODO: Cleanup\n             return Validation.get('IsEmpty').test(v) ||\n             /(^[A-z0-9]{2,10}([\\s]{0,1}|[\\-]{0,1})[A-z0-9]{2,10}$)/.test(v);\n             }*/\n            function () {\n                return true;\n            },\n            $.mage.__('Please enter a valid zip code.')\n        ],\n        'validate-one-required': [\n            function (v, elm) {\n                var p = $(elm).parent(),\n                    options = p.find('input');\n\n                return options.map(function (el) {\n                    return $(el).val();\n                }).length > 0;\n            },\n            $.mage.__('Please select one of the options above.')\n        ],\n        'validate-state': [\n            function (v) {\n                return v !== 0;\n            },\n            $.mage.__('Please select State/Province.')\n        ],\n        'required-file': [\n            function (v, elm) {\n                var result = !$.mage.isEmptyNoTrim(v),\n                    ovId;\n\n                if (!result) {\n                    ovId = $('#' + $(elm).attr('id') + '_value');\n\n                    if (ovId.length > 0) {\n                        result = !$.mage.isEmptyNoTrim(ovId.val());\n                    }\n                }\n\n                return result;\n            },\n            $.mage.__('Please select a file.')\n        ],\n        'validate-ajax-error': [\n            function (v, element) {\n                element = $(element);\n                element.on('change.ajaxError', function () {\n                    element.removeClass('validate-ajax-error');\n                    element.off('change.ajaxError');\n                });\n\n                return !element.hasClass('validate-ajax-error');\n            },\n            ''\n        ],\n        'validate-optional-datetime': [\n            function (v, elm, param) {\n                var dateTimeParts = $('.datetime-picker[id^=\"options_' + param + '\"]'),\n                    hasWithValue = false,\n                    hasWithNoValue = false,\n                    pattern = /day_part$/i,\n                    i;\n\n                for (i = 0; i < dateTimeParts.length; i++) {\n                    if (!pattern.test($(dateTimeParts[i]).attr('id'))) {\n                        if ($(dateTimeParts[i]).val() === 's') { //eslint-disable-line max-depth\n                            hasWithValue = true;\n                        } else {\n                            hasWithNoValue = true;\n                        }\n                    }\n                }\n\n                return hasWithValue ^ hasWithNoValue;\n            },\n            $.mage.__('The field isn\\'t complete.')\n        ],\n        'validate-required-datetime': [\n            function (v, elm, param) {\n                var dateTimeParts = $('.datetime-picker[id^=\"options_' + param + '\"]'),\n                    i;\n\n                for (i = 0; i < dateTimeParts.length; i++) {\n                    if (dateTimeParts[i].value === '') {\n                        return false;\n                    }\n                }\n\n                return true;\n            },\n            $.mage.__('This is a required field.')\n        ],\n        'validate-one-required-by-name': [\n            function (v, elm, selector) {\n                var name = elm.name.replace(/([\\\\\"])/g, '\\\\$1'),\n                    container = this.currentForm;\n\n                selector = selector === true ? 'input[name=\"' + name + '\"]:checked' : selector;\n\n                return !!container.querySelectorAll(selector).length;\n            },\n            $.mage.__('Please select one of the options.')\n        ],\n        'less-than-equals-to': [\n            function (value, element, params) {\n                if ($.isNumeric($(params).val()) && $.isNumeric(value)) {\n                    this.lteToVal = $(params).val();\n\n                    return parseFloat(value) <= parseFloat($(params).val());\n                }\n\n                return true;\n            },\n            function () {\n                var message = $.mage.__('Please enter a value less than or equal to %s.');\n\n                return message.replace('%s', this.lteToVal);\n            }\n        ],\n        'greater-than-equals-to': [\n            function (value, element, params) {\n                if ($.isNumeric($(params).val()) && $.isNumeric(value)) {\n                    this.gteToVal = $(params).val();\n\n                    return parseFloat(value) >= parseFloat($(params).val());\n                }\n\n                return true;\n            },\n            function () {\n                var message = $.mage.__('Please enter a value greater than or equal to %s.');\n\n                return message.replace('%s', this.gteToVal);\n            }\n        ],\n        'validate-emails': [\n            function (value) {\n                var validRegexp, emails, i;\n\n                if ($.mage.isEmpty(value)) {\n                    return true;\n                }\n                validRegexp = /^([a-z0-9,!\\#\\$%&'\\*\\+\\/=\\?\\^_`\\{\\|\\}~-]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z0-9,!\\#\\$%&'\\*\\+\\/=\\?\\^_`\\{\\|\\}~-]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*@([a-z0-9-]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z0-9-]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*\\.(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]){2,})$/i; //eslint-disable-line max-len\n                emails = value.split(/[\\s\\n\\,]+/g);\n\n                for (i = 0; i < emails.length; i++) {\n                    if (!validRegexp.test(emails[i].trim())) {\n                        return false;\n                    }\n                }\n\n                return true;\n            },\n            $.mage.__('Please enter valid email addresses, separated by commas. For example, johndoe@domain.com, johnsmith@domain.com.') //eslint-disable-line max-len\n        ],\n\n        'validate-cc-type-select': [\n\n            /**\n             * Validate credit card type matches credit card number\n             * @param {*} value - select credit card type\n             * @param {*} element - element contains the select box for credit card types\n             * @param {*} params - selector for credit card number\n             * @return {Boolean}\n             */\n            function (value, element, params) {\n                if (value && params && creditCartTypes[value]) {\n                    return creditCartTypes[value][0].test($(params).val().replace(/\\s+/g, ''));\n                }\n\n                return false;\n            },\n            $.mage.__('Card type does not match credit card number.')\n        ],\n        'validate-cc-number': [\n\n            /**\n             * Validate credit card number based on mod 10.\n             *\n             * @param {*} value - credit card number\n             * @return {Boolean}\n             */\n            function (value) {\n                if (value) {\n                    return validateCreditCard(value);\n                }\n\n                return false;\n            },\n            $.mage.__('Please enter a valid credit card number.')\n        ],\n        'validate-cc-type': [\n\n            /**\n             * Validate credit card number is for the correct credit card type.\n             *\n             * @param {String} value - credit card number\n             * @param {*} element - element contains credit card number\n             * @param {*} params - selector for credit card type\n             * @return {Boolean}\n             */\n            function (value, element, params) {\n                var ccType;\n\n                if (value && params) {\n                    ccType = $(params).val();\n                    value = value.replace(/\\s/g, '').replace(/\\-/g, '');\n\n                    if (creditCartTypes[ccType] && creditCartTypes[ccType][0]) {\n                        return creditCartTypes[ccType][0].test(value);\n                    } else if (creditCartTypes[ccType] && !creditCartTypes[ccType][0]) {\n                        return true;\n                    }\n                }\n\n                return false;\n            },\n            $.mage.__('Credit card number does not match credit card type.')\n        ],\n        'validate-cc-exp': [\n\n            /**\n             * Validate credit card expiration date, make sure it's within the year and not before current month.\n             *\n             * @param {*} value - month\n             * @param {*} element - element contains month\n             * @param {*} params - year selector\n             * @return {Boolean}\n             */\n            function (value, element, params) {\n                var isValid = false,\n                    month, year, currentTime, currentMonth, currentYear;\n\n                if (value && params) {\n                    month = value;\n                    year = $(params).val();\n                    currentTime = new Date();\n                    currentMonth = currentTime.getMonth() + 1;\n                    currentYear = currentTime.getFullYear();\n\n                    isValid = !year || year > currentYear || year == currentYear && month >= currentMonth; //eslint-disable-line\n                }\n\n                return isValid;\n            },\n            $.mage.__('Incorrect credit card expiration date.')\n        ],\n        'validate-cc-cvn': [\n\n            /**\n             * Validate credit card cvn based on credit card type.\n             *\n             * @param {*} value - credit card cvn\n             * @param {*} element - element contains credit card cvn\n             * @param {*} params - credit card type selector\n             * @return {*}\n             */\n            function (value, element, params) {\n                var ccType;\n\n                if (value && params) {\n                    ccType = $(params).val();\n\n                    if (creditCartTypes[ccType] && creditCartTypes[ccType][0]) {\n                        return creditCartTypes[ccType][1].test(value);\n                    }\n                }\n\n                return false;\n            },\n            $.mage.__('Please enter a valid credit card verification number.')\n        ],\n        'validate-cc-ukss': [\n\n            /**\n             * Validate Switch/Solo/Maestro issue number and start date is filled.\n             *\n             * @param {*} value - input field value\n             * @return {*}\n             */\n            function (value) {\n                return value;\n            },\n            $.mage.__('Please enter issue number or start date for switch/solo card type.')\n        ],\n        'validate-length': [\n            function (v, elm) {\n                var reMax = new RegExp(/^maximum-length-[0-9]+$/),\n                    reMin = new RegExp(/^minimum-length-[0-9]+$/),\n                    validator = this,\n                    result = true,\n                    length = 0;\n\n                $.each(elm.className.split(' '), function (index, name) {\n                    if (name.match(reMax) && result) {\n                        length = name.split('-')[2];\n                        result = v.length <= length;\n                        validator.validateMessage =\n                            $.mage.__('Please enter less or equal than %1 symbols.').replace('%1', length);\n                    }\n\n                    if (name.match(reMin) && result && !$.mage.isEmpty(v)) {\n                        length = name.split('-')[2];\n                        result = v.length >= length;\n                        validator.validateMessage =\n                            $.mage.__('Please enter more or equal than %1 symbols.').replace('%1', length);\n                    }\n                });\n\n                return result;\n            }, function () {\n                return this.validateMessage;\n            }\n        ],\n        'required-entry': [\n            function (value) {\n                return !$.mage.isEmpty(value);\n            }, $.mage.__('This is a required field.')\n        ],\n        'not-negative-amount': [\n            function (v) {\n                if (v.length) {\n                    return (/^\\s*\\d+([,.]\\d+)*\\s*%?\\s*$/).test(v);\n                }\n\n                return true;\n            },\n            $.mage.__('Please enter positive number in this field.')\n        ],\n        'validate-per-page-value-list': [\n            function (v) {\n                var isValid = true,\n                    values = v.split(','),\n                    i;\n\n                if ($.mage.isEmpty(v)) {\n                    return isValid;\n                }\n\n                for (i = 0; i < values.length; i++) {\n                    if (!/^[0-9]+$/.test(values[i])) {\n                        isValid = false;\n                    }\n                }\n\n                return isValid;\n            },\n            $.mage.__('Please enter a valid value, ex: 10,20,30')\n        ],\n        'validate-per-page-value': [\n            function (v, elm) {\n                var values;\n\n                if ($.mage.isEmpty(v)) {\n                    return false;\n                }\n                values = $('#' + elm.id + '_values').val().split(',');\n\n                return values.indexOf(v) !== -1;\n            },\n            $.mage.__('Please enter a valid value from list')\n        ],\n        'validate-new-password': [\n            function (v) {\n                if ($.validator.methods['validate-password'] && !$.validator.methods['validate-password'](v)) {\n                    return false;\n                }\n\n                if ($.mage.isEmpty(v) && v !== '') {\n                    return false;\n                }\n\n                return true;\n            },\n            $.mage.__('Please enter 6 or more characters. Leading and trailing spaces will be ignored.')\n        ],\n        'required-if-not-specified': [\n            function (value, element, params) {\n                var valid = false,\n                    alternate = $(params),\n                    alternateValue;\n\n                if (alternate.length > 0) {\n                    valid = this.check(alternate);\n                    // if valid, it may be blank, so check for that\n                    if (valid) {\n                        alternateValue = alternate.val();\n\n                        if (typeof alternateValue == 'undefined' || alternateValue.length === 0) { //eslint-disable-line\n                            valid = false;\n                        }\n                    }\n                }\n\n                if (!valid) {\n                    valid = !this.optional(element);\n                }\n\n                return valid;\n            },\n            $.mage.__('This is a required field.')\n        ],\n        'required-if-all-sku-empty-and-file-not-loaded': [\n            function (value, element, params) {\n                var valid = false,\n                    alternate = $(params.specifiedId),\n                    alternateValue;\n\n                if (alternate.length > 0) {\n                    valid = this.check(alternate);\n                    // if valid, it may be blank, so check for that\n                    if (valid) {\n                        alternateValue = alternate.val();\n\n                        if (typeof alternateValue == 'undefined' || alternateValue.length === 0) { //eslint-disable-line\n                            valid = false;\n                        }\n                    }\n                }\n\n                if (!valid) {\n                    valid = !this.optional(element);\n                }\n\n                $('input[' + params.dataSku + '=true]').each(function () {\n                    if ($(this).val() !== '') {\n                        valid = true;\n                    }\n                });\n\n                return valid;\n            },\n            $.mage.__('Please enter valid SKU key.')\n        ],\n        'required-if-specified': [\n            function (value, element, params) {\n                var valid = true,\n                    dependent = $(params),\n                    dependentValue;\n\n                if (dependent.length > 0) {\n                    valid = this.check(dependent);\n                    // if valid, it may be blank, so check for that\n                    if (valid) {\n                        dependentValue = dependent.val();\n                        valid = typeof dependentValue != 'undefined' && dependentValue.length > 0;\n                    }\n                }\n\n                if (valid) {\n                    valid = !this.optional(element);\n                } else {\n                    valid = true; // dependent was not valid, so don't even check\n                }\n\n                return valid;\n            },\n            $.mage.__('This is a required field.')\n        ],\n        'required-number-if-specified': [\n            function (value, element, params) {\n                var valid = true,\n                    dependent = $(params),\n                    depeValue;\n\n                if (dependent.length) {\n                    valid = this.check(dependent);\n\n                    if (valid) {\n                        depeValue = dependent[0].value;\n                        valid = !!(depeValue && depeValue.length);\n                    }\n                }\n\n                return valid ? !!value.length : true;\n            },\n            $.mage.__('Please enter a valid number.')\n        ],\n        'datetime-validation': [\n            function (value, element) {\n                var isValid = true;\n\n                if ($(element).val().length === 0) {\n                    isValid = false;\n                    $(element).addClass('mage-error');\n                }\n\n                return isValid;\n            },\n            $.mage.__('This is required field')\n        ],\n        'required-text-swatch-entry': [\n            tableSingleValidation,\n            $.mage.__('Admin is a required field in each row.')\n        ],\n        'required-visual-swatch-entry': [\n            tableSingleValidation,\n            $.mage.__('Admin is a required field in each row.')\n        ],\n        'required-dropdown-attribute-entry': [\n            tableSingleValidation,\n            $.mage.__('Admin is a required field in each row.')\n        ],\n        'validate-item-quantity': [\n            function (value, element, params) {\n                var validator = this,\n                    result = false,\n                    // obtain values for validation\n                    qty = $.mage.parseNumber(value),\n                    isMinAllowedValid = typeof params.minAllowed === 'undefined' ||\n                        qty >= $.mage.parseNumber(params.minAllowed),\n                    isMaxAllowedValid = typeof params.maxAllowed === 'undefined' ||\n                        qty <= $.mage.parseNumber(params.maxAllowed),\n                    isQtyIncrementsValid = typeof params.qtyIncrements === 'undefined' ||\n                        resolveModulo(qty, $.mage.parseNumber(params.qtyIncrements)) === 0.0;\n\n                result = qty > 0;\n\n                if (result === false) {\n                    validator.itemQtyErrorMessage = $.mage.__('Please enter a quantity greater than 0.');//eslint-disable-line max-len\n\n                    return result;\n                }\n\n                result = isMinAllowedValid;\n\n                if (result === false) {\n                    validator.itemQtyErrorMessage = $.mage.__('The fewest you may purchase is %1.').replace('%1', params.minAllowed);//eslint-disable-line max-len\n\n                    return result;\n                }\n\n                result = isMaxAllowedValid;\n\n                if (result === false) {\n                    validator.itemQtyErrorMessage = $.mage.__('The maximum you may purchase is %1.').replace('%1', params.maxAllowed);//eslint-disable-line max-len\n\n                    return result;\n                }\n\n                result = isQtyIncrementsValid;\n\n                if (result === false) {\n                    validator.itemQtyErrorMessage = $.mage.__('You can buy this product only in quantities of %1 at a time.').replace('%1', params.qtyIncrements);//eslint-disable-line max-len\n\n                    return result;\n                }\n\n                return result;\n            }, function () {\n                return this.itemQtyErrorMessage;\n            }\n        ],\n        'password-not-equal-to-user-name': [\n            function (value, element, params) {\n                if (typeof params === 'string') {\n                    return value.toLowerCase() !== params.toLowerCase();\n                }\n\n                return true;\n            },\n            $.mage.__('The password can\\'t be the same as the email address. Create a new password and try again.')\n        ]\n    };\n\n    $.each(rules, function (i, rule) {\n        rule.unshift(i);\n        $.validator.addMethod.apply($.validator, rule);\n    });\n    $.validator.addClassRules({\n        'required-option': {\n            required: true\n        },\n        'required-options-count': {\n            required: true\n        },\n        'validate-both-passwords': {\n            'validate-cpassword': true\n        }\n    });\n    $.validator.messages = $.extend($.validator.messages, {\n        required: $.mage.__('This is a required field.'),\n        remote: $.mage.__('Please fix this field.'),\n        email: $.mage.__('Please enter a valid email address.'),\n        url: $.mage.__('Please enter a valid URL.'),\n        date: $.mage.__('Please enter a valid date.'),\n        dateISO: $.mage.__('Please enter a valid date (ISO).'),\n        number: $.mage.__('Please enter a valid number.'),\n        digits: $.mage.__('Please enter only digits.'),\n        creditcard: $.mage.__('Please enter a valid credit card number.'),\n        equalTo: $.mage.__('Please enter the same value again.'),\n        maxlength: $.validator.format($.mage.__('Please enter no more than {0} characters.')),\n        minlength: $.validator.format($.mage.__('Please enter at least {0} characters.')),\n        rangelength: $.validator.format($.mage.__('Please enter a value between {0} and {1} characters long.')),\n        range: $.validator.format($.mage.__('Please enter a value between {0} and {1}.')),\n        max: $.validator.format($.mage.__('Please enter a value less than or equal to {0}.')),\n        min: $.validator.format($.mage.__('Please enter a value greater than or equal to {0}.'))\n    });\n\n    if ($.metadata) {\n        // Setting the type as html5 to enable data-validate attribute\n        $.metadata.setType('html5');\n    }\n\n    showLabel = $.validator.prototype.showLabel;\n    $.extend(true, $.validator.prototype, {\n        /**\n         * @param {*} element\n         * @param {*} message\n         */\n        showLabel: function (element, message) {\n            var label, elem;\n\n            showLabel.call(this, element, message);\n\n            // ARIA (adding aria-invalid & aria-describedby)\n            label = this.errorsFor(element);\n            elem = $(element);\n\n            if (!label.attr('id')) {\n                label.attr('id', this.idOrName(element) + '-error');\n            }\n            elem.attr('aria-invalid', 'true')\n                .attr('aria-describedby', label.attr('id'));\n        }\n    });\n\n    /**\n     * Validate form field without instantiating validate plug-in.\n     *\n     * @param {Element|String} element - DOM element or selector\n     * @return {Boolean} validation result\n     */\n    $.validator.validateElement = function (element) {\n        var form, validator, valid, classes;\n\n        element = $(element);\n        form = element.get(0).form;\n        validator = form ? $(form).data('validator') : null;\n\n        if (validator) {\n            return validator.element(element.get(0));\n        }\n        valid = true;\n        classes = element.prop('class').split(' ');\n        $.each(classes, $.proxy(function (i, className) {\n            if (this.methods[className] && !this.methods[className](element.val(), element.get(0))) {\n                valid = false;\n\n                return valid;\n            }\n        }, this));\n\n        return valid;\n    };\n\n    originValidateDelegate = $.fn.validateDelegate;\n\n    /**\n     * @return {*}\n     */\n    $.fn.validateDelegate = function () {\n        if (!this[0].form) {\n            return this;\n        }\n\n        return originValidateDelegate.apply(this, arguments);\n    };\n\n    /**\n     * Validate single element.\n     *\n     * @param {Element} element\n     * @param {Object} config\n     * @returns {*}\n     */\n    $.validator.validateSingleElement = function (element, config) {\n        var errors = {},\n            valid = true,\n            validateConfig = {\n                errorElement: 'label',\n                ignore: '.ignore-validate',\n                hideError: false\n            },\n            form, validator, classes, elementValue;\n\n        $.extend(validateConfig, config);\n        element = $(element).not(validateConfig.ignore);\n\n        if (!element.length) {\n            return true;\n        }\n\n        form = element.get(0).form;\n        validator = form ? $(form).data('validator') : null;\n\n        if (validator) {\n            return validator.element(element.get(0));\n        }\n\n        classes = element.prop('class').split(' ');\n        validator = element.parent().data('validator') ||\n            $.mage.validation(validateConfig, element.parent()).validate;\n\n        element.removeClass(validator.settings.errorClass);\n        validator.toHide = validator.toShow;\n        validator.hideErrors();\n        validator.toShow = validator.toHide = $([]);\n\n        $.each(classes, $.proxy(function (i, className) {\n            elementValue = element.val();\n\n            if (element.is(':checkbox') || element.is(':radio')) {\n                elementValue = element.is(':checked') || null;\n            }\n\n            if (this.methods[className] && !this.methods[className](elementValue, element.get(0))) {\n                valid = false;\n                errors[element.get(0).name] = this.messages[className];\n                validator.invalid[element.get(0).name] = true;\n\n                if (!validateConfig.hideError) {\n                    validator.showErrors(errors);\n                }\n\n                return valid;\n            }\n        }, this));\n\n        return valid;\n    };\n\n    $.widget('mage.validation', {\n        options: {\n            meta: 'validate',\n            onfocusout: false,\n            onkeyup: false,\n            onclick: false,\n            ignoreTitle: true,\n            errorClass: 'mage-error',\n            errorElement: 'div',\n\n            /**\n             * @param {*} error\n             * @param {*} element\n             */\n            errorPlacement: function (error, element) {\n                var errorPlacement = element,\n                    fieldWrapper;\n\n                // logic for date-picker error placement\n                if (element.hasClass('_has-datepicker')) {\n                    errorPlacement = element.siblings('button');\n                }\n                // logic for field wrapper\n                fieldWrapper = element.closest('.addon');\n\n                if (fieldWrapper.length) {\n                    errorPlacement = fieldWrapper.after(error);\n                }\n                //logic for checkboxes/radio\n                if (element.is(':checkbox') || element.is(':radio')) {\n                    errorPlacement = element.parents('.control').children().last();\n\n                    //fallback if group does not have .control parent\n                    if (!errorPlacement.length) {\n                        errorPlacement = element.siblings('label').last();\n                    }\n                }\n                //logic for control with tooltip\n                if (element.siblings('.tooltip').length) {\n                    errorPlacement = element.siblings('.tooltip');\n                }\n                //logic for select with tooltip in after element\n                if (element.next().find('.tooltip').length) {\n                    errorPlacement = element.next();\n                }\n                errorPlacement.after(error);\n            }\n        },\n\n        /**\n         * Check if form pass validation rules without submit.\n         *\n         * @return boolean\n         */\n        isValid: function () {\n            return this.element.valid();\n        },\n\n        /**\n         * Remove validation error messages\n         */\n        clearError: function () {\n            if (arguments.length) {\n                $.each(arguments, $.proxy(function (index, item) {\n                    this.validate.prepareElement(item);\n                    this.validate.hideErrors();\n                }, this));\n            } else {\n                this.validate.resetForm();\n            }\n        },\n\n        /**\n         * Validation creation.\n         *\n         * @protected\n         */\n        _create: function () {\n            this.validate = this.element.validate(this.options);\n\n            // ARIA (adding aria-required attribute)\n            this.element\n                .find('.field.required')\n                .find('.control')\n                .find('input, select, textarea')\n                .attr('aria-required', 'true');\n\n            this._listenFormValidate();\n        },\n\n        /**\n         * Validation listening.\n         *\n         * @protected\n         */\n        _listenFormValidate: function () {\n            $('form').on('invalid-form.validate', this.listenFormValidateHandler);\n        },\n\n        /**\n         * Handle form validation. Focus on first invalid form field.\n         *\n         * @param {jQuery.Event} event\n         * @param {Object} validation\n         */\n        listenFormValidateHandler: function (event, validation) {\n            var firstActive = $(validation.errorList[0].element || []),\n                lastActive = $(validation.findLastActive() ||\n                    validation.errorList.length && validation.errorList[0].element || []),\n                windowHeight = $(window).height(),\n                parent, successList;\n\n            if (lastActive.is(':hidden')) {\n                parent = lastActive.parent();\n                $('html, body').animate({\n                    scrollTop: parent.offset().top - windowHeight / 2\n                });\n            }\n\n            // ARIA (removing aria attributes if success)\n            successList = validation.successList;\n\n            if (successList.length) {\n                $.each(successList, function () {\n                    $(this)\n                        .removeAttr('aria-describedby')\n                        .removeAttr('aria-invalid');\n                });\n            }\n\n            if (firstActive.length) {\n                $('html, body').stop().animate({\n                    scrollTop: firstActive.parent().offset().top - windowHeight / 2\n                });\n                firstActive.focus();\n            }\n        }\n    });\n\n    return $.mage.validation;\n});\n","mage/url.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/* eslint-disable strict */\ndefine([], function () {\n    var baseUrl = '';\n\n    return {\n        /**\n         * @param {String} url\n         */\n        setBaseUrl: function (url) {\n            baseUrl = url;\n        },\n\n        /**\n         * @param {String} path\n         * @return {*}\n         */\n        build: function (path) {\n            if (path.indexOf(baseUrl) !== -1) {\n                return path;\n            }\n\n            return baseUrl + path;\n        }\n    };\n});\n","mage/decorate.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/* eslint-disable strict */\ndefine([\n    'jquery',\n    'mage/translate'\n], function ($) {\n    var methods = {\n        /**\n         * Decorate a list (e.g. a <ul> containing <li>) recursively if specified.\n         * @param {Boolean} isRecursive\n         */\n        list: function (isRecursive) {\n            return this.each(function () {\n                var list = $(this),\n                    items;\n\n                if (list.length > 0) {\n                    items = typeof isRecursive === 'undefined' || isRecursive ?\n                        list.find('li') :\n                        list.children();\n                    items.decorate('generic', ['odd', 'even', 'last']);\n                }\n            });\n        },\n\n        /**\n         * Annotate a set of DOM elements with decorator classes.\n         * @param {Array} decoratorParams\n         */\n        generic: function (decoratorParams) {\n            var elements = $(this),\n                allSupportedParams;\n\n            if (elements) {\n                allSupportedParams = {\n                    even: 'odd', // Flip jQuery odd/even so that index 0 is odd.\n                    odd: 'even',\n                    last: 'last',\n                    first: 'first'\n                };\n\n                decoratorParams = decoratorParams || allSupportedParams;\n\n                $.each(decoratorParams, function (index, param) {\n                    if (param === 'even' || param === 'odd') {\n                        elements.filter(':' + param).removeClass('odd even').addClass(allSupportedParams[param]);\n                    } else {\n                        elements.filter(':' + param).addClass(allSupportedParams[param]);\n                    }\n                });\n            }\n\n            return this;\n        },\n\n        /**\n         * Decorate DOM elements in an HTML table with specified classes.\n         * @param {Object} instanceOptions\n         */\n        table: function (instanceOptions) {\n            return this.each(function () {\n                var table = $(this),\n                    options;\n\n                if (table.length > 0) {\n                    options = {\n                        'tbody': false,\n                        'tbody tr': ['odd', 'even', 'first', 'last'],\n                        'thead tr': ['first', 'last'],\n                        'tfoot tr': ['first', 'last'],\n                        'tr td': ['last']\n                    };\n\n                    $.extend(options, instanceOptions || {});\n\n                    $.each(options, function (key, value) {\n                        if (options[key]) {\n                            if (key === 'tr td') {\n                                $.each(table.find('tr'), function () {\n                                    $(this).find('td').decorate('generic', options['tr td']);\n                                });\n                            } else {\n                                table.find(key).decorate('generic', value);\n                            }\n                        }\n                    });\n                }\n            });\n        },\n\n        /**\n         * Annotate data list elements with CSS classes.\n         */\n        dataList: function () {\n            return this.each(function () {\n                var list = $(this);\n\n                if (list) {\n                    list.find('dt').decorate('generic', ['odd', 'even', 'last']);\n                    list.find('dd').decorate('generic', ['odd', 'even', 'last']);\n                }\n            });\n        }\n    };\n\n    /**\n     * @param {String} method\n     * @return {*}\n     */\n    $.fn.decorate = function (method) {\n        var message;\n\n        if (methods[method]) {\n            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));\n        } else if (typeof method === 'object' || !method) {\n            return methods.init.apply(this, arguments);\n        }\n\n        message = $.mage.__('Method %s does not exist on jQuery.decorate');\n        $.error(message.replace('%s', method));\n    };\n});\n","mage/trim-input.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.trimInput', {\n        options: {\n            cache: {}\n        },\n\n        /**\n         * Widget initialization\n         * @private\n         */\n        _create: function () {\n            this.options.cache.input = $(this.element);\n            this._bind();\n        },\n\n        /**\n         * Event binding, will monitor change, keyup and paste events.\n         * @private\n         */\n        _bind: function () {\n            if (this.options.cache.input.length) {\n                this._on(this.options.cache.input, {\n                    'change': this._trimInput,\n                    'keyup': this._trimInput,\n                    'paste': this._trimInput\n                });\n            }\n        },\n\n        /**\n         * Trim value\n         * @private\n         */\n        _trimInput: function () {\n            // Safari caret position workaround: storing carter position\n            var caretStart, caretEnd, input;\n\n            caretStart = this.options.cache.input.get(0).selectionStart;\n            caretEnd = this.options.cache.input.get(0).selectionEnd;\n\n            input = this._getInputValue().trim();\n\n            this.options.cache.input.val(input);\n\n            // Safari caret position workaround: setting caret position to previously stored values\n            if (caretStart !== null && caretEnd !== null) {\n                this.options.cache.input.get(0).setSelectionRange(caretStart, caretEnd);\n            }\n        },\n\n        /**\n         * Get input value\n         * @returns {*}\n         * @private\n         */\n        _getInputValue: function () {\n            return this.options.cache.input.val();\n        }\n    });\n\n    return $.mage.trimInput;\n});\n","mage/translate.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/mage',\n    'mageTranslationDictionary',\n    'underscore'\n], function ($, mage, dictionary, _) {\n    'use strict';\n\n    $.extend(true, $, {\n        mage: {\n            translate: (function () {\n                /**\n                 * Key-value translations storage\n                 * @type {Object}\n                 * @private\n                 */\n                var _data = dictionary;\n\n                return {\n                    /**\n                     * Add new translation (two string parameters) or several translations (object)\n                     */\n                    add: function () {\n                        if (arguments.length > 1) {\n                            _data[arguments[0]] = arguments[1];\n                        } else if (typeof arguments[0] === 'object') {\n                            $.extend(_data, arguments[0]);\n                        }\n                    },\n\n                    /**\n                     * Make a translation with parsing (to handle case when _data represents tuple)\n                     * @param {String} text\n                     * @return {String}\n                     */\n                    translate: function (text) {\n                        return typeof _data[text] !== 'undefined' ? _data[text] : text;\n                    }\n                };\n            }())\n        }\n    });\n    $.mage.__ = $.proxy($.mage.translate.translate, $.mage.translate);\n\n    // Provide i18n wrapper to be used in underscore templates for translation\n    _.extend(_, {\n        /**\n         * Make a translation using $.mage.__\n         *\n         * @param {String} text\n         * @return {String}\n         */\n        i18n: function (text) {\n            return $.mage.__(text);\n        }\n    });\n\n    return $.mage.__;\n});\n","mage/smart-keyboard-handler.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    /**\n     * @return {Object}\n     * @constructor\n     */\n    function KeyboardHandler() {\n        var body = $('body'),\n            focusState = false,\n            tabFocusClass = '_keyfocus',\n            productsGrid = '[data-container=\"product-grid\"]',\n            catalogProductsGrid = $(productsGrid),\n            CODE_TAB = 9;\n\n        /**\n         * Handle logic, when onTabKeyPress fired at first.\n         * Then it changes state.\n         */\n        function onFocusInHandler() {\n            focusState = true;\n            body.addClass(tabFocusClass)\n                .off('focusin.keyboardHandler', onFocusInHandler);\n        }\n\n        /**\n         * Handle logic to remove state after onTabKeyPress to normal.\n         */\n        function onClickHandler() {\n            focusState = false;\n            body.removeClass(tabFocusClass)\n                .off('click', onClickHandler);\n        }\n\n        /**\n         * Tab key onKeypress handler. Apply main logic:\n         *  - call differ actions onTabKeyPress and onClick\n         */\n        function smartKeyboardFocus() {\n            $(document).on('keydown keypress', function (event) {\n                if (event.which === CODE_TAB && !focusState) {\n                    body\n                        .on('focusin.keyboardHandler', onFocusInHandler)\n                        .on('click', onClickHandler);\n                }\n            });\n\n            // ARIA support for catalog grid products\n            if (catalogProductsGrid.length) {\n                body.on('focusin.gridProducts', productsGrid, function () {\n                    if (body.hasClass(tabFocusClass)) {\n                        $(this).addClass('active');\n                    }\n                });\n                body.on('focusout.gridProducts', productsGrid, function () {\n                    $(this).removeClass('active');\n                });\n            }\n        }\n\n        /**\n         * Attach smart focus on specific element.\n         * @param {jQuery} element\n         */\n        function handleFocus(element) {\n            element.on('focusin.emulateTabFocus', function () {\n                focusState = true;\n                body.addClass(tabFocusClass);\n                element.off();\n            });\n\n            element.on('focusout.emulateTabFocus', function () {\n                focusState = false;\n                body.removeClass(tabFocusClass);\n                element.off();\n            });\n        }\n\n        return {\n            apply: smartKeyboardFocus,\n            focus: handleFocus\n        };\n    }\n\n    return new KeyboardHandler;\n});\n","mage/storage.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine(['jquery', 'mage/url'], function ($, urlBuilder) {\n    'use strict';\n\n    return {\n        /**\n         * Perform asynchronous GET request to server.\n         * @param {String} url\n         * @param {Boolean} global\n         * @param {String} contentType\n         * @param {Object} headers\n         * @returns {Deferred}\n         */\n        get: function (url, global, contentType, headers) {\n            headers = headers || {};\n            global = global === undefined ? true : global;\n            contentType = contentType || 'application/json';\n\n            return $.ajax({\n                url: urlBuilder.build(url),\n                type: 'GET',\n                global: global,\n                contentType: contentType,\n                headers: headers\n            });\n        },\n\n        /**\n         * Perform asynchronous POST request to server.\n         * @param {String} url\n         * @param {String} data\n         * @param {Boolean} global\n         * @param {String} contentType\n         * @param {Object} headers\n         * @returns {Deferred}\n         */\n        post: function (url, data, global, contentType, headers) {\n            headers = headers || {};\n            global = global === undefined ? true : global;\n            contentType = contentType || 'application/json';\n\n            return $.ajax({\n                url: urlBuilder.build(url),\n                type: 'POST',\n                data: data,\n                global: global,\n                contentType: contentType,\n                headers: headers\n            });\n        },\n\n        /**\n         * Perform asynchronous PUT request to server.\n         * @param {String} url\n         * @param {String} data\n         * @param {Boolean} global\n         * @param {String} contentType\n         * @param {Object} headers\n         * @returns {Deferred}\n         */\n        put: function (url, data, global, contentType, headers) {\n            var ajaxSettings = {};\n\n            headers = headers || {};\n            global = global === undefined ? true : global;\n            contentType = contentType || 'application/json';\n            ajaxSettings.url = urlBuilder.build(url);\n            ajaxSettings.type = 'PUT';\n            ajaxSettings.data = data;\n            ajaxSettings.global = global;\n            ajaxSettings.contentType = contentType;\n            ajaxSettings.headers = headers;\n\n            return $.ajax(ajaxSettings);\n        },\n\n        /**\n         * Perform asynchronous DELETE request to server.\n         * @param {String} url\n         * @param {Boolean} global\n         * @param {String} contentType\n         * @param {Object} headers\n         * @returns {Deferred}\n         */\n        delete: function (url, global, contentType, headers) {\n            headers = headers || {};\n            global = global === undefined ? true : global;\n            contentType = contentType || 'application/json';\n\n            return $.ajax({\n                url: urlBuilder.build(url),\n                type: 'DELETE',\n                global: global,\n                contentType: contentType,\n                headers: headers\n            });\n        }\n    };\n});\n","mage/sticky.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.sticky', {\n        options: {\n            /**\n             * Element selector, who's height will be used to restrict the\n             * maximum offsetTop position of the stuck element.\n             * Default uses document body.\n             * @type {String}\n             */\n            container: '',\n\n            /**\n             * Spacing in pixels above the stuck element\n             * @type {Number|Function} Number or Function that will return a Number\n             */\n            spacingTop: 0,\n\n            /**\n             * Allows postponing sticking, until element will go out of the\n             * screen for the number of pixels.\n             * @type {Number|Function} Number or Function that will return a Number\n             */\n            stickAfter: 0,\n\n            /**\n             * CSS class for active sticky state\n             * @type {String}\n             */\n            stickyClass: '_sticky'\n        },\n\n        /**\n         * Retrieve option value\n         * @param  {String} option\n         * @return {*}\n         * @private\n         */\n        _getOptionValue: function (option) {\n            var value = this.options[option] || 0;\n\n            if (typeof value === 'function') {\n                value = this.options[option]();\n            }\n\n            return value;\n        },\n\n        /**\n         * Bind handlers to scroll event\n         * @private\n         */\n        _create: function () {\n            $(window).on({\n                'scroll': $.proxy(this._stick, this),\n                'resize': $.proxy(this.reset, this)\n            });\n\n            this.element.on('dimensionsChanged', $.proxy(this.reset, this));\n\n            this.reset();\n\n            // Application of the workaround for IE11 and Edge\n            this.normalizeIE11AndEdgeScroll();\n        },\n\n        /**\n         * float Block on windowScroll\n         * @private\n         */\n        _stick: function () {\n            var offset,\n                isStatic,\n                stuck,\n                stickAfter;\n\n            isStatic = this.element.css('position') === 'static';\n\n            if (!isStatic && this.element.is(':visible')) {\n                offset = $(document).scrollTop() -\n                    this.parentOffset +\n                    this._getOptionValue('spacingTop');\n\n                offset = Math.max(0, Math.min(offset, this.maxOffset));\n\n                stuck = this.element.hasClass(this.options.stickyClass);\n                stickAfter = this._getOptionValue('stickAfter');\n\n                if (offset && !stuck && offset < stickAfter) {\n                    offset = 0;\n                }\n\n                this.element\n                    .toggleClass(this.options.stickyClass, offset > 0)\n                    .css('top', offset);\n            }\n        },\n\n        /**\n         * Defines maximum offset value of the element.\n         * @private\n         */\n        _calculateDimens: function () {\n            var $parent         = this.element.parent(),\n                topMargin       = parseInt(this.element.css('margin-top'), 10),\n                parentHeight    = $parent.height() - topMargin,\n                height          = this.element.innerHeight(),\n                maxScroll       = document.body.offsetHeight - window.innerHeight;\n\n            if (this.options.container.length > 0) {\n                maxScroll = $(this.options.container).height();\n            }\n\n            this.parentOffset   = $parent.offset().top + topMargin;\n            this.maxOffset      = maxScroll - this.parentOffset;\n\n            if (this.maxOffset + height >= parentHeight) {\n                this.maxOffset = parentHeight - height;\n            }\n\n            return this;\n        },\n\n        /**\n         * Facade method that places sticky element where it should be.\n         */\n        reset: function () {\n            this._calculateDimens()\n                ._stick();\n        },\n\n        /**\n         * Workaround for IE11 and Edge that solves the IE known rendering issue\n         * that prevents sticky element from jumpy movement on scrolling the page.\n         *\n         * Alternatively, undesired jumpy movement can be eliminated by changing the setting in IE:\n         * Settings > Internet options > Advanced tab > inside 'Browsing' item > set 'Use smooth scrolling' to False\n         */\n        normalizeIE11AndEdgeScroll: function () {\n            if (navigator.userAgent.match(/Trident.*rv[ :]*11\\.|Edge\\//)) {\n                document.body.addEventListener('mousewheel', function () {\n                    event.preventDefault();\n                    window.scrollTo(0, window.pageYOffset - event.wheelDelta);\n                });\n            }\n        }\n    });\n\n    return $.mage.sticky;\n});\n","mage/bootstrap.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/apply/main',\n    'Magento_Ui/js/lib/knockout/bootstrap'\n], function ($, mage) {\n    'use strict';\n\n    $.ajaxSetup({\n        cache: false\n    });\n\n    /**\n     * Init all components defined via data-mage-init attribute.\n     * Execute in a separate task to prevent main thread blocking.\n     */\n    setTimeout(mage.apply);\n});\n","mage/fieldset-controls.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @deprecated since version 2.2.0\n */\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget'\n], function ($) {\n    'use strict';\n\n    /**\n     * This widget will allow a control with the fieldsetResetControl widget attached to reset a set of input fields.\n     * The input fields to reset are defined by the inputSelector selector. The widget will store a clone of the fields\n     * on create, and on trigger of fieldsetReset event it resets the defined fields. The event is triggered by the\n     * reset control widget.\n     *\n     * For inputs of type file, the whole dom element is replaced as changing the value is a security violation\n     * For inputs of type checkbox or radio, the checked attribute is added or removed as appropriate\n     * For all others the jquery .val method is used to update to value to the original.\n     */\n    $.widget('mage.fieldsetControls', {\n        original: undefined,\n        options: {\n            inputSelector: '[data-reset=\"true\"]'\n        },\n\n        /**\n         * @private\n         */\n        _create: function () {\n            this.original = this.element.find(this.options.inputSelector).clone(true);\n            this._bind();\n        },\n\n        /**\n         * @private\n         */\n        _bind: function () {\n            this._on({\n                'fieldsetReset': '_onReset'\n            });\n        },\n\n        /**\n         * @param {jQuery.Event} e\n         * @private\n         */\n        _onReset: function (e) {\n            var items;\n\n            e.stopPropagation();\n            // find all the ones we have to remove\n            items = this.element.find(this.options.inputSelector);\n            // loop over replacing each one.\n            items.each($.proxy(function (index, item) {\n                if ($(item).attr('type') == 'file') { //eslint-disable-line eqeqeq\n                    // Replace the current one we found with a clone of the original saved earlier\n                    $(item).replaceWith($(this.original[index]).clone(true));\n                } else if ($(item).attr('type') == 'checkbox' || $(item).attr('type') == 'radio') { //eslint-disable-line\n                    // Return to original state.\n                    if ($(this.original[index]).attr('checked') === undefined) {\n                        $(item).removeAttr('checked');\n                    } else {\n                        $(item).attr('checked', $(this.original[index]).attr('checked'));\n                    }\n                } else {\n                    // Replace the value with the original\n                    $(item).val($(this.original[index]).val());\n                }\n            }, this));\n        }\n    });\n\n    $.widget('mage.fieldsetResetControl', {\n        /**\n         * @private\n         */\n        _create: function () {\n            this._bind();\n        },\n\n        /**\n         * @private\n         */\n        _bind: function () {\n            this._on({\n                click: '_onClick'\n            });\n        },\n\n        /**\n         * @param {jQuery.Event} e\n         * @private\n         */\n        _onClick: function (e) {\n            e.stopPropagation();\n            $(this.element).trigger('fieldsetReset');\n        }\n    });\n\n    return {\n        fieldsetControls: $.mage.fieldsetControls,\n        fieldsetResetControl: $.mage.fieldsetResetControl\n    };\n});\n","mage/dataPost.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/template',\n    'Magento_Ui/js/modal/confirm',\n    'jquery-ui-modules/widget'\n], function ($, mageTemplate, uiConfirm) {\n    'use strict';\n\n    $.widget('mage.dataPost', {\n        options: {\n            formTemplate: '<form action=\"<%- data.action %>\" method=\"post\">' +\n            '<% _.each(data.data, function(value, index) { %>' +\n            '<input name=\"<%- index %>\" value=\"<%- value %>\">' +\n            '<% }) %></form>',\n            postTrigger: ['a[data-post]', 'button[data-post]', 'span[data-post]'],\n            formKeyInputSelector: 'input[name=\"form_key\"]'\n        },\n\n        /** @inheritdoc */\n        _create: function () {\n            this._bind();\n        },\n\n        /** @inheritdoc */\n        _bind: function () {\n            var events = {};\n\n            $.each(this.options.postTrigger, function (index, value) {\n                events['click ' + value] = '_postDataAction';\n            });\n\n            this._on(events);\n        },\n\n        /**\n         * Handler for click.\n         *\n         * @param {Object} e\n         * @private\n         */\n        _postDataAction: function (e) {\n            var params = $(e.currentTarget).data('post');\n\n            e.preventDefault();\n            this.postData(params);\n        },\n\n        /**\n         * Data post action.\n         *\n         * @param {Object} params\n         */\n        postData: function (params) {\n            var formKey = $(this.options.formKeyInputSelector).val(),\n                $form, input;\n\n            if (formKey) {\n                params.data['form_key'] = formKey;\n            }\n\n            $form = $(mageTemplate(this.options.formTemplate, {\n                data: params\n            }));\n\n            if (params.files) {\n                $form[0].enctype = 'multipart/form-data';\n                $.each(params.files, function (key, files) {\n                    if (files instanceof FileList) {\n                        input = document.createElement('input');\n                        input.type = 'file';\n                        input.name = key;\n                        input.files = files;\n                        $form[0].appendChild(input);\n                    }\n                });\n            }\n\n            if (params.data.confirmation) {\n                uiConfirm({\n                    content: params.data.confirmationMessage,\n                    actions: {\n                        /** @inheritdoc */\n                        confirm: function () {\n                            $form.appendTo('body').hide().submit();\n                        }\n                    }\n                });\n            } else {\n                $form.appendTo('body').hide().submit();\n            }\n        }\n    });\n\n    $(document).dataPost();\n\n    return $.mage.dataPost;\n});\n","mage/item-table.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @deprecated since version 2.2.0\n */\ndefine([\n    'jquery',\n    'mage/template',\n    'jquery-ui-modules/widget'\n], function ($, mageTemplate) {\n    'use strict';\n\n    $.widget('mage.itemTable', {\n        options: {\n            addBlock: '[data-template=\"add-block\"]',\n            addBlockData: {},\n            addEvent: 'click',\n            addSelector: '[data-role=\"add\"]',\n            itemsSelector: '[data-container=\"items\"]',\n            keepLastRow: true\n        },\n\n        /**\n         * This method adds a new instance of the block to the items.\n         * @private\n         */\n        _add: function () {\n            var hideShowDelete,\n                deletableItems,\n                addedBlock;\n\n            // adding a new row, so increment the count to give each row a unique index\n            this.rowIndex++;\n\n            // make sure the block data has the rowIndex\n            this.options.addBlockData.rowIndex = this.rowIndex;\n\n            // render the form\n            addedBlock = $(this.addBlockTmpl({\n                data: this.options.addBlockData\n            }));\n\n            // add the row to the item block\n            this.element.find(this.options.itemsSelector).append(addedBlock);\n\n            // initialize all mage content\n            addedBlock.trigger('contentUpdated');\n\n            // determine all existing items in the collection\n            deletableItems = this._getDeletableItems();\n\n            // for the most part, show the delete mechanism, except in the case where there is only one it should not\n            // be deleted\n            hideShowDelete = 'showDelete';\n\n            if (this.options.keepLastRow && deletableItems.length === 1) {\n                hideShowDelete = 'hideDelete';\n            }\n\n            // loop through each control and perform that action on the deletable item\n            $.each(deletableItems, function (index) {\n                $(deletableItems[index]).trigger(hideShowDelete);\n            });\n        },\n\n        /**\n         * This method binds elements found in this widget.\n         * @private\n         */\n        _bind: function () {\n            var handlers = {};\n\n            // since the first handler is dynamic, generate the object using array notation\n            handlers[this.options.addEvent + ' ' + this.options.addSelector] = '_add';\n            handlers.deleteItem = '_onDeleteItem';\n\n            this._on(handlers);\n        },\n\n        /**\n         * This method constructs a new widget.\n         * @private\n         */\n        _create: function () {\n            this._bind();\n\n            this.addBlockTmpl = mageTemplate(this.options.addBlock);\n\n            // nothing in the table, so indicate that\n            this.rowIndex = -1;\n\n            // make sure the block data is an object\n            if (this.options.addBlockData == null || typeof this.options.addBlockData !== 'object') {\n                // reset the block data to an empty object\n                this.options.addBlockData = {};\n            }\n\n            // add the first row to the table\n            this._add();\n        },\n\n        /**\n         * This method returns the list of widgets associated with deletable items from the container (direct children\n         * only).\n         * @private\n         */\n        _getDeletableItems: function () {\n            return this.element.find(this.options.itemsSelector + '> .deletableItem');\n        },\n\n        /**\n         * This method removes the item associated with the message.\n         * @private\n         */\n        _onDeleteItem: function (e) {\n            var deletableItems;\n\n            // parent elements don't need to see this event\n            e.stopPropagation();\n\n            // remove the deletable item\n            $(e.target).remove();\n\n            if (this.options.keepLastRow) {\n                // determine if there is only one element remaining, in which case, disable the delete mechanism on it\n                deletableItems = this._getDeletableItems();\n\n                if (deletableItems.length === 1) {\n                    $(deletableItems[0]).trigger('hideDelete');\n                }\n            }\n        }\n    });\n\n    return $.mage.itemTable;\n});\n","mage/layout.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @deprecated since version 2.2.0\n */\n/* eslint-disable strict */\ndefine(['underscore'], function (_) {\n    return {\n        /**\n         * @param {Object} config\n         */\n        build: function (config) {\n            var types = _.map(_.flatten(config), function (item) {\n                return item.type;\n            });\n\n            require(types, function () {});\n        }\n    };\n});\n","mage/mage.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/apply/main'\n], function ($, mage) {\n    'use strict';\n\n    /**\n     * Main namespace for Magento extensions\n     * @type {Object}\n     */\n    $.mage = $.mage || {};\n\n    /**\n     * Plugin mage, initialize components on elements\n     * @param {String} name - Components' path.\n     * @param {Object} config - Components' config.\n     * @returns {JQuery} Chainable.\n     */\n    $.fn.mage = function (name, config) {\n        config = config || {};\n\n        this.each(function (index, el) {\n            mage.applyFor(el, config, name);\n        });\n\n        return this;\n    };\n\n    $.extend($.mage, {\n        /**\n         * Handle all components declared via data attribute\n         * @return {Object} $.mage\n         */\n        init: function () {\n            mage.apply();\n\n            return this;\n        },\n\n        /**\n         * Method handling redirects and page refresh\n         * @param {String} url - redirect URL\n         * @param {(undefined|String)} type - 'assign', 'reload', 'replace'\n         * @param {(undefined|Number)} timeout - timeout in milliseconds before processing the redirect or reload\n         * @param {(undefined|Boolean)} forced - true|false used for 'reload' only\n         */\n        redirect: function (url, type, timeout, forced) {\n            var _redirect;\n\n            forced  = !!forced;\n            timeout = timeout || 0;\n            type    = type || 'assign';\n\n            /**\n             * @private\n             */\n            _redirect = function () {\n                window.location[type](type === 'reload' ? forced : url);\n            };\n\n            timeout ? setTimeout(_redirect, timeout) : _redirect();\n        },\n\n        /**\n         * Checks if provided string is a valid selector.\n         * @param {String} selector - Selector to check.\n         * @returns {Boolean}\n         */\n        isValidSelector: function (selector) {\n            try {\n                document.querySelector(selector);\n\n                return true;\n            } catch (e) {\n                return false;\n            }\n        }\n    });\n\n    /**\n     * Init components inside of dynamically updated elements\n     */\n    $('body').on('contentUpdated', function () {\n        if (mage) {\n            mage.apply();\n        }\n    });\n\n    return $.mage;\n});\n","mage/common.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'domReady!'\n], function ($) {\n    'use strict';\n\n    /* Form with auto submit feature */\n    $('form[data-auto-submit=\"true\"]').submit();\n\n    //Add form keys.\n    $(document).on(\n        'submit',\n        'form',\n        function (e) {\n            var formKeyElement,\n                existingFormKeyElement,\n                isKeyPresentInForm,\n                isActionExternal,\n                baseUrl = window.BASE_URL,\n                form = $(e.target),\n                formKey = $('input[name=\"form_key\"]').val(),\n                formMethod = form.prop('method'),\n                formAction = form.prop('action');\n\n            isActionExternal = formAction.indexOf(baseUrl) !== 0;\n\n            existingFormKeyElement = form.find('input[name=\"form_key\"]');\n            isKeyPresentInForm = existingFormKeyElement.length;\n\n            /* Verifies that existing auto-added form key is a direct form child element,\n               protection from a case when one form contains another form. */\n            if (isKeyPresentInForm && existingFormKeyElement.attr('auto-added-form-key') === '1') {\n                isKeyPresentInForm = form.find('> input[name=\"form_key\"]').length;\n            }\n\n            if (formKey && !isKeyPresentInForm && !isActionExternal && formMethod !== 'get') {\n                formKeyElement = document.createElement('input');\n                formKeyElement.setAttribute('type', 'hidden');\n                formKeyElement.setAttribute('name', 'form_key');\n                formKeyElement.setAttribute('value', formKey);\n                formKeyElement.setAttribute('auto-added-form-key', '1');\n                form.get(0).appendChild(formKeyElement);\n            }\n        }\n    );\n});\n","mage/terms.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @deprecated since version 2.2.0\n */\ndefine([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    /**\n     * @param {*} args\n     */\n    $.fn.terms = function (args) {\n\n        // default\n        var defaults = {\n                start: 0,\n                wrapper: '',\n                showAnchor: '',\n                effects: 'slide'\n            },\n            options = $.extend(defaults, args);\n\n        this.each(function () {\n            var obj = $(this),\n                wrapper = options.wrapper !== '' ? '> ' + options.wrapper : '',\n                switches = $(wrapper + '> [data-section=\"title\"] > [data-toggle=\"switch\"]', obj),\n                terms = $(wrapper + '> [data-section=\"content\"]', obj),\n                t = switches.length,\n                marginTop = $(switches[0]).closest('[data-section=\"title\"]').css('position') == 'absolute' ? 0 : null, //eslint-disable-line\n                title,\n                current,\n\n                /**\n                 * @param {*} item\n                 */\n                showItem = function (item) {\n                    if (item != current && !$(switches[item]).closest('[data-section=\"title\"]').hasClass('disabled')) { //eslint-disable-line\n                        $(switches).closest('[data-section=\"title\"]').removeClass('active');\n\n                        if (options.wrapper !== '') {\n                            $(switches).parent().parent().removeClass('active');\n                        }\n                        $(terms).removeClass('active');\n                        $(switches[item]).closest('[data-section=\"title\"]').addClass('active');\n\n                        if (options.wrapper !== '') {\n                            $(switches[current]).parent().parent().addClass('active');\n                        }\n                        $(terms[item]).addClass('active');\n                        current = item;\n                    } else if (\n                        // Check if this is accordion width as criteria for now\n                        (obj.attr('data-sections') == 'accordion' || $(switches[item]).closest('[data-section=\"title\"]').css('width') == obj.css('width')) && //eslint-disable-line\n                        item == current && !$(switches[item]).closest('[data-section=\"title\"]').hasClass('disabled') //eslint-disable-line\n                    ) {\n                        $(switches).closest('[data-section=\"title\"]').removeClass('active');\n\n                        if (options.wrapper !== '') {\n                            $(switches).parent().parent().removeClass('active');\n                        }\n                        $(terms).removeClass('active');\n                        current = -1;\n                    }\n                },\n\n                /**\n                 * Init.\n                 */\n                init = function () {\n                    var linksList, i, classes, dataSection, itemHref, itemClass, fromUrl;\n\n                    if (t > 0) {\n                        if ($(switches[0]).closest('[data-section=\"title\"]').css('display') == 'table-cell') { //eslint-disable-line\n                            obj.addClass('adjusted');\n\n                            if (obj[0].tagName == 'DL') { //eslint-disable-line eqeqeq, max-depth\n                                linksList = $('<dd>');\n                            } else {\n                                linksList = $('<div>');\n                            }\n                            linksList.addClass('sections-nav');\n                            obj.prepend(linksList);\n\n                            for (i = 0; i < t; i++) { //eslint-disable-line max-depth\n                                title = $(switches[i]).html();\n                                classes = $(switches[i]).closest('[data-section=\"title\"]').attr('class');\n                                dataSection = $(switches[i]).closest('[data-section=\"title\"]').attr('data-section');\n                                itemHref = $(switches[i]).attr('href');\n                                itemClass = $(switches[i]).attr('class');\n                                $(switches[i]).parent('[data-section=\"title\"]').hide();\n                                switches[i] = $('<a/>', {\n                                    href: itemHref,\n                                    'class': itemClass,\n                                    html: title\n                                }).appendTo(linksList);\n                                $(switches[i]).wrap(\n                                    '<strong class=\"' + classes + '\" data-section=\"' + dataSection + '\" />'\n                                );\n                            }\n                        }\n                        $(switches).each(function (ind, el) {\n                            $(el).click(function (event) {\n                                event.preventDefault();\n                                showItem(ind);\n                            });\n\n                            if (marginTop !== null) {\n                                $(el).closest('[data-section=\"title\"]').css({\n                                    'top': marginTop + 'px'\n                                });\n                                marginTop += $(el).closest('[data-section=\"title\"]').outerHeight(true);\n                                obj.css({\n                                    'min-height': marginTop + 'px'\n                                });\n                            }\n                        });\n\n                        fromUrl = false;\n\n                        if (window.location.hash.length > 0) {\n                            $(terms).each(function (ind, el) {\n                                if ('#info-' + $(el).attr('id') == window.location.hash) { //eslint-disable-line eqeqeq\n                                    showItem(ind);\n                                    $('html, body').animate({\n                                        scrollTop: $(switches[ind]).offset().top\n                                    }, 700);\n                                    fromUrl = true;\n                                }\n                            });\n                        }\n\n                        if (fromUrl === false) {\n                            if (options.start % 1 === 0) { //eslint-disable-line max-depth\n                                current = options.start + 1;\n                                showItem(options.start);\n                            } else {\n                                $(terms).each(function (ind, el) {\n                                    if ($(el).attr('id') == options.start) { //eslint-disable-line eqeqeq\n                                        current = ind + 1;\n                                        showItem(ind);\n                                        $('html, body').animate({\n                                            scrollTop: $(switches[ind]).offset().top\n                                        }, 700);\n                                    }\n                                });\n                            }\n                        }\n                    }\n                };\n\n            init();\n        });\n    };\n\n    return function (data, el) {\n        $(el).terms(data);\n    };\n});\n","mage/edit-trigger.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @deprecated since version 2.2.0\n */\ndefine([\n    'jquery',\n    'mage/template',\n    'jquery-ui-modules/widget'\n], function ($, mageTemplate) {\n    'use strict';\n\n    var editTriggerPrototype;\n\n    $.widget('mage.editTrigger', {\n        options: {\n            img: '',\n            alt: '[TR]',\n            template: '#translate-inline-icon',\n            zIndex: 2000,\n            editSelector: '[data-translate]',\n            delay: 2000,\n            offsetTop: -3,\n            singleElement: true\n        },\n\n        /**\n         * editTriger creation\n         * @protected\n         */\n        _create: function () {\n            this.tmpl = mageTemplate(this.options.template);\n            this._initTrigger();\n            this._bind();\n        },\n\n        /**\n         * @return {Object}\n         * @private\n         */\n        _getCss: function () {\n            return {\n                position: 'absolute',\n                cursor: 'pointer',\n                display: 'none',\n                'z-index': this.options.zIndex\n            };\n        },\n\n        /**\n         * @param {*} appendTo\n         * @return {*|jQuery}\n         * @private\n         */\n        _createTrigger: function (appendTo) {\n            var tmpl = this.tmpl({\n                data: this.options\n            });\n\n            return $(tmpl)\n                .css(this._getCss())\n                .data('role', 'edit-trigger-element')\n                .appendTo(appendTo);\n        },\n\n        /**\n         * @private\n         */\n        _initTrigger: function () {\n            this.trigger = this._createTrigger($('body'));\n        },\n\n        /**\n         * Bind on mousemove event\n         * @protected\n         */\n        _bind: function () {\n            this.trigger.on('click.' + this.widgetName, $.proxy(this._onClick, this));\n            this.element.on('mousemove.' + this.widgetName, $.proxy(this._onMouseMove, this));\n        },\n\n        /**\n         * Show editTriger\n         */\n        show: function () {\n            if (this.trigger.is(':hidden')) {\n                this.trigger.show();\n            }\n        },\n\n        /**\n         * Hide editTriger\n         */\n        hide: function () {\n            this.currentTarget = null;\n\n            if (this.trigger && this.trigger.is(':visible')) {\n                this.trigger.hide();\n            }\n        },\n\n        /**\n         * Set editTriger position\n         * @protected\n         */\n        _setPosition: function (el) {\n            var offset = el.offset();\n\n            this.trigger.css({\n                top: offset.top + el.outerHeight() + this.options.offsetTop,\n                left: offset.left\n            });\n        },\n\n        /**\n         * Show/hide trigger on mouse move.\n         *\n         * @param {jQuery.Event} e\n         * @protected\n         */\n        _onMouseMove: function (e) {\n            var target = $(e.target),\n                inner = target.find(this.options.editSelector);\n\n            if ($(e.target).is('button') && inner.length) {\n                target = inner;\n            } else if (!target.is(this.trigger) && !target.is(this.options.editSelector)) {\n                target = target.parents(this.options.editSelector).first();\n            }\n\n            if (target.length) {\n                if (!target.is(this.trigger)) {\n                    this._setPosition(target);\n                    this.currentTarget = target;\n                }\n                this.show();\n            } else {\n                this.hide();\n            }\n        },\n\n        /**\n         * Trigger event \"edit\" on element for translate.\n         *\n         * @param {jQuery.Event} e\n         * @protected\n         */\n        _onClick: function (e) {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            $(this.currentTarget).trigger('edit.' + this.widgetName);\n            this.hide(true);\n        },\n\n        /**\n         * Destroy editTriger\n         */\n        destroy: function () {\n            this.trigger.remove();\n            this.element.off('.' + this.widgetName);\n\n            return $.Widget.prototype.destroy.call(this);\n        }\n    });\n\n    /**\n     * Extention for widget editTrigger - hide trigger with delay\n     */\n    editTriggerPrototype = $.mage.editTrigger.prototype;\n\n    $.widget('mage.editTrigger', $.extend({}, editTriggerPrototype, {\n        /**\n         * Added clear timeout on trigger show\n         */\n        show: function () {\n            editTriggerPrototype.show.apply(this, arguments);\n\n            if (this.options.delay) {\n                this._clearTimer();\n            }\n        },\n\n        /**\n         * Added setTimeout on trigger hide\n         */\n        hide: function (immediate) {\n            if (!immediate && this.options.delay) {\n                if (!this.timer) {\n                    this.timer = setTimeout($.proxy(function () {\n                        editTriggerPrototype.hide.apply(this, arguments);\n                        this._clearTimer();\n                    }, this), this.options.delay);\n                }\n            } else {\n                editTriggerPrototype.hide.apply(this, arguments);\n            }\n        },\n\n        /**\n         * Clear timer\n         * @protected\n         */\n        _clearTimer: function () {\n            if (this.timer) {\n                clearTimeout(this.timer);\n                this.timer = null;\n            }\n        }\n    }));\n\n    return $.mage.editTrigger;\n});\n","mage/redirect-url.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.redirectUrl', {\n        options: {\n            event: 'click',\n            url: undefined\n        },\n\n        /**\n         * This method binds elements found in this widget.\n         * @private\n         */\n        _bind: function () {\n            var handlers = {};\n\n            handlers[this.options.event] = '_onEvent';\n            this._on(handlers);\n        },\n\n        /**\n         * This method constructs a new widget.\n         * @private\n         */\n        _create: function () {\n            this._bind();\n        },\n\n        /**\n         * This method set the url for the redirect.\n         * @private\n         */\n        _onEvent: function () {\n            if (this.options.url) {\n                location.href = this.options.url;\n            } else {\n                location.href = this.element.val();\n            }\n        }\n    });\n\n    return $.mage.redirectUrl;\n});\n","mage/cookies.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/mage',\n    'jquery/jquery.cookie'\n], function ($) {\n    'use strict';\n\n    /**\n     * Helper for cookies manipulation\n     * @returns {CookieHelper}\n     * @constructor\n     */\n    var CookieHelper = function () {\n\n        /**\n         * Cookie default values.\n         * @type {Object}\n         */\n        this.defaults = {\n            expires: null,\n            path: '/',\n            domain: null,\n            secure: false,\n            lifetime: null,\n            samesite: 'lax'\n        };\n\n        /**\n         * Calculate cookie expiration date based on its lifetime.\n         * @param {Object} options - Cookie option values\n         * @return {Date|null} Calculated cookie expiration date or null if no lifetime provided.\n         * @private\n         */\n        function lifetimeToExpires(options, defaults) {\n            var expires,\n                lifetime;\n\n            lifetime = options.lifetime || defaults.lifetime;\n\n            if (lifetime && lifetime > 0) {\n                expires = options.expires || new Date();\n\n                return new Date(expires.getTime() + lifetime * 1000);\n            }\n\n            return null;\n        }\n\n        /**\n         * Set a cookie's value by cookie name based on optional cookie options.\n         * @param {String} name - The name of the cookie.\n         * @param {String} value - The cookie's value.\n         * @param {Object} options - Optional options (e.g. lifetime, expires, path, etc.)\n         */\n        this.set = function (name, value, options) {\n            var expires,\n                path,\n                domain,\n                secure,\n                samesite;\n\n            options = $.extend({}, this.defaults, options || {});\n            expires = lifetimeToExpires(options, this.defaults) || options.expires;\n            path = options.path;\n            domain = options.domain;\n            secure = options.secure;\n            samesite = options.samesite;\n\n            document.cookie = name + '=' + encodeURIComponent(value) +\n                (expires ? '; expires=' + expires.toUTCString() :  '') +\n                (path ? '; path=' + path : '') +\n                (domain ? '; domain=' + domain : '') +\n                (secure ? '; secure' : '') +\n                (samesite ? '; samesite=' + samesite : 'lax');\n        };\n\n        /**\n         * Get a cookie's value by cookie name.\n         * @param {String} name  - The name of the cookie.\n         * @return {(null|String)}\n         */\n        this.get = function (name) {\n            var arg = name + '=',\n                aLength = arg.length,\n                cookie = document.cookie,\n                cLength = cookie.length,\n                i = 0,\n                j = 0;\n\n            while (i < cLength) {\n                j = i + aLength;\n\n                if (cookie.substring(i, j) === arg) {\n                    return this.getCookieVal(j);\n                }\n                i = cookie.indexOf(' ', i) + 1;\n\n                if (i === 0) {\n                    break;\n                }\n            }\n\n            return null;\n        };\n\n        /**\n         * Clear a cookie's value by name.\n         * @param {String} name - The name of the cookie being cleared.\n         */\n        this.clear = function (name) {\n            if (this.get(name)) {\n                this.set(name, '', {\n                    expires: new Date('Jan 01 1970 00:00:01 GMT')\n                });\n            }\n        };\n\n        /**\n         * Return URI decoded cookie component value (e.g. expires, path, etc.) based on a\n         * numeric offset in the document's cookie value.\n         * @param {Number} offset - Offset into the document's cookie value.\n         * @return {String}\n         */\n        this.getCookieVal = function (offset) {\n            var cookie = document.cookie,\n                endstr = cookie.indexOf(';', offset);\n\n            if (endstr === -1) {\n                endstr = cookie.length;\n            }\n\n            return decodeURIComponent(cookie.substring(offset, endstr));\n        };\n\n        return this;\n    };\n\n    $.extend(true, $, {\n        mage: {\n            cookies: new CookieHelper()\n        }\n    });\n\n    return function (pageOptions) {\n        $.extend($.mage.cookies.defaults, pageOptions);\n        $.extend($.cookie.defaults, $.mage.cookies.defaults);\n    };\n});\n","mage/multiselect.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'underscore',\n    'jquery',\n    'text!mage/multiselect.html',\n    'Magento_Ui/js/modal/alert',\n    'jquery-ui-modules/widget',\n    'jquery/editableMultiselect/js/jquery.multiselect'\n], function (_, $, searchTemplate, alert) {\n    'use strict';\n\n    $.widget('mage.multiselect2', {\n        options: {\n            mselectContainer: 'section.mselect-list',\n            mselectItemsWrapperClass: 'mselect-items-wrapper',\n            mselectCheckedClass: 'mselect-checked',\n            containerClass: 'paginated',\n            searchInputClass: 'admin__action-multiselect-search',\n            selectedItemsCountClass: 'admin__action-multiselect-items-selected',\n            currentPage: 1,\n            lastAppendValue: 0,\n            updateDelay: 1000,\n            optionsLoaded: false\n        },\n\n        /** @inheritdoc */\n        _create: function () {\n            $.fn.multiselect.call(this.element, this.options);\n        },\n\n        /** @inheritdoc */\n        _init: function () {\n            this.domElement = this.element.get(0);\n\n            this.$container = $(this.options.mselectContainer);\n            this.$wrapper = this.$container.find('.' + this.options.mselectItemsWrapperClass);\n            this.$item = this.$wrapper.find('div').first();\n            this.selectedValues = [];\n            this.values = {};\n\n            this.$container.addClass(this.options.containerClass).prepend(searchTemplate);\n            this.$input = this.$container.find('.' + this.options.searchInputClass);\n            this.$selectedCounter = this.$container.find('.' + this.options.selectedItemsCountClass);\n            this.filter = '';\n\n            if (this.domElement.options.length) {\n                this._setLastAppendOption(this.domElement.options[this.domElement.options.length - 1].value);\n            }\n\n            this._initElement();\n            this._events();\n        },\n\n        /**\n         * Leave only saved/selected options in select element.\n         *\n         * @private\n         */\n        _initElement: function () {\n            this.element.empty();\n            _.each(this.options.selectedValues, function (value) {\n                this._createSelectedOption({\n                    value: value,\n                    label: value\n                });\n            }, this);\n        },\n\n        /**\n         * Attach required events.\n         *\n         * @private\n         */\n        _events: function () {\n            var onKeyUp = _.debounce(this.onKeyUp, this.options.updateDelay);\n\n            _.bindAll(this, 'onScroll', 'onCheck', 'onOptionsChange');\n\n            this.$wrapper.on('scroll', this.onScroll);\n            this.$wrapper.on('change.mselectCheck', '[type=checkbox]', this.onCheck);\n            this.$input.on('keyup', _.bind(onKeyUp, this));\n            this.element.on('change.hiddenSelect', this.onOptionsChange);\n        },\n\n        /**\n         * Behaves multiselect scroll.\n         */\n        onScroll: function () {\n            var height = this.$wrapper.height(),\n                scrollHeight = this.$wrapper.prop('scrollHeight'),\n                scrollTop = Math.ceil(this.$wrapper.prop('scrollTop'));\n\n            if (!this.options.optionsLoaded && scrollHeight - height <= scrollTop) {\n                this.loadOptions();\n            }\n        },\n\n        /**\n         * Behaves keyup event on input search\n         */\n        onKeyUp: function () {\n            if (this.getSearchCriteria() === this.filter) {\n                return false;\n            }\n\n            this.setFilter();\n            this.clearMultiselectOptions();\n            this.setCurrentPage(0);\n            this.loadOptions();\n        },\n\n        /**\n         * Callback for select change event\n         */\n        onOptionsChange: function () {\n            this.selectedValues = _.map(this.domElement.options, function (option) {\n                this.values[option.value] = true;\n\n                return option.value;\n            }, this);\n\n            this._updateSelectedCounter();\n        },\n\n        /**\n         * Overrides native check behaviour.\n         *\n         * @param {Event} event\n         */\n        onCheck: function (event) {\n            var checkbox = event.target,\n                option = {\n                    value: checkbox.value,\n                    label: $(checkbox).parent('label').text()\n                };\n\n            checkbox.checked ? this._createSelectedOption(option) : this._removeSelectedOption(option);\n            event.stopPropagation();\n        },\n\n        /**\n         * Show error message.\n         *\n         * @param {String} message\n         */\n        onError: function (message) {\n            alert({\n                content: message\n            });\n        },\n\n        /**\n         * Updates current filter state.\n         */\n        setFilter: function () {\n            this.filter = this.getSearchCriteria() || '';\n        },\n\n        /**\n         * Reads search input value.\n         *\n         * @return {String}\n         */\n        getSearchCriteria: function () {\n            return $.trim(this.$input.val());\n        },\n\n        /**\n         * Load options data.\n         */\n        loadOptions: function () {\n            var nextPage = this.getCurrentPage() + 1;\n\n            this.$wrapper.trigger('processStart');\n            this.$input.prop('disabled', true);\n\n            $.get(this.options.nextPageUrl, {\n                p: nextPage,\n                s: this.filter\n            })\n            .done(function (response) {\n                if (response.success) {\n                    this.appendOptions(response.result);\n                    this.setCurrentPage(nextPage);\n                } else {\n                    this.onError(response.errorMessage);\n                }\n            }.bind(this))\n            .always(function () {\n                this.$wrapper.trigger('processStop');\n                this.$input.prop('disabled', false);\n\n                if (this.filter) {\n                    this.$input.focus();\n                }\n            }.bind(this));\n        },\n\n        /**\n         * Append loaded options\n         *\n         * @param {Array} options\n         */\n        appendOptions: function (options) {\n            var divOptions = [];\n\n            if (!options.length) {\n                return false;\n            }\n\n            if (this.isOptionsLoaded(options)) {\n                return;\n            }\n\n            options.forEach(function (option) {\n                if (!this.values[option.value]) {\n                    this.values[option.value] = true;\n                    option.selected = this._isOptionSelected(option);\n                    divOptions.push(this._createMultiSelectOption(option));\n                    this._setLastAppendOption(option.value);\n                }\n            }, this);\n\n            this.$wrapper.append(divOptions);\n        },\n\n        /**\n         * Clear multiselect options\n         */\n        clearMultiselectOptions: function () {\n            this._setLastAppendOption(0);\n            this.values = {};\n            this.$wrapper.empty();\n        },\n\n        /**\n         * Checks if all options are already loaded\n         *\n         * @return {Boolean}\n         */\n        isOptionsLoaded: function (options) {\n            this.options.optionsLoaded = this.options.lastAppendValue === options[options.length - 1].value;\n\n            return this.options.optionsLoaded;\n        },\n\n        /**\n         * Setter for current page.\n         *\n         * @param {Number} page\n         */\n        setCurrentPage: function (page) {\n            this.options.currentPage = page;\n        },\n\n        /**\n         * Getter for current page.\n         *\n         * @return {Number}\n         */\n        getCurrentPage: function () {\n            return this.options.currentPage;\n        },\n\n        /**\n         * Creates new selected option for select element\n         *\n         * @param {Object} option - option object\n         * @param {String} option.value - option value\n         * @param {String} option.label - option label\n         * @private\n         */\n        _createSelectedOption: function (option) {\n            var selectOption = new Option(option.label, option.value, false, true);\n\n            this.element.append(selectOption);\n            this.selectedValues.push(option.value);\n            this._updateSelectedCounter();\n\n            return selectOption;\n        },\n\n        /**\n         * Remove passed option from select element\n         *\n         * @param {Object} option - option object\n         * @param {String} option.value - option value\n         * @param {String} option.label - option label\n         * @return {Object} option\n         * @private\n         */\n        _removeSelectedOption: function (option) {\n            var unselectedOption = _.findWhere(this.domElement.options, {\n                value: option.value\n            });\n\n            if (!_.isUndefined(unselectedOption)) {\n                this.domElement.remove(unselectedOption.index);\n                this.selectedValues.splice(_.indexOf(this.selectedValues, option.value), 1);\n                this._updateSelectedCounter();\n            }\n\n            return unselectedOption;\n        },\n\n        /**\n         * Creates new DIV option for multiselect widget\n         *\n         * @param {Object} option - option object\n         * @param {String} option.value - option value\n         * @param {String} option.label - option label\n         * @param {Boolean} option.selected - is option selected\n         * @private\n         */\n        _createMultiSelectOption: function (option) {\n            var item = this.$item.clone(),\n                checkbox = item.find('input'),\n                isSelected = !!option.selected;\n\n            checkbox.val(option.value)\n                .prop('checked', isSelected)\n                .toggleClass(this.options.mselectCheckedClass, isSelected);\n\n            item.find('label > span').text(option.label);\n\n            return item;\n        },\n\n        /**\n         * Checks if passed option should be selected\n         *\n         * @param {Object} option - option object\n         * @param {String} option.value - option value\n         * @param {String} option.label - option label\n         * @param {Boolean} option.selected - is option selected\n         * @return {Boolean}\n         * @private\n         */\n        _isOptionSelected: function (option) {\n            return !!~this.selectedValues.indexOf(option.value);\n        },\n\n        /**\n         * Saves last added option value.\n         *\n         * @param {Number} value\n         * @private\n         */\n        _setLastAppendOption: function (value) {\n            this.options.lastAppendValue = value;\n        },\n\n        /**\n         * Updates counter of selected items.\n         *\n         * @private\n         */\n        _updateSelectedCounter: function () {\n            this.$selectedCounter.text(this.selectedValues.length);\n        }\n    });\n\n    return $.mage.multiselect2;\n});\n","mage/calendar.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/*eslint max-depth: 0*/\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget',\n    'jquery-ui-modules/datepicker',\n    'jquery-ui-modules/timepicker'\n], function ($) {\n    'use strict';\n\n    var calendarBasePrototype,\n        datepickerPrototype = $.datepicker.constructor.prototype;\n\n    $.datepicker.markerClassName = '_has-datepicker';\n\n    /**\n     * Extend JQuery date picker prototype with store local time methods\n     */\n    $.extend(datepickerPrototype, {\n        /**\n         * Get date/time according to store settings.\n         * We use serverTimezoneOffset (in seconds) instead of serverTimezoneSeconds\n         * in order to have ability to know actual store time even if page hadn't been reloaded\n         * @returns {Date}\n         */\n        _getTimezoneDate: function (options) {\n            // local time in ms\n            var ms = Date.now();\n\n            options = options || $.calendarConfig || {};\n\n            // Adjust milliseconds according to store timezone offset,\n            // mind the GMT zero offset\n            if (typeof options.serverTimezoneOffset !== 'undefined') {\n                // Make UTC time and add store timezone offset in seconds\n                ms += new Date().getTimezoneOffset() * 60 * 1000 + options.serverTimezoneOffset * 1000;\n            } else if (typeof options.serverTimezoneSeconds !== 'undefined') {\n                //Set milliseconds according to client local timezone offset\n                ms = (options.serverTimezoneSeconds + new Date().getTimezoneOffset() * 60) * 1000;\n            }\n\n            return new Date(ms);\n        },\n\n        /**\n         * Set date/time according to store settings.\n         * @param {String|Object} target - the target input field or division or span\n         */\n        _setTimezoneDateDatepicker: function (target) {\n            this._setDateDatepicker(target, this._getTimezoneDate());\n        }\n    });\n\n    /**\n     * Widget calendar\n     */\n    $.widget('mage.calendar', {\n        options: {\n            autoComplete: true\n        },\n\n        /**\n         * Merge global options with options passed to widget invoke\n         * @protected\n         */\n        _create: function () {\n            this._enableAMPM();\n            this.options = $.extend(\n                {},\n                $.calendarConfig ? $.calendarConfig : {},\n                this.options.showsTime ? {\n                    showTime: true,\n                    showHour: true,\n                    showMinute: true\n                } : {},\n                this.options\n            );\n            this._initPicker(this.element);\n            this._overwriteGenerateHtml();\n        },\n\n        /**\n         * Get picker name\n         * @protected\n         */\n        _picker: function () {\n            return this.options.showsTime ? 'datetimepicker' : 'datepicker';\n        },\n\n        /**\n         * Fix for Timepicker - Set ampm option for Timepicker if timeformat contains string 'tt'\n         * @protected\n         */\n        _enableAMPM: function () {\n            if (this.options.timeFormat && this.options.timeFormat.indexOf('tt') >= 0) {\n                this.options.ampm = true;\n            }\n        },\n\n        /**\n         * Wrapper for overwrite jQuery UI datepicker function.\n         */\n        _overwriteGenerateHtml: function () {\n            /**\n             * Overwrite jQuery UI datepicker function.\n             * Reason: magento date could be set before calendar show\n             * but local date will be styled as current in original _generateHTML\n             *\n             * @param {Object} inst - instance datepicker.\n             * @return {String} html template\n             */\n            $.datepicker.constructor.prototype._generateHTML = function (inst) {\n                var today = this._getTimezoneDate(),\n                    isRTL = this._get(inst, 'isRTL'),\n                    showButtonPanel = this._get(inst, 'showButtonPanel'),\n                    hideIfNoPrevNext = this._get(inst, 'hideIfNoPrevNext'),\n                    navigationAsDateFormat = this._get(inst, 'navigationAsDateFormat'),\n                    numMonths = this._getNumberOfMonths(inst),\n                    showCurrentAtPos = this._get(inst, 'showCurrentAtPos'),\n                    stepMonths = this._get(inst, 'stepMonths'),\n                    isMultiMonth = parseInt(numMonths[0], 10) !== 1 || parseInt(numMonths[1], 10) !== 1,\n                    currentDate = this._daylightSavingAdjust(!inst.currentDay ? new Date(9999, 9, 9) :\n                        new Date(inst.currentYear, inst.currentMonth, inst.currentDay)),\n                    minDate = this._getMinMaxDate(inst, 'min'),\n                    maxDate = this._getMinMaxDate(inst, 'max'),\n                    drawMonth = inst.drawMonth - showCurrentAtPos,\n                    drawYear = inst.drawYear,\n                    maxDraw,\n                    prevText = this._get(inst, 'prevText'),\n                    prev,\n                    nextText = this._get(inst, 'nextText'),\n                    next,\n                    currentText = this._get(inst, 'currentText'),\n                    gotoDate,\n                    controls,\n                    buttonPanel,\n                    firstDay,\n                    showWeek = this._get(inst, 'showWeek'),\n                    dayNames = this._get(inst, 'dayNames'),\n                    dayNamesMin = this._get(inst, 'dayNamesMin'),\n                    monthNames = this._get(inst, 'monthNames'),\n                    monthNamesShort =  this._get(inst, 'monthNamesShort'),\n                    beforeShowDay = this._get(inst, 'beforeShowDay'),\n                    showOtherMonths = this._get(inst, 'showOtherMonths'),\n                    selectOtherMonths = this._get(inst, 'selectOtherMonths'),\n                    defaultDate = this._getDefaultDate(inst),\n                    html = '',\n                    row = 0,\n                    col = 0,\n                    selectedDate,\n                    cornerClass = ' ui-corner-all',\n                    group = '',\n                    calender = '',\n                    dow = 0,\n                    thead,\n                    day,\n                    daysInMonth,\n                    leadDays,\n                    curRows,\n                    numRows,\n                    printDate,\n                    dRow = 0,\n                    tbody,\n                    daySettings,\n                    otherMonth,\n                    unselectable;\n\n                if (drawMonth < 0) {\n                    drawMonth += 12;\n                    drawYear--;\n                }\n\n                if (maxDate) {\n                    maxDraw = this._daylightSavingAdjust(new Date(maxDate.getFullYear(),\n                        maxDate.getMonth() - numMonths[0] * numMonths[1] + 1, maxDate.getDate()));\n                    maxDraw = minDate && maxDraw < minDate ? minDate : maxDraw;\n\n                    while (this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1)) > maxDraw) {\n                        drawMonth--;\n\n                        if (drawMonth < 0) {\n                            drawMonth = 11;\n                            drawYear--;\n\n                        }\n                    }\n                }\n                inst.drawMonth = drawMonth;\n                inst.drawYear = drawYear;\n                prevText = !navigationAsDateFormat ? prevText : this.formatDate(prevText,\n                    this._daylightSavingAdjust(new Date(drawYear, drawMonth - stepMonths, 1)),\n                    this._getFormatConfig(inst));\n                prev = this._canAdjustMonth(inst, -1, drawYear, drawMonth) ?\n                    '<a class=\"ui-datepicker-prev ui-corner-all\" data-handler=\"prev\" data-event=\"click\"' +\n                    ' title=\"' + prevText + '\">' +\n                    '<span class=\"ui-icon ui-icon-circle-triangle-' + (isRTL ? 'e' : 'w') + '\">' +\n                    '' + prevText + '</span></a>'\n                    : hideIfNoPrevNext ? ''\n                        :   '<a class=\"ui-datepicker-prev ui-corner-all ui-state-disabled\" title=\"' +\n                            '' + prevText + '\"><span class=\"ui-icon ui-icon-circle-triangle-' +\n                            '' + (isRTL ? 'e' : 'w') + '\">' + prevText + '</span></a>';\n                nextText = !navigationAsDateFormat ?\n                    nextText\n                    :   this.formatDate(nextText,\n                        this._daylightSavingAdjust(new Date(drawYear, drawMonth + stepMonths, 1)),\n                        this._getFormatConfig(inst));\n                next = this._canAdjustMonth(inst, +1, drawYear, drawMonth) ?\n                    '<a class=\"ui-datepicker-next ui-corner-all\" data-handler=\"next\" data-event=\"click\"' +\n                    'title=\"' + nextText + '\"><span class=\"ui-icon ui-icon-circle-triangle-' +\n                    '' + (isRTL ? 'w' : 'e') + '\">' + nextText + '</span></a>'\n                    : hideIfNoPrevNext ? ''\n                        :   '<a class=\"ui-datepicker-next ui-corner-all ui-state-disabled\" title=\"' + nextText + '\">' +\n                            '<span class=\"ui-icon ui-icon-circle-triangle-' + (isRTL ? 'w' : 'e') + '\">' + nextText +\n                            '</span></a>';\n                gotoDate = this._get(inst, 'gotoCurrent') && inst.currentDay ? currentDate : today;\n                currentText = !navigationAsDateFormat ? currentText :\n                    this.formatDate(currentText, gotoDate, this._getFormatConfig(inst));\n                controls = !inst.inline ?\n                    '<button type=\"button\" class=\"ui-datepicker-close ui-state-default ui-priority-primary ' +\n                    'ui-corner-all\" data-handler=\"hide\" data-event=\"click\">' +\n                    this._get(inst, 'closeText') + '</button>'\n                    : '';\n                buttonPanel = showButtonPanel ?\n                    '<div class=\"ui-datepicker-buttonpane ui-widget-content\">' + (isRTL ? controls : '') +\n                    (this._isInRange(inst, gotoDate) ? '<button type=\"button\" class=\"ui-datepicker-current ' +\n                    'ui-state-default ui-priority-secondary ui-corner-all\" data-handler=\"today\" data-event=\"click\"' +\n                    '>' + currentText + '</button>' : '') + (isRTL ? '' : controls) + '</div>' : '';\n                firstDay = parseInt(this._get(inst, 'firstDay'), 10);\n                firstDay = isNaN(firstDay) ? 0 : firstDay;\n\n                for (row = 0; row < numMonths[0]; row++) {\n                    this.maxRows = 4;\n\n                    for (col = 0; col < numMonths[1]; col++) {\n                        selectedDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, inst.selectedDay));\n\n                        calender = '';\n\n                        if (isMultiMonth) {\n                            calender += '<div class=\"ui-datepicker-group';\n\n                            if (numMonths[1] > 1) {\n                                switch (col) {\n                                    case 0: calender += ' ui-datepicker-group-first';\n                                        cornerClass = ' ui-corner-' + (isRTL ? 'right' : 'left');\n                                        break;\n\n                                    case numMonths[1] - 1: calender += ' ui-datepicker-group-last';\n                                        cornerClass = ' ui-corner-' + (isRTL ? 'left' : 'right');\n                                        break;\n\n                                    default: calender += ' ui-datepicker-group-middle'; cornerClass = '';\n                                }\n                            }\n                            calender += '\">';\n                        }\n                        calender += '<div class=\"ui-datepicker-header ' +\n                            'ui-widget-header ui-helper-clearfix' + cornerClass + '\">' +\n                            (/all|left/.test(cornerClass) && parseInt(row, 10) === 0 ? isRTL ? next : prev : '') +\n                            (/all|right/.test(cornerClass) && parseInt(row, 10) === 0 ? isRTL ? prev : next : '') +\n                            this._generateMonthYearHeader(inst, drawMonth, drawYear, minDate, maxDate,\n                            row > 0 || col > 0, monthNames, monthNamesShort) + // draw month headers\n                            '</div><table class=\"ui-datepicker-calendar\"><thead>' +\n                            '<tr>';\n                        thead = showWeek ?\n                            '<th class=\"ui-datepicker-week-col\">' + this._get(inst, 'weekHeader') + '</th>' : '';\n\n                        for (dow = 0; dow < 7; dow++) { // days of the week\n                            day = (dow + firstDay) % 7;\n                            thead += '<th' + ((dow + firstDay + 6) % 7 >= 5 ?\n                                ' class=\"ui-datepicker-week-end\"' : '') + '>' +\n                                '<span title=\"' + dayNames[day] + '\">' + dayNamesMin[day] + '</span></th>';\n                        }\n                        calender += thead + '</tr></thead><tbody>';\n                        daysInMonth = this._getDaysInMonth(drawYear, drawMonth);\n\n                        if (drawYear === inst.selectedYear && drawMonth === inst.selectedMonth) {\n                            inst.selectedDay = Math.min(inst.selectedDay, daysInMonth);\n                        }\n                        leadDays = (this._getFirstDayOfMonth(drawYear, drawMonth) - firstDay + 7) % 7;\n                        curRows = Math.ceil((leadDays + daysInMonth) / 7); // calculate the number of rows to generate\n                        numRows = isMultiMonth ? this.maxRows > curRows ? this.maxRows : curRows : curRows;\n                        this.maxRows = numRows;\n                        printDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1 - leadDays));\n\n                        for (dRow = 0; dRow < numRows; dRow++) { // create date picker rows\n                            calender += '<tr>';\n                            tbody = !showWeek ? '' : '<td class=\"ui-datepicker-week-col\">' +\n                            this._get(inst, 'calculateWeek')(printDate) + '</td>';\n\n                            for (dow = 0; dow < 7; dow++) { // create date picker days\n                                daySettings = beforeShowDay ?\n                                    beforeShowDay.apply(inst.input ? inst.input[0] : null, [printDate]) : [true, ''];\n                                otherMonth = printDate.getMonth() !== drawMonth;\n                                unselectable = otherMonth && !selectOtherMonths || !daySettings[0] ||\n                                minDate && printDate < minDate || maxDate && printDate > maxDate;\n                                tbody += '<td class=\"' +\n                                ((dow + firstDay + 6) % 7 >= 5 ? ' ui-datepicker-week-end' : '') + // highlight weekends\n                                (otherMonth ? ' ui-datepicker-other-month' : '') + // highlight days from other months\n                                (printDate.getTime() === selectedDate.getTime() &&\n                                drawMonth === inst.selectedMonth && inst._keyEvent || // user pressed key\n                                defaultDate.getTime() === printDate.getTime() &&\n                                defaultDate.getTime() === selectedDate.getTime() ?\n                                    // or defaultDate is current printedDate and defaultDate is selectedDate\n                                ' ' + this._dayOverClass : '') + // highlight selected day\n                                (unselectable ? ' ' + this._unselectableClass + ' ui-state-disabled' : '') +\n                                (otherMonth && !showOtherMonths ? '' : ' ' + daySettings[1] + // highlight custom dates\n                                (printDate.getTime() === currentDate.getTime() ? ' ' + this._currentClass : '') +\n                                (printDate.getDate() === today.getDate() && printDate.getMonth() === today.getMonth() &&\n                                printDate.getYear() === today.getYear() ? ' ui-datepicker-today' : '')) + '\"' +\n                                ((!otherMonth || showOtherMonths) && daySettings[2] ?\n                                ' title=\"' + daySettings[2] + '\"' : '') + // cell title\n                                (unselectable ? '' : ' data-handler=\"selectDay\" data-event=\"click\" data-month=\"' +\n                                '' + printDate.getMonth() + '\" data-year=\"' + printDate.getFullYear() + '\"') + '>' +\n                                (otherMonth && !showOtherMonths ? '&#xa0;' : // display for other months\n                                    unselectable ? '<span class=\"ui-state-default\">' + printDate.getDate() + '</span>'\n                                        : '<a class=\"ui-state-default' +\n                                    (printDate.getTime() === today.getTime() ? ' ' : '') +\n                                    (printDate.getTime() === currentDate.getTime() ? ' ui-state-active' : '') +\n                                    (otherMonth ? ' ui-priority-secondary' : '') +\n                                    '\" href=\"#\">' + printDate.getDate() + '</a>') + '</td>';\n                                printDate.setDate(printDate.getDate() + 1);\n                                printDate = this._daylightSavingAdjust(printDate);\n                            }\n                            calender += tbody + '</tr>';\n                        }\n                        drawMonth++;\n\n                        if (drawMonth > 11) {\n                            drawMonth = 0;\n                            drawYear++;\n                        }\n                        calender += '</tbody></table>' + (isMultiMonth ? '</div>' +\n                        (numMonths[0] > 0 && col === numMonths[1] - 1 ? '<div class=\"ui-datepicker-row-break\"></div>'\n                            : '') : '');\n                        group += calender;\n                    }\n                    html += group;\n                }\n                html += buttonPanel + ($.ui.ie6 && !inst.inline ?\n                    '<iframe src=\"javascript:false;\" class=\"ui-datepicker-cover\" frameborder=\"0\"></iframe>' : '');\n                inst._keyEvent = false;\n\n                return html;\n            };\n        },\n\n        /**\n         * Set current date if the date is not set\n         * @protected\n         * @param {Object} element\n         */\n        _setCurrentDate: function (element) {\n            if (!element.val()) {\n                element[this._picker()]('setTimezoneDate').val('');\n            }\n        },\n\n        /**\n         * Init Datetimepicker\n         * @protected\n         * @param {Object} element\n         */\n        _initPicker: function (element) {\n            var picker = element[this._picker()](this.options),\n                pickerButtonText = picker.next('.ui-datepicker-trigger')\n                    .find('img')\n                    .attr('title');\n\n            picker.next('.ui-datepicker-trigger')\n                .addClass('v-middle')\n                .text('') // Remove jQuery UI datepicker generated image\n                .append('<span>' + pickerButtonText + '</span>');\n\n            $(element).attr('autocomplete', this.options.autoComplete ? 'on' : 'off');\n\n            this._setCurrentDate(element);\n        },\n\n        /**\n         * destroy instance of datetimepicker\n         */\n        _destroy: function () {\n            this.element[this._picker()]('destroy');\n            this._super();\n        },\n\n        /**\n         * Method is kept for backward compatibility and unit-tests acceptance\n         * see \\mage\\calendar\\calendar-test.js\n         * @return {Object} date\n         */\n        getTimezoneDate: function () {\n            return datepickerPrototype._getTimezoneDate.call(this, this.options);\n        }\n    });\n\n    calendarBasePrototype = $.mage.calendar.prototype;\n\n    /**\n     * Extension for Calendar - date and time format convert functionality\n     * @var {Object}\n     */\n    $.widget('mage.calendar', $.extend({}, calendarBasePrototype,\n            /** @lends {$.mage.calendar.prototype} */ {\n                /**\n                 * key - backend format, value - jquery format\n                 * @type {Object}\n                 * @private\n                 */\n                dateTimeFormat: {\n                    date: {\n                        'EEEE': 'DD',\n                        'EEE': 'D',\n                        'EE': 'D',\n                        'E': 'D',\n                        'D': 'o',\n                        'MMMM': 'MM',\n                        'MMM': 'M',\n                        'MM': 'mm',\n                        'M': 'mm',\n                        'yyyy': 'yy',\n                        'y': 'yy',\n                        'Y': 'yy',\n                        'yy': 'yy' // Always long year format on frontend\n                    },\n                    time: {\n                        'a': 'TT'\n                    }\n                },\n\n                /**\n                 * Add Date and Time converting to _create method\n                 * @protected\n                 */\n                _create: function () {\n                    if (this.options.dateFormat) {\n                        this.options.dateFormat = this._convertFormat(this.options.dateFormat, 'date');\n                    }\n\n                    if (this.options.timeFormat) {\n                        this.options.timeFormat = this._convertFormat(this.options.timeFormat, 'time');\n                    }\n                    calendarBasePrototype._create.apply(this, arguments);\n                },\n\n                /**\n                 * Converting date or time format\n                 * @protected\n                 * @param {String} format\n                 * @param {String} type\n                 * @return {String}\n                 */\n                _convertFormat: function (format, type) {\n                    var symbols = format.match(/([a-z]+)/ig),\n                        separators = format.match(/([^a-z]+)/ig),\n                        self = this,\n                        convertedFormat = '';\n\n                    if (symbols) {\n                        $.each(symbols, function (key, val) {\n                            convertedFormat +=\n                                (self.dateTimeFormat[type][val] || val) +\n                                (separators[key] || '');\n                        });\n                    }\n\n                    return convertedFormat;\n                }\n            })\n    );\n\n    /**\n     * Widget dateRange\n     * @extends $.mage.calendar\n     */\n    $.widget('mage.dateRange', $.mage.calendar, {\n\n        /**\n         * creates two instances of datetimepicker for date range selection\n         * @protected\n         */\n        _initPicker: function () {\n            var from,\n                to;\n\n            if (this.options.from && this.options.to) {\n                from = this.element.find('#' + this.options.from.id);\n                to = this.element.find('#' + this.options.to.id);\n                this.options.onSelect = $.proxy(function (selectedDate) {\n                    to[this._picker()]('option', 'minDate', selectedDate);\n                }, this);\n                $.mage.calendar.prototype._initPicker.call(this, from);\n                from.on('change', $.proxy(function () {\n                    to[this._picker()]('option', 'minDate', from[this._picker()]('getDate'));\n                }, this));\n                this.options.onSelect = $.proxy(function (selectedDate) {\n                    from[this._picker()]('option', 'maxDate', selectedDate);\n                }, this);\n                $.mage.calendar.prototype._initPicker.call(this, to);\n                to.on('change', $.proxy(function () {\n                    from[this._picker()]('option', 'maxDate', to[this._picker()]('getDate'));\n                }, this));\n            }\n        },\n\n        /**\n         * destroy two instances of datetimepicker\n         */\n        _destroy: function () {\n            if (this.options.from) {\n                this.element.find('#' + this.options.from.id)[this._picker()]('destroy');\n            }\n\n            if (this.options.to) {\n                this.element.find('#' + this.options.to.id)[this._picker()]('destroy');\n            }\n            this._super();\n        }\n    });\n\n    // Overrides the \"today\" button functionality to select today's date when clicked.\n    $.datepicker._gotoTodayOriginal = $.datepicker._gotoToday;\n\n    /**\n     * overwrite jQuery UI _showDatepicker function for proper HTML generation conditions.\n     *\n     */\n    $.datepicker._showDatepickerOriginal = $.datepicker._showDatepicker;\n\n    /**\n     * Triggers original method showDataPicker for rendering calendar\n     * @param {HTMLObject} input\n     * @private\n     */\n    $.datepicker._showDatepicker = function (input) {\n        if (!input.disabled) {\n            $.datepicker._showDatepickerOriginal.call(this, input);\n        }\n    };\n\n    /**\n     * _gotoToday\n     * @param {Object} el\n     */\n    $.datepicker._gotoToday = function (el) {\n        //Set date/time according to timezone offset\n        $(el).datepicker('setTimezoneDate')\n            // To ensure that user can re-select date field without clicking outside it first.\n            .blur().trigger('change');\n    };\n\n    return {\n        dateRange:  $.mage.dateRange,\n        calendar:   $.mage.calendar\n    };\n});\n","mage/deletable-item.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @deprecated since version 2.2.0\n */\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget'\n], function ($) {\n    'use strict';\n\n    /**\n     * This widget is used to tag a DOM element as deletable. By default, it will use the click event on the item with a\n     * data role of delete to trigger the deletion.\n     */\n    $.widget('mage.deletableItem', {\n        options: {\n            deleteEvent: 'click',\n            deleteSelector: '[data-role=\"delete\"]',\n            hiddenClass: 'no-display'\n        },\n\n        /**\n         * This method binds elements found in this widget.\n         */\n        _bind: function () {\n            var handlers = {};\n\n            // since the first handler is dynamic, generate the object using array notation\n            handlers[this.options.deleteEvent + ' ' + this.options.deleteSelector] = '_onDeleteClicked';\n            handlers.hideDelete = '_onHideDelete';\n            handlers.showDelete = '_onShowDelete';\n\n            this._on(handlers);\n        },\n\n        /**\n         * This method constructs a new widget.\n         */\n        _create: function () {\n            this._bind();\n        },\n\n        /**\n         * This method is to initialize the control\n         * @private\n         */\n        _init: function () {\n            this._onHideDelete(); // by default, hide the control\n        },\n\n        /**\n         * This method removes the entity from the DOM.\n         * @private\n         */\n        _onDeleteClicked: function (e) {\n            e.stopPropagation();\n            this.element.trigger('deleteItem');\n        },\n\n        /**\n         * This method hides the delete capability of this item (i.e. making it not deletable)\n         * @private\n         */\n        _onHideDelete: function () {\n            this.element.find(this.options.deleteSelector).addClass(this.options.hiddenClass);\n        },\n\n        /**\n         * This method shows the delete capability of this item (i.e. making it deletable)\n         * @private\n         */\n        _onShowDelete: function () {\n            this.element.find(this.options.deleteSelector).removeClass(this.options.hiddenClass);\n        }\n    });\n\n    return $.mage.deletableItem;\n});\n","mage/loader.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/template',\n    'jquery-ui-modules/widget',\n    'mage/translate'\n], function ($, mageTemplate) {\n    'use strict';\n\n    $.widget('mage.loader', {\n        loaderStarted: 0,\n        options: {\n            icon: '',\n            texts: {\n                loaderText: $.mage.__('Please wait...'),\n                imgAlt: $.mage.__('Loading...')\n            },\n            template:\n                '<div class=\"loading-mask\" data-role=\"loader\">' +\n                    '<div class=\"loader\">' +\n                        '<img alt=\"<%- data.texts.imgAlt %>\" src=\"<%- data.icon %>\">' +\n                        '<p><%- data.texts.loaderText %></p>' +\n                    '</div>' +\n                '</div>'\n\n        },\n\n        /**\n         * Loader creation\n         * @protected\n         */\n        _create: function () {\n            this._bind();\n        },\n\n        /**\n         * Bind on ajax events\n         * @protected\n         */\n        _bind: function () {\n            this._on({\n                'processStop': 'hide',\n                'processStart': 'show',\n                'show.loader': 'show',\n                'hide.loader': 'hide',\n                'contentUpdated.loader': '_contentUpdated'\n            });\n        },\n\n        /**\n         * Verify loader present after content updated\n         *\n         * This will be cleaned up by the task MAGETWO-11070\n         *\n         * @param {EventObject} e\n         * @private\n         */\n        _contentUpdated: function (e) {\n            this.show(e);\n        },\n\n        /**\n         * Show loader\n         */\n        show: function (e, ctx) {\n            this._render();\n            this.loaderStarted++;\n            this.spinner.show();\n\n            if (ctx) {\n                this.spinner\n                    .css({\n                        width: ctx.outerWidth(),\n                        height: ctx.outerHeight(),\n                        position: 'absolute'\n                    })\n                    .position({\n                        my: 'top left',\n                        at: 'top left',\n                        of: ctx\n                    });\n            }\n\n            return false;\n        },\n\n        /**\n         * Hide loader\n         */\n        hide: function () {\n            if (this.loaderStarted > 0) {\n                this.loaderStarted--;\n\n                if (this.loaderStarted === 0) {\n                    this.spinner.hide();\n                }\n            }\n\n            return false;\n        },\n\n        /**\n         * Render loader\n         * @protected\n         */\n        _render: function () {\n            var html;\n\n            if (!this.spinnerTemplate) {\n                this.spinnerTemplate = mageTemplate(this.options.template);\n\n                html = $(this.spinnerTemplate({\n                    data: this.options\n                }));\n\n                html.prependTo(this.element);\n\n                this.spinner = html;\n            }\n        },\n\n        /**\n         * Destroy loader\n         */\n        _destroy: function () {\n            this.spinner.remove();\n        }\n    });\n\n    /**\n     * This widget takes care of registering the needed loader listeners on the body\n     */\n    $.widget('mage.loaderAjax', {\n        options: {\n            defaultContainer: '[data-container=body]',\n            loadingClass: 'ajax-loading'\n        },\n\n        /**\n         * @private\n         */\n        _create: function () {\n            this._bind();\n            // There should only be one instance of this widget, and it should be attached\n            // to the body only. Having it on the page twice will trigger multiple processStarts.\n            if (window.console && !this.element.is(this.options.defaultContainer) && $.mage.isDevMode(undefined)) {\n                console.warn('This widget is intended to be attached to the body, not below.');\n            }\n        },\n\n        /**\n         * @private\n         */\n        _bind: function () {\n            $(document).on({\n                'ajaxSend': this._onAjaxSend.bind(this),\n                'ajaxComplete': this._onAjaxComplete.bind(this)\n            });\n        },\n\n        /**\n         * @param {Object} loaderContext\n         * @return {*}\n         * @private\n         */\n        _getJqueryObj: function (loaderContext) {\n            var ctx;\n\n            // Check to see if context is jQuery object or not.\n            if (loaderContext) {\n                if (loaderContext.jquery) {\n                    ctx = loaderContext;\n                } else {\n                    ctx = $(loaderContext);\n                }\n            } else {\n                ctx = $('[data-container=\"body\"]');\n            }\n\n            return ctx;\n        },\n\n        /**\n         * @param {jQuery.Event} e\n         * @param {Object} jqxhr\n         * @param {Object} settings\n         * @private\n         */\n        _onAjaxSend: function (e, jqxhr, settings) {\n            var ctx;\n\n            $(this.options.defaultContainer)\n                .addClass(this.options.loadingClass)\n                .attr({\n                    'aria-busy': true\n                });\n\n            if (settings && settings.showLoader) {\n                ctx = this._getJqueryObj(settings.loaderContext);\n                ctx.trigger('processStart');\n\n                // Check to make sure the loader is there on the page if not report it on the console.\n                // NOTE that this check should be removed before going live. It is just an aid to help\n                // in finding the uses of the loader that maybe broken.\n                if (window.console && !ctx.parents('[data-role=\"loader\"]').length) {\n                    console.warn('Expected to start loader but did not find one in the dom');\n                }\n            }\n        },\n\n        /**\n         * @param {jQuery.Event} e\n         * @param {Object} jqxhr\n         * @param {Object} settings\n         * @private\n         */\n        _onAjaxComplete: function (e, jqxhr, settings) {\n            $(this.options.defaultContainer)\n                .removeClass(this.options.loadingClass)\n                .attr('aria-busy', false);\n\n            if (settings && settings.showLoader) {\n                this._getJqueryObj(settings.loaderContext).trigger('processStop');\n            }\n        }\n\n    });\n\n    return {\n        loader: $.mage.loader,\n        loaderAjax: $.mage.loaderAjax\n    };\n});\n","mage/collapsible.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget',\n    'jquery-ui-modules/core',\n    'jquery/jquery-storageapi',\n    'mage/mage'\n], function ($) {\n    'use strict';\n\n    var hideProps = {},\n        showProps = {};\n\n    hideProps.height = 'hide';\n    showProps.height = 'show';\n\n    $.widget('mage.collapsible', {\n        options: {\n            active: false,\n            disabled: false,\n            collapsible: true,\n            header: '[data-role=title]',\n            content: '[data-role=content]',\n            trigger: '[data-role=trigger]',\n            closedState: null,\n            openedState: null,\n            disabledState: null,\n            ajaxUrlElement: '[data-ajax=true]',\n            ajaxContent: false,\n            loadingClass: null,\n            saveState: false,\n            animate: false,\n            icons: {\n                activeHeader: null,\n                header: null\n            },\n            collateral: {\n                element: null,\n                openedState: null\n            }\n        },\n\n        /**\n         * @private\n         */\n        _create: function () {\n            this.storage = $.localStorage;\n            this.icons = false;\n\n            if (typeof this.options.icons === 'string') {\n                this.options.icons = $.parseJSON(this.options.icons);\n            }\n\n            this._processPanels();\n            this._processState();\n            this._refresh();\n\n            if (this.options.icons.header && this.options.icons.activeHeader) {\n                this._createIcons();\n                this.icons = true;\n            }\n\n            this.element.on('dimensionsChanged', function (e) {\n                if (e.target && e.target.classList.contains('active')) {\n                    this._scrollToTopIfNotVisible();\n                }\n            }.bind(this));\n\n            this._bind('click');\n            this._trigger('created');\n        },\n\n        /**\n         * @private\n         */\n        _refresh: function () {\n            this.trigger.attr('tabIndex', 0);\n\n            if (this.options.active && !this.options.disabled) {\n                if (this.options.openedState) {\n                    this.element.addClass(this.options.openedState);\n                }\n\n                if (this.options.collateral.element && this.options.collateral.openedState) {\n                    $(this.options.collateral.element).addClass(this.options.collateral.openedState);\n                }\n\n                if (this.options.ajaxContent) {\n                    this._loadContent();\n                }\n                // ARIA (updates aria attributes)\n                this.header.attr({\n                    'aria-selected': false\n                });\n            } else if (this.options.disabled) {\n                this.disable();\n            } else {\n                this.content.hide();\n\n                if (this.options.closedState) {\n                    this.element.addClass(this.options.closedState);\n                }\n            }\n        },\n\n        /**\n         * Processing the state:\n         *     If deep linking is used and the anchor is the id of the content or the content contains this id,\n         *     and the collapsible element is a nested one having collapsible parents, in order to see the content,\n         *     all the parents must be expanded.\n         * @private\n         */\n        _processState: function () {\n            var anchor = window.location.hash,\n                isValid = $.mage.isValidSelector(anchor),\n                urlPath = window.location.pathname.replace(/\\./g, ''),\n                state;\n\n            this.stateKey = encodeURIComponent(urlPath + this.element.attr('id'));\n\n            if (isValid &&\n                ($(this.content.find(anchor)).length > 0 || this.content.attr('id') === anchor.replace('#', ''))\n            ) {\n                this.element.parents('[data-collapsible=true]').collapsible('forceActivate');\n\n                if (!this.options.disabled) {\n                    this.options.active = true;\n\n                    if (this.options.saveState) { //eslint-disable-line max-depth\n                        this.storage.set(this.stateKey, true);\n                    }\n                }\n            } else if (this.options.saveState && !this.options.disabled) {\n                state = this.storage.get(this.stateKey);\n\n                if (typeof state === 'undefined' || state === null) {\n                    this.storage.set(this.stateKey, this.options.active);\n                } else if (state === true) {\n                    this.options.active = true;\n                } else if (state === false) {\n                    this.options.active = false;\n                }\n            }\n        },\n\n        /**\n         * @private\n         */\n        _createIcons: function () {\n            var icons = this.options.icons;\n\n            if (icons) {\n                $('<span>')\n                    .addClass(icons.header)\n                    .attr('data-role', 'icons')\n                    .prependTo(this.header);\n\n                if (this.options.active && !this.options.disabled) {\n                    this.header.children('[data-role=icons]')\n                        .removeClass(icons.header)\n                        .addClass(icons.activeHeader);\n                }\n            }\n        },\n\n        /**\n         * @private\n         */\n        _destroyIcons: function () {\n            this.header\n                .children('[data-role=icons]')\n                .remove();\n        },\n\n        /**\n         * @private\n         */\n        _destroy: function () {\n            var options = this.options;\n\n            this.element.removeAttr('data-collapsible');\n\n            this.trigger.removeAttr('tabIndex');\n\n            if (options.openedState) {\n                this.element.removeClass(options.openedState);\n            }\n\n            if (this.options.collateral.element && this.options.collateral.openedState) {\n                $(this.options.collateral.element).removeClass(this.options.collateral.openedState);\n            }\n\n            if (options.closedState) {\n                this.element.removeClass(options.closedState);\n            }\n\n            if (options.disabledState) {\n                this.element.removeClass(options.disabledState);\n            }\n\n            if (this.icons) {\n                this._destroyIcons();\n            }\n        },\n\n        /**\n         * @private\n         */\n        _processPanels: function () {\n            var headers, triggers;\n\n            this.element.attr('data-collapsible', 'true');\n\n            if (typeof this.options.header === 'object') {\n                this.header = this.options.header;\n            } else {\n                headers = this.element.find(this.options.header);\n\n                if (headers.length > 0) {\n                    this.header = headers.eq(0);\n                } else {\n                    this.header = this.element;\n                }\n            }\n\n            if (typeof this.options.content === 'object') {\n                this.content = this.options.content;\n            } else {\n                this.content = this.header.next(this.options.content).eq(0);\n            }\n\n            // ARIA (init aria attributes)\n            if (this.header.attr('id')) {\n                this.content.attr('aria-labelledby', this.header.attr('id'));\n            }\n\n            if (this.content.attr('id')) {\n                this.header.attr('aria-controls', this.content.attr('id'));\n            }\n\n            this.header\n                .attr({\n                    'role': 'tab',\n                    'aria-selected': this.options.active,\n                    'aria-expanded': this.options.active\n                });\n\n            // For collapsible widget only (not tabs or accordion)\n            if (this.header.parent().attr('role') !== 'presentation') {\n                this.header\n                    .parent()\n                    .attr('role', 'tablist');\n            }\n\n            this.content.attr({\n                'role': 'tabpanel',\n                'aria-hidden': !this.options.active\n            });\n\n            if (typeof this.options.trigger === 'object') {\n                this.trigger = this.options.trigger;\n            } else {\n                triggers = this.header.find(this.options.trigger);\n\n                if (triggers.length > 0) {\n                    this.trigger = triggers.eq(0);\n                } else {\n                    this.trigger = this.header;\n                }\n            }\n        },\n\n        /**\n         * @param {jQuery.Event} event\n         * @private\n         */\n        _keydown: function (event) {\n            var keyCode;\n\n            if (event.altKey || event.ctrlKey) {\n                return;\n            }\n\n            keyCode = $.ui.keyCode;\n\n            switch (event.keyCode) {\n                case keyCode.SPACE:\n                case keyCode.ENTER:\n                    this._eventHandler(event);\n                    break;\n            }\n\n        },\n\n        /**\n         * @param {jQuery.Event} event\n         * @private\n         */\n        _bind: function (event) {\n            var self = this;\n\n            this.events = {\n                keydown: '_keydown'\n            };\n\n            if (event) {\n                $.each(event.split(' '), function (index, eventName) {\n                    self.events[eventName] = '_eventHandler';\n                });\n            }\n            this._off(this.trigger);\n\n            if (!this.options.disabled) {\n                this._on(this.trigger, this.events);\n            }\n        },\n\n        /**\n         * Disable.\n         */\n        disable: function () {\n            this.options.disabled = true;\n            this._off(this.trigger);\n            this.forceDeactivate();\n\n            if (this.options.disabledState) {\n                this.element.addClass(this.options.disabledState);\n            }\n            this.trigger.attr('tabIndex', -1);\n        },\n\n        /**\n         * Enable.\n         */\n        enable: function () {\n            this.options.disabled = false;\n            this._on(this.trigger, this.events);\n            this.forceActivate();\n\n            if (this.options.disabledState) {\n                this.element.removeClass(this.options.disabledState);\n            }\n            this.trigger.attr('tabIndex', 0);\n        },\n\n        /**\n         * @param {jQuery.Event} event\n         * @private\n         */\n        _eventHandler: function (event) {\n\n            if (this.options.active && this.options.collapsible) {\n                this.deactivate();\n            } else {\n                this.activate();\n\n            }\n            event.preventDefault();\n\n        },\n\n        /**\n         * @param {*} prop\n         * @private\n         */\n        _animate: function (prop) {\n            var duration,\n                easing,\n                animate = this.options.animate;\n\n            if (typeof animate === 'number') {\n                duration = animate;\n            }\n\n            if (typeof animate === 'string') {\n                animate = $.parseJSON(animate);\n            }\n            duration = duration || animate.duration;\n            easing = animate.easing;\n            this.content.animate(prop, duration, easing);\n        },\n\n        /**\n         * Deactivate.\n         */\n        deactivate: function () {\n            if (this.options.animate) {\n                this._animate(hideProps);\n            } else {\n                this.content.hide();\n            }\n            this._close();\n        },\n\n        /**\n         * Force deactivate.\n         */\n        forceDeactivate: function () {\n            this.content.hide();\n            this._close();\n\n        },\n\n        /**\n         * @private\n         */\n        _close: function () {\n            this.options.active = false;\n\n            if (this.options.saveState) {\n                this.storage.set(this.stateKey, false);\n            }\n\n            if (this.options.openedState) {\n                this.element.removeClass(this.options.openedState);\n            }\n\n            if (this.options.collateral.element && this.options.collateral.openedState) {\n                $(this.options.collateral.element).removeClass(this.options.collateral.openedState);\n            }\n\n            if (this.options.closedState) {\n                this.element.addClass(this.options.closedState);\n            }\n\n            if (this.icons) {\n                this.header.children('[data-role=icons]')\n                    .removeClass(this.options.icons.activeHeader)\n                    .addClass(this.options.icons.header);\n            }\n\n            // ARIA (updates aria attributes)\n            this.header.attr({\n                'aria-selected': 'false',\n                'aria-expanded': 'false'\n            });\n            this.content.attr({\n                'aria-hidden': 'true'\n            });\n\n            this.element.trigger('dimensionsChanged', {\n                opened: false\n            });\n        },\n\n        /**\n         * Activate.\n         *\n         * @return void;\n         */\n        activate: function () {\n            if (this.options.disabled) {\n                return;\n            }\n\n            if (this.options.animate) {\n                this._animate(showProps);\n            } else {\n                this.content.show();\n            }\n            this._open();\n        },\n\n        /**\n         * Force activate.\n         */\n        forceActivate: function () {\n            if (!this.options.disabled) {\n                this.content.show();\n                this._open();\n            }\n        },\n\n        /**\n         * @private\n         */\n        _open: function () {\n            this.element.trigger('beforeOpen');\n            this.options.active = true;\n\n            if (this.options.ajaxContent) {\n                this._loadContent();\n            }\n\n            if (this.options.saveState) {\n                this.storage.set(this.stateKey, true);\n            }\n\n            if (this.options.openedState) {\n                this.element.addClass(this.options.openedState);\n            }\n\n            if (this.options.collateral.element && this.options.collateral.openedState) {\n                $(this.options.collateral.element).addClass(this.options.collateral.openedState);\n            }\n\n            if (this.options.closedState) {\n                this.element.removeClass(this.options.closedState);\n            }\n\n            if (this.icons) {\n                this.header.children('[data-role=icons]')\n                    .removeClass(this.options.icons.header)\n                    .addClass(this.options.icons.activeHeader);\n            }\n\n            // ARIA (updates aria attributes)\n            this.header.attr({\n                'aria-selected': 'true',\n                'aria-expanded': 'true'\n            });\n            this.content.attr({\n                'aria-hidden': 'false'\n            });\n\n            this.element.trigger('dimensionsChanged', {\n                opened: true\n            });\n        },\n\n        /**\n         * @private\n         */\n        _loadContent: function () {\n            var url = this.element.find(this.options.ajaxUrlElement).attr('href'),\n                that = this;\n\n            if (url) {\n                that.xhr = $.get({\n                    url: url,\n                    dataType: 'html'\n                }, function () {\n                });\n            }\n\n            if (that.xhr && that.xhr.statusText !== 'canceled') {\n                if (that.options.loadingClass) {\n                    that.element.addClass(that.options.loadingClass);\n                }\n                that.content.attr('aria-busy', 'true');\n                that.xhr.done(function (response) {\n                    setTimeout(function () {\n                        that.content.html(response);\n                    }, 1);\n                });\n                that.xhr.always(function (jqXHR, status) {\n                    setTimeout(function () {\n                        if (status === 'abort') {\n                            that.content.stop(false, true);\n                        }\n\n                        if (that.options.loadingClass) {\n                            that.element.removeClass(that.options.loadingClass);\n                        }\n                        that.content.removeAttr('aria-busy');\n\n                        if (jqXHR === that.xhr) {\n                            delete that.xhr;\n                        }\n                    }, 1);\n                });\n            }\n        },\n\n        /**\n         * @private\n         */\n        _scrollToTopIfNotVisible: function () {\n            if (this._isElementOutOfViewport()) {\n                this.header[0].scrollIntoView();\n            }\n        },\n\n        /**\n         * @private\n         * @return {Boolean}\n         */\n        _isElementOutOfViewport: function () {\n            var headerRect = this.header[0].getBoundingClientRect(),\n                contentRect = this.content.get().length ? this.content[0].getBoundingClientRect() : false,\n                headerOut,\n                contentOut;\n\n            headerOut = headerRect.bottom - headerRect.height < 0 ||\n                headerRect.right - headerRect.width < 0 ||\n                headerRect.left + headerRect.width > window.innerWidth ||\n                headerRect.top + headerRect.height > window.innerHeight;\n\n            contentOut = contentRect ? contentRect.bottom - contentRect.height < 0 ||\n                contentRect.right - contentRect.width < 0 ||\n                contentRect.left + contentRect.width > window.innerWidth ||\n                contentRect.top + contentRect.height > window.innerHeight : false;\n\n            return headerOut ? headerOut : contentOut;\n        }\n    });\n\n    return $.mage.collapsible;\n});\n","mage/dropdowns.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    /**\n     * @param {Object} options\n     */\n    $.fn.dropdown = function (options) {\n        var defaults = {\n                parent: null,\n                autoclose: true,\n                btnArrow: '.arrow',\n                menu: '[data-target=\"dropdown\"]',\n                activeClass: 'active'\n            },\n            actionElem = $(this),\n            self = this;\n\n        options = $.extend(defaults, options);\n        actionElem = $(this);\n        self = this;\n\n        /**\n         * @param {HTMLElement} elem\n         */\n        this.openDropdown = function (elem) {\n            elem\n                .addClass(options.activeClass)\n                .attr('aria-expanded', true)\n                .parent()\n                    .addClass(options.activeClass);\n\n            elem.parent()\n                .find(options.menu)\n                .attr('aria-hidden', false);\n\n            $(options.btnArrow, elem).text('-');\n        };\n\n        /**\n         * @param {HTMLElement} elem\n         */\n        this.closeDropdown = function (elem) {\n            elem.removeClass(options.activeClass)\n                .attr('aria-expanded', false)\n                .parent()\n                    .removeClass(options.activeClass);\n\n            elem.parent()\n                .find(options.menu)\n                .attr('aria-hidden', true);\n\n            $(options.btnArrow, elem).text('+');\n        };\n\n        /**\n         * Reset all dropdowns.\n         *\n         * @param {Object} param\n         */\n        this.reset = function (param) {\n            var params = param || {},\n                dropdowns = params.elems || actionElem;\n\n            dropdowns.each(function (index, elem) {\n                self.closeDropdown($(elem));\n            });\n        };\n\n        /* document Event bindings */\n        if (options.autoclose === true) {\n            $(document).on('click.hideDropdown', this.reset);\n            $(document).on('keyup.hideDropdown', function (e) {\n                var ESC_CODE = '27';\n\n                if (e.keyCode == ESC_CODE) { //eslint-disable-line eqeqeq\n                    self.reset();\n                }\n            });\n        }\n\n        if (options.events) {\n            $.each(options.events, function (index, event) {\n                $(document).on(event.name, event.selector, event.action);\n            });\n        }\n\n        return this.each(function () {\n            var elem = $(this),\n                parent = $(options.parent).length > 0 ? $(options.parent) : elem.parent(),\n                menu = $(options.menu, parent) || $('.dropdown-menu', parent);\n\n            // ARIA (adding aria attributes)\n            if (menu.length) {\n                elem.attr('aria-haspopup', true);\n            }\n\n            if (!elem.hasClass(options.activeClass)) {\n                elem.attr('aria-expanded', false);\n                menu.attr('aria-hidden', true);\n            } else {\n                elem.attr('aria-expanded', true);\n                menu.attr('aria-hidden', false);\n            }\n\n            if (!elem.is('a, button')) {\n                elem.attr('role', 'button');\n                elem.attr('tabindex', 0);\n            }\n\n            if (elem.attr('data-trigger-keypress-button')) {\n                elem.on('keypress', function (e) {\n                    var keyCode = e.keyCode || e.which,\n                        ENTER_CODE = 13;\n\n                    if (keyCode === ENTER_CODE) {\n                        e.preventDefault();\n                        elem.trigger('click.toggleDropdown');\n                    }\n                });\n            }\n\n            elem.on('click.toggleDropdown', function () {\n                var el = actionElem;\n\n                if (options.autoclose === true) {\n                    actionElem = $();\n                    $(document).trigger('click.hideDropdown');\n                    actionElem = el;\n                }\n\n                self[el.hasClass(options.activeClass) ? 'closeDropdown' : 'openDropdown'](elem);\n\n                return false;\n            });\n        });\n    };\n\n    return function (data, el) {\n        $(el).dropdown(data);\n    };\n});\n","mage/tooltip.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @deprecated since version 2.2.0\n */\ndefine([\n    'jquery',\n    'jquery-ui-modules/tooltip'\n], function ($) {\n    'use strict';\n\n    //Widget Wrapper\n    $.widget('mage.tooltip', $.ui.tooltip, {});\n\n    return $.mage.tooltip;\n});\n","mage/popup-window.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.popupWindow', {\n        options: {\n            centerBrowser: 0, // center window over browser window? {1 (YES) or 0 (NO)}. overrides top and left\n            centerScreen: 0, // center window over entire screen? {1 (YES) or 0 (NO)}. overrides top and left\n            height: 500, // sets the height in pixels of the window.\n            left: 0, // left position when the window appears.\n            location: 0, // determines whether the address bar is displayed {1 (YES) or 0 (NO)}.\n            menubar: 0, // determines whether the menu bar is displayed {1 (YES) or 0 (NO)}.\n            resizable: 0, // whether the window can be resized {1 (YES) or 0 (NO)}.\n            scrollbars: 0, // determines whether scrollbars appear on the window {1 (YES) or 0 (NO)}.\n            status: 0, // whether a status line appears at the bottom of the window {1 (YES) or 0 (NO)}.\n            width: 500, // sets the width in pixels of the window.\n            windowName: null, // name of window set from the name attribute of the element that invokes the click\n            windowURL: null, // url used for the popup\n            top: 0, // top position when the window appears.\n            toolbar: 0 // determines whether a toolbar is displayed {1 (YES) or 0 (NO)}.\n        },\n\n        /**\n         * @private\n         */\n        _create: function () {\n            this.element.on('click', $.proxy(this._openPopupWindow, this));\n        },\n\n        /**\n         * @param {jQuery.Event} event\n         * @private\n         */\n        _openPopupWindow: function (event) {\n            var element = $(event.target),\n                settings = this.options,\n                windowFeatures =\n                    'height=' + settings.height +\n                        ',width=' + settings.width +\n                        ',toolbar=' + settings.toolbar +\n                        ',scrollbars=' + settings.scrollbars +\n                        ',status=' + settings.status +\n                        ',resizable=' + settings.resizable +\n                        ',location=' + settings.location +\n                        ',menuBar=' + settings.menubar,\n                centeredX,\n                centeredY;\n\n            settings.windowName = settings.windowName || element.attr('name');\n            settings.windowURL = settings.windowURL || element.attr('href');\n\n            if (settings.centerBrowser) {\n                centeredY = window.screenY + (window.outerHeight / 2 - settings.height / 2);\n                centeredX = window.screenX + (window.outerWidth / 2 - settings.width / 2);\n                windowFeatures += ',left=' + centeredX + ',top=' + centeredY;\n            } else if (settings.centerScreen) {\n                centeredY = (screen.height - settings.height) / 2;\n                centeredX = (screen.width - settings.width) / 2;\n                windowFeatures += ',left=' + centeredX + ',top=' + centeredY;\n            } else {\n                windowFeatures += ',left=' + settings.left + ',top=' + settings.top;\n            }\n\n            window.open(settings.windowURL, settings.windowName, windowFeatures).focus();\n            event.preventDefault();\n        }\n    });\n\n    return $.mage.popupWindow;\n});\n","mage/toggle.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.toggleAdvanced', {\n        options: {\n            baseToggleClass: 'active' // Class used to be toggled on clicked element\n        },\n\n        /**\n         * Toggle creation\n         * @private\n         */\n        _create: function () {\n            this.beforeCreate();\n            this._bindCore();\n            this.afterCreate();\n        },\n\n        /**\n         *  Core bound events & setup\n         * @protected\n         */\n        _bindCore: function () {\n            var widget = this;\n\n            this.element.on('click', $.proxy(function (e) {\n                widget._onClick();\n                e.preventDefault();\n            }, this));\n        },\n\n        /**\n         * Binding Click event\n         *\n         * @protected\n         */\n        _onClick: function () {\n            this._prepareOptions();\n            this._toggleSelectors();\n        },\n\n        /**\n         * Method used to look for data attributes to override default options\n         *\n         * @protected\n         */\n        _prepareOptions: function () {\n            this.options.baseToggleClass = this.element.data('base-toggle-class') ?\n                this.element.data('base-toggle-class') : this.options.baseToggleClass;\n        },\n\n        /**\n         * Method responsible for hiding and revealing specified DOM elements\n         * Toggle the class on clicked element\n         *\n         * @protected\n         */\n        _toggleSelectors: function () {\n            this.element.toggleClass(this.options.baseToggleClass);\n        },\n\n        /**\n         * Method used to inject 3rd party functionality before create\n         * @public\n         */\n        beforeCreate: function () {},\n\n        /**\n         * Method used to inject 3rd party functionality after create\n         * @public\n         */\n        afterCreate: function () {}\n    });\n\n    // Extension for mage.toggle - Adding selectors support for other DOM elements we wish to toggle\n    $.widget('mage.toggleAdvanced', $.mage.toggleAdvanced, {\n\n        options: {\n            selectorsToggleClass: 'hidden',    // Class used to be toggled on selectors DOM elements\n            toggleContainers: null\n        },\n\n        /**\n         * Method responsible for hiding and revealing specified DOM elements\n         * If data-toggle-selectors attribute is present - toggle will be done on these selectors\n         * Otherwise we toggle the class on clicked element\n         *\n         * @protected\n         * @override\n         */\n        _toggleSelectors: function () {\n            this._super();\n\n            if (this.options.toggleContainers) {\n                $(this.options.toggleContainers).toggleClass(this.options.selectorsToggleClass);\n            } else {\n                this.element.toggleClass(this.options.baseToggleClass);\n            }\n        },\n\n        /**\n         * Method used to look for data attributes to override default options\n         *\n         * @protected\n         * @override\n         */\n        _prepareOptions: function () {\n            this.options.selectorsToggleClass = this.element.data('selectors-toggle-class') ?\n                this.element.data('selectors-toggle-class') : this.options.selectorsToggleClass;\n            this.options.toggleContainers = this.element.data('toggle-selectors') ?\n                this.element.data('toggle-selectors') : this.options.toggleContainers;\n            this._super();\n        }\n    });\n\n    // Extension for mage.toggle - Adding label toggle\n    $.widget('mage.toggleAdvanced', $.mage.toggleAdvanced, {\n\n        options: {\n            newLabel: null,             // Text of the new label to be used on toggle\n            curLabel: null,             // Text of the old label to be used on toggle\n            currentLabelElement: null   // Current label container\n        },\n\n        /**\n         * Binding Click event\n         *\n         * @protected\n         * @override\n         */\n        _onClick: function () {\n            this._super();\n            this._toggleLabel();\n        },\n\n        /**\n         * Method responsible for replacing clicked element labels\n         * @protected\n         */\n        _toggleLabel: function () {\n            var cachedLabel, currentLabelSelector;\n\n            if (this.options.newLabel) {\n                cachedLabel = this.options.newLabel;\n                currentLabelSelector = this.options.currentLabelElement ?\n                        $(this.options.currentLabelElement) : this.element;\n\n                this.element.data('toggle-label', this.options.curLabel);\n                currentLabelSelector.html(this.options.newLabel);\n\n                this.options.curLabel = this.options.newLabel;\n                this.options.newLabel = cachedLabel;\n            }\n        },\n\n        /**\n         * Method used to look for data attributes to override default options\n         *\n         * @protected\n         * @override\n         */\n        _prepareOptions: function () {\n            this.options.newLabel = this.element.data('toggle-label') ?\n                this.element.data('toggle-label') : this.options.newLabel;\n\n            this.options.currentLabelElement = this.element.data('current-label-el') ?\n                this.element.data('current-label-el') : this.options.currentLabelElement;\n\n            if (!this.options.currentLabelElement) {\n                this.options.currentLabelElement = this.element;\n            }\n\n            this.options.curLabel = $(this.options.currentLabelElement).html();\n\n            this._super();\n        }\n    });\n\n    return $.mage.toggleAdvanced;\n});\n","mage/menu.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'matchMedia',\n    'jquery-ui-modules/menu',\n    'jquery/jquery.mobile.custom',\n    'mage/translate'\n], function ($, mediaCheck) {\n    'use strict';\n\n    /**\n     * Menu Widget - this widget is a wrapper for the jQuery UI Menu\n     */\n    $.widget('mage.menu', $.ui.menu, {\n        options: {\n            responsive: false,\n            expanded: false,\n            showDelay: 42,\n            hideDelay: 300,\n            delay: 0,\n            mediaBreakpoint: '(max-width: 767px)'\n        },\n\n        /**\n         * @private\n         */\n        _create: function () {\n            var self = this;\n\n            this.delay = this.options.delay;\n\n            this._super();\n            $(window).on('resize', function () {\n                self.element.find('.submenu-reverse').removeClass('submenu-reverse');\n            });\n        },\n\n        /**\n         * @private\n         */\n        _init: function () {\n            this._super();\n\n            if (this.options.expanded === true) {\n                this.isExpanded();\n            }\n\n            if (this.options.responsive === true) {\n                mediaCheck({\n                    media: this.options.mediaBreakpoint,\n                    entry: $.proxy(function () {\n                        this._toggleMobileMode();\n                    }, this),\n                    exit: $.proxy(function () {\n                        this._toggleDesktopMode();\n                    }, this)\n                });\n            }\n\n            this._assignControls()._listen();\n            this._setActiveMenu();\n        },\n\n        /**\n         * @return {Object}\n         * @private\n         */\n        _assignControls: function () {\n            this.controls = {\n                toggleBtn: $('[data-action=\"toggle-nav\"]'),\n                swipeArea: $('.nav-sections')\n            };\n\n            return this;\n        },\n\n        /**\n         * @private\n         */\n        _listen: function () {\n            var controls = this.controls,\n                toggle = this.toggle;\n\n            controls.toggleBtn.off('click');\n            controls.toggleBtn.on('click', toggle.bind(this));\n            controls.swipeArea.off('swipeleft');\n            controls.swipeArea.on('swipeleft', toggle.bind(this));\n        },\n\n        /**\n         * Toggle.\n         */\n        toggle: function () {\n            var html = $('html');\n\n            if (html.hasClass('nav-open')) {\n                html.removeClass('nav-open');\n                setTimeout(function () {\n                    html.removeClass('nav-before-open');\n                }, this.options.hideDelay);\n            } else {\n                html.addClass('nav-before-open');\n                setTimeout(function () {\n                    html.addClass('nav-open');\n                }, this.options.showDelay);\n            }\n        },\n\n        /**\n         * Tries to figure out the active category for current page and add appropriate classes:\n         *  - 'active' class for active category\n         *  - 'has-active' class for all parents of active category\n         *\n         *  First, checks whether current URL is URL of category page,\n         *  otherwise tries to retrieve category URL in case of current URL is product view page URL\n         *  which has category tree path in it.\n         *\n         * @return void\n         * @private\n         */\n        _setActiveMenu: function () {\n            var currentUrl = window.location.href.split('?')[0];\n\n            if (!this._setActiveMenuForCategory(currentUrl)) {\n                this._setActiveMenuForProduct(currentUrl);\n            }\n        },\n\n        /**\n         * Looks for category with provided URL and adds 'active' CSS class to it if it was not set before.\n         * If menu item has parent categories, sets 'has-active' class to all af them.\n         *\n         * @param {String} url - possible category URL\n         * @returns {Boolean} - true if active category was founded by provided URL, otherwise return false\n         * @private\n         */\n        _setActiveMenuForCategory: function (url) {\n            var activeCategoryLink = this.element.find('a[href=\"' + url + '\"]'),\n                classes,\n                classNav;\n\n            if (!activeCategoryLink || !activeCategoryLink.hasClass('ui-corner-all')) {\n\n                //category was not found by provided URL\n                return false;\n            } else if (!activeCategoryLink.parent().hasClass('active')) {\n                activeCategoryLink.parent().addClass('active');\n                classes = activeCategoryLink.parent().attr('class');\n                classNav = classes.match(/(nav\\-)[0-9]+(\\-[0-9]+)+/gi);\n\n                if (classNav) {\n                    this._setActiveParent(classNav[0]);\n                }\n            }\n\n            return true;\n        },\n\n        /**\n         * Sets 'has-active' CSS class to all parent categories which have part of provided class in childClassName\n         *\n         * @example\n         *  childClassName - 'nav-1-2-3'\n         *  CSS class 'has-active' will be added to categories have 'nav-1-2' and 'nav-1' classes\n         *\n         * @param {String} childClassName - Class name of active category <li> element\n         * @return void\n         * @private\n         */\n        _setActiveParent: function (childClassName) {\n            var parentElement,\n                parentClass = childClassName.substr(0, childClassName.lastIndexOf('-'));\n\n            if (parentClass.lastIndexOf('-') !== -1) {\n                parentElement = this.element.find('.' + parentClass);\n\n                if (parentElement) {\n                    parentElement.addClass('has-active');\n                }\n                this._setActiveParent(parentClass);\n            }\n        },\n\n        /**\n         * Tries to retrieve category URL from current URL and mark this category as active\n         * @see _setActiveMenuForCategory(url)\n         *\n         * @example\n         *  currentUrl - http://magento.com/category1/category12/product.html,\n         *  category URLs has extensions .phtml - http://magento.com/category1.phtml\n         *  method sets active category which has URL http://magento.com/category1/category12.phtml\n         *\n         * @param {String} currentUrl - current page URL without parameters\n         * @return void\n         * @private\n         */\n        _setActiveMenuForProduct: function (currentUrl) {\n            var categoryUrlExtension,\n                lastUrlSection,\n                possibleCategoryUrl,\n                //retrieve first category URL to know what extension is used for category URLs\n                firstCategoryUrl = this.element.find('> li a').attr('href');\n\n            if (firstCategoryUrl) {\n                lastUrlSection = firstCategoryUrl.substr(firstCategoryUrl.lastIndexOf('/'));\n                categoryUrlExtension = lastUrlSection.lastIndexOf('.') !== -1 ?\n                    lastUrlSection.substr(lastUrlSection.lastIndexOf('.')) : '';\n\n                possibleCategoryUrl = currentUrl.substr(0, currentUrl.lastIndexOf('/')) + categoryUrlExtension;\n                this._setActiveMenuForCategory(possibleCategoryUrl);\n            }\n        },\n\n        /**\n         * Add class for expanded option.\n         */\n        isExpanded: function () {\n            var subMenus = this.element.find(this.options.menus),\n                expandedMenus = subMenus.find(this.options.menus);\n\n            expandedMenus.addClass('expanded');\n        },\n\n        /**\n         * @param {jQuery.Event} event\n         * @private\n         */\n        _activate: function (event) {\n            window.location.href = this.active.find('> a').attr('href');\n            this.collapseAll(event);\n        },\n\n        /**\n         * @param {jQuery.Event} event\n         * @private\n         */\n        _keydown: function (event) {\n            var match, prev, character, skip, regex,\n                preventDefault = true;\n\n            /* eslint-disable max-depth */\n            /**\n             * @param {String} value\n             */\n            function escape(value) {\n                return value.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, '\\\\$&');\n            }\n\n            if (this.active.closest(this.options.menus).attr('aria-expanded') != 'true') { //eslint-disable-line eqeqeq\n\n                switch (event.keyCode) {\n                    case $.ui.keyCode.PAGE_UP:\n                        this.previousPage(event);\n                        break;\n\n                    case $.ui.keyCode.PAGE_DOWN:\n                        this.nextPage(event);\n                        break;\n\n                    case $.ui.keyCode.HOME:\n                        this._move('first', 'first', event);\n                        break;\n\n                    case $.ui.keyCode.END:\n                        this._move('last', 'last', event);\n                        break;\n\n                    case $.ui.keyCode.UP:\n                        this.previous(event);\n                        break;\n\n                    case $.ui.keyCode.DOWN:\n                        if (this.active && !this.active.is('.ui-state-disabled')) {\n                            this.expand(event);\n                        }\n                        break;\n\n                    case $.ui.keyCode.LEFT:\n                        this.previous(event);\n                        break;\n\n                    case $.ui.keyCode.RIGHT:\n                        this.next(event);\n                        break;\n\n                    case $.ui.keyCode.ENTER:\n                    case $.ui.keyCode.SPACE:\n                        this._activate(event);\n                        break;\n\n                    case $.ui.keyCode.ESCAPE:\n                        this.collapse(event);\n                        break;\n                    default:\n                        preventDefault = false;\n                        prev = this.previousFilter || '';\n                        character = String.fromCharCode(event.keyCode);\n                        skip = false;\n\n                        clearTimeout(this.filterTimer);\n\n                        if (character === prev) {\n                            skip = true;\n                        } else {\n                            character = prev + character;\n                        }\n\n                        regex = new RegExp('^' + escape(character), 'i');\n                        match = this.activeMenu.children('.ui-menu-item').filter(function () {\n                            return regex.test($(this).children('a').text());\n                        });\n                        match = skip && match.index(this.active.next()) !== -1 ?\n                            this.active.nextAll('.ui-menu-item') :\n                            match;\n\n                        // If no matches on the current filter, reset to the last character pressed\n                        // to move down the menu to the first item that starts with that character\n                        if (!match.length) {\n                            character = String.fromCharCode(event.keyCode);\n                            regex = new RegExp('^' + escape(character), 'i');\n                            match = this.activeMenu.children('.ui-menu-item').filter(function () {\n                                return regex.test($(this).children('a').text());\n                            });\n                        }\n\n                        if (match.length) {\n                            this.focus(event, match);\n\n                            if (match.length > 1) {\n                                this.previousFilter = character;\n                                this.filterTimer = this._delay(function () {\n                                    delete this.previousFilter;\n                                }, 1000);\n                            } else {\n                                delete this.previousFilter;\n                            }\n                        } else {\n                            delete this.previousFilter;\n                        }\n                }\n            } else {\n                switch (event.keyCode) {\n                    case $.ui.keyCode.DOWN:\n                        this.next(event);\n                        break;\n\n                    case $.ui.keyCode.UP:\n                        this.previous(event);\n                        break;\n\n                    case $.ui.keyCode.RIGHT:\n                        if (this.active && !this.active.is('.ui-state-disabled')) {\n                            this.expand(event);\n                        }\n                        break;\n\n                    case $.ui.keyCode.ENTER:\n                    case $.ui.keyCode.SPACE:\n                        this._activate(event);\n                        break;\n\n                    case $.ui.keyCode.LEFT:\n                    case $.ui.keyCode.ESCAPE:\n                        this.collapse(event);\n                        break;\n                    default:\n                        preventDefault = false;\n                        prev = this.previousFilter || '';\n                        character = String.fromCharCode(event.keyCode);\n                        skip = false;\n\n                        clearTimeout(this.filterTimer);\n\n                        if (character === prev) {\n                            skip = true;\n                        } else {\n                            character = prev + character;\n                        }\n\n                        regex = new RegExp('^' + escape(character), 'i');\n                        match = this.activeMenu.children('.ui-menu-item').filter(function () {\n                            return regex.test($(this).children('a').text());\n                        });\n                        match = skip && match.index(this.active.next()) !== -1 ?\n                            this.active.nextAll('.ui-menu-item') :\n                            match;\n\n                        // If no matches on the current filter, reset to the last character pressed\n                        // to move down the menu to the first item that starts with that character\n                        if (!match.length) {\n                            character = String.fromCharCode(event.keyCode);\n                            regex = new RegExp('^' + escape(character), 'i');\n                            match = this.activeMenu.children('.ui-menu-item').filter(function () {\n                                return regex.test($(this).children('a').text());\n                            });\n                        }\n\n                        if (match.length) {\n                            this.focus(event, match);\n\n                            if (match.length > 1) {\n                                this.previousFilter = character;\n                                this.filterTimer = this._delay(function () {\n                                    delete this.previousFilter;\n                                }, 1000);\n                            } else {\n                                delete this.previousFilter;\n                            }\n                        } else {\n                            delete this.previousFilter;\n                        }\n                }\n            }\n\n            /* eslint-enable max-depth */\n            if (preventDefault) {\n                event.preventDefault();\n            }\n        },\n\n        /**\n         * @private\n         */\n        _toggleMobileMode: function () {\n            var subMenus;\n\n            $(this.element).off('mouseenter mouseleave');\n            this._on({\n\n                /**\n                 * @param {jQuery.Event} event\n                 */\n                'click .ui-menu-item:has(a)': function (event) {\n                    var target;\n\n                    event.preventDefault();\n                    target = $(event.target).closest('.ui-menu-item');\n                    target.get(0).scrollIntoView();\n\n                    if (!target.hasClass('level-top') || !target.has('.ui-menu').length) {\n                        window.location.href = target.find('> a').attr('href');\n                    }\n                },\n\n                /**\n                 * @param {jQuery.Event} event\n                 */\n                'click .ui-menu-item:has(.ui-state-active)': function (event) {\n                    this.collapseAll(event, true);\n                }\n            });\n\n            subMenus = this.element.find('.level-top');\n            $.each(subMenus, $.proxy(function (index, item) {\n                var category = $(item).find('> a span').not('.ui-menu-icon').text(),\n                    categoryUrl = $(item).find('> a').attr('href'),\n                    menu = $(item).find('> .ui-menu');\n\n                this.categoryLink = $('<a>')\n                    .attr('href', categoryUrl)\n                    .text($.mage.__('All %1').replace('%1', category));\n\n                this.categoryParent = $('<li>')\n                    .addClass('ui-menu-item all-category')\n                    .html(this.categoryLink);\n\n                if (menu.find('.all-category').length === 0) {\n                    menu.prepend(this.categoryParent);\n                }\n\n            }, this));\n        },\n\n        /**\n         * @private\n         */\n        _toggleDesktopMode: function () {\n            var categoryParent, html;\n\n            $(this.element).off('click mousedown mouseenter mouseleave');\n            this._on({\n\n                /**\n                 * Prevent focus from sticking to links inside menu after clicking\n                 * them (focus should always stay on UL during navigation).\n                 */\n                'mousedown .ui-menu-item > a': function (event) {\n                    event.preventDefault();\n                },\n\n                /**\n                 * Prevent focus from sticking to links inside menu after clicking\n                 * them (focus should always stay on UL during navigation).\n                 */\n                'click .ui-state-disabled > a': function (event) {\n                    event.preventDefault();\n                },\n\n                /**\n                 * @param {jQuer.Event} event\n                 */\n                'click .ui-menu-item:has(a)': function (event) {\n                    var target = $(event.target).closest('.ui-menu-item');\n\n                    if (!this.mouseHandled && target.not('.ui-state-disabled').length) {\n                        this.select(event);\n\n                        // Only set the mouseHandled flag if the event will bubble, see #9469.\n                        if (!event.isPropagationStopped()) {\n                            this.mouseHandled = true;\n                        }\n\n                        // Open submenu on click\n                        if (target.has('.ui-menu').length) {\n                            this.expand(event);\n                        } else if (!this.element.is(':focus') &&\n                            $(this.document[0].activeElement).closest('.ui-menu').length\n                        ) {\n                            // Redirect focus to the menu\n                            this.element.trigger('focus', [true]);\n\n                            // If the active item is on the top level, let it stay active.\n                            // Otherwise, blur the active item since it is no longer visible.\n                            if (this.active && this.active.parents('.ui-menu').length === 1) { //eslint-disable-line\n                                clearTimeout(this.timer);\n                            }\n                        }\n                    }\n                },\n\n                /**\n                 * @param {jQuery.Event} event\n                 */\n                'mouseenter .ui-menu-item': function (event) {\n                    var target = $(event.currentTarget),\n                        submenu = this.options.menus,\n                        ulElement,\n                        ulElementWidth,\n                        width,\n                        targetPageX,\n                        rightBound;\n\n                    if (target.has(submenu)) {\n                        ulElement = target.find(submenu);\n                        ulElementWidth = ulElement.outerWidth(true);\n                        width = target.outerWidth() * 2;\n                        targetPageX = target.offset().left;\n                        rightBound = $(window).width();\n\n                        if (ulElementWidth + width + targetPageX > rightBound) {\n                            ulElement.addClass('submenu-reverse');\n                        }\n\n                        if (targetPageX - ulElementWidth < 0) {\n                            ulElement.removeClass('submenu-reverse');\n                        }\n                    }\n\n                    // Remove ui-state-active class from siblings of the newly focused menu item\n                    // to avoid a jump caused by adjacent elements both having a class with a border\n                    target.siblings().children('.ui-state-active').removeClass('ui-state-active');\n                    this.focus(event, target);\n                },\n\n                /**\n                 * @param {jQuery.Event} event\n                 */\n                'mouseleave': function (event) {\n                    this.collapseAll(event, true);\n                },\n\n                /**\n                 * Mouse leave.\n                 */\n                'mouseleave .ui-menu': 'collapseAll'\n            });\n\n            categoryParent = this.element.find('.all-category');\n            html = $('html');\n\n            categoryParent.remove();\n\n            if (html.hasClass('nav-open')) {\n                html.removeClass('nav-open');\n                setTimeout(function () {\n                    html.removeClass('nav-before-open');\n                }, this.options.hideDelay);\n            }\n        },\n\n        /**\n         * @param {*} handler\n         * @param {Number} delay\n         * @return {Number}\n         * @private\n         */\n        _delay: function (handler, delay) {\n            var instance = this,\n\n                /**\n                 * @return {*}\n                 */\n                handlerProxy = function () {\n                    return (typeof handler === 'string' ? instance[handler] : handler).apply(instance, arguments);\n                };\n\n            return setTimeout(handlerProxy, delay || 0);\n        },\n\n        /**\n         * @param {jQuery.Event} event\n         */\n        expand: function (event) {\n            var newItem = this.active &&\n                this.active\n                    .children('.ui-menu')\n                    .children('.ui-menu-item')\n                    .first();\n\n            if (newItem && newItem.length) {\n                if (newItem.closest('.ui-menu').is(':visible') &&\n                    newItem.closest('.ui-menu').has('.all-categories')\n                ) {\n                    return;\n                }\n\n                // remove the active state class from the siblings\n                this.active.siblings().children('.ui-state-active').removeClass('ui-state-active');\n\n                this._open(newItem.parent());\n\n                // Delay so Firefox will not hide activedescendant change in expanding submenu from AT\n                this._delay(function () {\n                    this.focus(event, newItem);\n                });\n            }\n        },\n\n        /**\n         * @param {jQuery.Event} event\n         */\n        select: function (event) {\n            var ui;\n\n            this.active = this.active || $(event.target).closest('.ui-menu-item');\n\n            if (this.active.is('.all-category')) {\n                this.active = $(event.target).closest('.ui-menu-item');\n            }\n            ui = {\n                item: this.active\n            };\n\n            if (!this.active.has('.ui-menu').length) {\n                this.collapseAll(event, true);\n            }\n            this._trigger('select', event, ui);\n        }\n    });\n\n    $.widget('mage.navigation', $.mage.menu, {\n        options: {\n            responsiveAction: 'wrap', //option for responsive handling\n            maxItems: null, //option to set max number of menu items\n            container: '#menu', //container to check against navigation length\n            moreText: $.mage.__('more'),\n            breakpoint: 768\n        },\n\n        /**\n         * @private\n         */\n        _init: function () {\n            var that, responsive;\n\n            this._super();\n\n            that = this;\n            responsive = this.options.responsiveAction;\n\n            this.element\n                .addClass('ui-menu-responsive')\n                .attr('responsive', 'main');\n\n            this.setupMoreMenu();\n            this.setMaxItems();\n\n            //check responsive option\n            if (responsive == 'onResize') { //eslint-disable-line eqeqeq\n                $(window).on('resize', function () {\n                    if ($(window).width() > that.options.breakpoint) {\n                        that._responsive();\n                        $('[responsive=more]').show();\n                    } else {\n                        that.element.children().show();\n                        $('[responsive=more]').hide();\n                    }\n                });\n            } else if (responsive == 'onReload') { //eslint-disable-line eqeqeq\n                this._responsive();\n            }\n        },\n\n        /**\n         * Setup more menu.\n         */\n        setupMoreMenu: function () {\n            var moreListItems = this.element.children().clone(),\n                moreLink = $('<a>' + this.options.moreText + '</a>');\n\n            moreListItems.hide();\n\n            moreLink.attr('href', '#');\n\n            this.moreItemsList = $('<ul>')\n                .append(moreListItems);\n\n            this.moreListContainer = $('<li>')\n                .append(moreLink)\n                .append(this.moreItemsList);\n\n            this.responsiveMenu = $('<ul>')\n                .addClass('ui-menu-more')\n                .attr('responsive', 'more')\n                .append(this.moreListContainer)\n                .menu({\n                    position: {\n                        my: 'right top',\n                        at: 'right bottom'\n                    }\n                })\n                .insertAfter(this.element);\n        },\n\n        /**\n         * @private\n         */\n        _responsive: function () {\n            var container = $(this.options.container),\n                containerSize = container.width(),\n                width = 0,\n                items = this.element.children('li'),\n                more = $('.ui-menu-more > li > ul > li a');\n\n            items = items.map(function () {\n                var item = {};\n\n                item.item = $(this);\n                item.itemSize = $(this).outerWidth();\n\n                return item;\n            });\n\n            $.each(items, function (index) {\n                var itemText = items[index].item\n                    .find('a:first')\n                    .text();\n\n                width += parseInt(items[index].itemSize, null); //eslint-disable-line radix\n\n                if (width < containerSize) {\n                    items[index].item.show();\n\n                    more.each(function () {\n                        var text = $(this).text();\n\n                        if (text === itemText) {\n                            $(this).parent().hide();\n                        }\n                    });\n                } else if (width > containerSize) {\n                    items[index].item.hide();\n\n                    more.each(function () {\n                        var text = $(this).text();\n\n                        if (text === itemText) {\n                            $(this).parent().show();\n                        }\n                    });\n                }\n            });\n        },\n\n        /**\n         * Set max items.\n         */\n        setMaxItems: function () {\n            var items = this.element.children('li'),\n                itemsCount = items.length,\n                maxItems = this.options.maxItems,\n                overflow = itemsCount - maxItems,\n                overflowItems = items.slice(overflow);\n\n            overflowItems.hide();\n\n            overflowItems.each(function () {\n                var itemText = $(this).find('a:first').text();\n\n                $(this).hide();\n\n                $('.ui-menu-more > li > ul > li a').each(function () {\n                    var text = $(this).text();\n\n                    if (text === itemText) {\n                        $(this).parent().show();\n                    }\n                });\n            });\n        }\n    });\n\n    return {\n        menu: $.mage.menu,\n        navigation: $.mage.navigation\n    };\n});\n","mage/tabs.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery-ui-modules/widget',\n    'jquery-ui-modules/core',\n    'mage/mage',\n    'mage/collapsible'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.tabs', {\n        options: {\n            active: 0,\n            disabled: [],\n            openOnFocus: true,\n            collapsible: false,\n            collapsibleElement: '[data-role=collapsible]',\n            header: '[data-role=title]',\n            content: '[data-role=content]',\n            trigger: '[data-role=trigger]',\n            closedState: null,\n            openedState: null,\n            disabledState: null,\n            ajaxUrlElement: '[data-ajax=true]',\n            ajaxContent: false,\n            loadingClass: null,\n            saveState: false,\n            animate: false,\n            icons: {\n                activeHeader: null,\n                header: null\n            }\n        },\n\n        /**\n         * @private\n         */\n        _create: function () {\n            if (typeof this.options.disabled === 'string') {\n                this.options.disabled = this.options.disabled.split(' ').map(function (item) {\n                    return parseInt(item, 10);\n                });\n            }\n            this._processPanels();\n            this._handleDeepLinking();\n            this._processTabIndex();\n            this._closeOthers();\n            this._bind();\n        },\n\n        /**\n         * @private\n         */\n        _destroy: function () {\n            $.each(this.collapsibles, function () {\n                $(this).collapsible('destroy');\n            });\n        },\n\n        /**\n         * If deep linking is used, all sections must be closed but the one that contains the anchor.\n         * @private\n         */\n        _handleDeepLinking: function () {\n            var self = this,\n                anchor = window.location.hash,\n                isValid = $.mage.isValidSelector(anchor),\n                anchorId = anchor.replace('#', '');\n\n            if (anchor && isValid) {\n                $.each(self.contents, function (i) {\n                    if ($(this).attr('id') === anchorId || $(this).find('#' + anchorId).length) {\n                        self.collapsibles.not(self.collapsibles.eq(i)).collapsible('forceDeactivate');\n\n                        return false;\n                    }\n                });\n            }\n        },\n\n        /**\n         * When the widget gets instantiated, the first tab that is not disabled receive focusable property\n         * All tabs receive tabIndex 0\n         * @private\n         */\n        _processTabIndex: function () {\n            var self = this;\n\n            self.triggers.attr('tabIndex', 0);\n            $.each(this.collapsibles, function (i) {\n                self.triggers.attr('tabIndex', 0);\n                self.triggers.eq(i).attr('tabIndex', 0);\n            });\n        },\n\n        /**\n         * Prepare the elements for instantiating the collapsible widget\n         * @private\n         */\n        _processPanels: function () {\n            var isNotNested = this._isNotNested.bind(this);\n\n            this.contents = this.element\n                .find(this.options.content)\n                .filter(isNotNested);\n\n            this.collapsibles =  this.element\n                .find(this.options.collapsibleElement)\n                .filter(isNotNested);\n\n            this.collapsibles\n                .attr('role', 'presentation')\n                .parent()\n                .attr('role', 'tablist');\n\n            this.headers = this.element\n                .find(this.options.header)\n                .filter(isNotNested);\n\n            if (this.headers.length === 0) {\n                this.headers = this.collapsibles;\n            }\n            this.triggers = this.element\n                .find(this.options.trigger)\n                .filter(isNotNested);\n\n            if (this.triggers.length === 0) {\n                this.triggers = this.headers;\n            }\n            this._callCollapsible();\n        },\n\n        /**\n         * Checks if element is not in nested container to keep the correct scope of collapsible\n         * @param {Number} index\n         * @param {HTMLElement} element\n         * @private\n         * @return {Boolean}\n         */\n        _isNotNested: function (index, element) {\n            var parentContent = $(element).parents(this.options.content);\n\n            return !parentContent.length || !this.element.find(parentContent).length;\n        },\n\n        /**\n         * Setting the disabled and active tabs and calling instantiation of collapsible\n         * @private\n         */\n        _callCollapsible: function () {\n            var self = this,\n                disabled = false,\n                active = false;\n\n            $.each(this.collapsibles, function (i) {\n                disabled = active = false;\n\n                if ($.inArray(i, self.options.disabled) !== -1) {\n                    disabled = true;\n                }\n\n                if (i === self.options.active) {\n                    active = true;\n                }\n                self._instantiateCollapsible(this, i, active, disabled);\n            });\n        },\n\n        /**\n         * Instantiate collapsible.\n         *\n         * @param {HTMLElement} element\n         * @param {Number} index\n         * @param {*} active\n         * @param {*} disabled\n         * @private\n         */\n        _instantiateCollapsible: function (element, index, active, disabled) {\n            $(element).collapsible(\n                $.extend({}, this.options, {\n                    active: active,\n                    disabled: disabled,\n                    header: this.headers.eq(index),\n                    content: this.contents.eq(index),\n                    trigger: this.triggers.eq(index)\n                })\n            );\n        },\n\n        /**\n         * Adding callback to close others tabs when one gets opened\n         * @private\n         */\n        _closeOthers: function () {\n            var self = this;\n\n            $.each(this.collapsibles, function () {\n                $(this).on('beforeOpen', function () {\n                    self.collapsibles.not(this).collapsible('forceDeactivate');\n                });\n            });\n        },\n\n        /**\n         * @param {*} index\n         */\n        activate: function (index) {\n            this._toggleActivate('activate', index);\n        },\n\n        /**\n         * @param {*} index\n         */\n        deactivate: function (index) {\n            this._toggleActivate('deactivate', index);\n        },\n\n        /**\n         * @param {*} action\n         * @param {*} index\n         * @private\n         */\n        _toggleActivate: function (action, index) {\n            this.collapsibles.eq(index).collapsible(action);\n        },\n\n        /**\n         * @param {*} index\n         */\n        disable: function (index) {\n            this._toggleEnable('disable', index);\n        },\n\n        /**\n         * @param {*} index\n         */\n        enable: function (index) {\n            this._toggleEnable('enable', index);\n        },\n\n        /**\n         * @param {*} action\n         * @param {*} index\n         * @private\n         */\n        _toggleEnable: function (action, index) {\n            var self = this;\n\n            if ($.isArray(index)) {\n                $.each(index, function () {\n                    self.collapsibles.eq(this).collapsible(action);\n                });\n            } else if (index === undefined) {\n                this.collapsibles.collapsible(action);\n            } else {\n                this.collapsibles.eq(index).collapsible(action);\n            }\n        },\n\n        /**\n         * @param {jQuery.Event} event\n         * @private\n         */\n        _keydown: function (event) {\n            var self = this,\n                keyCode, toFocus, toFocusIndex, enabledTriggers, length, currentIndex, nextToFocus;\n\n            if (event.altKey || event.ctrlKey) {\n                return;\n            }\n            keyCode = $.ui.keyCode;\n            toFocus = false;\n            enabledTriggers = [];\n\n            $.each(this.triggers, function () {\n                if (!self.collapsibles.eq(self.triggers.index($(this))).collapsible('option', 'disabled')) {\n                    enabledTriggers.push(this);\n                }\n            });\n            length = $(enabledTriggers).length;\n            currentIndex = $(enabledTriggers).index(event.target);\n\n            /**\n             * @param {String} direction\n             * @return {*}\n             */\n            nextToFocus = function (direction) {\n                if (length > 0) {\n                    if (direction === 'right') {\n                        toFocusIndex = (currentIndex + 1) % length;\n                    } else {\n                        toFocusIndex = (currentIndex + length - 1) % length;\n                    }\n\n                    return enabledTriggers[toFocusIndex];\n                }\n\n                return event.target;\n            };\n\n            switch (event.keyCode) {\n                case keyCode.RIGHT:\n                case keyCode.DOWN:\n                    toFocus = nextToFocus('right');\n                    break;\n\n                case keyCode.LEFT:\n                case keyCode.UP:\n                    toFocus = nextToFocus('left');\n                    break;\n\n                case keyCode.HOME:\n                    toFocus = enabledTriggers[0];\n                    break;\n\n                case keyCode.END:\n                    toFocus = enabledTriggers[length - 1];\n                    break;\n            }\n\n            if (toFocus) {\n                toFocusIndex = this.triggers.index(toFocus);\n                $(event.target).attr('tabIndex', -1);\n                $(toFocus).attr('tabIndex', 0);\n                toFocus.focus();\n\n                if (this.options.openOnFocus) {\n                    this.activate(toFocusIndex);\n                }\n                event.preventDefault();\n            }\n        },\n\n        /**\n         * @private\n         */\n        _bind: function () {\n            var events = {\n                keydown: '_keydown'\n            };\n\n            this._off(this.triggers);\n            this._on(this.triggers, events);\n        }\n    });\n\n    return $.mage.tabs;\n});\n","mage/view/composite.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @deprecated since version 2.2.0\n */\n/* eslint-disable strict */\ndefine(['jquery'], function ($) {\n    return function () {\n        var renderedChildren = {},\n            children = {};\n\n        return {\n            /**\n             * @param {*} child\n             * @param {String} key\n             */\n            addChild: function (child, key) {\n                children[key] = child;\n            },\n\n            /**\n             * @param {*} root\n             */\n            render: function (root) {\n                $.each(children, function (key, child) {\n                    var childRoot = $('<div>');\n\n                    renderedChildren[key] = child.render(childRoot);\n                    root.append(childRoot);\n                });\n            }\n        };\n    };\n});\n","mage/gallery/gallery.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'fotorama/fotorama',\n    'underscore',\n    'matchMedia',\n    'mage/template',\n    'text!mage/gallery/gallery.html',\n    'uiClass',\n    'mage/translate'\n], function ($, fotorama, _, mediaCheck, template, galleryTpl, Class, $t) {\n    'use strict';\n\n    /**\n     * Retrieves index if the main item.\n     * @param {Array.<Object>} data - Set of gallery items.\n     */\n    var getMainImageIndex = function (data) {\n            var mainIndex;\n\n            if (_.every(data, function (item) {\n                    return _.isObject(item);\n                })\n            ) {\n                mainIndex = _.findIndex(data, function (item) {\n                    return item.isMain;\n                });\n            }\n\n            return mainIndex > 0 ? mainIndex : 0;\n        },\n\n        /**\n         * Helper for parse translate property\n         *\n         * @param {Element} el - el that to parse\n         * @returns {Array} - array of properties.\n         */\n        getTranslate = function (el) {\n            var slideTransform = $(el).attr('style').split(';');\n\n            slideTransform = $.map(slideTransform, function (style) {\n                style = style.trim();\n\n                if (style.startsWith('transform: translate3d')) {\n                    return style.match(/transform: translate3d\\((.+)px,(.+)px,(.+)px\\)/);\n                }\n\n                return false;\n            });\n\n            return slideTransform.filter(Boolean);\n        },\n\n        /**\n         * @param {*} str\n         * @return {*}\n         * @private\n         */\n        _toNumber = function (str) {\n            var type = typeof str;\n\n            if (type === 'string') {\n                return parseInt(str); //eslint-disable-line radix\n            }\n\n            return str;\n        };\n\n    return Class.extend({\n\n        defaults: {\n            settings: {},\n            config: {},\n            startConfig: {}\n        },\n\n        /**\n         * Checks if device has touch interface.\n         * @return {Boolean} The result of searching touch events on device.\n         */\n        isTouchEnabled: (function () {\n            return 'ontouchstart' in document.documentElement;\n        })(),\n\n        /**\n         * Initializes gallery.\n         * @param {Object} config - Gallery configuration.\n         * @param {String} element - String selector of gallery DOM element.\n         */\n        initialize: function (config, element) {\n            var self = this;\n\n            this._super();\n\n            _.bindAll(this,\n                '_focusSwitcher'\n            );\n\n            /*turn off arrows for touch devices*/\n            if (this.isTouchEnabled) {\n                config.options.arrows = false;\n\n                if (config.fullscreen) {\n                    config.fullscreen.arrows = false;\n                }\n            }\n\n            config.options.width = _toNumber(config.options.width);\n            config.options.height = _toNumber(config.options.height);\n            config.options.thumbwidth = _toNumber(config.options.thumbwidth);\n            config.options.thumbheight = _toNumber(config.options.thumbheight);\n\n            config.options.swipe = true;\n            this.config = config;\n\n            this.settings = {\n                $element: $(element),\n                $pageWrapper: $('body>.page-wrapper'),\n                currentConfig: config,\n                defaultConfig: _.clone(config),\n                fullscreenConfig: _.clone(config.fullscreen),\n                breakpoints: config.breakpoints,\n                activeBreakpoint: {},\n                fotoramaApi: null,\n                isFullscreen: false,\n                api: null,\n                data: _.clone(config.data)\n            };\n            config.options.ratio = config.options.width / config.options.height;\n            config.options.height = null;\n\n            $.extend(true, this.startConfig, config);\n\n            this.initGallery();\n            this.initApi();\n            this.setupBreakpoints();\n            this.initFullscreenSettings();\n\n            this.settings.$element.on('click', '.fotorama__stage__frame', function () {\n                if (\n                    !$(this).parents('.fotorama__shadows--left, .fotorama__shadows--right').length &&\n                    !$(this).hasClass('fotorama-video-container')\n                ) {\n                    self.openFullScreen();\n                }\n            });\n\n            if (this.isTouchEnabled && this.settings.isFullscreen) {\n                this.settings.$element.on('tap', '.fotorama__stage__frame', function () {\n                    var translate = getTranslate($(this).parents('.fotorama__stage__shaft'));\n\n                    if (translate[1] === '0' && !$(this).hasClass('fotorama-video-container')) {\n                        self.openFullScreen();\n                        self.settings.$pageWrapper.hide();\n                    }\n                });\n            }\n        },\n\n        /**\n         * Open gallery fullscreen\n         */\n        openFullScreen: function () {\n            this.settings.api.fotorama.requestFullScreen();\n            this.settings.$fullscreenIcon.css({\n                opacity: 1,\n                visibility: 'visible',\n                display: 'block'\n            });\n        },\n\n        /**\n         * Gallery fullscreen settings.\n         */\n        initFullscreenSettings: function () {\n            var settings = this.settings,\n                self = this;\n\n            settings.$gallery = this.settings.$element.find('[data-gallery-role=\"gallery\"]');\n            settings.$fullscreenIcon = this.settings.$element.find('[data-gallery-role=\"fotorama__fullscreen-icon\"]');\n            settings.focusableStart = this.settings.$element.find('[data-gallery-role=\"fotorama__focusable-start\"]');\n            settings.focusableEnd = this.settings.$element.find('[data-gallery-role=\"fotorama__focusable-end\"]');\n            settings.closeIcon = this.settings.$element.find('[data-gallery-role=\"fotorama__fullscreen-icon\"]');\n            settings.fullscreenConfig.swipe = true;\n\n            settings.$gallery.on('fotorama:fullscreenenter', function () {\n                settings.closeIcon.show();\n                settings.focusableStart.attr('tabindex', '0');\n                settings.focusableEnd.attr('tabindex', '0');\n                settings.focusableStart.bind('focusin', self._focusSwitcher);\n                settings.focusableEnd.bind('focusin', self._focusSwitcher);\n                settings.api.updateOptions(settings.defaultConfig.options, true);\n                settings.api.updateOptions(settings.fullscreenConfig, true);\n\n                if (!_.isEqual(settings.activeBreakpoint, {}) && settings.breakpoints) {\n                    settings.api.updateOptions(settings.activeBreakpoint.options, true);\n                }\n                settings.isFullscreen = true;\n            });\n\n            settings.$gallery.on('fotorama:fullscreenexit', function () {\n                settings.closeIcon.hide();\n                settings.focusableStart.attr('tabindex', '-1');\n                settings.focusableEnd.attr('tabindex', '-1');\n                settings.api.updateOptions(settings.defaultConfig.options, true);\n                settings.focusableStart.unbind('focusin', this._focusSwitcher);\n                settings.focusableEnd.unbind('focusin', this._focusSwitcher);\n                settings.closeIcon.hide();\n\n                if (!_.isEqual(settings.activeBreakpoint, {}) && settings.breakpoints) {\n                    settings.api.updateOptions(settings.activeBreakpoint.options, true);\n                }\n                settings.isFullscreen = false;\n                settings.$element.data('gallery').updateOptions({\n                    swipe: true\n                });\n            });\n        },\n\n        /**\n         * Switcher focus.\n         */\n        _focusSwitcher: function (e) {\n            var target = $(e.target),\n                settings = this.settings;\n\n            if (target.is(settings.focusableStart)) {\n                this._setFocus('start');\n            } else if (target.is(settings.focusableEnd)) {\n                this._setFocus('end');\n            }\n        },\n\n        /**\n         * Set focus to element.\n         * @param {String} position - can be \"start\" and \"end\"\n         *      positions.\n         *      If position is \"end\" - sets focus to first\n         *      focusable element in modal window scope.\n         *      If position is \"start\" - sets focus to last\n         *      focusable element in modal window scope\n         */\n        _setFocus: function (position) {\n            var settings = this.settings,\n                focusableElements,\n                infelicity;\n\n            if (position === 'end') {\n                settings.$gallery.find(settings.closeIcon).focus();\n            } else if (position === 'start') {\n                infelicity = 3; //Constant for find last focusable element\n                focusableElements = settings.$gallery.find(':focusable');\n                focusableElements.eq(focusableElements.length - infelicity).focus();\n            }\n        },\n\n        /**\n         * Initializes gallery with configuration options.\n         */\n        initGallery: function () {\n            var breakpoints = {},\n                settings = this.settings,\n                config = this.config,\n                tpl = template(galleryTpl, {\n                    next: $t('Next'),\n                    previous: $t('Previous')\n                }),\n                mainImageIndex,\n                $element = settings.$element,\n                $fotoramaElement,\n                $fotoramaStage;\n\n            if (settings.breakpoints) {\n                _.each(_.values(settings.breakpoints), function (breakpoint) {\n                    var conditions;\n\n                    _.each(_.pairs(breakpoint.conditions), function (pair) {\n                        conditions = conditions ? conditions + ' and (' + pair[0] + ': ' + pair[1] + ')' :\n                        '(' + pair[0] + ': ' + pair[1] + ')';\n                    });\n                    breakpoints[conditions] = breakpoint.options;\n                });\n                settings.breakpoints = breakpoints;\n            }\n\n            _.extend(config, config.options,\n                {\n                    options: undefined,\n                    click: false,\n                    breakpoints: null\n                }\n            );\n            settings.currentConfig = config;\n\n            $element\n                .css('min-height', settings.$element.height())\n                .append(tpl);\n\n            $fotoramaElement = $element.find('[data-gallery-role=\"gallery\"]');\n\n            $fotoramaStage = $fotoramaElement.find('.fotorama__stage');\n            $fotoramaStage.css('position', 'absolute');\n\n            $fotoramaElement.fotorama(config);\n            $fotoramaElement.find('.fotorama__stage__frame.fotorama__active')\n                    .one('f:load', function () {\n                        // Remove placeholder when main gallery image loads.\n                        $element.find('.gallery-placeholder__image').remove();\n                        $element\n                            .removeClass('_block-content-loading')\n                            .css('min-height', '');\n\n                        $fotoramaStage.css('position', '');\n                    });\n            settings.$elementF = $fotoramaElement;\n            settings.fotoramaApi = $fotoramaElement.data('fotorama');\n\n            $.extend(true, config, this.startConfig);\n\n            mainImageIndex = getMainImageIndex(config.data);\n\n            if (mainImageIndex) {\n                this.settings.fotoramaApi.show({\n                    index: mainImageIndex,\n                    time: 0\n                });\n            }\n        },\n\n        /**\n         * Creates breakpoints for gallery.\n         */\n        setupBreakpoints: function () {\n            var pairs,\n                settings = this.settings,\n                config = this.config,\n                startConfig = this.startConfig,\n                isInitialized = {},\n                isTouchEnabled = this.isTouchEnabled;\n\n            if (_.isObject(settings.breakpoints)) {\n                pairs = _.pairs(settings.breakpoints);\n                _.each(pairs, function (pair) {\n                    var mediaQuery = pair[0];\n\n                    isInitialized[mediaQuery] = false;\n                    mediaCheck({\n                        media: mediaQuery,\n\n                        /**\n                         * Is triggered when breakpoint enties.\n                         */\n                        entry: function () {\n                            $.extend(true, config, _.clone(startConfig));\n\n                            settings.api.updateOptions(settings.defaultConfig.options, true);\n\n                            if (settings.isFullscreen) {\n                                settings.api.updateOptions(settings.fullscreenConfig, true);\n                            }\n\n                            if (isTouchEnabled) {\n                                settings.breakpoints[mediaQuery].options.arrows = false;\n\n                                if (settings.breakpoints[mediaQuery].options.fullscreen) {\n                                    settings.breakpoints[mediaQuery].options.fullscreen.arrows = false;\n                                }\n                            }\n\n                            settings.api.updateOptions(settings.breakpoints[mediaQuery].options, true);\n                            $.extend(true, config, settings.breakpoints[mediaQuery]);\n                            settings.activeBreakpoint = settings.breakpoints[mediaQuery];\n\n                            isInitialized[mediaQuery] = true;\n                        },\n\n                        /**\n                         * Is triggered when breakpoint exits.\n                         */\n                        exit: function () {\n                            if (isInitialized[mediaQuery]) {\n                                $.extend(true, config, _.clone(startConfig));\n                                settings.api.updateOptions(settings.defaultConfig.options, true);\n\n                                if (settings.isFullscreen) {\n                                    settings.api.updateOptions(settings.fullscreenConfig, true);\n                                }\n                                settings.activeBreakpoint = {};\n                            } else {\n                                isInitialized[mediaQuery] = true;\n                            }\n                        }\n                    });\n                });\n            }\n        },\n\n        /**\n         * Creates gallery's API.\n         */\n        initApi: function () {\n            var settings = this.settings,\n                config = this.config,\n                api = {\n\n                    /**\n                     * Contains fotorama's API methods.\n                     */\n                    fotorama: settings.fotoramaApi,\n\n                    /**\n                     * Displays the last image on preview.\n                     */\n                    last: function () {\n                        settings.fotoramaApi.show('>>');\n                    },\n\n                    /**\n                     * Displays the first image on preview.\n                     */\n                    first: function () {\n                        settings.fotoramaApi.show('<<');\n                    },\n\n                    /**\n                     * Displays previous element on preview.\n                     */\n                    prev: function () {\n                        settings.fotoramaApi.show('<');\n                    },\n\n                    /**\n                     * Displays next element on preview.\n                     */\n                    next: function () {\n                        settings.fotoramaApi.show('>');\n                    },\n\n                    /**\n                     * Displays image with appropriate count number on preview.\n                     * @param {Number} index - Number of image that should be displayed.\n                     */\n                    seek: function (index) {\n                        if (_.isNumber(index) && index !== 0) {\n\n                            if (index > 0) {\n                                index -= 1;\n                            }\n                            settings.fotoramaApi.show(index);\n                        }\n                    },\n\n                    /**\n                     * Updates gallery with new set of options.\n                     * @param {Object} configuration - Standart gallery configuration object.\n                     * @param {Boolean} isInternal - Is this function called via breakpoints.\n                     */\n                    updateOptions: function (configuration, isInternal) {\n\n                        var $selectable = $('a[href], area[href], input, select, ' +\n                                'textarea, button, iframe, object, embed, *[tabindex], *[contenteditable]')\n                                .not('[tabindex=-1], [disabled], :hidden'),\n                            $focus = $(':focus'),\n                            index;\n\n                        if (_.isObject(configuration)) {\n\n                            //Saves index of focus\n                            $selectable.each(function (number) {\n                                if ($(this).is($focus)) {\n                                    index = number;\n                                }\n                            });\n\n                            if (this.isTouchEnabled) {\n                                configuration.arrows = false;\n                            }\n                            configuration.click = false;\n                            configuration.breakpoints = null;\n\n                            if (!isInternal) {\n                                !_.isEqual(settings.activeBreakpoint, {} && settings.brekpoints) ?\n                                    $.extend(true, settings.activeBreakpoint.options, configuration) :\n\n                                    settings.isFullscreen ?\n                                        $.extend(true, settings.fullscreenConfig, configuration) :\n                                        $.extend(true, settings.defaultConfig.options, configuration);\n\n                            }\n                            $.extend(true, settings.currentConfig.options, configuration);\n                            settings.fotoramaApi.setOptions(settings.currentConfig.options);\n\n                            if (_.isNumber(index)) {\n                                $selectable.eq(index).focus();\n                            }\n                        }\n                    },\n\n                    /**\n                     * Updates gallery with specific set of items.\n                     * @param {Array.<Object>} data - Set of gallery items to update.\n                     */\n                    updateData: function (data) {\n                        var mainImageIndex;\n\n                        if (_.isArray(data)) {\n                            settings.fotoramaApi.load(data);\n                            mainImageIndex = getMainImageIndex(data);\n\n                            if (settings.fotoramaApi.activeIndex !== mainImageIndex) {\n                                settings.fotoramaApi.show({\n                                    index: mainImageIndex,\n                                    time: 0\n                                });\n                            }\n\n                            $.extend(false, settings, {\n                                data: data,\n                                defaultConfig: data\n                            });\n                            $.extend(false, config, {\n                                data: data\n                            });\n                        }\n                    },\n\n                    /**\n                     * Returns current images list\n                     *\n                     * @returns {Array}\n                     */\n                    returnCurrentImages: function () {\n                        var images = [];\n\n                        _.each(this.fotorama.data, function (item) {\n                            images.push(_.omit(item, '$navThumbFrame', '$navDotFrame', '$stageFrame', 'labelledby'));\n                        });\n\n                        return images;\n                    },\n\n                    /**\n                     * Updates gallery data partially by index\n                     * @param {Number} index - Index of image in data array to be updated.\n                     * @param {Object} item - Standart gallery image object.\n                     *\n                     */\n                    updateDataByIndex: function (index, item) {\n                        settings.fotoramaApi.spliceByIndex(index, item);\n                    }\n                };\n\n            settings.$element.data('gallery', api);\n            settings.api = settings.$element.data('gallery');\n            settings.$element.trigger('gallery:loaded');\n        }\n    });\n});\n","mage/msie/file-reader.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    /**\n     * Init \"readAsBinaryString\" function for FileReader class.\n     * It need for IE11\n     * @param {Blob} fileData\n     */\n    var readAsBinaryStringIEFunc = function (fileData) {\n        var binary = '',\n            self = this,\n            reader = new FileReader();\n\n        /**\n         * Read file as binary string\n         */\n        reader.onload = function () {\n            var bytes, length, index;\n\n            /* eslint-disable no-undef */\n            bytes = new Uint8Array(reader.result);\n            /* eslint-enable */\n            length = bytes.length;\n\n            for (index = 0; index < length; index++) {\n                binary += String.fromCharCode(bytes[index]);\n            }\n            //self.result  - readonly so assign binary\n            self.content = binary;\n            $(self).trigger('onload');\n        };\n        reader.readAsArrayBuffer(fileData);\n    };\n\n    if (typeof FileReader.prototype.readAsBinaryString === 'undefined') {\n        FileReader.prototype.readAsBinaryString = readAsBinaryStringIEFunc;\n    }\n});\n"}
}});
